(()=>{var e={92:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,s,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(s=r;0!==s--;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(s=r;0!==s--;)if(!Object.prototype.hasOwnProperty.call(n,o[s]))return!1;for(s=r;0!==s--;){var a=o[s];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}},104:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const r=n(1910),s=n(4678),o=n(3758);t.error={message:({params:{property:e,depsCount:t,deps:n}})=>{const s=1===t?"property":"properties";return r.str`must have ${s} ${n} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:n,missingProperty:s}})=>r._`{property: ${e},
    missingProperty: ${s},
    depsCount: ${t},
    deps: ${n}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const r in e)"__proto__"!==r&&((Array.isArray(e[r])?t:n)[r]=e[r]);return[t,n]}(e);i(e,t),c(e,n)}};function i(e,t=e.schema){const{gen:n,data:s,it:a}=e;if(0===Object.keys(t).length)return;const i=n.let("missing");for(const c in t){const l=t[c];if(0===l.length)continue;const u=(0,o.propertyInData)(n,s,c,a.opts.ownProperties);e.setParams({property:c,depsCount:l.length,deps:l.join(", ")}),a.allErrors?n.if(u,()=>{for(const t of l)(0,o.checkReportMissingProp)(e,t)}):(n.if(r._`${u} && (${(0,o.checkMissingProp)(e,l,i)})`),(0,o.reportMissingProp)(e,i),n.else())}}function c(e,t=e.schema){const{gen:n,data:r,keyword:a,it:i}=e,c=n.name("valid");for(const l in t)(0,s.alwaysValidSchema)(i,t[l])||(n.if((0,o.propertyInData)(n,r,l,i.opts.ownProperties),()=>{const t=e.subschema({keyword:a,schemaProp:l},c);e.mergeValidEvaluated(t,c)},()=>n.var(c,!0)),e.ok(c))}t.validatePropertyDeps=i,t.validateSchemaDeps=c,t.default=a},308:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>r.str`must match format "${e}"`,params:({schemaCode:e})=>r._`{format: ${e}}`},code(e,t){const{gen:n,data:s,$data:o,schema:a,schemaCode:i,it:c}=e,{opts:l,errSchemaPath:u,schemaEnv:d,self:p}=c;l.validateFormats&&(o?function(){const o=n.scopeValue("formats",{ref:p.formats,code:l.code.formats}),a=n.const("fDef",r._`${o}[${i}]`),c=n.let("fType"),u=n.let("format");n.if(r._`typeof ${a} == "object" && !(${a} instanceof RegExp)`,()=>n.assign(c,r._`${a}.type || "string"`).assign(u,r._`${a}.validate`),()=>n.assign(c,r._`"string"`).assign(u,a)),e.fail$data((0,r.or)(!1===l.strictSchema?r.nil:r._`${i} && !${u}`,function(){const e=d.$async?r._`(${a}.async ? await ${u}(${s}) : ${u}(${s}))`:r._`${u}(${s})`,n=r._`(typeof ${u} == "function" ? ${e} : ${u}.test(${s}))`;return r._`${u} && ${u} !== true && ${c} === ${t} && !${n}`}()))}():function(){const o=p.formats[a];if(!o)return void function(){if(!1!==l.strictSchema)throw new Error(e());function e(){return`unknown format "${a}" ignored in schema at path "${u}"`}p.logger.warn(e())}();if(!0===o)return;const[i,c,h]=function(e){const t=e instanceof RegExp?(0,r.regexpCode)(e):l.code.formats?r._`${l.code.formats}${(0,r.getProperty)(a)}`:void 0,s=n.scopeValue("formats",{key:a,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,s]:[e.type||"string",e.validate,r._`${s}.validate`]}(o);i===t&&e.pass(function(){if("object"==typeof o&&!(o instanceof RegExp)&&o.async){if(!d.$async)throw new Error("async format in sync schema");return r._`await ${h}(${s})`}return"function"==typeof c?r._`${h}(${s})`:r._`${h}.test(${s})`}())}())}};t.default=s},311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const r=n(7619),s=n(8514),o=n(2693),a=n(1910),i=n(4678);var c;function l(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(r.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(c||(t.DataType=c={})),t.getSchemaTypes=function(e){const t=l(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=l,t.coerceAndCheckDataType=function(e,t){const{gen:n,data:r,opts:o}=e,i=function(e,t){return t?e.filter(e=>u.has(e)||"array"===t&&"array"===e):[]}(t,o.coerceTypes),l=t.length>0&&!(0===i.length&&1===t.length&&(0,s.schemaHasRulesForType)(e,t[0]));if(l){const s=p(t,r,o.strictNumbers,c.Wrong);n.if(s,()=>{i.length?function(e,t,n){const{gen:r,data:s,opts:o}=e,i=r.let("dataType",a._`typeof ${s}`),c=r.let("coerced",a._`undefined`);"array"===o.coerceTypes&&r.if(a._`${i} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>r.assign(s,a._`${s}[0]`).assign(i,a._`typeof ${s}`).if(p(t,s,o.strictNumbers),()=>r.assign(c,s))),r.if(a._`${c} !== undefined`);for(const e of n)(u.has(e)||"array"===e&&"array"===o.coerceTypes)&&l(e);function l(e){switch(e){case"string":return void r.elseIf(a._`${i} == "number" || ${i} == "boolean"`).assign(c,a._`"" + ${s}`).elseIf(a._`${s} === null`).assign(c,a._`""`);case"number":return void r.elseIf(a._`${i} == "boolean" || ${s} === null
              || (${i} == "string" && ${s} && ${s} == +${s})`).assign(c,a._`+${s}`);case"integer":return void r.elseIf(a._`${i} === "boolean" || ${s} === null
              || (${i} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(c,a._`+${s}`);case"boolean":return void r.elseIf(a._`${s} === "false" || ${s} === 0 || ${s} === null`).assign(c,!1).elseIf(a._`${s} === "true" || ${s} === 1`).assign(c,!0);case"null":return r.elseIf(a._`${s} === "" || ${s} === 0 || ${s} === false`),void r.assign(c,null);case"array":r.elseIf(a._`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${s} === null`).assign(c,a._`[${s}]`)}}r.else(),f(e),r.endIf(),r.if(a._`${c} !== undefined`,()=>{r.assign(s,c),function({gen:e,parentData:t,parentDataProperty:n},r){e.if(a._`${t} !== undefined`,()=>e.assign(a._`${t}[${n}]`,r))}(e,c)})}(e,t,i):f(e)})}return l};const u=new Set(["string","number","integer","boolean","null"]);function d(e,t,n,r=c.Correct){const s=r===c.Correct?a.operators.EQ:a.operators.NEQ;let o;switch(e){case"null":return a._`${t} ${s} null`;case"array":o=a._`Array.isArray(${t})`;break;case"object":o=a._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=i(a._`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=i();break;default:return a._`typeof ${t} ${s} ${e}`}return r===c.Correct?o:(0,a.not)(o);function i(e=a.nil){return(0,a.and)(a._`typeof ${t} == "number"`,e,n?a._`isFinite(${t})`:a.nil)}}function p(e,t,n,r){if(1===e.length)return d(e[0],t,n,r);let s;const o=(0,i.toHash)(e);if(o.array&&o.object){const e=a._`typeof ${t} != "object"`;s=o.null?e:a._`!${t} || ${e}`,delete o.null,delete o.array,delete o.object}else s=a.nil;o.number&&delete o.integer;for(const e in o)s=(0,a.and)(s,d(e,t,n,r));return s}t.checkDataType=d,t.checkDataTypes=p;const h={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?a._`{type: ${e}}`:a._`{type: ${t}}`};function f(e){const t=function(e){const{gen:t,data:n,schema:r}=e,s=(0,i.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:s,schemaValue:s,parentSchema:r,params:{},it:e}}(e);(0,o.reportError)(t,h)}t.reportTypeError=f},322:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>r._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:n,data:o,it:a}=e;if((0,s.alwaysValidSchema)(a,n))return;const i=t.name("valid");t.forIn("key",o,n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},i),t.if((0,r.not)(i),()=>{e.error(!0),a.allErrors||t.break()})}),e.ok(i)}};t.default=o},353:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(92);r.code='require("ajv/dist/runtime/equal").default',t.default=r},412:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},435:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,o(n)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},897:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=r.operators,o={maximum:{okStr:"<=",ok:s.LTE,fail:s.GT},minimum:{okStr:">=",ok:s.GTE,fail:s.LT},exclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},exclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},a={message:({keyword:e,schemaCode:t})=>r.str`must be ${o[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>r._`{comparison: ${o[e].okStr}, limit: ${t}}`},i={keyword:Object.keys(o),type:"number",schemaType:"number",$data:!0,error:a,code(e){const{keyword:t,data:n,schemaCode:s}=e;e.fail$data(r._`${n} ${o[t].fail} ${s} || isNaN(${n})`)}};t.default=i},1081:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(n||(t.DiscrError=n={}))},1238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=n},1435:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7750);r.code='require("ajv/dist/runtime/uri").default',t.default=r},1609:e=>{"use strict";e.exports=window.React},1637:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3758),s=n(1910),o=n(2304),a=n(4678),i={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>s._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:n,parentSchema:i,data:c,errsCount:l,it:u}=e;if(!l)throw new Error("ajv implementation error");const{allErrors:d,opts:p}=u;if(u.props=!0,"all"!==p.removeAdditional&&(0,a.alwaysValidSchema)(u,n))return;const h=(0,r.allSchemaProperties)(i.properties),f=(0,r.allSchemaProperties)(i.patternProperties);function m(e){t.code(s._`delete ${c}[${e}]`)}function g(r){if("all"===p.removeAdditional||p.removeAdditional&&!1===n)m(r);else{if(!1===n)return e.setParams({additionalProperty:r}),e.error(),void(d||t.break());if("object"==typeof n&&!(0,a.alwaysValidSchema)(u,n)){const n=t.name("valid");"failing"===p.removeAdditional?(y(r,n,!1),t.if((0,s.not)(n),()=>{e.reset(),m(r)})):(y(r,n),d||t.if((0,s.not)(n),()=>t.break()))}}}function y(t,n,r){const s={keyword:"additionalProperties",dataProp:t,dataPropType:a.Type.Str};!1===r&&Object.assign(s,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(s,n)}t.forIn("key",c,n=>{h.length||f.length?t.if(function(n){let o;if(h.length>8){const e=(0,a.schemaRefOrVal)(u,i.properties,"properties");o=(0,r.isOwnProperty)(t,e,n)}else o=h.length?(0,s.or)(...h.map(e=>s._`${n} === ${e}`)):s.nil;return f.length&&(o=(0,s.or)(o,...f.map(t=>s._`${(0,r.usePattern)(e,t)}.test(${n})`))),(0,s.not)(o)}(n),()=>g(n)):g(n)}),e.ok(s._`${l} === ${o.default.errors}`)}};t.default=i},1688:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8668);class s extends Error{constructor(e,t,n,s){super(s||`can't resolve reference ${n} from id ${t}`),this.missingRef=(0,r.resolveUrl)(e,t,n),this.missingSchema=(0,r.normalizeId)((0,r.getFullPath)(e,this.missingRef))}}t.default=s},1910:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const r=n(3345),s=n(8870);var o=n(3345);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return o.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return o.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return o.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return o.Name}});var a=n(8870);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),t.operators={GT:new r._Code(">"),GTE:new r._Code(">="),LT:new r._Code("<"),LTE:new r._Code("<="),EQ:new r._Code("==="),NEQ:new r._Code("!=="),NOT:new r._Code("!"),OR:new r._Code("||"),AND:new r._Code("&&"),ADD:new r._Code("+")};class i{optimizeNodes(){return this}optimizeNames(e,t){return this}}class c extends i{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n}){const t=e?s.varKinds.var:this.varKind,n=void 0===this.rhs?"":` = ${this.rhs}`;return`${t} ${this.name}${n};`+_n}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=R(this.rhs,e,t)),this}get names(){return this.rhs instanceof r._CodeOrName?this.rhs.names:{}}}class l extends i{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n}){return`${this.lhs} = ${this.rhs};`+_n}optimizeNames(e,t){if(!(this.lhs instanceof r.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=R(this.rhs,e,t),this}get names(){return P(this.lhs instanceof r.Name?{}:{...this.lhs.names},this.rhs)}}class u extends l{constructor(e,t,n,r){super(e,n,r),this.op=t}render({_n}){return`${this.lhs} ${this.op}= ${this.rhs};`+_n}}class d extends i{constructor(e){super(),this.label=e,this.names={}}render({_n}){return`${this.label}:`+_n}}class p extends i{constructor(e){super(),this.label=e,this.names={}}render({_n}){return`break${this.label?` ${this.label}`:""};`+_n}}class h extends i{constructor(e){super(),this.error=e}render({_n}){return`throw ${this.error};`+_n}get names(){return this.error.names}}class f extends i{constructor(e){super(),this.code=e}render({_n}){return`${this.code};`+_n}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=R(this.code,e,t),this}get names(){return this.code instanceof r._CodeOrName?this.code.names:{}}}class m extends i{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,n)=>t+n.render(e),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let r=n.length;for(;r--;){const s=n[r];s.optimizeNames(e,t)||(j(e,s.names),n.splice(r,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>C(e,t.names),{})}}class g extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class y extends m{}class _ extends g{}_.kind="else";class v extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new _(e):e}return t?!1===e?t instanceof v?t:t.nodes:this.nodes.length?this:new v(N(e),t instanceof v?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=R(this.condition,e,t),this}get names(){const e=super.names;return P(e,this.condition),this.else&&C(e,this.else.names),e}}v.kind="if";class w extends g{}w.kind="for";class b extends w{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=R(this.iteration,e,t),this}get names(){return C(super.names,this.iteration.names)}}class x extends w{constructor(e,t,n,r){super(),this.varKind=e,this.name=t,this.from=n,this.to=r}render(e){const t=e.es5?s.varKinds.var:this.varKind,{name:n,from:r,to:o}=this;return`for(${t} ${n}=${r}; ${n}<${o}; ${n}++)`+super.render(e)}get names(){const e=P(super.names,this.from);return P(e,this.to)}}class k extends w{constructor(e,t,n,r){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=r}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=R(this.iterable,e,t),this}get names(){return C(super.names,this.iterable.names)}}class $ extends g{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}$.kind="func";class E extends m{render(e){return"return "+super.render(e)}}E.kind="return";class S extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,r;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(r=this.finally)||void 0===r||r.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&C(e,this.catch.names),this.finally&&C(e,this.finally.names),e}}class T extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}T.kind="catch";class I extends g{render(e){return"finally"+super.render(e)}}function C(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function P(e,t){return t instanceof r._CodeOrName?C(e,t.names):e}function R(e,t,n){return e instanceof r.Name?o(e):(s=e)instanceof r._Code&&s._items.some(e=>e instanceof r.Name&&1===t[e.str]&&void 0!==n[e.str])?new r._Code(e._items.reduce((e,t)=>(t instanceof r.Name&&(t=o(t)),t instanceof r._Code?e.push(...t._items):e.push(t),e),[])):e;var s;function o(e){const r=n[e.str];return void 0===r||1!==t[e.str]?e:(delete t[e.str],r)}}function j(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function N(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:r._`!${M(e)}`}I.kind="finally",t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new s.Scope({parent:e}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,r){const s=this._scope.toName(t);return void 0!==n&&r&&(this._constants[s.str]=n),this._leafNode(new c(e,s,n)),s}const(e,t,n){return this._def(s.varKinds.const,e,t,n)}let(e,t,n){return this._def(s.varKinds.let,e,t,n)}var(e,t,n){return this._def(s.varKinds.var,e,t,n)}assign(e,t,n){return this._leafNode(new l(e,t,n))}add(e,n){return this._leafNode(new u(e,t.operators.ADD,n))}code(e){return"function"==typeof e?e():e!==r.nil&&this._leafNode(new f(e)),this}object(...e){const t=["{"];for(const[n,s]of e)t.length>1&&t.push(","),t.push(n),(n!==s||this.opts.es5)&&(t.push(":"),(0,r.addCodeArg)(t,s));return t.push("}"),new r._Code(t)}if(e,t,n){if(this._blockNode(new v(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new v(e))}else(){return this._elseNode(new _)}endIf(){return this._endBlockNode(v,_)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new b(e),t)}forRange(e,t,n,r,o=(this.opts.es5?s.varKinds.var:s.varKinds.let)){const a=this._scope.toName(e);return this._for(new x(o,a,t,n),()=>r(a))}forOf(e,t,n,o=s.varKinds.const){const a=this._scope.toName(e);if(this.opts.es5){const e=t instanceof r.Name?t:this.var("_arr",t);return this.forRange("_i",0,r._`${e}.length`,t=>{this.var(a,r._`${e}[${t}]`),n(a)})}return this._for(new k("of",o,a,t),()=>n(a))}forIn(e,t,n,o=(this.opts.es5?s.varKinds.var:s.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,r._`Object.keys(${t})`,n);const a=this._scope.toName(e);return this._for(new k("in",o,a,t),()=>n(a))}endFor(){return this._endBlockNode(w)}label(e){return this._leafNode(new d(e))}break(e){return this._leafNode(new p(e))}return(e){const t=new E;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const r=new S;if(this._blockNode(r),this.code(e),t){const e=this.name("e");this._currNode=r.catch=new T(e),t(e)}return n&&(this._currNode=r.finally=new I,this.code(n)),this._endBlockNode(T,I)}throw(e){return this._leafNode(new h(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=r.nil,n,s){return this._blockNode(new $(e,t,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode($)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=N;const A=z(t.operators.AND);t.and=function(...e){return e.reduce(A)};const O=z(t.operators.OR);function z(e){return(t,n)=>t===r.nil?n:n===r.nil?t:r._`${M(t)} ${e} ${M(n)}`}function M(e){return e instanceof r.Name?e:r._`(${e})`}t.or=function(...e){return e.reduce(O)}},2085:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;const r=n(1910),s=n(4678),o=n(3758),a={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return i(e,"additionalItems",t);n.items=!0,(0,s.alwaysValidSchema)(n,t)||e.ok((0,o.validateArray)(e))}};function i(e,t,n=e.schema){const{gen:o,parentSchema:a,data:i,keyword:c,it:l}=e;!function(e){const{opts:r,errSchemaPath:o}=l,a=n.length,i=a===e.minItems&&(a===e.maxItems||!1===e[t]);if(r.strictTuples&&!i){const e=`"${c}" is ${a}-tuple, but minItems or maxItems/${t} are not specified or different at path "${o}"`;(0,s.checkStrictMode)(l,e,r.strictTuples)}}(a),l.opts.unevaluated&&n.length&&!0!==l.items&&(l.items=s.mergeEvaluated.items(o,n.length,l.items));const u=o.name("valid"),d=o.const("len",r._`${i}.length`);n.forEach((t,n)=>{(0,s.alwaysValidSchema)(l,t)||(o.if(r._`${d} > ${n}`,()=>e.subschema({keyword:c,schemaProp:n,dataProp:n},u)),e.ok(u))})}t.validateTuple=i,t.default=a},2304:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s={data:new r.Name("data"),valCxt:new r.Name("valCxt"),instancePath:new r.Name("instancePath"),parentData:new r.Name("parentData"),parentDataProperty:new r.Name("parentDataProperty"),rootData:new r.Name("rootData"),dynamicAnchors:new r.Name("dynamicAnchors"),vErrors:new r.Name("vErrors"),errors:new r.Name("errors"),this:new r.Name("this"),self:new r.Name("self"),scope:new r.Name("scope"),json:new r.Name("json"),jsonPos:new r.Name("jsonPos"),jsonLen:new r.Name("jsonLen"),jsonPart:new r.Name("jsonPart")};t.default=s},2412:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>r._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:n,parentSchema:o,it:a}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(a.opts.discriminator&&o.discriminator)return;const i=n,c=t.let("valid",!1),l=t.let("passing",null),u=t.name("_valid");e.setParams({passing:l}),t.block(function(){i.forEach((n,o)=>{let i;(0,s.alwaysValidSchema)(a,n)?t.var(u,!0):i=e.subschema({keyword:"oneOf",schemaProp:o,compositeRule:!0},u),o>0&&t.if(r._`${u} && ${c}`).assign(c,!1).assign(l,r._`[${l}, ${o}]`).else(),t.if(u,()=>{t.assign(c,!0),t.assign(l,o),i&&e.mergeEvaluated(i,r.Name)})})}),e.result(c,()=>e.reset(),()=>e.error(!0))}};t.default=o},2447:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(897),s=n(5954),o=n(4828),a=n(7129),i=n(8873),c=n(2702),l=n(9698),u=n(4606),d=n(7319),p=n(5514),h=[r.default,s.default,o.default,a.default,i.default,c.default,l.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,p.default];t.default=h},2451:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1238),s=n(9350),o=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",r.default,s.default];t.default=o},2693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const r=n(1910),s=n(4678),o=n(2304);function a(e,t){const n=e.const("err",t);e.if(r._`${o.default.vErrors} === null`,()=>e.assign(o.default.vErrors,r._`[${n}]`),r._`${o.default.vErrors}.push(${n})`),e.code(r._`${o.default.errors}++`)}function i(e,t){const{gen:n,validateName:s,schemaEnv:o}=e;o.$async?n.throw(r._`new ${e.ValidationError}(${t})`):(n.assign(r._`${s}.errors`,t),n.return(!1))}t.keywordError={message:({keyword:e})=>r.str`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?r.str`"${e}" keyword must be ${t} ($data)`:r.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,n=t.keywordError,s,o){const{it:c}=e,{gen:u,compositeRule:d,allErrors:p}=c,h=l(e,n,s);(null!=o?o:d||p)?a(u,h):i(c,r._`[${h}]`)},t.reportExtraError=function(e,n=t.keywordError,r){const{it:s}=e,{gen:c,compositeRule:u,allErrors:d}=s;a(c,l(e,n,r)),u||d||i(s,o.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(o.default.errors,t),e.if(r._`${o.default.vErrors} !== null`,()=>e.if(t,()=>e.assign(r._`${o.default.vErrors}.length`,t),()=>e.assign(o.default.vErrors,null)))},t.extendErrors=function({gen:e,keyword:t,schemaValue:n,data:s,errsCount:a,it:i}){if(void 0===a)throw new Error("ajv implementation error");const c=e.name("err");e.forRange("i",a,o.default.errors,a=>{e.const(c,r._`${o.default.vErrors}[${a}]`),e.if(r._`${c}.instancePath === undefined`,()=>e.assign(r._`${c}.instancePath`,(0,r.strConcat)(o.default.instancePath,i.errorPath))),e.assign(r._`${c}.schemaPath`,r.str`${i.errSchemaPath}/${t}`),i.opts.verbose&&(e.assign(r._`${c}.schema`,n),e.assign(r._`${c}.data`,s))})};const c={keyword:new r.Name("keyword"),schemaPath:new r.Name("schemaPath"),params:new r.Name("params"),propertyName:new r.Name("propertyName"),message:new r.Name("message"),schema:new r.Name("schema"),parentSchema:new r.Name("parentSchema")};function l(e,t,n){const{createErrors:s}=e.it;return!1===s?r._`{}`:function(e,t,n={}){const{gen:s,it:a}=e,i=[u(a,n),d(e,n)];return function(e,{params:t,message:n},s){const{keyword:a,data:i,schemaValue:l,it:u}=e,{opts:d,propertyName:p,topSchemaRef:h,schemaPath:f}=u;s.push([c.keyword,a],[c.params,"function"==typeof t?t(e):t||r._`{}`]),d.messages&&s.push([c.message,"function"==typeof n?n(e):n]),d.verbose&&s.push([c.schema,l],[c.parentSchema,r._`${h}${f}`],[o.default.data,i]),p&&s.push([c.propertyName,p])}(e,t,i),s.object(...i)}(e,t,n)}function u({errorPath:e},{instancePath:t}){const n=t?r.str`${e}${(0,s.getErrorPath)(t,s.Type.Str)}`:e;return[o.default.instancePath,(0,r.strConcat)(o.default.instancePath,n)]}function d({keyword:e,it:{errSchemaPath:t}},{schemaPath:n,parentSchema:o}){let a=o?t:r.str`${t}/${e}`;return n&&(a=r.str`${a}${(0,s.getErrorPath)(n,s.Type.Str)}`),[c.schemaPath,a]}},2702:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3758),s=n(1910),o=n(4678),a={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>s.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>s._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:n,schemaCode:a,data:i,$data:c,it:l}=e,{opts:u}=l;if(!c&&0===n.length)return;const d=n.length>=u.loopRequired;if(l.allErrors?function(){if(d||c)e.block$data(s.nil,p);else for(const t of n)(0,r.checkReportMissingProp)(e,t)}():function(){const o=t.let("missing");if(d||c){const n=t.let("valid",!0);e.block$data(n,()=>function(n,o){e.setParams({missingProperty:n}),t.forOf(n,a,()=>{t.assign(o,(0,r.propertyInData)(t,i,n,u.ownProperties)),t.if((0,s.not)(o),()=>{e.error(),t.break()})},s.nil)}(o,n)),e.ok(n)}else t.if((0,r.checkMissingProp)(e,n,o)),(0,r.reportMissingProp)(e,o),t.else()}(),u.strictRequired){const t=e.parentSchema.properties,{definedProperties:r}=e.it;for(const e of n)if(void 0===(null==t?void 0:t[e])&&!r.has(e)){const t=`required property "${e}" is not defined at "${l.schemaEnv.baseId+l.errSchemaPath}" (strictRequired)`;(0,o.checkStrictMode)(l,t,l.opts.strictRequired)}}function p(){t.forOf("prop",a,n=>{e.setParams({missingProperty:n}),t.if((0,r.noPropertyInData)(t,i,n,u.ownProperties),()=>e.error())})}}};t.default=a},2805:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o=n(3758),a=n(8398),i={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>r.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>r._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,(0,s.alwaysValidSchema)(r,t)||(i?(0,a.validateAdditionalItems)(e,i):e.ok((0,o.validateArray)(e)))}};t.default=i},2813:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8398),s=n(4401),o=n(2085),a=n(2805),i=n(8008),c=n(104),l=n(322),u=n(1637),d=n(9816),p=n(8074),h=n(6856),f=n(3122),m=n(2412),g=n(4063),y=n(9138),_=n(8963);t.default=function(e=!1){const t=[h.default,f.default,m.default,g.default,y.default,_.default,l.default,u.default,c.default,d.default,p.default];return e?t.push(s.default,a.default):t.push(r.default,o.default),t.push(i.default),t}},3100:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(1081),o=n(9700),a=n(1688),i=n(4678),c={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===s.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>r._`{error: ${e}, tag: ${n}, tagValue: ${t}}`},code(e){const{gen:t,data:n,schema:c,parentSchema:l,it:u}=e,{oneOf:d}=l;if(!u.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=c.propertyName;if("string"!=typeof p)throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!d)throw new Error("discriminator: requires oneOf keyword");const h=t.let("valid",!1),f=t.const("tag",r._`${n}${(0,r.getProperty)(p)}`);function m(n){const s=t.name("valid"),o=e.subschema({keyword:"oneOf",schemaProp:n},s);return e.mergeEvaluated(o,r.Name),s}t.if(r._`typeof ${f} == "string"`,()=>function(){const n=function(){var e;const t={},n=s(l);let r=!0;for(let t=0;t<d.length;t++){let l=d[t];if((null==l?void 0:l.$ref)&&!(0,i.schemaHasRulesButRef)(l,u.self.RULES)){const e=l.$ref;if(l=o.resolveRef.call(u.self,u.schemaEnv.root,u.baseId,e),l instanceof o.SchemaEnv&&(l=l.schema),void 0===l)throw new a.default(u.opts.uriResolver,u.baseId,e)}const h=null===(e=null==l?void 0:l.properties)||void 0===e?void 0:e[p];if("object"!=typeof h)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);r=r&&(n||s(l)),c(h,t)}if(!r)throw new Error(`discriminator: "${p}" must be required`);return t;function s({required:e}){return Array.isArray(e)&&e.includes(p)}function c(e,t){if(e.const)h(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`);for(const n of e.enum)h(n,t)}}function h(e,n){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${p}" values must be unique strings`);t[e]=n}}();t.if(!1);for(const e in n)t.elseIf(r._`${f} === ${e}`),t.assign(h,m(n[e]));t.else(),e.error(!1,{discrError:s.DiscrError.Mapping,tag:f,tagName:p}),t.endIf()}(),()=>e.error(!1,{discrError:s.DiscrError.Tag,tag:f,tagName:p})),e.ok(h)}};t.default=c},3122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:n(3758).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=r},3345:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class n{}t._CodeOrName=n,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends n{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class s extends n{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((e,t)=>`${e}${t}`,"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((e,t)=>(t instanceof r&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function o(e,...t){const n=[e[0]];let r=0;for(;r<t.length;)c(n,t[r]),n.push(e[++r]);return new s(n)}t._Code=s,t.nil=new s(""),t._=o;const a=new s("+");function i(e,...t){const n=[u(e[0])];let r=0;for(;r<t.length;)n.push(a),c(n,t[r]),n.push(a,u(e[++r]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===a){const n=l(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new s(n)}function c(e,t){var n;t instanceof s?e.push(...t._items):t instanceof r?e.push(t):e.push("number"==typeof(n=t)||"boolean"==typeof n||null===n?n:u(Array.isArray(n)?n.join(","):n))}function l(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof r||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof r?void 0:`"${e}${t.slice(1)}`}function u(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=i,t.addCodeArg=c,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:i`${e}${t}`},t.stringify=function(e){return new s(u(e))},t.safeStringify=u,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new s(`.${e}`):o`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new s(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(e){return new s(e.toString())}},3403:e=>{"use strict";const t=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),n=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function r(e){let t="",n=0,r=0;for(r=0;r<e.length;r++)if(n=e[r].charCodeAt(0),48!==n){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r];break}for(r+=1;r<e.length;r++){if(n=e[r].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r]}return t}const s=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function o(e){return e.length=0,!0}function a(e,t,n){if(e.length){const s=r(e);if(""===s)return n.error=!0,!1;t.push(s),e.length=0}return!0}function i(e){if(function(e){let t=0;for(let n=0;n<e.length;n++)":"===e[n]&&t++;return t}(e)<2)return{host:e,isIPV6:!1};const t=function(e){let t=0;const n={error:!1,address:"",zone:""},s=[],i=[];let c=!1,l=!1,u=a;for(let r=0;r<e.length;r++){const a=e[r];if("["!==a&&"]"!==a)if(":"!==a)if("%"===a){if(!u(i,s,n))break;u=o}else i.push(a);else{if(!0===c&&(l=!0),!u(i,s,n))break;if(++t>7){n.error=!0;break}r>0&&":"===e[r-1]&&(c=!0),s.push(":")}}return i.length&&(u===o?n.zone=i.join(""):l?s.push(i.join("")):s.push(r(i))),n.address=s.join(""),n}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,n=t.address;return t.zone&&(e+="%"+t.zone,n+="%25"+t.zone),{host:e,isIPV6:!0,escapedHost:n}}}e.exports={nonSimpleDomain:s,recomposeAuthority:function(e){const t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){let r=unescape(e.host);if(!n(r)){const t=i(r);r=!0===t.isIPV6?`[${t.escapedHost}]`:e.host}t.push(r)}return"number"!=typeof e.port&&"string"!=typeof e.port||(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},normalizeComponentEncoding:function(e,t){const n=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=n(e.scheme)),void 0!==e.userinfo&&(e.userinfo=n(e.userinfo)),void 0!==e.host&&(e.host=n(e.host)),void 0!==e.path&&(e.path=n(e.path)),void 0!==e.query&&(e.query=n(e.query)),void 0!==e.fragment&&(e.fragment=n(e.fragment)),e},removeDotSegments:function(e){let t=e;const n=[];let r=-1,s=0;for(;s=t.length;){if(1===s){if("."===t)break;if("/"===t){n.push("/");break}n.push(t);break}if(2===s){if("."===t[0]){if("."===t[1])break;if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&("."===t[1]||"/"===t[1])){n.push("/");break}}else if(3===s&&"/.."===t){0!==n.length&&n.pop(),n.push("/");break}if("."===t[0]){if("."===t[1]){if("/"===t[2]){t=t.slice(3);continue}}else if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&"."===t[1]){if("/"===t[2]){t=t.slice(2);continue}if("."===t[2]&&"/"===t[3]){t=t.slice(3),0!==n.length&&n.pop();continue}}if(-1===(r=t.indexOf("/",1))){n.push(t);break}n.push(t.slice(0,r)),t=t.slice(r)}return n.join("")},isIPv4:n,isUUID:t,normalizeIPv6:i,stringArrayToHexStripped:r}},3419:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;const r=n(9008),s=n(311),o=n(8514),a=n(311),i=n(6853),c=n(3800),l=n(9590),u=n(1910),d=n(2304),p=n(8668),h=n(4678),f=n(2693);function m({gen:e,validateName:t,schema:n,schemaEnv:r,opts:s},o){s.code.es5?e.func(t,u._`${d.default.data}, ${d.default.valCxt}`,r.$async,()=>{e.code(u._`"use strict"; ${g(n,s)}`),function(e,t){e.if(d.default.valCxt,()=>{e.var(d.default.instancePath,u._`${d.default.valCxt}.${d.default.instancePath}`),e.var(d.default.parentData,u._`${d.default.valCxt}.${d.default.parentData}`),e.var(d.default.parentDataProperty,u._`${d.default.valCxt}.${d.default.parentDataProperty}`),e.var(d.default.rootData,u._`${d.default.valCxt}.${d.default.rootData}`),t.dynamicRef&&e.var(d.default.dynamicAnchors,u._`${d.default.valCxt}.${d.default.dynamicAnchors}`)},()=>{e.var(d.default.instancePath,u._`""`),e.var(d.default.parentData,u._`undefined`),e.var(d.default.parentDataProperty,u._`undefined`),e.var(d.default.rootData,d.default.data),t.dynamicRef&&e.var(d.default.dynamicAnchors,u._`{}`)})}(e,s),e.code(o)}):e.func(t,u._`${d.default.data}, ${function(e){return u._`{${d.default.instancePath}="", ${d.default.parentData}, ${d.default.parentDataProperty}, ${d.default.rootData}=${d.default.data}${e.dynamicRef?u._`, ${d.default.dynamicAnchors}={}`:u.nil}}={}`}(s)}`,r.$async,()=>e.code(g(n,s)).code(o))}function g(e,t){const n="object"==typeof e&&e[t.schemaId];return n&&(t.code.source||t.code.process)?u._`/*# sourceURL=${n} */`:u.nil}function y({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function _(e){return"boolean"!=typeof e.schema}function v(e){(0,h.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:n,opts:r,self:s}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,h.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function w(e,t){if(e.opts.jtd)return x(e,[],!1,t);const n=(0,s.getSchemaTypes)(e.schema);x(e,n,!(0,s.coerceAndCheckDataType)(e,n),t)}function b({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:s}){const o=n.$comment;if(!0===s.$comment)e.code(u._`${d.default.self}.logger.log(${o})`);else if("function"==typeof s.$comment){const n=u.str`${r}/$comment`,s=e.scopeValue("root",{ref:t.root});e.code(u._`${d.default.self}.opts.$comment(${o}, ${n}, ${s}.schema)`)}}function x(e,t,n,r){const{gen:s,schema:i,data:c,allErrors:l,opts:p,self:f}=e,{RULES:m}=f;function g(h){(0,o.shouldUseGroup)(i,h)&&(h.type?(s.if((0,a.checkDataType)(h.type,c,p.strictNumbers)),k(e,h),1===t.length&&t[0]===h.type&&n&&(s.else(),(0,a.reportTypeError)(e)),s.endIf()):k(e,h),l||s.if(u._`${d.default.errors} === ${r||0}`))}!i.$ref||!p.ignoreKeywordsWithRef&&(0,h.schemaHasRulesButRef)(i,m)?(p.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach(t=>{$(e.dataTypes,t)||E(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)}),function(e,t){const n=[];for(const r of e.dataTypes)$(t,r)?n.push(r):t.includes("integer")&&"number"===r&&n.push("integer");e.dataTypes=n}(e,t)):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&E(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const n=e.self.RULES.all;for(const r in n){const s=n[r];if("object"==typeof s&&(0,o.shouldUseRule)(e.schema,s)){const{type:n}=s.definition;n.length&&!n.some(e=>{return r=e,(n=t).includes(r)||"number"===r&&n.includes("integer");var n,r})&&E(e,`missing type "${n.join(",")}" for keyword "${r}"`)}}}(e,e.dataTypes))}(e,t),s.block(()=>{for(const e of m.rules)g(e);g(m.post)})):s.block(()=>T(e,"$ref",m.all.$ref.definition))}function k(e,t){const{gen:n,schema:r,opts:{useDefaults:s}}=e;s&&(0,i.assignDefaults)(e,t.type),n.block(()=>{for(const n of t.rules)(0,o.shouldUseRule)(r,n)&&T(e,n.keyword,n.definition,t.type)})}function $(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function E(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,h.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){_(e)&&(v(e),y(e))?function(e){const{schema:t,opts:n,gen:r}=e;m(e,()=>{n.$comment&&t.$comment&&b(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strictSchema&&(0,h.checkStrictMode)(e,"default is ignored in the schema root")}(e),r.let(d.default.vErrors,null),r.let(d.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",u._`${n}.evaluated`),t.if(u._`${e.evaluated}.dynamicProps`,()=>t.assign(u._`${e.evaluated}.props`,u._`undefined`)),t.if(u._`${e.evaluated}.dynamicItems`,()=>t.assign(u._`${e.evaluated}.items`,u._`undefined`))}(e),w(e),function(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:s,opts:o}=e;n.$async?t.if(u._`${d.default.errors} === 0`,()=>t.return(d.default.data),()=>t.throw(u._`new ${s}(${d.default.vErrors})`)):(t.assign(u._`${r}.errors`,d.default.vErrors),o.unevaluated&&function({gen:e,evaluated:t,props:n,items:r}){n instanceof u.Name&&e.assign(u._`${t}.props`,n),r instanceof u.Name&&e.assign(u._`${t}.items`,r)}(e),t.return(u._`${d.default.errors} === 0`))}(e)})}(e):m(e,()=>(0,r.topBoolOrEmptySchema)(e))};class S{constructor(e,t,n){if((0,c.validateKeywordUsage)(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,h.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",P(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,c.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",d.default.errors))}result(e,t,n){this.failResult((0,u.not)(e),t,n)}failResult(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,u.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(u._`${t} !== undefined && (${(0,u.or)(this.invalid$data(),e)})`)}error(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}_error(e,t){(e?f.reportExtraError:f.reportError)(this,this.def.error,t)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=u.nil){this.gen.block(()=>{this.check$data(e,n),t()})}check$data(e=u.nil,t=u.nil){if(!this.$data)return;const{gen:n,schemaCode:r,schemaType:s,def:o}=this;n.if((0,u.or)(u._`${r} === undefined`,t)),e!==u.nil&&n.assign(e,!0),(s.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==u.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:r,it:s}=this;return(0,u.or)(function(){if(n.length){if(!(t instanceof u.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return u._`${(0,a.checkDataTypes)(e,t,s.opts.strictNumbers,a.DataType.Wrong)}`}return u.nil}(),function(){if(r.validateSchema){const n=e.scopeValue("validate$data",{ref:r.validateSchema});return u._`!${n}(${t})`}return u.nil}())}subschema(e,t){const n=(0,l.getSubschema)(this.it,e);(0,l.extendSubschemaData)(n,this.it,e),(0,l.extendSubschemaMode)(n,e);const s={...this.it,...n,items:void 0,props:void 0};return function(e,t){_(e)&&(v(e),y(e))?function(e,t){const{schema:n,gen:r,opts:s}=e;s.$comment&&n.$comment&&b(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,p.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const o=r.const("_errs",d.default.errors);w(e,o),r.var(t,u._`${o} === ${d.default.errors}`)}(e,t):(0,r.boolOrEmptySchema)(e,t)}(s,t),s}mergeEvaluated(e,t){const{it:n,gen:r}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=h.mergeEvaluated.props(r,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=h.mergeEvaluated.items(r,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:r}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return r.if(t,()=>this.mergeEvaluated(e,u.Name)),!0}}function T(e,t,n,r){const s=new S(e,n,t);"code"in n?n.code(s,r):s.$data&&n.validate?(0,c.funcKeywordCode)(s,n):"macro"in n?(0,c.macroKeywordCode)(s,n):(n.compile||n.validate)&&(0,c.funcKeywordCode)(s,n)}t.KeywordCxt=S;const I=/^\/(?:[^~]|~0|~1)*$/,C=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function P(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let s,o;if(""===e)return d.default.rootData;if("/"===e[0]){if(!I.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,o=d.default.rootData}else{const a=C.exec(e);if(!a)throw new Error(`Invalid JSON-pointer: ${e}`);const i=+a[1];if(s=a[2],"#"===s){if(i>=t)throw new Error(c("property/index",i));return r[t-i]}if(i>t)throw new Error(c("data",i));if(o=n[t-i],!s)return o}let a=o;const i=s.split("/");for(const e of i)e&&(o=u._`${o}${(0,u.getProperty)((0,h.unescapeJsonPointer)(e))}`,a=u._`${a} && ${o}`);return a;function c(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}t.getData=P},3622:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},3758:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const r=n(1910),s=n(4678),o=n(2304),a=n(4678);function i(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:r._`Object.prototype.hasOwnProperty`})}function c(e,t,n){return r._`${i(e)}.call(${t}, ${n})`}function l(e,t,n,s){const o=r._`${t}${(0,r.getProperty)(n)} === undefined`;return s?(0,r.or)(o,(0,r.not)(c(e,t,n))):o}function u(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}t.checkReportMissingProp=function(e,t){const{gen:n,data:s,it:o}=e;n.if(l(n,s,t,o.opts.ownProperties),()=>{e.setParams({missingProperty:r._`${t}`},!0),e.error()})},t.checkMissingProp=function({gen:e,data:t,it:{opts:n}},s,o){return(0,r.or)(...s.map(s=>(0,r.and)(l(e,t,s,n.ownProperties),r._`${o} = ${s}`)))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=i,t.isOwnProperty=c,t.propertyInData=function(e,t,n,s){const o=r._`${t}${(0,r.getProperty)(n)} !== undefined`;return s?r._`${o} && ${c(e,t,n)}`:o},t.noPropertyInData=l,t.allSchemaProperties=u,t.schemaProperties=function(e,t){return u(t).filter(n=>!(0,s.alwaysValidSchema)(e,t[n]))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:n,topSchemaRef:s,schemaPath:a,errorPath:i},it:c},l,u,d){const p=d?r._`${e}, ${t}, ${s}${a}`:t,h=[[o.default.instancePath,(0,r.strConcat)(o.default.instancePath,i)],[o.default.parentData,c.parentData],[o.default.parentDataProperty,c.parentDataProperty],[o.default.rootData,o.default.rootData]];c.opts.dynamicRef&&h.push([o.default.dynamicAnchors,o.default.dynamicAnchors]);const f=r._`${p}, ${n.object(...h)}`;return u!==r.nil?r._`${l}.call(${u}, ${f})`:r._`${l}(${f})`};const d=r._`new RegExp`;t.usePattern=function({gen:e,it:{opts:t}},n){const s=t.unicodeRegExp?"u":"",{regExp:o}=t.code,i=o(n,s);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:r._`${"new RegExp"===o.code?d:(0,a.useFunc)(e,o)}(${n}, ${s})`})},t.validateArray=function(e){const{gen:t,data:n,keyword:o,it:a}=e,i=t.name("valid");if(a.allErrors){const e=t.let("valid",!0);return c(()=>t.assign(e,!1)),e}return t.var(i,!0),c(()=>t.break()),i;function c(a){const c=t.const("len",r._`${n}.length`);t.forRange("i",0,c,n=>{e.subschema({keyword:o,dataProp:n,dataPropType:s.Type.Num},i),t.if((0,r.not)(i),a)})}},t.validateUnion=function(e){const{gen:t,schema:n,keyword:o,it:a}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(e=>(0,s.alwaysValidSchema)(a,e))&&!a.opts.unevaluated)return;const i=t.let("valid",!1),c=t.name("_valid");t.block(()=>n.forEach((n,s)=>{const a=e.subschema({keyword:o,schemaProp:s,compositeRule:!0},c);t.assign(i,r._`${i} || ${c}`),e.mergeValidEvaluated(a,c)||t.if((0,r.not)(i))})),e.result(i,()=>e.reset(),()=>e.error(!0))}},3800:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;const r=n(1910),s=n(2304),o=n(3758),a=n(2693);function i(e){const{gen:t,data:n,it:s}=e;t.if(s.parentData,()=>t.assign(n,r._`${s.parentData}[${s.parentDataProperty}]`))}function c(e,t,n){if(void 0===n)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:(0,r.stringify)(n)})}t.macroKeywordCode=function(e,t){const{gen:n,keyword:s,schema:o,parentSchema:a,it:i}=e,l=t.macro.call(i.self,o,a,i),u=c(n,s,l);!1!==i.opts.validateSchema&&i.self.validateSchema(l,!0);const d=n.name("valid");e.subschema({schema:l,schemaPath:r.nil,errSchemaPath:`${i.errSchemaPath}/${s}`,topSchemaRef:u,compositeRule:!0},d),e.pass(d,()=>e.error(!0))},t.funcKeywordCode=function(e,t){var n;const{gen:l,keyword:u,schema:d,parentSchema:p,$data:h,it:f}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(f,t);const m=!h&&t.compile?t.compile.call(f.self,d,p,f):t.validate,g=c(l,u,m),y=l.let("valid");function _(n=(t.async?r._`await `:r.nil)){const a=f.opts.passContext?s.default.this:s.default.self,i=!("compile"in t&&!h||!1===t.schema);l.assign(y,r._`${n}${(0,o.callValidateCode)(e,g,a,i)}`,t.modifying)}function v(e){var n;l.if((0,r.not)(null!==(n=t.valid)&&void 0!==n?n:y),e)}e.block$data(y,function(){if(!1===t.errors)_(),t.modifying&&i(e),v(()=>e.error());else{const n=t.async?function(){const e=l.let("ruleErrs",null);return l.try(()=>_(r._`await `),t=>l.assign(y,!1).if(r._`${t} instanceof ${f.ValidationError}`,()=>l.assign(e,r._`${t}.errors`),()=>l.throw(t))),e}():function(){const e=r._`${g}.errors`;return l.assign(e,null),_(r.nil),e}();t.modifying&&i(e),v(()=>function(e,t){const{gen:n}=e;n.if(r._`Array.isArray(${t})`,()=>{n.assign(s.default.vErrors,r._`${s.default.vErrors} === null ? ${t} : ${s.default.vErrors}.concat(${t})`).assign(s.default.errors,r._`${s.default.vErrors}.length`),(0,a.extendErrors)(e)},()=>e.error())}(e,n))}}),e.ok(null!==(n=t.valid)&&void 0!==n?n:y)},t.validSchemaType=function(e,t,n=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&void 0===e)},t.validateKeywordUsage=function({schema:e,opts:t,self:n,errSchemaPath:r},s,o){if(Array.isArray(s.keyword)?!s.keyword.includes(o):s.keyword!==o)throw new Error("ajv implementation error");const a=s.dependencies;if(null==a?void 0:a.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[o])){const e=`keyword "${o}" value is invalid at path "${r}": `+n.errorsText(s.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);n.logger.error(e)}}},3905:(e,t)=>{"use strict";function n(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:n(o,a),time:n(c(!0),l),"date-time":n(p(!0),h),"iso-time":n(c(),u),"iso-date-time":n(p(),f),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return m.test(e)&&g.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(b.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return y.lastIndex=0,y.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=v&&e>=_}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:w},double:{type:"number",validate:w},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:n(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,a),time:n(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,l),"date-time":n(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,h),"iso-time":n(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,u),"iso-date-time":n(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,f),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(e){const t=r.exec(e);if(!t)return!1;const n=+t[1],o=+t[2],a=+t[3];return o>=1&&o<=12&&a>=1&&a<=(2===o&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(n)?29:s[o])}function a(e,t){if(e&&t)return e>t?1:e<t?-1:0}const i=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function c(e){return function(t){const n=i.exec(t);if(!n)return!1;const r=+n[1],s=+n[2],o=+n[3],a=n[4],c="-"===n[5]?-1:1,l=+(n[6]||0),u=+(n[7]||0);if(l>23||u>59||e&&!a)return!1;if(r<=23&&s<=59&&o<60)return!0;const d=s-u*c,p=r-l*c-(d<0?1:0);return(23===p||-1===p)&&(59===d||-1===d)&&o<61}}function l(e,t){if(!e||!t)return;const n=new Date("2020-01-01T"+e).valueOf(),r=new Date("2020-01-01T"+t).valueOf();return n&&r?n-r:void 0}function u(e,t){if(!e||!t)return;const n=i.exec(e),r=i.exec(t);return n&&r?(e=n[1]+n[2]+n[3])>(t=r[1]+r[2]+r[3])?1:e<t?-1:0:void 0}const d=/t|\s/i;function p(e){const t=c(e);return function(e){const n=e.split(d);return 2===n.length&&o(n[0])&&t(n[1])}}function h(e,t){if(!e||!t)return;const n=new Date(e).valueOf(),r=new Date(t).valueOf();return n&&r?n-r:void 0}function f(e,t){if(!e||!t)return;const[n,r]=e.split(d),[s,o]=t.split(d),i=a(n,s);return void 0!==i?i||l(r,o):void 0}const m=/\/|:/,g=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,y=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,_=-(2**31),v=2**31-1;function w(){return!0}const b=/[^\\]\\Z/},4063:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4678),s={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const o=t.name("valid");n.forEach((t,n)=>{if((0,r.alwaysValidSchema)(s,t))return;const a=e.subschema({keyword:"allOf",schemaProp:n},o);e.ok(o),e.mergeEvaluated(a)})}};t.default=s},4071:(e,t,n)=>{e.exports=n(7243)()},4401:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2085),s={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,r.validateTuple)(e,"items")};t.default=s},4606:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(311),s=n(1910),o=n(4678),a=n(353),i={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>s.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>s._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:n,$data:i,schema:c,parentSchema:l,schemaCode:u,it:d}=e;if(!i&&!c)return;const p=t.let("valid"),h=l.items?(0,r.getSchemaTypes)(l.items):[];function f(o,a){const i=t.name("item"),c=(0,r.checkDataTypes)(h,i,d.opts.strictNumbers,r.DataType.Wrong),l=t.const("indices",s._`{}`);t.for(s._`;${o}--;`,()=>{t.let(i,s._`${n}[${o}]`),t.if(c,s._`continue`),h.length>1&&t.if(s._`typeof ${i} == "string"`,s._`${i} += "_"`),t.if(s._`typeof ${l}[${i}] == "number"`,()=>{t.assign(a,s._`${l}[${i}]`),e.error(),t.assign(p,!1).break()}).code(s._`${l}[${i}] = ${o}`)})}function m(r,i){const c=(0,o.useFunc)(t,a.default),l=t.name("outer");t.label(l).for(s._`;${r}--;`,()=>t.for(s._`${i} = ${r}; ${i}--;`,()=>t.if(s._`${c}(${n}[${r}], ${n}[${i}])`,()=>{e.error(),t.assign(p,!1).break(l)})))}e.block$data(p,function(){const r=t.let("i",s._`${n}.length`),o=t.let("j");e.setParams({i:r,j:o}),t.assign(p,!0),t.if(s._`${r} > 1`,()=>(h.length>0&&!h.some(e=>"object"===e||"array"===e)?f:m)(r,o))},s._`${u} === false`),e.ok(p)}};t.default=i},4678:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const r=n(1910),s=n(3345);function o(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema)return;if("boolean"==typeof t)return;const s=r.RULES.keywords;for(const n in t)s[n]||f(e,`unknown keyword: "${n}"`)}function a(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function i(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function c(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function l({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:s}){return(o,a,i,c)=>{const l=void 0===i?a:i instanceof r.Name?(a instanceof r.Name?e(o,a,i):t(o,a,i),i):a instanceof r.Name?(t(o,i,a),a):n(a,i);return c!==r.Name||l instanceof r.Name?l:s(o,l)}}function u(e,t){if(!0===t)return e.var("props",!0);const n=e.var("props",r._`{}`);return void 0!==t&&d(e,n,t),n}function d(e,t,n){Object.keys(n).forEach(n=>e.assign(r._`${t}${(0,r.getProperty)(n)}`,!0))}t.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(o(e,t),!a(t,e.self.RULES.all))},t.checkUnknownRules=o,t.schemaHasRules=a,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},n,s,o){if(!o){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return r._`${n}`}return r._`${e}${t}${(0,r.getProperty)(s)}`},t.unescapeFragment=function(e){return c(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(i(e))},t.escapeJsonPointer=i,t.unescapeJsonPointer=c,t.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},t.mergeEvaluated={props:l({mergeNames:(e,t,n)=>e.if(r._`${n} !== true && ${t} !== undefined`,()=>{e.if(r._`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,r._`${n} || {}`).code(r._`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if(r._`${n} !== true`,()=>{!0===t?e.assign(n,!0):(e.assign(n,r._`${n} || {}`),d(e,n,t))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:u}),items:l({mergeNames:(e,t,n)=>e.if(r._`${n} !== true && ${t} !== undefined`,()=>e.assign(n,r._`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if(r._`${n} !== true`,()=>e.assign(n,!0===t||r._`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=u,t.setEvaluated=d;const p={};var h;function f(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,!0===n)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:p[t.code]||(p[t.code]=new s._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(h||(t.Type=h={})),t.getErrorPath=function(e,t,n){if(e instanceof r.Name){const s=t===h.Num;return n?s?r._`"[" + ${e} + "]"`:r._`"['" + ${e} + "']"`:s?r._`"/" + ${e}`:r._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,r.getProperty)(e).toString():"/"+i(e)},t.checkStrictMode=f},4828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o=n(6896),a={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxLength"===e?"more":"fewer";return r.str`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:a,it:i}=e,c="maxLength"===t?r.operators.GT:r.operators.LT,l=!1===i.opts.unicode?r._`${n}.length`:r._`${(0,s.useFunc)(e.gen,o.default)}(${n})`;e.fail$data(r._`${l} ${c} ${a}`)}};t.default=a},5070:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},5133:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=n(5475),s=n(8659),o=n(3100),a=n(5276),i=["/properties"],c="http://json-schema.org/draft-07/schema";class l extends r.default{_addVocabularies(){super._addVocabularies(),s.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(a,i):a;this.addMetaSchema(e,c,!1),this.refs["http://json-schema.org/schema"]=c}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(c)?c:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var u=n(3419);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var d=n(1910);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var p=n(8635);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return p.default}});var h=n(1688);Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return h.default}})},5160:(e,t,n)=>{"use strict";var r=n(1609),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useSyncExternalStore,a=r.useRef,i=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var d=a(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=c(function(){function e(e){if(!i){if(i=!0,o=e,e=r(e),void 0!==u&&p.hasValue){var t=p.value;if(u(t,e))return a=t}return a=e}if(t=a,s(o,e))return t;var n=r(e);return void 0!==u&&u(t,n)?(o=e,t):(o=e,a=n)}var o,a,i=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,u]);var h=o(e,d[0],d[1]);return i(function(){p.hasValue=!0,p.value=h},[h]),l(h),h}},5276:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},5475:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var r=n(3419);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return r.KeywordCxt}});var s=n(1910);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}});const o=n(8635),a=n(1688),i=n(7619),c=n(9700),l=n(1910),u=n(8668),d=n(311),p=n(4678),h=n(3622),f=n(1435),m=(e,t)=>new RegExp(e,t);m.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),_={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function w(e){var t,n,r,s,o,a,i,c,l,u,d,p,h,g,y,_,v,w,b,x,k,_x,$,E,S;const T=e.strict,I=null===(t=e.code)||void 0===t?void 0:t.optimize,C=!0===I||void 0===I?1:I||0,P=null!==(r=null===(n=e.code)||void 0===n?void 0:n.regExp)&&void 0!==r?r:m,R=null!==(s=e.uriResolver)&&void 0!==s?s:f.default;return{strictSchema:null===(a=null!==(o=e.strictSchema)&&void 0!==o?o:T)||void 0===a||a,strictNumbers:null===(c=null!==(i=e.strictNumbers)&&void 0!==i?i:T)||void 0===c||c,strictTypes:null!==(u=null!==(l=e.strictTypes)&&void 0!==l?l:T)&&void 0!==u?u:"log",strictTuples:null!==(p=null!==(d=e.strictTuples)&&void 0!==d?d:T)&&void 0!==p?p:"log",strictRequired:null!==(g=null!==(h=e.strictRequired)&&void 0!==h?h:T)&&void 0!==g&&g,code:e.code?{...e.code,optimize:C,regExp:P}:{optimize:C,regExp:P},loopRequired:null!==(y=e.loopRequired)&&void 0!==y?y:200,loopEnum:null!==(_=e.loopEnum)&&void 0!==_?_:200,meta:null===(v=e.meta)||void 0===v||v,messages:null===(w=e.messages)||void 0===w||w,inlineRefs:null===(b=e.inlineRefs)||void 0===b||b,schemaId:null!==(x=e.schemaId)&&void 0!==x?x:"$id",addUsedSchema:null===(k=e.addUsedSchema)||void 0===k||k,validateSchema:null===(_x=e.validateSchema)||void 0===_x||_x,validateFormats:null===($=e.validateFormats)||void 0===$||$,unicodeRegExp:null===(E=e.unicodeRegExp)||void 0===E||E,int32range:null===(S=e.int32range)||void 0===S||S,uriResolver:R}}class b{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...w(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:y,es5:t,lines:n}),this.logger=function(e){if(!1===e)return I;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const r=e.validateFormats;e.validateFormats=!1,this.RULES=(0,i.getRules)(),x.call(this,_,e,"NOT SUPPORTED"),x.call(this,v,e,"DEPRECATED","warn"),this._metaOpts=T.call(this),e.formats&&E.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&S.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),$.call(this),e.validateFormats=r}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:n}=this.opts;let r=h;"id"===n&&(r={...h},r.id=r.$id,delete r.$id),t&&e&&this.addMetaSchema(r,r[n],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const r=n(t);return"$async"in n||(this.errors=n.errors),r}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return r.call(this,e,t);async function r(e,t){await s.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||o.call(this,n)}async function s(e){e&&!this.getSchema(e)&&await r.call(this,{$ref:e},!0)}async function o(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof a.default))throw t;return i.call(this,t),await c.call(this,t.missingSchema),o.call(this,e)}}function i({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function c(e){const n=await l.call(this,e);this.refs[e]||await s.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function l(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,r=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,r);return this}let s;if("object"==typeof e){const{schemaId:t}=this.opts;if(s=e[t],void 0!==s&&"string"!=typeof s)throw new Error(`schema ${t} must be string`)}return t=(0,u.normalizeId)(t||s),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,r,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const r=this.validate(n,e);if(!r&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return r}getSchema(e){let t;for(;"string"==typeof(t=k.call(this,e));)e=t;if(void 0===t){const{schemaId:n}=this.opts,r=new c.SchemaEnv({schema:{},schemaId:n});if(t=c.resolveSchema.call(this,r,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=k.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let n=e[this.opts.schemaId];return n&&(n=(0,u.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(P.call(this,n,t),!t)return(0,p.eachItem)(n,e=>R.call(this,e)),this;N.call(this,t);const r={...t,type:(0,d.getJSONTypes)(t.type),schemaType:(0,d.getJSONTypes)(t.schemaType)};return(0,p.eachItem)(n,0===r.type.length?e=>R.call(this,e,r):e=>r.type.forEach(t=>R.call(this,e,r,t))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex(t=>t.keyword===e);t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map(e=>`${n}${e.instancePath} ${e.message}`).reduce((e,n)=>e+t+n):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const r of t){const t=r.split("/").slice(1);let s=e;for(const e of t)s=s[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:r}=t.definition,o=s[e];r&&o&&(s[e]=O(o))}}return e}_removeAllSchemas(e,t){for(const n in e){const r=e[n];t&&!t.test(n)||("string"==typeof r?delete e[n]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[n]))}}_addSchema(e,t,n,r=this.opts.validateSchema,s=this.opts.addUsedSchema){let o;const{schemaId:a}=this.opts;if("object"==typeof e)o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let i=this._cache.get(e);if(void 0!==i)return i;n=(0,u.normalizeId)(o||n);const l=u.getSchemaRefs.call(this,e,n);return i=new c.SchemaEnv({schema:e,schemaId:a,meta:t,baseId:n,localRefs:l}),this._cache.set(i.schema,i),s&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=i),r&&this.validateSchema(e,!0),i}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):c.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,e)}finally{this.opts=t}}}function x(e,t,n,r="error"){for(const s in e){const o=s;o in t&&this.logger[r](`${n}: option ${s}. ${e[o]}`)}}function k(e){return e=(0,u.normalizeId)(e),this.schemas[e]||this.refs[e]}function $(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function E(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function S(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function T(){const e={...this.opts};for(const t of g)delete e[t];return e}b.ValidationError=o.default,b.MissingRefError=a.default,t.default=b;const I={log(){},warn(){},error(){}},C=/^[a-z_$][a-z0-9_$:-]*$/i;function P(e,t){const{RULES:n}=this;if((0,p.eachItem)(e,e=>{if(n.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!C.test(e))throw new Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function R(e,t,n){var r;const s=null==t?void 0:t.post;if(n&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let a=s?o.post:o.rules.find(({type:e})=>e===n);if(a||(a={type:n,rules:[]},o.rules.push(a)),o.keywords[e]=!0,!t)return;const i={keyword:e,definition:{...t,type:(0,d.getJSONTypes)(t.type),schemaType:(0,d.getJSONTypes)(t.schemaType)}};t.before?j.call(this,a,i,t.before):a.rules.push(i),o.all[e]=i,null===(r=t.implements)||void 0===r||r.forEach(e=>this.addKeyword(e))}function j(e,t,n){const r=e.rules.findIndex(e=>e.keyword===n);r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function N(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=O(t)),e.validateSchema=this.compile(t,!0))}const A={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function O(e){return{anyOf:[e,A]}}},5495:(e,t)=>{(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{NewfoldRuntime:()=>s});const r=window.wp.url,s={hasCapability:e=>!0===window.NewfoldRuntime?.capabilities[e],adminUrl:e=>window.NewfoldRuntime?.admin_url+e,createApiUrl:(e,t={})=>(0,r.addQueryArgs)(window.NewfoldRuntime?.base_url,{rest_route:e,...t}),get siteDetails(){return window.NewfoldRuntime?.site},get sdk(){return window.NewfoldRuntime?.sdk},get isWoo(){return window.NewfoldRuntime?.isWoocommerceActive},get isYithBooking(){return window.NewfoldRuntime?.isYithBookingActive},get ecommerce(){return window.NewfoldRuntime?.ecommerce},get plugin(){return window.NewfoldRuntime?.plugin},get wpversion(){return window.NewfoldRuntime?.wpversion},get siteTitle(){return window.NewfoldRuntime?.siteTitle},get currentTheme(){return window.NewfoldRuntime?.currentTheme}};var o=t;for(var a in n)o[a]=n[a];n.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})()},5514:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o=n(353),a={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>r._`{allowedValues: ${e}}`},code(e){const{gen:t,data:n,$data:a,schema:i,schemaCode:c,it:l}=e;if(!a&&0===i.length)throw new Error("enum must have non-empty array");const u=i.length>=l.opts.loopEnum;let d;const p=()=>null!=d?d:d=(0,s.useFunc)(t,o.default);let h;if(u||a)h=t.let("valid"),e.block$data(h,function(){t.assign(h,!1),t.forOf("v",c,e=>t.if(r._`${p()}(${n}, ${e})`,()=>t.assign(h,!0).break()))});else{if(!Array.isArray(i))throw new Error("ajv implementation error");const e=t.const("vSchema",c);h=(0,r.or)(...i.map((_x,t)=>function(e,t){const s=i[t];return"object"==typeof s&&null!==s?r._`${p()}(${n}, ${e}[${t}])`:r._`${n} === ${s}`}(e,t)))}e.pass(h)}};t.default=a},5954:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>r.str`must be multiple of ${e}`,params:({schemaCode:e})=>r._`{multipleOf: ${e}}`},code(e){const{gen:t,data:n,schemaCode:s,it:o}=e,a=o.opts.multipleOfPrecision,i=t.let("res"),c=a?r._`Math.abs(Math.round(${i}) - ${i}) > 1e-${a}`:r._`${i} !== parseInt(${i})`;e.fail$data(r._`(${s} === 0 || (${i} = ${n}/${s}, ${c}))`)}};t.default=s},6853:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const r=n(1910),s=n(4678);function o(e,t,n){const{gen:o,compositeRule:a,data:i,opts:c}=e;if(void 0===n)return;const l=r._`${i}${(0,r.getProperty)(t)}`;if(a)return void(0,s.checkStrictMode)(e,`default is ignored for: ${l}`);let u=r._`${l} === undefined`;"empty"===c.useDefaults&&(u=r._`${u} || ${l} === null || ${l} === ""`),o.if(u,r._`${l} = ${(0,r.stringify)(n)}`)}t.assignDefaults=function(e,t){const{properties:n,items:r}=e.schema;if("object"===t&&n)for(const t in n)o(e,t,n[t].default);else"array"===t&&Array.isArray(r)&&r.forEach((t,n)=>o(e,n,t.default))}},6856:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4678),s={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:s}=e;if((0,r.alwaysValidSchema)(s,n))return void e.fail();const o=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),e.failResult(o,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};t.default=s},6896:(e,t)=>{"use strict";function n(e){const t=e.length;let n,r=0,s=0;for(;s<t;)r++,n=e.charCodeAt(s++),n>=55296&&n<=56319&&s<t&&(n=e.charCodeAt(s),56320==(64512&n)&&s++);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.code='require("ajv/dist/runtime/ucs2length").default'},7129:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3758),s=n(1910),o={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>s.str`must match pattern "${e}"`,params:({schemaCode:e})=>s._`{pattern: ${e}}`},code(e){const{data:t,$data:n,schema:o,schemaCode:a,it:i}=e,c=i.opts.unicodeRegExp?"u":"",l=n?s._`(new RegExp(${a}, ${c}))`:(0,r.usePattern)(e,o);e.fail$data(s._`!${l}.test(${t})`)}};t.default=o},7243:(e,t,n)=>{"use strict";var r=n(412);function s(){}function o(){}o.resetWarningCache=s,e.exports=function(){function e(e,t,n,s,o,a){if(a!==r){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:s};return n.PropTypes=n,n}},7319:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o=n(353),a={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>r._`{allowedValue: ${e}}`},code(e){const{gen:t,data:n,$data:a,schemaCode:i,schema:c}=e;a||c&&"object"==typeof c?e.fail$data(r._`!${(0,s.useFunc)(t,o.default)}(${n}, ${i})`):e.fail(r._`${c} !== ${n}`)}};t.default=a},7452:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof y?t:y,a=Object.create(o.prototype),i=new P(r||[]);return s(a,"_invoke",{value:S(e,n,i)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var p="suspendedStart",h="suspendedYield",f="executing",m="completed",g={};function y(){}function _(){}function v(){}var w={};l(w,a,function(){return this});var b=Object.getPrototypeOf,x=b&&b(b(R([])));x&&x!==n&&r.call(x,a)&&(w=x);var k=v.prototype=y.prototype=Object.create(w);function $(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){function n(s,o,a,i){var c=d(e[s],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,i)},function(e){n("throw",e,a,i)}):t.resolve(u).then(function(e){l.value=e,a(l)},function(e){return n("throw",e,a,i)})}i(c.arg)}var o;s(this,"_invoke",{value:function(e,r){function s(){return new t(function(t,s){n(e,r,t,s)})}return o=o?o.then(s,s):s()}})}function S(e,n,r){var s=p;return function(o,a){if(s===f)throw new Error("Generator is already running");if(s===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=T(i,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(s===p)throw s=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s=f;var l=d(e,n,r);if("normal"===l.type){if(s=r.done?m:h,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(s=m,r.method="throw",r.arg=l.arg)}}}function T(e,n){var r=n.method,s=e.iterator[r];if(s===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(s,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function R(e){if(null!=e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,o=function n(){for(;++s<e.length;)if(r.call(e,s))return n.value=e[s],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(typeof e+" is not iterable")}return _.prototype=v,s(k,"constructor",{value:v,configurable:!0}),s(v,"constructor",{value:_,configurable:!0}),_.displayName=l(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},$(E.prototype),l(E.prototype,i,function(){return this}),e.AsyncIterator=E,e.async=function(t,n,r,s,o){void 0===o&&(o=Promise);var a=new E(u(t,n,r,s),o);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},$(k),l(k,c,"Generator"),l(k,a,function(){return this}),l(k,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=R,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function s(r,s){return i.type="throw",i.arg=e,n.next=r,s&&(n.method="next",n.arg=t),!!s}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var o=s;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var s=r.arg;C(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:R(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},7619:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const n=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&n.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},7750:(e,t,n)=>{"use strict";const{normalizeIPv6:r,removeDotSegments:s,recomposeAuthority:o,normalizeComponentEncoding:a,isIPv4:i,nonSimpleDomain:c}=n(3403),{SCHEMES:l,getSchemeHandler:u}=n(8114);function d(e,t,n,r){const o={};return r||(e=f(p(e,n),n),t=f(p(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=s(t.path||""),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=s(t.path||""),o.query=t.query):(t.path?("/"===t.path[0]?o.path=s(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path:o.path="/"+t.path,o.path=s(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function p(e,t){const n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},r=Object.assign({},t),a=[],i=u(r.scheme||n.scheme);i&&i.serialize&&i.serialize(n,r),void 0!==n.path&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),void 0!==n.scheme&&(n.path=n.path.split("%3A").join(":")))),"suffix"!==r.reference&&n.scheme&&a.push(n.scheme,":");const c=o(n);if(void 0!==c&&("suffix"!==r.reference&&a.push("//"),a.push(c),n.path&&"/"!==n.path[0]&&a.push("/")),void 0!==n.path){let e=n.path;r.absolutePath||i&&i.absolutePath||(e=s(e)),void 0===c&&"/"===e[0]&&"/"===e[1]&&(e="/%2F"+e.slice(2)),a.push(e)}return void 0!==n.query&&a.push("?",n.query),void 0!==n.fragment&&a.push("#",n.fragment),a.join("")}const h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function f(e,t){const n=Object.assign({},t),s={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let o=!1;"suffix"===n.reference&&(e=n.scheme?n.scheme+":"+e:"//"+e);const a=e.match(h);if(a){if(s.scheme=a[1],s.userinfo=a[3],s.host=a[4],s.port=parseInt(a[5],10),s.path=a[6]||"",s.query=a[7],s.fragment=a[8],isNaN(s.port)&&(s.port=a[5]),s.host)if(!1===i(s.host)){const e=r(s.host);s.host=e.host.toLowerCase(),o=e.isIPV6}else o=!0;void 0!==s.scheme||void 0!==s.userinfo||void 0!==s.host||void 0!==s.port||void 0!==s.query||s.path?void 0===s.scheme?s.reference="relative":void 0===s.fragment?s.reference="absolute":s.reference="uri":s.reference="same-document",n.reference&&"suffix"!==n.reference&&n.reference!==s.reference&&(s.error=s.error||"URI is not a "+n.reference+" reference.");const t=u(n.scheme||s.scheme);if(!(n.unicodeSupport||t&&t.unicodeSupport)&&s.host&&(n.domainHost||t&&t.domainHost)&&!1===o&&c(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(e){s.error=s.error||"Host's domain name can not be converted to ASCII: "+e}(!t||t&&!t.skipNormalize)&&(-1!==e.indexOf("%")&&(void 0!==s.scheme&&(s.scheme=unescape(s.scheme)),void 0!==s.host&&(s.host=unescape(s.host))),s.path&&(s.path=escape(unescape(s.path))),s.fragment&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),t&&t.parse&&t.parse(s,n)}else s.error=s.error||"URI can not be parsed.";return s}const m={SCHEMES:l,normalize:function(e,t){return"string"==typeof e?e=p(f(e,t),t):"object"==typeof e&&(e=f(p(e,t),t)),e},resolve:function(e,t,n){const r=n?Object.assign({scheme:"null"},n):{scheme:"null"},s=d(f(e,r),f(t,r),r,!0);return r.skipEscape=!0,p(s,r)},resolveComponent:d,equal:function(e,t,n){return"string"==typeof e?(e=unescape(e),e=p(a(f(e,n),!0),{...n,skipEscape:!0})):"object"==typeof e&&(e=p(a(e,!0),{...n,skipEscape:!0})),"string"==typeof t?(t=unescape(t),t=p(a(f(t,n),!0),{...n,skipEscape:!0})):"object"==typeof t&&(t=p(a(t,!0),{...n,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:p,parse:f};e.exports=m,e.exports.default=m,e.exports.fastUri=m},7999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=[n(308).default];t.default=r},8008:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?r.str`must contain at least ${e} valid item(s)`:r.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?r._`{minContains: ${e}}`:r._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:n,parentSchema:o,data:a,it:i}=e;let c,l;const{minContains:u,maxContains:d}=o;i.opts.next?(c=void 0===u?1:u,l=d):c=1;const p=t.const("len",r._`${a}.length`);if(e.setParams({min:c,max:l}),void 0===l&&0===c)return void(0,s.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==l&&c>l)return(0,s.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,s.alwaysValidSchema)(i,n)){let t=r._`${p} >= ${c}`;return void 0!==l&&(t=r._`${t} && ${p} <= ${l}`),void e.pass(t)}i.items=!0;const h=t.name("valid");function f(){const e=t.name("_valid"),n=t.let("count",0);m(e,()=>t.if(e,()=>function(e){t.code(r._`${e}++`),void 0===l?t.if(r._`${e} >= ${c}`,()=>t.assign(h,!0).break()):(t.if(r._`${e} > ${l}`,()=>t.assign(h,!1).break()),1===c?t.assign(h,!0):t.if(r._`${e} >= ${c}`,()=>t.assign(h,!0)))}(n)))}function m(n,r){t.forRange("i",0,p,t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:s.Type.Num,compositeRule:!0},n),r()})}void 0===l&&1===c?m(h,()=>t.if(h,()=>t.break())):0===c?(t.let(h,!0),void 0!==l&&t.if(r._`${a}.length > 0`,f)):(t.let(h,!1),f()),e.result(h,()=>e.reset())}};t.default=o},8074:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3758),s=n(1910),o=n(4678),a=n(4678),i={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:i,parentSchema:c,it:l}=e,{opts:u}=l,d=(0,r.allSchemaProperties)(n),p=d.filter(e=>(0,o.alwaysValidSchema)(l,n[e]));if(0===d.length||p.length===d.length&&(!l.opts.unevaluated||!0===l.props))return;const h=u.strictSchema&&!u.allowMatchingProperties&&c.properties,f=t.name("valid");!0===l.props||l.props instanceof s.Name||(l.props=(0,a.evaluatedPropsToName)(t,l.props));const{props:m}=l;function g(e){for(const t in h)new RegExp(e).test(t)&&(0,o.checkStrictMode)(l,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function y(n){t.forIn("key",i,o=>{t.if(s._`${(0,r.usePattern)(e,n)}.test(${o})`,()=>{const r=p.includes(n);r||e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:o,dataPropType:a.Type.Str},f),l.opts.unevaluated&&!0!==m?t.assign(s._`${m}[${o}]`,!0):r||l.allErrors||t.if((0,s.not)(f),()=>t.break())})})}!function(){for(const e of d)h&&g(e),l.allErrors?y(e):(t.var(f,!0),y(e),t.if(f))}()}};t.default=i},8114:(e,t,n)=>{"use strict";const{isUUID:r}=n(3403),s=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,o=["http","https","ws","wss","urn","urn:uuid"];function a(e){return!0===e.secure||!1!==e.secure&&!!e.scheme&&!(3!==e.scheme.length||"w"!==e.scheme[0]&&"W"!==e.scheme[0]||"s"!==e.scheme[1]&&"S"!==e.scheme[1]||"s"!==e.scheme[2]&&"S"!==e.scheme[2])}function i(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function c(e){const t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}const l={scheme:"http",domainHost:!0,parse:i,serialize:c},u={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=a(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if(e.port!==(a(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,n]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}},d={http:l,https:{scheme:"https",domainHost:l.domainHost,parse:i,serialize:c},ws:u,wss:{scheme:"wss",domainHost:u.domainHost,parse:u.parse,serialize:u.serialize},urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;const n=e.path.match(s);if(n){const r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];const s=p(`${r}:${t.nid||e.nid}`);e.path=void 0,s&&(e=s.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){if(void 0===e.nid)throw new Error("URN without nid cannot be serialized");const n=t.scheme||e.scheme||"urn",r=e.nid.toLowerCase(),s=p(`${n}:${t.nid||r}`);s&&(e=s.serialize(e,t));const o=e,a=e.nss;return o.path=`${r||t.nid}:${a}`,t.skipEscape=!0,o},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,t){const n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&r(n.uuid)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0}};function p(e){return e&&(d[e]||d[e.toLowerCase()])||void 0}Object.setPrototypeOf(d,null),e.exports={wsIsSecure:a,SCHEMES:d,isValidSchemeName:function(e){return-1!==o.indexOf(e)},getSchemeHandler:p}},8398:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;const r=n(1910),s=n(4678),o={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>r.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>r._`{limit: ${e}}`},code(e){const{parentSchema:t,it:n}=e,{items:r}=t;Array.isArray(r)?a(e,r):(0,s.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function a(e,t){const{gen:n,schema:o,data:a,keyword:i,it:c}=e;c.items=!0;const l=n.const("len",r._`${a}.length`);if(!1===o)e.setParams({len:t.length}),e.pass(r._`${l} <= ${t.length}`);else if("object"==typeof o&&!(0,s.alwaysValidSchema)(c,o)){const o=n.var("valid",r._`${l} <= ${t.length}`);n.if((0,r.not)(o),()=>function(o){n.forRange("i",t.length,l,t=>{e.subschema({keyword:i,dataProp:t,dataPropType:s.Type.Num},o),c.allErrors||n.if((0,r.not)(o),()=>n.break())})}(o)),e.ok(o)}}t.validateAdditionalItems=a,t.default=o},8418:(e,t,n)=>{"use strict";e.exports=n(5160)},8514:(e,t)=>{"use strict";function n(e,t){return t.rules.some(t=>r(e,t))}function r(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some(t=>void 0!==e[t]))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},r){const s=t.RULES.types[r];return s&&!0!==s&&n(e,s)},t.shouldUseGroup=n,t.shouldUseRule=r},8562:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const r=n(5133),s=n(1910),o=s.operators,a={formatMaximum:{okStr:"<=",ok:o.LTE,fail:o.GT},formatMinimum:{okStr:">=",ok:o.GTE,fail:o.LT},formatExclusiveMaximum:{okStr:"<",ok:o.LT,fail:o.GTE},formatExclusiveMinimum:{okStr:">",ok:o.GT,fail:o.LTE}},i={message:({keyword:e,schemaCode:t})=>s.str`should be ${a[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>s._`{comparison: ${a[e].okStr}, limit: ${t}}`};t.formatLimitDefinition={keyword:Object.keys(a),type:"string",schemaType:"string",$data:!0,error:i,code(e){const{gen:t,data:n,schemaCode:o,keyword:i,it:c}=e,{opts:l,self:u}=c;if(!l.validateFormats)return;const d=new r.KeywordCxt(c,u.RULES.all.format.definition,"format");function p(e){return s._`${e}.compare(${n}, ${o}) ${a[i].fail} 0`}d.$data?function(){const n=t.scopeValue("formats",{ref:u.formats,code:l.code.formats}),r=t.const("fmt",s._`${n}[${d.schemaCode}]`);e.fail$data((0,s.or)(s._`typeof ${r} != "object"`,s._`${r} instanceof RegExp`,s._`typeof ${r}.compare != "function"`,p(r)))}():function(){const n=d.schema,r=u.formats[n];if(!r||!0===r)return;if("object"!=typeof r||r instanceof RegExp||"function"!=typeof r.compare)throw new Error(`"${i}": format "${n}" does not define "compare" function`);const o=t.scopeValue("formats",{key:n,ref:r,code:l.code.formats?s._`${l.code.formats}${(0,s.getProperty)(n)}`:void 0});e.fail$data(p(o))}()},dependencies:["format"]},t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)},8635:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=n},8659:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2451),s=n(2447),o=n(2813),a=n(7999),i=n(5070),c=[r.default,s.default,(0,o.default)(),a.default,i.metadataVocabulary,i.contentVocabulary];t.default=c},8668:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const r=n(4678),s=n(92),o=n(8857),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!c(e):!!t&&l(e)<=t)};const i=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function c(e){for(const t in e){if(i.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(c))return!0;if("object"==typeof n&&c(n))return!0}return!1}function l(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!a.has(n)&&("object"==typeof e[n]&&(0,r.eachItem)(e[n],e=>t+=l(e)),t===1/0))return 1/0}return t}function u(e,t="",n){!1!==n&&(t=h(t));const r=e.parse(t);return d(e,r)}function d(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=u,t._getFullPath=d;const p=/#\/?$/;function h(e){return e?e.replace(p,""):""}t.normalizeId=h,t.resolveUrl=function(e,t,n){return n=h(n),e.resolve(t,n)};const f=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:n,uriResolver:r}=this.opts,a=h(e[n]||t),i={"":a},c=u(r,a,!1),l={},d=new Set;return o(e,{allKeys:!0},(e,t,r,s)=>{if(void 0===s)return;const o=c+t;let a=i[s];function u(t){const n=this.opts.uriResolver.resolve;if(t=h(a?n(a,t):t),d.has(t))throw m(t);d.add(t);let r=this.refs[t];return"string"==typeof r&&(r=this.refs[r]),"object"==typeof r?p(e,r.schema,t):t!==h(o)&&("#"===t[0]?(p(e,l[t],t),l[t]=e):this.refs[t]=o),t}function g(e){if("string"==typeof e){if(!f.test(e))throw new Error(`invalid anchor "${e}"`);u.call(this,`#${e}`)}}"string"==typeof e[n]&&(a=u.call(this,e[n])),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),i[t]=a}),l;function p(e,t,n){if(void 0!==t&&!s(e,t))throw m(n)}function m(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},8857:e=>{"use strict";var t=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),n(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function n(e,s,o,a,i,c,l,u,d,p){if(a&&"object"==typeof a&&!Array.isArray(a)){for(var h in s(a,i,c,l,u,d,p),a){var f=a[h];if(Array.isArray(f)){if(h in t.arrayKeywords)for(var m=0;m<f.length;m++)n(e,s,o,f[m],i+"/"+h+"/"+m,c,i,h,a,m)}else if(h in t.propsKeywords){if(f&&"object"==typeof f)for(var g in f)n(e,s,o,f[g],i+"/"+h+"/"+r(g),c,i,h,a,g)}else(h in t.keywords||e.allKeys&&!(h in t.skipKeywords))&&n(e,s,o,f,i+"/"+h,c,i,h,a)}o(a,i,c,l,u,d,p)}}function r(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},8870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const r=n(3345);class s extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var o;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(o||(t.UsedValueState=o={})),t.varKinds={const:new r.Name("const"),let:new r.Name("let"),var:new r.Name("var")};class a{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof r.Name?e:this.name(e)}name(e){return new r.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=a;class i extends r.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:n}){this.value=e,this.scopePath=r._`.${new r.Name(t)}[${n}]`}}t.ValueScopeName=i;const c=r._`\n`;t.ValueScope=class extends a{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?c:r.nil}}get(){return this._scope}name(e){return new i(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const r=this.toName(e),{prefix:s}=r,o=null!==(n=t.key)&&void 0!==n?n:t.ref;let a=this._values[s];if(a){const e=a.get(o);if(e)return e}else a=this._values[s]=new Map;a.set(o,r);const i=this._scope[s]||(this._scope[s]=[]),c=i.length;return i[c]=t.ref,r.setValue(t,{property:s,itemIndex:c}),r}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return r._`${e}${t.scopePath}`})}scopeCode(e=this._values,t,n){return this._reduceValues(e,e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,n)}_reduceValues(e,n,a={},i){let c=r.nil;for(const l in e){const u=e[l];if(!u)continue;const d=a[l]=a[l]||new Map;u.forEach(e=>{if(d.has(e))return;d.set(e,o.Started);let a=n(e);if(a){const n=this.opts.es5?t.varKinds.var:t.varKinds.const;c=r._`${c}${n} ${e} = ${a};${this.opts._n}`}else{if(!(a=null==i?void 0:i(e)))throw new s(e);c=r._`${c}${a}${this.opts._n}`}d.set(e,o.Completed)})}return c}}},8873:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxProperties"===e?"more":"fewer";return r.str`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:s}=e,o="maxProperties"===t?r.operators.GT:r.operators.LT;e.fail$data(r._`Object.keys(${n}).length ${o} ${s}`)}};t.default=s},8963:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4678),s={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){void 0===t.if&&(0,r.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};t.default=s},9008:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const r=n(2693),s=n(1910),o=n(2304),a={message:"boolean schema is false"};function i(e,t){const{gen:n,data:s}=e,o={gen:n,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,r.reportError)(o,a,void 0,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:n,validateName:r}=e;!1===n?i(e,!1):"object"==typeof n&&!0===n.$async?t.return(o.default.data):(t.assign(s._`${r}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:n,schema:r}=e;!1===r?(n.var(t,!1),i(e)):n.var(t,!0)}},9138:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>r.str`must match "${e.ifClause}" schema`,params:({params:e})=>r._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:n,it:o}=e;void 0===n.then&&void 0===n.else&&(0,s.checkStrictMode)(o,'"if" without "then" and "else" is ignored');const i=a(o,"then"),c=a(o,"else");if(!i&&!c)return;const l=t.let("valid",!0),u=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);e.mergeEvaluated(t)}(),e.reset(),i&&c){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(u,d("then",n),d("else",n))}else i?t.if(u,d("then")):t.if((0,r.not)(u),d("else"));function d(n,s){return()=>{const o=e.subschema({keyword:n},u);t.assign(l,u),e.mergeValidEvaluated(o,l),s?t.assign(s,r._`${n}`):e.setParams({ifClause:n})}}e.pass(l,()=>e.error(!0))}};function a(e,t){const n=e.schema[t];return void 0!==n&&!(0,s.alwaysValidSchema)(e,n)}t.default=o},9350:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const r=n(1688),s=n(3758),o=n(1910),a=n(2304),i=n(9700),c=n(4678),l={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:s}=e,{baseId:a,schemaEnv:c,validateName:l,opts:p,self:h}=s,{root:f}=c;if(("#"===n||"#/"===n)&&a===f.baseId)return function(){if(c===f)return d(e,l,c,c.$async);const n=t.scopeValue("root",{ref:f});return d(e,o._`${n}.validate`,f,f.$async)}();const m=i.resolveRef.call(h,f,a,n);if(void 0===m)throw new r.default(s.opts.uriResolver,a,n);return m instanceof i.SchemaEnv?function(t){const n=u(e,t);d(e,n,t,t.$async)}(m):function(r){const s=t.scopeValue("schema",!0===p.code.source?{ref:r,code:(0,o.stringify)(r)}:{ref:r}),a=t.name("valid"),i=e.subschema({schema:r,dataTypes:[],schemaPath:o.nil,topSchemaRef:s,errSchemaPath:n},a);e.mergeEvaluated(i),e.ok(a)}(m)}};function u(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):o._`${n.scopeValue("wrapper",{ref:t})}.validate`}function d(e,t,n,r){const{gen:i,it:l}=e,{allErrors:u,schemaEnv:d,opts:p}=l,h=p.passContext?a.default.this:o.nil;function f(e){const t=o._`${e}.errors`;i.assign(a.default.vErrors,o._`${a.default.vErrors} === null ? ${t} : ${a.default.vErrors}.concat(${t})`),i.assign(a.default.errors,o._`${a.default.vErrors}.length`)}function m(e){var t;if(!l.opts.unevaluated)return;const r=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==l.props)if(r&&!r.dynamicProps)void 0!==r.props&&(l.props=c.mergeEvaluated.props(i,r.props,l.props));else{const t=i.var("props",o._`${e}.evaluated.props`);l.props=c.mergeEvaluated.props(i,t,l.props,o.Name)}if(!0!==l.items)if(r&&!r.dynamicItems)void 0!==r.items&&(l.items=c.mergeEvaluated.items(i,r.items,l.items));else{const t=i.var("items",o._`${e}.evaluated.items`);l.items=c.mergeEvaluated.items(i,t,l.items,o.Name)}}r?function(){if(!d.$async)throw new Error("async schema referenced by sync schema");const n=i.let("valid");i.try(()=>{i.code(o._`await ${(0,s.callValidateCode)(e,t,h)}`),m(t),u||i.assign(n,!0)},e=>{i.if(o._`!(${e} instanceof ${l.ValidationError})`,()=>i.throw(e)),f(e),u||i.assign(n,!1)}),e.ok(n)}():e.result((0,s.callValidateCode)(e,t,h),()=>m(t),()=>f(t))}t.getValidate=u,t.callRef=d,t.default=l},9590:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;const r=n(1910),s=n(4678);t.getSubschema=function(e,{keyword:t,schemaProp:n,schema:o,schemaPath:a,errSchemaPath:i,topSchemaRef:c}){if(void 0!==t&&void 0!==o)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const o=e.schema[t];return void 0===n?{schema:o,schemaPath:r._`${e.schemaPath}${(0,r.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:o[n],schemaPath:r._`${e.schemaPath}${(0,r.getProperty)(t)}${(0,r.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,s.escapeFragment)(n)}`}}if(void 0!==o){if(void 0===a||void 0===i||void 0===c)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:a,topSchemaRef:c,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:n,dataPropType:o,data:a,dataTypes:i,propertyName:c}){if(void 0!==a&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:l}=t;if(void 0!==n){const{errorPath:a,dataPathArr:i,opts:c}=t;u(l.let("data",r._`${t.data}${(0,r.getProperty)(n)}`,!0)),e.errorPath=r.str`${a}${(0,s.getErrorPath)(n,o,c.jsPropertySyntax)}`,e.parentDataProperty=r._`${n}`,e.dataPathArr=[...i,e.parentDataProperty]}function u(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,n]}void 0!==a&&(u(a instanceof r.Name?a:l.let("data",a,!0)),void 0!==c&&(e.propertyName=c)),i&&(e.dataTypes=i)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:s,allErrors:o}){void 0!==r&&(e.compositeRule=r),void 0!==s&&(e.createErrors=s),void 0!==o&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=n}},9625:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3905),s=n(8562),o=n(1910),a=new o.Name("fullFormats"),i=new o.Name("fastFormats"),c=(e,t={keywords:!0})=>{if(Array.isArray(t))return l(e,t,r.fullFormats,a),e;const[n,o]="fast"===t.mode?[r.fastFormats,i]:[r.fullFormats,a];return l(e,t.formats||r.formatNames,n,o),t.keywords&&(0,s.default)(e),e};function l(e,t,n,r){var s,a;null!==(s=(a=e.opts.code).formats)&&void 0!==s||(a.formats=o._`require("ajv-formats/dist/formats").${r}`);for(const r of t)e.addFormat(r,n[r])}c.get=(e,t="full")=>{const n=("fast"===t?r.fastFormats:r.fullFormats)[e];if(!n)throw new Error(`Unknown format "${e}"`);return n},e.exports=t=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c},9698:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxItems"===e?"more":"fewer";return r.str`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:s}=e,o="maxItems"===t?r.operators.GT:r.operators.LT;e.fail$data(r._`${n}.length ${o} ${s}`)}};t.default=s},9700:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const r=n(1910),s=n(8635),o=n(2304),a=n(8668),i=n(4678),c=n(3419);class l{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,a.normalizeId)(null==n?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function u(e){const t=p.call(this,e);if(t)return t;const n=(0,a.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:i,lines:l}=this.opts.code,{ownProperties:u}=this.opts,d=new r.CodeGen(this.scope,{es5:i,lines:l,ownProperties:u});let h;e.$async&&(h=d.scopeValue("Error",{ref:s.default,code:r._`require("ajv/dist/runtime/validation_error").default`}));const f=d.scopeName("validate");e.validateName=f;const m={gen:d,allErrors:this.opts.allErrors,data:o.default.data,parentData:o.default.parentData,parentDataProperty:o.default.parentDataProperty,dataNames:[o.default.data],dataPathArr:[r.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:d.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,r.stringify)(e.schema)}:{ref:e.schema}),validateName:f,ValidationError:h,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:r.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:r._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),(0,c.validateFunctionCode)(m),d.optimize(this.opts.code.optimize);const t=d.toString();g=`${d.scopeRefs(o.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const n=new Function(`${o.default.self}`,`${o.default.scope}`,g)(this,this.scope.get());if(this.scope.value(f,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:f,validateCode:t,scopeValues:d._values}),this.opts.unevaluated){const{props:e,items:t}=m;n.evaluated={props:e instanceof r.Name?void 0:e,items:t instanceof r.Name?void 0:t,dynamicProps:e instanceof r.Name,dynamicItems:t instanceof r.Name},n.source&&(n.source.evaluated=(0,r.stringify)(n.evaluated))}return e.validate=n,e}catch(t){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),t}finally{this._compilations.delete(e)}}function d(e){return(0,a.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:u.call(this,e)}function p(e){for(const t of this._compilations)if(h(t,e))return t}function h(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function f(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||m.call(this,e,t)}function m(e,t){const n=this.opts.uriResolver.parse(t),r=(0,a._getFullPath)(this.opts.uriResolver,n);let s=(0,a.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===s)return y.call(this,n,e);const o=(0,a.normalizeId)(r),i=this.refs[o]||this.schemas[o];if("string"==typeof i){const t=m.call(this,e,i);if("object"!=typeof(null==t?void 0:t.schema))return;return y.call(this,n,t)}if("object"==typeof(null==i?void 0:i.schema)){if(i.validate||u.call(this,i),o===(0,a.normalizeId)(t)){const{schema:t}=i,{schemaId:n}=this.opts,r=t[n];return r&&(s=(0,a.resolveUrl)(this.opts.uriResolver,s,r)),new l({schema:t,schemaId:n,root:e,baseId:s})}return y.call(this,n,i)}}t.SchemaEnv=l,t.compileSchema=u,t.resolveRef=function(e,t,n){var r;n=(0,a.resolveUrl)(this.opts.uriResolver,t,n);const s=e.refs[n];if(s)return s;let o=f.call(this,e,n);if(void 0===o){const s=null===(r=e.localRefs)||void 0===r?void 0:r[n],{schemaId:a}=this.opts;s&&(o=new l({schema:s,schemaId:a,root:e,baseId:t}))}return void 0!==o?e.refs[n]=d.call(this,o):void 0},t.getCompilingSchema=p,t.resolveSchema=m;const g=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(e,{baseId:t,schema:n,root:r}){var s;if("/"!==(null===(s=e.fragment)||void 0===s?void 0:s[0]))return;for(const r of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;const e=n[(0,i.unescapeFragment)(r)];if(void 0===e)return;const s="object"==typeof(n=e)&&n[this.opts.schemaId];!g.has(r)&&s&&(t=(0,a.resolveUrl)(this.opts.uriResolver,t,s))}let o;if("boolean"!=typeof n&&n.$ref&&!(0,i.schemaHasRulesButRef)(n,this.RULES)){const e=(0,a.resolveUrl)(this.opts.uriResolver,t,n.$ref);o=m.call(this,r,e)}const{schemaId:c}=this.opts;return o=o||new l({schema:n,schemaId:c,root:r,baseId:t}),o.schema!==o.root.schema?o:void 0}},9816:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3419),s=n(3758),o=n(4678),a=n(1637),i={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:i,data:c,it:l}=e;"all"===l.opts.removeAdditional&&void 0===i.additionalProperties&&a.default.code(new r.KeywordCxt(l,a.default,"additionalProperties"));const u=(0,s.allSchemaProperties)(n);for(const e of u)l.definedProperties.add(e);l.opts.unevaluated&&u.length&&!0!==l.props&&(l.props=o.mergeEvaluated.props(t,(0,o.toHash)(u),l.props));const d=u.filter(e=>!(0,o.alwaysValidSchema)(l,n[e]));if(0===d.length)return;const p=t.name("valid");for(const n of d)h(n)?f(n):(t.if((0,s.propertyInData)(t,c,n,l.opts.ownProperties)),f(n),l.allErrors||t.else().var(p,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(p);function h(e){return l.opts.useDefaults&&!l.compositeRule&&void 0!==n[e].default}function f(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},p)}}};t.default=i},9974:(e,t)=>{(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};e.r(n),e.d(n,{HiiveAnalytics:()=>T,HiiveEvent:()=>a});var r={};e.r(r),e.d(r,{initializeNamespace:()=>c,updateHiiveDebounceInstance:()=>h,updateHiiveDebounceTime:()=>p,updateHiiveEventsQueue:()=>u,updateHiiveEventsQueueThreshold:()=>d,updateHiiveUrls:()=>l});var s={};e.r(s),e.d(s,{getHiiveBatchUrl:()=>y,getHiiveDebounce:()=>_,getHiiveEventsQueue:()=>f,getHiiveEventsQueueThreshold:()=>m,getHiiveSingleUrl:()=>g});const o=window.wp.data;class a{constructor(e,t,n,r){this.category=e,this.action=t,this.data=n,this.namespace=r}}const i={urls:{single:void 0,batch:void 0},queue:{events:[],threshold:100},debounce:{time:void 0,instance:void 0}};function c(e){return{type:"INITIALIZE_NAMESPACE",namespace:e}}function l(e,t){return{type:"UPDATE_HIIVE_URLS",urls:e,namespace:t}}function u(e,t){return{type:"UPDATE_HIIVE_EVENTS_QUEUE",events:e,namespace:t}}function d(e,t){return{type:"UPDATE_HIIVE_EVENTS_QUEUE_THRESHOLD",threshold:e,namespace:t}}function p(e,t){return{type:"UPDATE_HIIVE_DEBOUNCE_TIME",debounceTime:e,namespace:t}}function h(e,t){return{type:"UPDATE_HIIVE_DEBOUNCE_INSTANCE",instance:e,namespace:t}}function f(e,t){return e.hiive[t]?.queue.events}function m(e,t){return e.hiive[t]?.queue.threshold}function g(e,t){return e.hiive[t]?.urls.single}function y(e,t){return e.hiive[t]?.urls.batch}function _(e,t){return e.hiive[t]?.debounce}const v="newfold/ui-analytics",w={reducer:(0,o.combineReducers)({hiive:(e,t)=>{switch(t.type){case"INITIALIZE_NAMESPACE":return{...e,[t.namespace]:i};case"UPDATE_HIIVE_URLS":return{...e,[t.namespace]:{...e[t.namespace],urls:{single:t.urls.single,batch:t.urls.batch}}};case"UPDATE_HIIVE_EVENTS_QUEUE":return{...e,[t.namespace]:{...e[t.namespace],queue:{events:t.events,threshold:e[t.namespace].queue.threshold}}};case"UPDATE_HIIVE_EVENTS_QUEUE_THRESHOLD":return{...e,[t.namespace]:{...e[t.namespace],queue:{events:e[t.namespace].queue.events,threshold:t.threshold}}};case"UPDATE_HIIVE_DEBOUNCE_TIME":return{...e,[t.namespace]:{...e[t.namespace],debounce:{time:t.debounceTime,instance:e[t.namespace].debounce.instance}}};case"UPDATE_HIIVE_DEBOUNCE_INSTANCE":return{...e,[t.namespace]:{...e[t.namespace],debounce:{time:e[t.namespace].debounce.time,instance:t.instance}}}}return e}}),actions:r,selectors:s},b=(0,o.createReduxStore)(v,w);(0,o.select)(v)||(0,o.register)(b);const x=window.wp.apiFetch;var k=e.n(x);const $=e=>!!window?.nfdUIAnalytics?.hiive&&e in window.nfdUIAnalytics.hiive,E=e=>e instanceof a,S=async e=>{if(!e||!$(e))return!1;const t=(0,o.select)(b).getHiiveBatchUrl(e);if(!t)return!1;const n=(0,o.select)(b).getHiiveEventsQueue(e);if(0===n.length)return!0;(0,o.dispatch)(b).updateHiiveEventsQueue([],e);try{await k()({url:t,method:"POST",data:n})}catch(t){console.error(t),(0,o.dispatch)(b).updateHiiveEventsQueue(n,e)}return!0},T={initialize:async({namespace:e,urls:{single:t,batch:n}={},settings:{debounce:{time:r}={},queue:{threshold:s=100}={}}={}})=>!(!e||!$(e)&&(!t&&!n||((0,o.dispatch)(b).initializeNamespace(e),(0,o.dispatch)(b).updateHiiveUrls({single:t,batch:n},e),(0,o.dispatch)(b).updateHiiveDebounceTime(r,e),(0,o.dispatch)(b).updateHiiveEventsQueueThreshold(s,e),window.nfdUIAnalytics?.hiive?window.nfdUIAnalytics.hiive[e]=!0:window.nfdUIAnalytics={hiive:{[e]:!0}},0))),initialized:$,validate:E,track:e=>{if(!E(e)||!$(e.namespace))return!1;const t=e.namespace;delete e.namespace;const n=(0,o.select)(b).getHiiveEventsQueue(t);n.push(e),(0,o.dispatch)(b).updateHiiveEventsQueue(n,t);const r=(0,o.select)(b).getHiiveEventsQueueThreshold(t);return r&&r<n.length&&S(t),(e=>{if(!e)return!1;const t=(0,o.select)(b).getHiiveDebounce(e);t.time&&(clearInterval(t.instance),(0,o.dispatch)(b).updateHiiveDebounceInstance(setTimeout(()=>{S(e),(0,o.dispatch)(b).updateHiiveDebounceInstance(void 0,e)},t.time),e))})(t),!0},send:async e=>{if(!E(e)||!$(e.namespace))return!1;const t=e.namespace;delete e.namespace;const n=(0,o.select)(b).getHiiveSingleUrl(t);if(!n)return!1;try{await k()({url:n,method:"POST",data:e})}catch(e){return console.error(e),!1}},dispatchEvents:S,disableDebounce:e=>{if(!e)return!1;const t=(0,o.select)(b).getHiiveDebounce(e);return t.instance&&(clearInterval(t.instance),(0,o.dispatch)(b).updateHiiveDebounceInstance(void 0,e),(0,o.dispatch)(b).updateHiiveDebounceTime(void 0,e)),!0}};var I=t;for(var C in n)I[C]=n[C];n.__esModule&&Object.defineProperty(I,"__esModule",{value:!0})})()}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};(()=>{"use strict";n.d(r,{m:()=>E_});const e=window.wp.element;n(7452);const t=window.wp.apiFetch;var s=n.n(t);const o=window.wp.data;var a=n.n(o),i=n(9974);const c=window.wp.domReady;var l=n.n(c),u=n(1609),d=n(8418);var p={notify(){},get:()=>[]};var h=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),f=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),m=(()=>h||f?u.useLayoutEffect:u.useEffect)();Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var g=Symbol.for("react-redux-context"),y="undefined"!=typeof globalThis?globalThis:{};function _(){if(!u.createContext)return{};const e=y[g]??=new Map;let t=e.get(u.createContext);return t||(t=u.createContext(null),e.set(u.createContext,t)),t}var v=_(),w=function(e){const{children:t,context:n,serverState:r,store:s}=e,o=u.useMemo(()=>{const e=function(e,t){let n,r=p,s=0,o=!1;function a(){l.onStateChange&&l.onStateChange()}function i(){s++,n||(n=t?t.addNestedSub(a):e.subscribe(a),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const s=t={callback:n,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){r&&null!==e&&(r=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}())}function c(){s--,n&&0===s&&(n(),n=void 0,r.clear(),r=p)}const l={addNestedSub:function(e){i();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),c())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:a,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,i())},tryUnsubscribe:function(){o&&(o=!1,c())},getListeners:()=>r};return l}(s);return{store:s,subscription:e,getServerState:r?()=>r:void 0}},[s,r]),a=u.useMemo(()=>s.getState(),[s]);m(()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),a!==s.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[o,a]);const i=n||v;return u.createElement(i.Provider,{value:o},t)};function b(e=v){return function(){return u.useContext(e)}}var x=b();function k(e=v){const t=e===v?x:b(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var $=k();function E(e=v){const t=e===v?$:k(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var S=E(),T=(e,t)=>e===t;function I(e=v){const t=e===v?x:b(e),n=(e,n={})=>{const{equalityFn:r=T}="function"==typeof n?{equalityFn:n}:n,s=t(),{store:o,subscription:a,getServerState:i}=s,c=(u.useRef(!0),u.useCallback({[e.name]:t=>e(t)}[e.name],[e])),l=(0,d.useSyncExternalStoreWithSelector)(a.addNestedSub,o.getState,i||o.getState,c,r);return u.useDebugValue(l),l};return Object.assign(n,{withTypes:()=>n}),n}var C=I();function P(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var R=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),j=()=>Math.random().toString(36).substring(7).split("").join("."),N={INIT:`@@redux/INIT${j()}`,REPLACE:`@@redux/REPLACE${j()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${j()}`};function A(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function O(e,t,n){if("function"!=typeof e)throw new Error(P(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(P(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(P(1));return n(O)(e,t)}let r=e,s=t,o=new Map,a=o,i=0,c=!1;function l(){a===o&&(a=new Map,o.forEach((e,t)=>{a.set(t,e)}))}function u(){if(c)throw new Error(P(3));return s}function d(e){if("function"!=typeof e)throw new Error(P(4));if(c)throw new Error(P(5));let t=!0;l();const n=i++;return a.set(n,e),function(){if(t){if(c)throw new Error(P(6));t=!1,l(),a.delete(n),o=null}}}function p(e){if(!A(e))throw new Error(P(7));if(void 0===e.type)throw new Error(P(8));if("string"!=typeof e.type)throw new Error(P(17));if(c)throw new Error(P(9));try{c=!0,s=r(s,e)}finally{c=!1}return(o=a).forEach(e=>{e()}),e}return p({type:N.INIT}),{dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(P(10));r=e,p({type:N.REPLACE})},[R]:function(){const e=d;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(P(11));function n(){const e=t;e.next&&e.next(u())}return n(),{unsubscribe:e(n)}},[R](){return this}}}}}function z(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}function M(e){return({dispatch:t,getState:n})=>r=>s=>"function"==typeof s?s(t,n,e):r(s)}var D=M(),L=M,q=Symbol.for("immer-nothing"),U=Symbol.for("immer-draftable"),F=Symbol.for("immer-state");function H(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var V=Object.getPrototypeOf;function B(e){return!!e&&!!e[F]}function W(e){return!!e&&(K(e)||Array.isArray(e)||!!e[U]||!!e.constructor?.[U]||Y(e)||ee(e))}var Z=Object.prototype.constructor.toString();function K(e){if(!e||"object"!=typeof e)return!1;const t=V(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Z}function G(e,t){0===J(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function J(e){const t=e[F];return t?t.type_:Array.isArray(e)?1:Y(e)?2:ee(e)?3:0}function X(e,t){return 2===J(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Q(e,t,n){const r=J(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Y(e){return e instanceof Map}function ee(e){return e instanceof Set}function te(e){return e.copy_||e.base_}function ne(e,t){if(Y(e))return new Map(e);if(ee(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=K(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[F];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const s=n[r],o=t[s];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(V(e),t)}{const t=V(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function re(e,t=!1){return oe(e)||B(e)||!W(e)||(J(e)>1&&Object.defineProperties(e,{set:{value:se},add:{value:se},clear:{value:se},delete:{value:se}}),Object.freeze(e),t&&Object.values(e).forEach(e=>re(e,!0))),e}function se(){H(2)}function oe(e){return Object.isFrozen(e)}var ae,ie={};function ce(e){const t=ie[e];return t||H(0),t}function le(){return ae}function ue(e,t){t&&(ce("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function de(e){pe(e),e.drafts_.forEach(fe),e.drafts_=null}function pe(e){e===ae&&(ae=e.parent_)}function he(e){return ae={drafts_:[],parent_:ae,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fe(e){const t=e[F];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function me(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[F].modified_&&(de(t),H(4)),W(e)&&(e=ge(t,e),t.parent_||_e(t,e)),t.patches_&&ce("Patches").generateReplacementPatches_(n[F].base_,e,t.patches_,t.inversePatches_)):e=ge(t,n,[]),de(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==q?e:void 0}function ge(e,t,n){if(oe(t))return t;const r=t[F];if(!r)return G(t,(s,o)=>ye(e,r,t,s,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return _e(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let s=t,o=!1;3===r.type_&&(s=new Set(t),t.clear(),o=!0),G(s,(s,a)=>ye(e,r,t,s,a,n,o)),_e(e,t,!1),n&&e.patches_&&ce("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function ye(e,t,n,r,s,o,a){if(B(s)){const a=ge(e,s,o&&t&&3!==t.type_&&!X(t.assigned_,r)?o.concat(r):void 0);if(Q(n,r,a),!B(a))return;e.canAutoFreeze_=!1}else a&&n.add(s);if(W(s)&&!oe(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ge(e,s),t&&t.scope_.parent_||"symbol"==typeof r||!(Y(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))||_e(e,s)}}function _e(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&re(t,n)}var ve={get(e,t){if(t===F)return e;const n=te(e);if(!X(n,t))return function(e,t,n){const r=xe(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!W(r)?r:r===be(e.base_,t)?($e(e),e.copy_[t]=Ee(r,e)):r},has:(e,t)=>t in te(e),ownKeys:e=>Reflect.ownKeys(te(e)),set(e,t,n){const r=xe(te(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=be(te(e),t),a=r?.[F];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((s=n)===(o=r)?0!==s||1/s==1/o:s!=s&&o!=o)&&(void 0!==n||X(e.base_,t)))return!0;$e(e),ke(e)}var s,o;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==be(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,$e(e),ke(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=te(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){H(11)},getPrototypeOf:e=>V(e.base_),setPrototypeOf(){H(12)}},we={};function be(e,t){const n=e[F];return(n?te(n):e)[t]}function xe(e,t){if(!(t in e))return;let n=V(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=V(n)}}function ke(e){e.modified_||(e.modified_=!0,e.parent_&&ke(e.parent_))}function $e(e){e.copy_||(e.copy_=ne(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function Ee(e,t){const n=Y(e)?ce("MapSet").proxyMap_(e,t):ee(e)?ce("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:le(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,o=ve;n&&(s=[r],o=we);const{revoke:a,proxy:i}=Proxy.revocable(s,o);return r.draft_=i,r.revoke_=a,i}(e,t);return(t?t.scope_:le()).drafts_.push(n),n}function Se(e){if(!W(e)||oe(e))return e;const t=e[F];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ne(e,t.scope_.immer_.useStrictShallowCopy_)}else n=ne(e,!0);return G(n,(e,t)=>{Q(n,e,Se(t))}),t&&(t.finalized_=!1),n}G(ve,(e,t)=>{we[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),we.deleteProperty=function(e,t){return we.set.call(this,e,t,void 0)},we.set=function(e,t,n){return ve.set.call(this,e[0],t,n,e[0])};var Te=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...s){return r.produce(e,e=>t.call(this,e,...s))}}let r;if("function"!=typeof t&&H(6),void 0!==n&&"function"!=typeof n&&H(7),W(e)){const s=he(this),o=Ee(e,void 0);let a=!0;try{r=t(o),a=!1}finally{a?de(s):pe(s)}return ue(s,n),me(r,s)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===q&&(r=void 0),this.autoFreeze_&&re(r,!0),n){const t=[],s=[];ce("Patches").generateReplacementPatches_(e,r,t,s),n(t,s)}return r}H(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,r;return[this.produce(e,t,(e,t)=>{n=e,r=t}),n,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;W(e)||H(8),B(e)&&(B(t=e)||H(10),e=Se(t));const n=he(this),r=Ee(e,void 0);return r[F].isManual_=!0,pe(n),r}finishDraft(e,t){const n=e&&e[F];n&&n.isManual_||H(9);const{scope_:r}=n;return ue(r,t),me(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=ce("Patches").applyPatches_;return B(e)?r(e,t):this.produce(e,e=>r(e,t))}},Ie=Te.produce,Ce="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?z:z.apply(null,arguments)};function Pe(e,t){function n(...n){if(t){let r=t(...n);if(!r)throw new Error(He(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>function(e){return A(e)&&"type"in e&&"string"==typeof e.type}(t)&&t.type===e,n}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var Re=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function je(e){return W(e)?Ie(e,()=>{}):e}function Ne(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var Ae=e=>t=>{setTimeout(t,e)};function Oe(e){const t={},n=[];let r;const s={addCase(e,n){const r="string"==typeof e?e:e.type;if(!r)throw new Error(He(28));if(r in t)throw new Error(He(29));return t[r]=n,s},addAsyncThunk:(e,r)=>(r.pending&&(t[e.pending.type]=r.pending),r.rejected&&(t[e.rejected.type]=r.rejected),r.fulfilled&&(t[e.fulfilled.type]=r.fulfilled),r.settled&&n.push({matcher:e.settled,reducer:r.settled}),s),addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),s),addDefaultCase:e=>(r=e,s)};return e(s),[t,n,r]}var ze=Symbol.for("rtk-slice-createasyncthunk");function Me(e,t){return`${e}/${t}`}function De({creators:e}={}){const t=e?.asyncThunk?.[ze];return function(e){const{name:n,reducerPath:r=n}=e;if(!n)throw new Error(He(11));const s=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(s),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},i={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error(He(12));if(n in a.sliceCaseReducersByType)throw new Error(He(13));return a.sliceCaseReducersByType[n]=t,i},addMatcher:(e,t)=>(a.sliceMatchers.push({matcher:e,reducer:t}),i),exposeAction:(e,t)=>(a.actionCreators[e]=t,i),exposeCaseReducer:(e,t)=>(a.sliceCaseReducersByName[e]=t,i)};function c(){const[t={},n=[],r]="function"==typeof e.extraReducers?Oe(e.extraReducers):[e.extraReducers],s={...t,...a.sliceCaseReducersByType};return function(e){let t,[o,i,c]=Oe(e=>{for(let t in s)e.addCase(t,s[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)});if("function"==typeof e)t=()=>je(e());else{const n=je(e);t=()=>n}function l(e=t(),n){let r=[o[n.type],...i.filter(({matcher:e})=>e(n)).map(({reducer:e})=>e)];return 0===r.filter(e=>!!e).length&&(r=[c]),r.reduce((e,t)=>{if(t){if(B(e)){const r=t(e,n);return void 0===r?e:r}if(W(e))return Ie(e,e=>t(e,n));{const r=t(e,n);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e},e)}return l.getInitialState=t,l}(e.initialState)}o.forEach(r=>{const o=s[r],a={reducerName:r,type:Me(n,r),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function({type:e,reducerName:t,createNotation:n},r,s){let o,a;if("reducer"in r){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(r))throw new Error(He(17));o=r.reducer,a=r.prepare}else o=r;s.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,a?Pe(e,a):Pe(e))}(a,o,i):function({type:e,reducerName:t},n,r,s){if(!s)throw new Error(He(18));const{payloadCreator:o,fulfilled:a,pending:i,rejected:c,settled:l,options:u}=n,d=s(e,o,u);r.exposeAction(t,d),a&&r.addCase(d.fulfilled,a),i&&r.addCase(d.pending,i),c&&r.addCase(d.rejected,c),l&&r.addMatcher(d.settled,l),r.exposeCaseReducer(t,{fulfilled:a||Ue,pending:i||Ue,rejected:c||Ue,settled:l||Ue})}(a,o,i,t)});const l=e=>e,u=new Map,d=new WeakMap;let p;function h(e,t){return p||(p=c()),p(e,t)}function f(){return p||(p=c()),p.getInitialState()}function m(t,n=!1){function r(e){let s=e[t];return void 0===s&&n&&(s=Ne(d,r,f)),s}function s(t=l){const r=Ne(u,n,()=>new WeakMap);return Ne(r,t,()=>{const r={};for(const[s,o]of Object.entries(e.selectors??{}))r[s]=Le(o,t,()=>Ne(d,t,f),n);return r})}return{reducerPath:t,getSelectors:s,get selectors(){return s(r)},selectSlice:r}}const g={name:n,reducer:h,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:f,...m(r),injectInto(e,{reducerPath:t,...n}={}){const s=t??r;return e.inject({reducerPath:s,reducer:h},n),{...g,...m(s,!0)}}};return g}}function Le(e,t,n,r){function s(s,...o){let a=t(s);return void 0===a&&r&&(a=n()),e(a,...o)}return s.unwrapped=e,s}var qe=De();function Ue(){}var{assign:Fe}=Object;function He(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}Symbol.for("rtk-state-proxy-original");var Ve=n(5495);const Be=()=>window.NewfoldRuntime?.capabilities?.canAccessAIHelpCenter||!1,We={updateHelpVisible:e=>{localStorage.setItem("helpVisible",e?"true":"false")},getHelpVisible:()=>"true"===localStorage.getItem("helpVisible"),persistResult:(e,t,n,r=null,s)=>{if(!e||""===e.trim())return;const o={searchInput:n,resultContent:e,postId:t,feedbackSubmitted:r,hasLaunchedFromTooltip:s};localStorage.setItem("helpResultContent",JSON.stringify(o))},persistSearchInput:e=>{localStorage.setItem("searchInput",e)},clear:()=>{localStorage.removeItem("helpResultContent"),localStorage.removeItem("helpPostId"),localStorage.removeItem("searchInput")},getResultInfo:()=>{const e=localStorage.getItem("helpResultContent");return e&&Ge(e)?JSON.parse(e):[]},getSearchInput:()=>localStorage.getItem("searchInput"),getFeatureFlag:e=>localStorage.getItem(e),clearSearchInput(){localStorage.removeItem("searchInput")},setFeatureFlag(e,t){localStorage.setItem(e,t)},updateFeedbackStatus:()=>{const e=We.getResultInfo();e.feedbackSubmitted=!0,localStorage.setItem("helpResultContent",JSON.stringify(e))}},Ze=(e,t)=>{const n=new i.HiiveEvent("wonder_help",e,t,"wonder_help");i.HiiveAnalytics.send(n)},Ke=(t,n=100,r=!1)=>{const[s,o]=(0,e.useState)(""),[a,i]=(0,e.useState)(!1);return(0,e.useEffect)(()=>{if(!t)return o(""),void i(!1);if(r){const e=t.trim().split(" ").filter(Boolean);let r=0;o(e[0]),i(!1);const s=setInterval(()=>{r<e.length-1?(r++,o(t=>t+" "+e[r])):(clearInterval(s),i(!0))},n);return()=>clearInterval(s)}o(t),i(!0)},[t,n,r]),{displayedText:s,isComplete:a}},Ge=e=>{try{return JSON.parse(e),!0}catch(e){return!1}};function Je(e=""){return e.replace(/\n{2,}/g,"\n").replace(/^\n+|\n+$/g,"").replace(/\n/g,"<br />").replace(/(<ul[^>]*>)[\s\n\r]*<br\s*\/?>/g,"$1").replace(/<br\s*\/?>\s*(?=<li)/g,"").replace(/<br\s*\/?>\s*(<\/ul>)/g,"$1")}function Xe(e){let t;const n=document.querySelector(".nfd-hc-modal__header"),r=document.querySelector("#nfdHelpcenterInputWrapper");if(n&&r){const e=n.offsetHeight+r.offsetHeight+32;t=window.innerHeight-e}e?.current&&(e.current.style.height=`${t}px`)}const Qe=We.getResultInfo(),Ye=qe({name:"helpcenter",initialState:{visible:!1,helpEnabled:!1,noResult:!1,isNewResult:!1,searchInput:"",isLoading:!1,loadingQuery:null,loadingIndex:null,resultContent:Qe,multiResults:{},showSuggestions:!1,initComplete:!1,disliked:!1,isFooterVisible:!0,helpResultHistory:[],triggerSearch:!1,showBackButton:!1,viaLinkSearch:[],hasLaunchedFromTooltip:Qe?.hasLaunchedFromTooltip||!1,floatingIconVisibility:!1},reducers:{setIsTooltipLoading:e=>{e.isLoading=!0,e.isFooterVisible=!1,e.hasLaunchedFromTooltip=!0},updateIsTooltipLoading:e=>{e.isLoading=!1},clearViaLinkSearch:e=>{e.showBackButton=!1,e.viaLinkSearch=[]},initialDataSet:(e,t)=>{e.isFooterVisible=t.payload.isFooterVisible,e.searchInput=t.payload.SearchInput},updateHelpResultHistoryFromDB:(e,t)=>{e.helpResultHistory=t.payload},updateHelpResultHistory:(e,t)=>{e.helpResultHistory.some(e=>e.postId===t.payload.postId)||(3===e.helpResultHistory.length&&e.helpResultHistory.shift(),e.helpResultHistory.push(t.payload)),e.searchInput||(10===e.viaLinkSearch.length&&e.viaLinkSearch.shift(),e.viaLinkSearch.push(t.payload))},setDisliked:(e,t)=>{e.disliked=t.payload},setFeeback:(e,t)=>{const n=e.helpResultHistory.findIndex(e=>e.postId===t.payload.postId);n>=0&&(e.helpResultHistory[n].feedbackSubmitted=t.payload.feedbackStatus)},setIsFooterVisible:(e,t)=>{e.isFooterVisible=t.payload},setNoResult:e=>{e.noResult=!0,e.isFooterVisible=!0},updateHelpEnabled:(e,t)=>{e.helpEnabled=t.payload},updateVisibility:(e,t)=>{e.visible=t.payload},updateResultContent:(e,t)=>{e.noResult=!1,e.resultContent=t.payload,e.viaLinkSearch.push(t.payload),e.showBackButton=!0,e.isFooterVisible=!1},resetState:e=>{e.resultContent=[],e.disliked=!1,e.noResult=!1,e.viaLinkSearch=[],e.showBackButton=!1,e.hasLaunchedFromTooltip=!1,e.searchInput="",e.floatingIconVisibility=!1},setNewSearchResult:(e,t)=>{e.isNewResult=t.payload,e.searchInput=""},updateMultiResults:(e,t)=>{e.multiResults=t.payload.results,e.showSuggestions=t.payload.suggestions},updateInitComplete:(e,t)=>{e.initComplete=t.payload},updateSearchInput:(e,t)=>{e.noResult=!1,e.errorMsg="",e.searchInput=t.payload,e.hasLaunchedFromTooltip=!1},searchInputCatch:e=>{e.noResult=!0,e.isNewResult=!0,e.isFooterVisible=!0},searchInputFinally:e=>{e.searchInput="",e.isLoading=!1,e.loadingIndex=null,e.showSuggestions=!1},setAIResultLoading:e=>{e.isLoading=!0,e.showSuggestions=!1,e.loadingQuery=e.searchInput},setTriggerSearch:(e,t)=>{e.triggerSearch=t.payload},goBackInHistory:e=>{e.hasLaunchedFromTooltip&&(e.hasLaunchedFromTooltip=!1),e.viaLinkSearch.length>=1&&(e.viaLinkSearch.pop(),e.resultContent=e.viaLinkSearch[e.viaLinkSearch.length-1],e.isNewResult=!1),e.viaLinkSearch.length<1&&(e.showBackButton=!1,e.resultContent=[],e.disliked=!1,e.noResult=!1,e.viaLinkSearch=[],e.isFooterVisible=!0),e.hasLaunchedFromTooltip&&(e.hasLaunchedFromTooltip=!1)},setShowBackButton:(e,t)=>{e.showBackButton=t.payload},updateFloatingIconVisibilty:(e,t)=>{e.floatingIconVisibility=t.payload}}}),et=Ye.actions,tt=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:s=!0}=e??{};let o=new Re;return t&&("boolean"==typeof t?o.push(D):o.push(L(t.extraArgument))),o},{reducer:n,middleware:r,devTools:s=!0,duplicateMiddlewareCheck:o=!0,preloadedState:a,enhancers:i}=e||{};let c,l;if("function"==typeof n)c=n;else{if(!A(n))throw new Error(He(1));c=function(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const s=t[r];"function"==typeof e[s]&&(n[s]=e[s])}const r=Object.keys(n);let s;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if(void 0===n(void 0,{type:N.INIT}))throw new Error(P(12));if(void 0===n(void 0,{type:N.PROBE_UNKNOWN_ACTION()}))throw new Error(P(13))})}(n)}catch(e){s=e}return function(e={},t){if(s)throw s;let o=!1;const a={};for(let s=0;s<r.length;s++){const i=r[s],c=n[i],l=e[i],u=c(l,t);if(void 0===u)throw t&&t.type,new Error(P(14));a[i]=u,o=o||u!==l}return o=o||r.length!==Object.keys(e).length,o?a:e}}(n)}l="function"==typeof r?r(t):t();let u=z;s&&(u=Ce({trace:!1,..."object"==typeof s&&s}));const d=function(...e){return t=>(n,r)=>{const s=t(n,r);let o=()=>{throw new Error(P(15))};const a={getState:s.getState,dispatch:(e,...t)=>o(e,...t)},i=e.map(e=>e(a));return o=z(...i)(s.dispatch),{...s,dispatch:o}}}(...l),p=(e=>function(t){const{autoBatch:n=!0}=t??{};let r=new Re(e);return n&&r.push(((e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let s=!0,o=!1,a=!1;const i=new Set,c="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ae(10):"callback"===e.type?e.queueNotification:Ae(e.timeout),l=()=>{a=!1,o&&(o=!1,i.forEach(e=>e()))};return Object.assign({},r,{subscribe(e){const t=r.subscribe(()=>s&&e());return i.add(e),()=>{t(),i.delete(e)}},dispatch(e){try{return s=!e?.meta?.RTK_autoBatch,o=!s,o&&(a||(a=!0,c(l))),r.dispatch(e)}finally{s=!0}}})})("object"==typeof n?n:void 0)),r})(d);return O(c,a,u(..."function"==typeof i?i(p):p()))}({reducer:{helpcenter:Ye.reducer}}),nt=window.wp.i18n;var rt,st,ot,at,it;function ct(){return ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ct.apply(null,arguments)}var lt=function(e){return u.createElement("svg",ct({xmlns:"http://www.w3.org/2000/svg",width:27,height:27,fill:"none"},e),rt||(rt=u.createElement("path",{stroke:"#0F172A",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M20.25 11.511c.884.285 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193q-.51.041-1.02.072v3.091l-3-3q-2.031 0-4.02-.163a2.1 2.1 0 0 1-.825-.242m9.345-8.334a2 2 0 0 0-.476-.095 48.7 48.7 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V9.637c0-1.621-1.152-3.026-2.76-3.235A48.5 48.5 0 0 0 11.25 6c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235q.865.113 1.74.194V24l4.155-4.155"})),st||(st=u.createElement("circle",{cx:19,cy:8,r:7,fill:"#4F73C6",stroke:"#fff",strokeWidth:2})),ot||(ot=u.createElement("circle",{cx:16,cy:8,r:1,fill:"#fff"})),at||(at=u.createElement("circle",{cx:19,cy:8,r:1,fill:"#fff"})),it||(it=u.createElement("circle",{cx:22,cy:8,r:1,fill:"#fff"})))};const ut=()=>C(e=>e.helpcenter),dt=window.ReactJSXRuntime,pt=()=>{const e=S(),{floatingIconVisibilty:t,visible:n,hasLaunchedFromTooltip:r}=ut(),s=()=>{E_(!0),e(et.updateFloatingIconVisibilty(!1))};return t||!n&&r?(0,dt.jsxs)("div",{className:"nfd-hc-floating-icon",role:"button",tabIndex:0,"aria-label":"Open Help Center",onClick:s,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),s())},children:[(0,dt.jsx)(lt,{}),(0,dt.jsx)("p",{children:(0,nt.__)("Help","wp-module-help-center")})]}):null};var ht;function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ft.apply(null,arguments)}var mt,gt=function(e){return u.createElement("svg",ft({xmlns:"http://www.w3.org/2000/svg",width:17,height:17,fill:"none"},e),ht||(ht=u.createElement("path",{fill:"#A1A7B6",d:"M5.338 4.437a.637.637 0 1 0-.901.901L7.598 8.5l-3.161 3.162a.638.638 0 0 0 .901.901L8.5 9.402l3.162 3.161a.638.638 0 0 0 .901-.901L9.402 8.5l3.161-3.162a.638.638 0 0 0-.901-.901L8.5 7.598z"})))};function yt(){return yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yt.apply(null,arguments)}var _t,vt,wt,bt,xt,kt,$t,Et,St,Tt,It,Ct,Pt,Rt,jt,Nt,At,Ot,zt,Mt,Dt,Lt,qt,Ut,Ft,Ht,Vt,Bt,Wt,Zt,Kt,Gt,Jt,Xt,Qt,Yt,en,tn,nn,rn,sn=function(e){return u.createElement("svg",yt({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),mt||(mt=u.createElement("path",{stroke:"#0F172A",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193q-.51.041-1.02.072v3.091l-3-3q-2.031 0-4.02-.163a2.1 2.1 0 0 1-.825-.242m9.345-8.334a2 2 0 0 0-.476-.095 48.6 48.6 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.5 48.5 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235q.865.113 1.74.194V21l4.155-4.155"})))};function on(){return on=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},on.apply(null,arguments)}var an=function(e){return u.createElement("svg",on({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fillRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2,clipRule:"evenodd",viewBox:"0 0 1269 804"},e),_t||(_t=u.createElement("path",{fill:"#acd0ff",d:"M0 37.5h1268.2v766H0z"})),vt||(vt=u.createElement("path",{fill:"#acd0ff",fillRule:"nonzero",d:"m634.1 0 287 248.5H347L634.2 0Z"})),wt||(wt=u.createElement("ellipse",{cx:84.5,cy:79.5,fill:"#d6e8ff",fillOpacity:.3,rx:84.5,ry:79.5,transform:"matrix(4 0 0 4 180 83.6)"})),bt||(bt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1207 767.8c0 4.3-60.3 22.2-101.1 3.7-9.4-4.2-8-.2-18.8.6-18.4 1.3-39.3-.5-39.3-4 0-3.7 22.4-6.5 37-6.3 18.8.2 41.5-4.6 66.8-4.6 47 0 55.4 6.3 55.4 10.6"})),xt||(xt=u.createElement("path",{fill:"#fff",d:"M1159 671.6h4.3v94.9h-4.3z"})),kt||(kt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1163.8 767.4h-5.6v-96.3h5.6zm-4.4-1.2h3.2v-93.8h-3.2z"})),$t||($t=u.createElement("path",{fill:"#fff",fillRule:"nonzero",d:"M1148.3 766.5a18.9 18.9 0 0 1 25.4 0c2 2.7-26 4-25.4 0"})),Et||(Et=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1159.8 769.7c-4.5 0-8.7-.4-10.6-1.3-1.4-.6-1.6-1.4-1.5-2v-.2l.2-.1a19.5 19.5 0 0 1 26.2 0 1 1 0 0 1 0 1.3c-1 1.4-7.9 2.3-14.3 2.3m-10.8-3 .7.6c4.8 2 21.4 1 23.4-.5a18.3 18.3 0 0 0-24.1 0Z"})),St||(St=u.createElement("path",{fill:"#fff",fillRule:"nonzero",d:"M1175.2 671a18.9 18.9 0 0 1-28.4 0z"})),Tt||(Tt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1174.6 670.9c-2.7 3-6.2 5-10.1 6a17.8 17.8 0 0 1-17.1-5.9l-.5.5h28.4c.2 0 .7 0 .6-.4 0-.3-.6-.4-.8-.4h-28.4c-.2 0-.8.1-.5.5a20 20 0 0 0 29.7.1c.3-.4-1-.8-1.3-.4"})),It||(It=u.createElement("path",{fill:"#fff",d:"M1119 664.7h86.4v6H1119z"})),Ct||(Ct=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1206.2 671.4h-87.6V664h87.6zm-86.4-1.3h85.2v-4.9h-85.2v5Z"})),Pt||(Pt=u.createElement("path",{fill:"#e70070",fillRule:"nonzero",d:"M1046.4 681.9v-.2l1.3-.9.1.2c-.5.2-1 .5-1.4.9m-14.5 9.8v-.1c5-2.3 7.8-4.6 10.5-6.8l2.9-2.3.1.1-2.9 2.3c-2.7 2.2-5.5 4.5-10.6 6.8"})),Rt||(Rt=u.createElement("path",{fill:"#fff",fillRule:"nonzero",d:"M1026.4 693.8c15.8-5.5 15.4-11 26.7-15.5a38 38 0 0 1 22.7-2.3c27.5 5.8 39.3 10.6 49.5 19.3 23 19.7-12.7 57-10.5 60s4.6 7.2 7.7 8.7c1.3.7 2.5 1.3 3.6 1.7.8.4.5 2.5-.4 2.5h-6.9c-3.9 0-7.5-4.7-10.7-6-3.2-1.4 1.2-5.9 1.2-7.8 0-11.8 1.6-34.4-7.3-36.3-16.3-3.5-31.6 2.7-48.8 2.4a46.3 46.3 0 0 1-41.3-24.2s4 1.2 14.5-2.5"})),jt||(jt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1123.1 768.9h-4.3c-2.6 0-5-2-7.3-3.7a18 18 0 0 0-3.6-2.5 2.3 2.3 0 0 1-1.4-1.4c-.5-1.3.4-3 1.2-4.5.5-1 1-1.9 1-2.4v-4.8c.2-11.7.5-29.3-6.9-31-9.4-2-18.5-.6-28.1.7-6.6 1-13.4 2-20.5 1.8a52 52 0 0 1-24-6.3 43.3 43.3 0 0 1-17.8-18.2l-.7-1.4 1.4.5s4 1.1 14-2.4a45 45 0 0 0 16-9 39.5 39.5 0 0 1 33.9-9c27.2 5.9 39.2 10.6 49.7 19.5 7.6 6.6 9.7 15.7 6.4 27.4-2.8 9.6-8.8 19-12.7 25.3-2.1 3.3-4.3 6.7-4.1 7.4l1.2 1.7c1.8 2.7 4 5.7 6.4 6.9 1 .6 2.3 1.1 3.5 1.7.8.3 1 1.4.7 2.2-.1.9-.7 1.5-1.3 1.5zm-31.8-52.5c3.7 0 7.3.3 10.8 1 8.3 1.9 8 19.4 7.9 32.2v4.8c0 .8-.6 1.8-1.2 3s-1.5 2.7-1.2 3.5l.3.4.5.3c1.2.5 2.5 1.5 3.9 2.6 2.1 1.7 4.3 3.4 6.6 3.4h6.8c.2-.2.2-.5.2-.7v-.6l-3.6-1.7a21.7 21.7 0 0 1-6.8-7.3l-1.2-1.7c-.8-1 .4-3 4-8.8 8.2-12.8 23.3-36.7 6.6-51-10.3-8.9-22.2-13.5-49.2-19.2a38 38 0 0 0-22.4 2.3c-5 2-7.6 4-10.5 6.4-3.6 3-7.4 6-16.2 9.1a35 35 0 0 1-13.5 2.7c3.8 7 9.6 12.8 16.6 16.6 7.2 4 15.3 6 23.5 6.2 7 .1 13.8-.8 20.3-1.8 6-.9 12-1.7 17.8-1.7"})),Nt||(Nt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1068.4 675.2s-16.9-13-15.9-19.6c0 0 17.8 17.6 33.8 18.7a63 63 0 0 0 27.1-3.5c6.8 3.7 11.8 9.8 11.8 15 0 1.8-.8 4.5-2.1 7.7-10.3-7.5-29.2-15.2-54.7-18.3"})),At||(At=u.createElement("path",{fill:"#fff",fillRule:"nonzero",d:"M1080.6 753c-3.1 3.7-5 6.3-4.3 7 2.7 2.4 13 6.8 13 6.8a.8.8 0 0 1 .4 1l-.3.4-.5.2h-6.8c-1.8-.2-3-.7-4.7-.7-2.8 0-5.6.3-8.4.6a2.2 2.2 0 0 1-2.2-3c.7-1.8 2.3-4 3.3-7.2l2.5-7.5z"})),Ot||(Ot=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1085.2 769a53 53 0 0 1-7.7-.6q-4.2 0-8.4.6h-.1a2.9 2.9 0 0 1-2.7-3.8c.3-1 .8-2 1.3-2.8l2-4.5 2.4-7.5.2-.6 9.5 2.8-.6.7c-3.9 4.6-4.3 6-4.3 6.2a75 75 0 0 0 12.7 6.7h.1c.3.2.5.5.6.8v.9a1.5 1.5 0 0 1-1.4 1s-1.6.2-3.6.2Zm-7.7-1.9 2.4.3 2.3.4h6.8v-.2l.1-.1v-.1c-1-.4-10.6-4.5-13.2-7-.8-.7-.4-2.1 3.7-7.1l-6.5-2-2.3 7a33 33 0 0 1-2.1 4.7c-.5.8-.9 1.7-1.2 2.6l-.1.8a1.6 1.6 0 0 0 .8 1.2l.8.2a79 79 0 0 1 8.5-.7"})),zt||(zt=u.createElement("path",{fill:"#fff",fillRule:"nonzero",d:"M1073.6 591.1c-2.8-3.7-3.6-12.7 3.8-16.3 11.2-5.5 24.9 9 17.5 17-3.2 3.6.1 7.6-.8 9.2-1 1.6-2.3 1-3.3 1.5-1.9 1-3 3.7-6 4.3-3.3.8-5.3-2.7-6.4-3-3.2-1-12.3 1.8-7 14.8-23.6 2.5-31.4-11.5-31.4-11.5 7.5-4.2 16.7.5 33.6-16"})),Mt||(Mt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1066 619.5a35 35 0 0 1-19.5-5.2 22 22 0 0 1-7-7l-.3-.4.5-.3c2.5-1.4 5-1.9 8-2.4 6.2-1 14-2.4 25-13.1a13 13 0 0 1-1.4-9.6 10.6 10.6 0 0 1 5.8-7.3 12.8 12.8 0 0 1 10-.5 17 17 0 0 1 7.9 5.7c3.3 4.5 3.5 9.4.4 12.9-1.9 2-1.4 4.2-.9 6 .3 1.2.6 2.2.1 3a2.7 2.7 0 0 1-2.6 1.5l-1 .2-1.7 1.6a8.5 8.5 0 0 1-4.4 2.9c-2.6.5-4.5-1.2-5.7-2.3a5 5 0 0 0-1-.8c-1.3-.5-4.2 0-6 2-1.7 1.8-3 5.3-.3 12l.3.7-.9.1-5.4.3Zm-25.1-12.2c1.7 2.5 10 12.5 29.5 10.8-2.5-6.8-1-10.6.8-12.5a7.8 7.8 0 0 1 7.4-2.4c.6.2 1 .6 1.5 1 1 1 2.6 2.5 4.6 2 1.7-.3 2.7-1.4 3.7-2.5.6-.7 1.3-1.2 2-1.7.5-.3 1-.4 1.5-.4.7 0 1.2-.1 1.7-.9.2-.3 0-1.2-.3-2-.5-2-1.1-4.7 1.2-7.3 3.2-3.5 1.8-8.1-.5-11.2-4.7-6.2-11.7-7.1-16.4-4.9a9.4 9.4 0 0 0-5.1 6.5c-.9 3.6.2 7.2 1.6 9l.3.4-.4.4a43 43 0 0 1-26 13.8c-2.7.5-5 .9-7.1 2Z"})),Dt||(Dt=u.createElement("path",{fill:"#fff",fillRule:"nonzero",d:"M1040 607s7.8 14 31.3 11.6a61 61 0 0 0 19.4 29.2 36 36 0 0 0 8.3 5.2c14.8 6.7 15.2-1.2 34.5 1.2 12.2 1.5 15.5 6.5 15.2 8.5h-8.6a9.3 9.3 0 0 0-6-2.3c-4.1 0-10.5 4.2-16.3 7.7a49.1 49.1 0 0 1-40.2 3.9c-12-5-25.1-16.4-25.1-16.4 0 9 15.9 19.6 15.9 19.6-7 .1-10.4 1.1-15.3 3-11.3 4.5-10.9 10-26.7 15.6-10.5 3.7-14.5 2.4-14.5 2.4-3.8-8-7.5-19-7.5-31.5 0-23.7 19.6-46.7 35.6-57.6Z"})),Lt||(Lt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1014 697c-.7.1-1.5 0-2.3-.2h-.2l-.1-.3c-3.5-7-7.6-18.3-7.6-31.8 0-23 18.6-46.3 35.8-58.1l1-.7v1c.9 1.4 9 13.3 30.6 11h.5l.2.5c4.3 11.9 8.7 20 19.2 29a35 35 0 0 0 8.2 5 22 22 0 0 0 16.6 2c4-.9 9-1.9 17.6-.8 9.6 1.1 13.4 4.3 14.8 6.2.7 1 1.1 2.1 1 3v.5h-9.4l-.2-.2a8.7 8.7 0 0 0-5.5-2c-3.7 0-9 3.2-14.3 6.4l-1.7 1a49.9 49.9 0 0 1-40.8 4c-10-4-20.7-12.5-24.1-15.4 1.5 8.2 15.3 17.5 15.4 17.6l1.6 1-2 .1c-6.6.2-10 1-15 3a35 35 0 0 0-10.4 6.5c-3.7 3-7.4 6-16.3 9.1a38.7 38.7 0 0 1-12.5 2.7Zm-1.6-1.3c1 .2 5 .6 13.8-2.5 8.6-3 12.3-6 15.9-8.9 2.9-2.4 5.6-4.6 10.8-6.6 4.5-1.8 8-2.8 13.6-3-4-3-14.6-11.5-14.6-19v-1.4l1 .9c.1 0 13.2 11.4 25 16.2 5 2.1 23.5 6 39.6-3.9l1.7-1c5.4-3.3 11-6.7 15-6.7 2.2 0 4.4.8 6.1 2.3h7.8a4 4 0 0 0-.8-1.6c-1-1.3-4.4-4.5-13.9-5.7-8.5-1-13.2 0-17.3.8-5 1-9 1.8-17.3-2-3-1.4-6-3.1-8.5-5.3-10.6-9-15-17.2-19.4-29-14.5 1.3-23-3.3-27.7-7.5a21.3 21.3 0 0 1-3.4-3.8c-16.8 11.7-34.8 34.3-34.8 56.7 0 13 4 24 7.4 31m106.9 50.5-8.6-2.2-1.2-.3c-.5 0-.7.7-.2.8l8.6 2.2 1.2.3h.2l.2-.3a.4.4 0 0 0-.2-.5"})),qt||(qt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1087.7 645.4a29.3 29.3 0 0 0-13.3 15 28.8 28.8 0 0 0-1.7 10.6l.3.2c.1 0 .2 0 .3-.2l.1-.3a27.6 27.6 0 0 1 14.7-24.6c.5-.2 0-1-.4-.7"})),Ut||(Ut=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1086.6 644.3c-2.4.5-4.6 2-6.4 3.6a25.5 25.5 0 0 0-4.7 5.8 35.2 35.2 0 0 0-3 6.8l-.6 1.8-.5 1.8-.2 1-.2.8-.4 1.9-1.2-.2.5-2 .2-.9.2-.9.6-1.8.6-1.8a27.4 27.4 0 0 1 8.3-12.8c2-1.7 4.2-3 6.7-3.6zm-36.6-26c-2.5-1-4.8-2.3-7-3.8a27.1 27.1 0 0 1-5.7-5.5l.6-.4a26 26 0 0 0 5.4 5.6c2 1.6 4.3 3 6.6 4.1Zm22.1 2.5c-2.6.8-5.3 1.2-8 1 2.7-.2 5.3-.7 7.8-1.6z"})),Ft||(Ft=u.createElement("path",{fill:"#66a8f7",fillRule:"nonzero",d:"M1056.3 648a6.8 6.8 0 1 0 0-13.5 6.8 6.8 0 0 0 0 13.6Zm-16.6-19a5.8 5.8 0 1 0 0-11.6 5.8 5.8 0 0 0 0 11.5Zm-7.8 39.2a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11m-14.2-15.2a4.9 4.9 0 1 0 0-9.8 4.9 4.9 0 0 0 0 9.7Zm33.9 15.6a2.9 2.9 0 1 0 0-5.8 2.9 2.9 0 0 0 0 5.8m-18.1-21.1a2.9 2.9 0 1 0 0-5.7 2.9 2.9 0 0 0 0 5.7m31.6 9.8a3.6 3.6 0 1 0 0-7.2 3.6 3.6 0 0 0 0 7.2m-47.4 25.5a5.6 5.6 0 1 0 0-11.1 5.6 5.6 0 0 0 0 11.1m52.3-48.2a3.2 3.2 0 1 0 0-6.3 3.2 3.2 0 0 0 0 6.3"})),Ht||(Ht=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1074.5 674.4a30.5 30.5 0 0 0-17-.8l-2 .5-1 .3-.6.2-.5.2-2 .9-.9.4-1 .5c-2.4 1.4-4.8 3.1-7.1 4.7l-7.2 5a41.6 41.6 0 0 1-15.9 7 36 36 0 0 1-8.7.5v-.7h4.3a38.3 38.3 0 0 0 12.4-3.3q3.9-1.8 7.5-4.2l7.1-4.8c2.4-1.7 4.8-3.3 7.4-4.7l1-.5.9-.5 2-.8.5-.2.6-.2 1-.3 2.1-.6a31.2 31.2 0 0 1 17.2 1.2zM1102 718c2.4.6 4.1 2.7 5.2 5.7-6.4 7.6-20 21.5-26.6 29.3l-8-2.4c3.6-11 7.2-25.8 9.4-33a61 61 0 0 1 20 .5Z"})),Vt||(Vt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"m1080.9 753.6-9-2.6.1-.6a438 438 0 0 0 6.3-22l3.1-11 .2-.4h.4a62 62 0 0 1 20 .5c2.6.5 4.5 2.6 5.8 6l.1.4-.2.3-12.9 14c-5 5.5-10.3 11.2-13.7 15.2zm-7.5-3.4 7 2c3.4-4 8.6-9.5 13.5-14.8 4.7-5 9.5-10.1 12.6-13.8-1.1-2.9-2.7-4.5-4.7-5a61 61 0 0 0-19.3-.4l-3 10.6c-1.8 6.9-4 14.7-6 21.4Z"})),Bt||(Bt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1038.7 689.5a27.7 27.7 0 0 0 10.5 10.3c2.3 1.1 4.6 2 7 2.5 2.5.5 5 .8 7.5 1 5 .1 10-.4 14.9-1.1l7.5-1 3.7-.4a58 58 0 0 1 11.3-.1c2.6.2 5 .8 7.4 1.9 2.3 1.1 4.3 2.9 5.7 5 1.3 2.3 2.3 4.6 2.8 7.1a54.7 54.7 0 0 1 .5 15c-.5 5.1-1.6 10-3.1 14.8h-.1a84 84 0 0 0 3-22.2c-.1-2.5-.4-5-1-7.4-.5-2.4-1.5-4.7-2.8-6.8l-.5-.8-.6-.7a5 5 0 0 0-1.2-1.3l-.3-.3-1.1-.9-.8-.4-.8-.5c-2.3-1-4.7-1.6-7.1-1.8a47 47 0 0 0-7.5-.2c-5 .3-10 1-15 1.6-4.9.6-10 1.2-15 1a29.8 29.8 0 0 1-14.5-3.7 25.5 25.5 0 0 1-10.6-10.6z"})),Wt||(Wt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1037.6 692.4c1.2 2 2.6 4 4.2 5.8a26 26 0 0 0 12 7.5c2.3.6 4.7 1 7 1.2a66 66 0 0 0 14.4-.8c4.7-.7 9.5-1.5 14.3-2l7.2-.3c2.5 0 4.9.2 7.3.9a13.6 13.6 0 0 1 6.3 3.7l2 3 1.4 3.4c1.7 4.7 2 9.6 1.6 14.4a54.5 54.5 0 0 1-3 14.2h-.2a63.3 63.3 0 0 0 2.5-21.4 29.4 29.4 0 0 0-3-10.2 13.7 13.7 0 0 0-4.6-5.1c-1-.6-2.1-1-3.2-1.3-2.3-.6-4.7-1-7-1-2.5 0-4.9.2-7.3.4-4.7.4-9.5 1.2-14.3 1.9-4.7.7-9.6 1.1-14.4.7a26.9 26.9 0 0 1-23.4-15zm37.4-92.5a3.1 3.1 0 0 0 2.1 3 3.6 3.6 0 0 0 3.7-1 3.2 3.2 0 0 0 .4-3.8 3.2 3.2 0 0 0-3.5-1.4 3.4 3.4 0 0 0-2.7 3.2c0 .3.6 0 .6-.1a2.6 2.6 0 0 1 4.7-1.7 3 3 0 0 1 .3 3.2 2.5 2.5 0 0 1-2.8 1.3 3 3 0 0 1-2.2-2.8c0-.3-.6-.1-.6.1m3.3-3.4a1 1 0 1 0 0-2.1 1 1 0 0 0 0 2Z"})),Zt||(Zt=u.createElement("path",{fill:"#121212",d:"M1140.1 662.1h38.6v1.7h-38.6z"})),Kt||(Kt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1178.5 664.3a1 1 0 1 0 0-2 1 1 0 0 0 0 2"})),Gt||(Gt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"m1196.5 633.7-1.2-.6-15.8 30.7h1.5l15.5-30Z"})),Jt||(Jt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1181 664.4h-1.8l-.3-.3v-.6l15.9-30.7.1-.2a.6.6 0 0 1 .5-.1h.2l1.3.7.3.3v.5l-15.6 30-.2.4zm-.5-1.2h.1l15-29.2v-.1z"})),Xt||(Xt=u.createElement("path",{fill:"#fff",fillRule:"nonzero",d:"m1162.9 662.3 11.2-27.6s16-1.6 21.2-1.6l-14.3 29.2h-18Z"})),Qt||(Qt=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1181 663h-18a.6.6 0 0 1-.5-.3l-.1-.3v-.3l11.2-27.6.2-.3h.3c.7-.1 16.1-1.7 21.3-1.7h.3l.2.2v.6l-14.2 29.3a.6.6 0 0 1-.6.4Zm-17.2-1.3h16.8l13.7-28c-5.4.2-17.5 1.4-19.8 1.6z"})),Yt||(Yt=u.createElement("path",{fill:"#66a8f7",fillRule:"nonzero",d:"M1173 645.4h13l2.5-6.2-13.6.4-2 5.8Zm3.5 8h6l2.6-6.2h-6z"})),en||(en=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1095 578.6c-1.7-.4 0-2.6-2.6-3-2.4-.4-1.3-3.2-4.5-3-3.3.2-3.3-2-6.1-1l-1.7.2c.3-.2-.3-2.5 2.7-2.3 1.2 0 .8-1.9 2-2.8.9-.8 2.5-.1 3.7-2 .6-1 .2-2.1 0-3.2-.3-1 1.3-2.6 1.3-4 0-1.2-2.2-1.9-.9-3.8.9-1.4-1.5-3.3-.4-4.8 1.4-2-2-3-1.1-5.2.9-2.4-1-2.4-2.8-2.2-1.5.3.4-2.9-3-2.1-4.8 1-2-1.8-5.9-.9-2.9.7-4.1-3-7.4-.6-1.5 1-4.7-2.2-6.7 0-2 2.1-3.9-1.3-7.1 1.7-3.3 3-5.9 0-8 3.5-2.2 3.4 0 4.5-1.5 6.3-2.4 2.8-2.9 6-1.4 7.8 2 2.4 1.3 3.7 2.2 5.4 1.4 2.7 3.2.4 4.1 2.2.8 1.5-.2 4 5 3.4 4.5-.4 2.2 6.3 7.2 3.6 3.2-1.8 6 3.5 6.3 3.6-.8.3-2.4 1.3-2 2.6.4 1.8-3 1.8-1.8 4 1.3 2.5-1.5 2.9.6 4.7 2.5 2.1-1 4 2 5.2 2.8 1-.6 2.3 2.6 3.4l2.8-2.4 1.4-2.4c-1.6-2 1.3-6.3 4.3-5.4 2.2.7 3.3 2.7 2.4 4-1 1.3.4 4.9.4 4.9 0-1.1 0-2.3.3-3.4.4-1 2-1.3 2.2-2 .4-2 1.2-3.2 3.8-2.7 3.1.5 3.6-2.8 5-3.5 1.1-.7 2-.4 2.2.3s1.2 0 1.3 1.2l1.2-.3s1.5-4.2-2-5Zm-41.5 152.8a93.1 93.1 0 0 1-54.2-17.7 1.2 1.2 0 0 1-.2-1.7c.2-.3.5-.4.8-.5.3 0 .6 0 .9.2a89 89 0 0 0 52.7 17.2c.3 0 .6.1.8.4.3.2.4.5.4.8s-.1.6-.4.9z"})),tn||(tn=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1030 769.6a2 2 0 0 1-1.8-1.3l-8.6-28.7L993 754a2.5 2.5 0 0 1-3.2-3.6l25.3-30.7 5.4 18 18-9.6-6.2 39.7a2 2 0 0 1-2.1 1.8Zm-.7-1.7a.9.9 0 0 0 1 .5.9.9 0 0 0 .7-.8l5.7-37.3-16 8.7zM990.7 751a1.2 1.2 0 0 0 .1 1.6 1.2 1.2 0 0 0 1.5.3l27-14.6-4.8-16.1zm-1.1-4.6h-.2l-.1-.2v-.2l1.9-3.3a49 49 0 0 0 2.8-4.6.3.3 0 0 1 .3.2v.2l-2.6 4.5-1.9 3.3v.1zm-.8-4.1h-.1l-.2-.1v-.3l1.5-2.9 1.5-2.9a.3.3 0 0 1 .3-.1h.1l.2.2v.2c-.9 1.5-1.2 2.2-1.5 2.9a65 65 0 0 1-1.8 3m51.2 7.7h-.2v-.2c0-2.8 0-5.6.6-8v-.2h.1l.1-.1h.2a.3.3 0 0 1 .2.4c-.6 2.4-.6 5.2-.6 7.9l-.1.2h-.2Z"})),nn||(nn=u.createElement("path",{fill:"#121212",fillRule:"nonzero",d:"M1025.2 771.2c4.3 0 7.8-.6 7.8-1.3 0-.8-3.5-1.4-7.8-1.4-4.4 0-7.9.6-7.9 1.4 0 .7 3.5 1.3 7.9 1.3"})),rn||(rn=u.createElement("path",{fill:"#66a8f7",fillRule:"nonzero",d:"M1053.8 729.8a92.8 92.8 0 0 1-54.2-17.7c-.2-.2-.4-.5-.4-.8a1.2 1.2 0 0 1 1-1.4c.3 0 .6 0 .9.2a88.9 88.9 0 0 0 53.2 17.3l.5.2a1.3 1.3 0 0 1 .3 1 1.3 1.3 0 0 1-.3.8l-.5.3h-.5Z"})))};const cn=()=>{const{disliked:e,noResult:t}=ut(),[n,r]=(0,u.useState)("https://www.bluehost.com/contact"),[s,o]=(0,u.useState)("https://www.bluehost.com/pro-design-live");return(0,u.useEffect)(()=>{const e=setInterval(()=>{if(window.NewfoldRuntime?.linkTracker?.addUtmParams instanceof Function){const e=window.NewfoldRuntime.linkTracker.addUtmParams(n),t=window.NewfoldRuntime.linkTracker.addUtmParams(s);r(e),o(t)}},200);return()=>clearInterval(e)},[]),(0,dt.jsxs)("div",{className:"nfd-hc-modal__footer",children:[(0,dt.jsx)("div",{className:"helpcenter-supportinfo__wrapper",children:!e&&!t&&(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("hr",{className:"helpcenter-supportinfo__breakline"}),(0,dt.jsxs)("div",{className:"helpcenter-supportinfo__text",children:[(0,dt.jsx)("p",{className:"helpcenter-supportinfo__text--heading",children:(0,nt.__)("Account Support","wp-module-help-center")}),(0,dt.jsxs)("p",{className:"helpcenter-supportinfo__text--body",children:[(0,nt.__)("If you need help with your Bluehost account, give us a call at ","wp-module-help-center"),(0,dt.jsx)("a",{href:"tel:8884014678",children:"888-401-4678"})," or ",(0,dt.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",children:"Chat Live"}),(0,nt.__)(" with one of our support agents  we're here for you!","wp-module-help-center")]})]})]})}),(0,dt.jsxs)("div",{className:"hc-banner__wrapper",children:[(0,dt.jsx)("div",{className:"hc-banner",children:(0,dt.jsxs)("div",{className:"hc-banner-content",children:[(0,dt.jsxs)("p",{className:"hc-banner-content__heading",children:[(0,nt.__)("Your dream site is just a click away.","wp-module-help-center"),(0,dt.jsx)("br",{}),(0,nt.__)("Let's build a site you love, together.","wp-module-help-center")]}),(0,dt.jsx)("p",{className:"hc-banner-content__body",children:(0,nt.__)("With Pro Design Live, our expert team bring your vision to life. We help you to create and the site youve always dreamed of  tailored to your goals, ready to perform.","wp-module-help-center")}),(0,dt.jsx)("div",{className:"hc-banner-content__cta",children:(0,dt.jsx)("a",{"data-action":"load-nfd-ctb","data-ctb-id":"838cc912-adb3-4d75-9450-262bf3ee3576",role:"button",href:s,className:"hc-banner-content__cta--button",children:(0,nt.__)("Start Now","wp-module-help-center")})})]})}),(0,dt.jsx)("div",{className:"hc-banner-background",children:(0,dt.jsx)(an,{})})]})]})},ln=Object.freeze({status:"aborted"});function un(e,t,n){function r(n,r){var s;Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(s=n._zod).traits??(s.traits=new Set),n._zod.traits.add(e),t(n,r);for(const e in a.prototype)e in n||Object.defineProperty(n,e,{value:a.prototype[e].bind(n)});n._zod.constr=a,n._zod.def=r}const s=n?.Parent??Object;class o extends s{}function a(e){var t;const s=n?.Parent?new o:this;r(s,e),(t=s._zod).deferred??(t.deferred=[]);for(const e of s._zod.deferred)e();return s}return Object.defineProperty(o,"name",{value:e}),Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}Symbol("zod_brand");class dn extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const pn={};function hn(e){return e&&Object.assign(pn,e),pn}function fn(e,t){return"bigint"==typeof t?t.toString():t}function mn(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function gn(e){return null==e}function yn(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function vn(e,t,n){Object.defineProperty(e,t,{get(){{const r=n();return e[t]=r,r}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function wn(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function bn(e){return JSON.stringify(e)}const xn=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function kn(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const $n=mn(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}});function En(e){if(!1===kn(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!1!==kn(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}const Sn=new Set(["string","number","symbol"]);function Tn(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function In(e,t,n){const r=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(r._zod.parent=e),r}function Cn(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}new Set(["string","number","bigint","boolean","symbol","undefined"]);const Pn={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Rn(e,t=0){for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function jn(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function Nn(e){return"string"==typeof e?e:e?.message}function An(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const s=Nn(e.inst?._zod.def?.error?.(e))??Nn(t?.error?.(e))??Nn(n.customError?.(e))??Nn(n.localeError?.(e))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function On(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function zn(...e){const[t,n,r]=e;return"string"==typeof t?{message:t,code:"custom",input:n,inst:r}:{...t}}const Mn=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,fn,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Dn=un("$ZodError",Mn),Ln=un("$ZodError",Mn,{Parent:Error}),qn=e=>(t,n,r,s)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},a=t._zod.run({value:n,issues:[]},o);if(a instanceof Promise)throw new dn;if(a.issues.length){const t=new(s?.Err??e)(a.issues.map(e=>An(e,o,hn())));throw xn(t,s?.callee),t}return a.value},Un=e=>async(t,n,r,s)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let a=t._zod.run({value:n,issues:[]},o);if(a instanceof Promise&&(a=await a),a.issues.length){const t=new(s?.Err??e)(a.issues.map(e=>An(e,o,hn())));throw xn(t,s?.callee),t}return a.value},Fn=e=>(t,n,r)=>{const s=r?{...r,async:!1}:{async:!1},o=t._zod.run({value:n,issues:[]},s);if(o instanceof Promise)throw new dn;return o.issues.length?{success:!1,error:new(e??Dn)(o.issues.map(e=>An(e,s,hn())))}:{success:!0,data:o.value}},Hn=Fn(Ln),Vn=e=>async(t,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let o=t._zod.run({value:n,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(e=>An(e,s,hn())))}:{success:!0,data:o.value}},Bn=Vn(Ln);function Wn(e){return!!e._zod}function Zn(e,t){return Wn(e)?Hn(e,t):e.safeParse(t)}function Kn(e){if(!e)return;let t;if(Wn(e)){const n=e;t=n._zod?.def?.shape}else t=e.shape;if(t){if("function"==typeof t)try{return t()}catch{return}return t}}const Gn=/^[cC][^\s-]{8,}$/,Jn=/^[0-9a-z]+$/,Xn=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Qn=/^[0-9a-vA-V]{20}$/,Yn=/^[A-Za-z0-9]{27}$/,er=/^[a-zA-Z0-9_-]{21}$/,tr=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,nr=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,rr=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,sr=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,or=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ar=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,ir=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,cr=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,lr=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,ur=/^[A-Za-z0-9_-]*$/,dr=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,pr=/^\+(?:[0-9]){6,14}[0-9]$/,hr="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",fr=new RegExp(`^${hr}$`);function mr(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}const gr=/^\d+$/,yr=/^-?\d+(?:\.\d+)?/i,_r=/true|false/i,vr=/null/i,wr=/^[^A-Z]*$/,br=/^[^a-z]*$/,xr=un("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),kr={number:"number",bigint:"bigint",object:"date"},$r=un("$ZodCheckLessThan",(e,t)=>{xr.init(e,t);const n=kr[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Er=un("$ZodCheckGreaterThan",(e,t)=>{xr.init(e,t);const n=kr[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Sr=un("$ZodCheckMultipleOf",(e,t)=>{xr.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof n.value?n.value%t.value===BigInt(0):0===function(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r;return Number.parseInt(e.toFixed(s).replace(".",""))%Number.parseInt(t.toFixed(s).replace(".",""))/10**s}(n.value,t.value))||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),Tr=un("$ZodCheckNumberFormat",(e,t)=>{xr.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[s,o]=Pn[t.format];e._zod.onattach.push(e=>{const r=e._zod.bag;r.format=t.format,r.minimum=s,r.maximum=o,n&&(r.pattern=gr)}),e._zod.check=a=>{const i=a.value;if(n){if(!Number.isInteger(i))return void a.issues.push({expected:r,format:t.format,code:"invalid_type",input:i,inst:e});if(!Number.isSafeInteger(i))return void(i>0?a.issues.push({input:i,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):a.issues.push({input:i,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}))}i<s&&a.issues.push({origin:"number",input:i,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),i>o&&a.issues.push({origin:"number",input:i,code:"too_big",maximum:o,inst:e})}}),Ir=un("$ZodCheckMaxLength",(e,t)=>{var n;xr.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!gn(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const r=n.value;if(r.length<=t.maximum)return;const s=On(r);n.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),Cr=un("$ZodCheckMinLength",(e,t)=>{var n;xr.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!gn(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const r=n.value;if(r.length>=t.minimum)return;const s=On(r);n.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),Pr=un("$ZodCheckLengthEquals",(e,t)=>{var n;xr.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!gn(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{const r=n.value,s=r.length;if(s===t.length)return;const o=On(r),a=s>t.length;n.issues.push({origin:o,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Rr=un("$ZodCheckStringFormat",(e,t)=>{var n,r;xr.init(e,t),e._zod.onattach.push(e=>{const n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??(n.patterns=new Set),n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),jr=un("$ZodCheckRegex",(e,t)=>{Rr.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Nr=un("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=wr),Rr.init(e,t)}),Ar=un("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=br),Rr.init(e,t)}),Or=un("$ZodCheckIncludes",(e,t)=>{xr.init(e,t);const n=Tn(t.includes),r=new RegExp("number"==typeof t.position?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),zr=un("$ZodCheckStartsWith",(e,t)=>{xr.init(e,t);const n=new RegExp(`^${Tn(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Mr=un("$ZodCheckEndsWith",(e,t)=>{xr.init(e,t);const n=new RegExp(`.*${Tn(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),Dr=un("$ZodCheckOverwrite",(e,t)=>{xr.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class Lr{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length)),r=t.map(e=>e.slice(n)).map(e=>" ".repeat(2*this.indent)+e);for(const e of r)this.content.push(e)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}const qr={major:4,minor:0,patch:0},Ur=un("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=qr;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const t of r)for(const n of t._zod.onattach)n(e);if(0===r.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,n)=>{let r,s=Rn(e);for(const o of t){if(o._zod.def.when){if(!o._zod.def.when(e))continue}else if(s)continue;const t=e.issues.length,a=o._zod.check(e);if(a instanceof Promise&&!1===n?.async)throw new dn;if(r||a instanceof Promise)r=(r??Promise.resolve()).then(async()=>{await a,e.issues.length!==t&&(s||(s=Rn(e,t)))});else{if(e.issues.length===t)continue;s||(s=Rn(e,t))}}return r?r.then(()=>e):e};e._zod.run=(n,s)=>{const o=e._zod.parse(n,s);if(o instanceof Promise){if(!1===s.async)throw new dn;return o.then(e=>t(e,r,s))}return t(o,r,s)}}e["~standard"]={validate:t=>{try{const n=Hn(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return Bn(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),Fr=un("$ZodString",(e,t)=>{var n;Ur.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??(n=e._zod.bag,new RegExp(`^${n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*"}$`)),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch(r){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Hr=un("$ZodStringFormat",(e,t)=>{Rr.init(e,t),Fr.init(e,t)}),Vr=un("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=nr),Hr.init(e,t)}),Br=un("$ZodUUID",(e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=rr(e))}else t.pattern??(t.pattern=rr());Hr.init(e,t)}),Wr=un("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=sr),Hr.init(e,t)}),Zr=un("$ZodURL",(e,t)=>{Hr.init(e,t),e._zod.check=n=>{try{const r=n.value,s=new URL(r),o=s.href;return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:dr.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),void(!r.endsWith("/")&&o.endsWith("/")?n.value=o.slice(0,-1):n.value=o)}catch(r){n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Kr=un("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Hr.init(e,t)}),Gr=un("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=er),Hr.init(e,t)}),Jr=un("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Gn),Hr.init(e,t)}),Xr=un("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Jn),Hr.init(e,t)}),Qr=un("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Xn),Hr.init(e,t)}),Yr=un("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Qn),Hr.init(e,t)}),es=un("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Yn),Hr.init(e,t)}),ts=un("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=function(e){const t=mr({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${hr}T(?:${r})$`)}(t)),Hr.init(e,t)}),ns=un("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=fr),Hr.init(e,t)}),rs=un("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=new RegExp(`^${mr(t)}$`)),Hr.init(e,t)}),ss=un("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=tr),Hr.init(e,t)}),os=un("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=or),Hr.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),as=un("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=ar),Hr.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),is=un("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=ir),Hr.init(e,t)}),cs=un("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=cr),Hr.init(e,t),e._zod.check=n=>{const[r,s]=n.value.split("/");try{if(!s)throw new Error;const e=Number(s);if(`${e}`!==s)throw new Error;if(e<0||e>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function ls(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const us=un("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=lr),Hr.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{ls(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}}),ds=un("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=ur),Hr.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{(function(e){if(!ur.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return ls(t.padEnd(4*Math.ceil(t.length/4),"="))})(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),ps=un("$ZodE164",(e,t)=>{t.pattern??(t.pattern=pr),Hr.init(e,t)}),hs=un("$ZodJWT",(e,t)=>{Hr.init(e,t),e._zod.check=n=>{(function(e,t=null){try{const n=e.split(".");if(3!==n.length)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&"JWT"!==s?.typ||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}})(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),fs=un("$ZodNumber",(e,t)=>{Ur.init(e,t),e._zod.pattern=e._zod.bag.pattern??yr,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch(e){}const s=n.value;if("number"==typeof s&&!Number.isNaN(s)&&Number.isFinite(s))return n;const o="number"==typeof s?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...o?{received:o}:{}}),n}}),ms=un("$ZodNumber",(e,t)=>{Tr.init(e,t),fs.init(e,t)}),gs=un("$ZodBoolean",(e,t)=>{Ur.init(e,t),e._zod.pattern=_r,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Boolean(n.value)}catch(e){}const s=n.value;return"boolean"==typeof s||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),n}}),ys=un("$ZodNull",(e,t)=>{Ur.init(e,t),e._zod.pattern=vr,e._zod.values=new Set([null]),e._zod.parse=(t,n)=>{const r=t.value;return null===r||t.issues.push({expected:"null",code:"invalid_type",input:r,inst:e}),t}}),_s=un("$ZodAny",(e,t)=>{Ur.init(e,t),e._zod.parse=e=>e}),vs=un("$ZodUnknown",(e,t)=>{Ur.init(e,t),e._zod.parse=e=>e}),ws=un("$ZodNever",(e,t)=>{Ur.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function bs(e,t,n){e.issues.length&&t.issues.push(...jn(n,e.issues)),t.value[n]=e.value}const xs=un("$ZodArray",(e,t)=>{Ur.init(e,t),e._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),n;n.value=Array(s.length);const o=[];for(let e=0;e<s.length;e++){const a=s[e],i=t.element._zod.run({value:a,issues:[]},r);i instanceof Promise?o.push(i.then(t=>bs(t,n,e))):bs(i,n,e)}return o.length?Promise.all(o).then(()=>n):n}});function ks(e,t,n){e.issues.length&&t.issues.push(...jn(n,e.issues)),t.value[n]=e.value}function $s(e,t,n,r){e.issues.length?void 0===r[n]?t.value[n]=n in r?void 0:e.value:t.issues.push(...jn(n,e.issues)):void 0===e.value?n in r&&(t.value[n]=void 0):t.value[n]=e.value}const Es=un("$ZodObject",(e,t)=>{Ur.init(e,t);const n=mn(()=>{const e=Object.keys(t.shape);for(const n of e)if(!(t.shape[n]instanceof Ur))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const n=(r=t.shape,Object.keys(r).filter(e=>"optional"===r[e]._zod.optin&&"optional"===r[e]._zod.optout));var r;return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}});let r;vn(e._zod,"propValues",()=>{const e=t.shape,n={};for(const t in e){const r=e[t]._zod;if(r.values){n[t]??(n[t]=new Set);for(const e of r.values)n[t].add(e)}}return n});const s=kn,o=!pn.jitless,a=o&&$n.value,i=t.catchall;let c;e._zod.parse=(l,u)=>{c??(c=n.value);const d=l.value;if(!s(d))return l.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),l;const p=[];if(o&&a&&!1===u?.async&&!0!==u.jitless)r||(r=(e=>{const t=new Lr(["shape","payload","ctx"]),r=n.value,s=e=>{const t=bn(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const o=Object.create(null);let a=0;for(const e of r.keys)o[e]="key_"+a++;t.write("const newResult = {}");for(const e of r.keys)if(r.optionalKeys.has(e)){const n=o[e];t.write(`const ${n} = ${s(e)};`);const r=bn(e);t.write(`\n        if (${n}.issues.length) {\n          if (input[${r}] === undefined) {\n            if (${r} in input) {\n              newResult[${r}] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ${n}.issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [${r}, ...iss.path] : [${r}],\n              }))\n            );\n          }\n        } else if (${n}.value === undefined) {\n          if (${r} in input) newResult[${r}] = undefined;\n        } else {\n          newResult[${r}] = ${n}.value;\n        }\n        `)}else{const n=o[e];t.write(`const ${n} = ${s(e)};`),t.write(`\n          if (${n}.issues.length) payload.issues = payload.issues.concat(${n}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${bn(e)}, ...iss.path] : [${bn(e)}]\n          })));`),t.write(`newResult[${bn(e)}] = ${n}.value`)}t.write("payload.value = newResult;"),t.write("return payload;");const i=t.compile();return(t,n)=>i(e,t,n)})(t.shape)),l=r(l,u);else{l.value={};const e=c.shape;for(const t of c.keys){const n=e[t],r=n._zod.run({value:d[t],issues:[]},u),s="optional"===n._zod.optin&&"optional"===n._zod.optout;r instanceof Promise?p.push(r.then(e=>s?$s(e,l,t,d):ks(e,l,t))):s?$s(r,l,t,d):ks(r,l,t)}}if(!i)return p.length?Promise.all(p).then(()=>l):l;const h=[],f=c.keySet,m=i._zod,g=m.def.type;for(const e of Object.keys(d)){if(f.has(e))continue;if("never"===g){h.push(e);continue}const t=m.run({value:d[e],issues:[]},u);t instanceof Promise?p.push(t.then(t=>ks(t,l,e))):ks(t,l,e)}return h.length&&l.issues.push({code:"unrecognized_keys",keys:h,input:d,inst:e}),p.length?Promise.all(p).then(()=>l):l}});function Ss(e,t,n,r){for(const n of e)if(0===n.issues.length)return t.value=n.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>An(e,r,hn())))}),t}const Ts=un("$ZodUnion",(e,t)=>{Ur.init(e,t),vn(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),vn(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),vn(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),vn(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>yn(e.source)).join("|")})$`)}}),e._zod.parse=(n,r)=>{let s=!1;const o=[];for(const e of t.options){const t=e._zod.run({value:n.value,issues:[]},r);if(t instanceof Promise)o.push(t),s=!0;else{if(0===t.issues.length)return t;o.push(t)}}return s?Promise.all(o).then(t=>Ss(t,n,e,r)):Ss(o,n,e,r)}}),Is=un("$ZodDiscriminatedUnion",(e,t)=>{Ts.init(e,t);const n=e._zod.parse;vn(e._zod,"propValues",()=>{const e={};for(const n of t.options){const r=n._zod.propValues;if(!r||0===Object.keys(r).length)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(const[t,n]of Object.entries(r)){e[t]||(e[t]=new Set);for(const r of n)e[t].add(r)}}return e});const r=mn(()=>{const e=t.options,n=new Map;for(const r of e){const e=r._zod.propValues[t.discriminator];if(!e||0===e.size)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(const t of e){if(n.has(t))throw new Error(`Duplicate discriminator value "${String(t)}"`);n.set(t,r)}}return n});e._zod.parse=(s,o)=>{const a=s.value;if(!kn(a))return s.issues.push({code:"invalid_type",expected:"object",input:a,inst:e}),s;const i=r.value.get(a?.[t.discriminator]);return i?i._zod.run(s,o):t.unionFallback?n(s,o):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:a,path:[t.discriminator],inst:e}),s)}}),Cs=un("$ZodIntersection",(e,t)=>{Ur.init(e,t),e._zod.parse=(e,n)=>{const r=e.value,s=t.left._zod.run({value:r,issues:[]},n),o=t.right._zod.run({value:r,issues:[]},n);return s instanceof Promise||o instanceof Promise?Promise.all([s,o]).then(([t,n])=>Rs(e,t,n)):Rs(e,s,o)}});function Ps(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(En(e)&&En(t)){const n=Object.keys(t),r=Object.keys(e).filter(e=>-1!==n.indexOf(e)),s={...e,...t};for(const n of r){const r=Ps(e[n],t[n]);if(!r.valid)return{valid:!1,mergeErrorPath:[n,...r.mergeErrorPath]};s[n]=r.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const s=Ps(e[r],t[r]);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Rs(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Rn(e))return e;const r=Ps(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const js=un("$ZodRecord",(e,t)=>{Ur.init(e,t),e._zod.parse=(n,r)=>{const s=n.value;if(!En(s))return n.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),n;const o=[];if(t.keyType._zod.values){const a=t.keyType._zod.values;n.value={};for(const e of a)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){const a=t.valueType._zod.run({value:s[e],issues:[]},r);a instanceof Promise?o.push(a.then(t=>{t.issues.length&&n.issues.push(...jn(e,t.issues)),n.value[e]=t.value})):(a.issues.length&&n.issues.push(...jn(e,a.issues)),n.value[e]=a.value)}let i;for(const e in s)a.has(e)||(i=i??[],i.push(e));i&&i.length>0&&n.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:i})}else{n.value={};for(const a of Reflect.ownKeys(s)){if("__proto__"===a)continue;const i=t.keyType._zod.run({value:a,issues:[]},r);if(i instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(i.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:i.issues.map(e=>An(e,r,hn())),input:a,path:[a],inst:e}),n.value[i.value]=i.value;continue}const c=t.valueType._zod.run({value:s[a],issues:[]},r);c instanceof Promise?o.push(c.then(e=>{e.issues.length&&n.issues.push(...jn(a,e.issues)),n.value[i.value]=e.value})):(c.issues.length&&n.issues.push(...jn(a,c.issues)),n.value[i.value]=c.value)}}return o.length?Promise.all(o).then(()=>n):n}}),Ns=un("$ZodEnum",(e,t)=>{Ur.init(e,t);const n=function(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,n])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(e=>Sn.has(typeof e)).map(e=>"string"==typeof e?Tn(e):e.toString()).join("|")})$`),e._zod.parse=(t,r)=>{const s=t.value;return e._zod.values.has(s)||t.issues.push({code:"invalid_value",values:n,input:s,inst:e}),t}}),As=un("$ZodLiteral",(e,t)=>{Ur.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(e=>"string"==typeof e?Tn(e):e?e.toString():String(e)).join("|")})$`),e._zod.parse=(n,r)=>{const s=n.value;return e._zod.values.has(s)||n.issues.push({code:"invalid_value",values:t.values,input:s,inst:e}),n}}),Os=un("$ZodTransform",(e,t)=>{Ur.init(e,t),e._zod.parse=(e,n)=>{const r=t.transform(e.value,e);if(n.async)return(r instanceof Promise?r:Promise.resolve(r)).then(t=>(e.value=t,e));if(r instanceof Promise)throw new dn;return e.value=r,e}}),zs=un("$ZodOptional",(e,t)=>{Ur.init(e,t),e._zod.optin="optional",e._zod.optout="optional",vn(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),vn(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${yn(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>"optional"===t.innerType._zod.optin?t.innerType._zod.run(e,n):void 0===e.value?e:t.innerType._zod.run(e,n)}),Ms=un("$ZodNullable",(e,t)=>{Ur.init(e,t),vn(e._zod,"optin",()=>t.innerType._zod.optin),vn(e._zod,"optout",()=>t.innerType._zod.optout),vn(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${yn(e.source)}|null)$`):void 0}),vn(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>null===e.value?e:t.innerType._zod.run(e,n)}),Ds=un("$ZodDefault",(e,t)=>{Ur.init(e,t),e._zod.optin="optional",vn(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if(void 0===e.value)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(e=>Ls(e,t)):Ls(r,t)}});function Ls(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const qs=un("$ZodPrefault",(e,t)=>{Ur.init(e,t),e._zod.optin="optional",vn(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),Us=un("$ZodNonOptional",(e,t)=>{Ur.init(e,t),vn(e._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(t=>Fs(t,e)):Fs(s,e)}});function Fs(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Hs=un("$ZodCatch",(e,t)=>{Ur.init(e,t),e._zod.optin="optional",vn(e._zod,"optout",()=>t.innerType._zod.optout),vn(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>An(e,n,hn()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>An(e,n,hn()))},input:e.value}),e.issues=[]),e)}}),Vs=un("$ZodPipe",(e,t)=>{Ur.init(e,t),vn(e._zod,"values",()=>t.in._zod.values),vn(e._zod,"optin",()=>t.in._zod.optin),vn(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(e,n)=>{const r=t.in._zod.run(e,n);return r instanceof Promise?r.then(e=>Bs(e,t,n)):Bs(r,t,n)}});function Bs(e,t,n){return Rn(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const Ws=un("$ZodReadonly",(e,t)=>{Ur.init(e,t),vn(e._zod,"propValues",()=>t.innerType._zod.propValues),vn(e._zod,"values",()=>t.innerType._zod.values),vn(e._zod,"optin",()=>t.innerType._zod.optin),vn(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,n)=>{const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(Zs):Zs(r)}});function Zs(e){return e.value=Object.freeze(e.value),e}const Ks=un("$ZodCustom",(e,t)=>{xr.init(e,t),Ur.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{const r=n.value,s=t.fn(r);if(s instanceof Promise)return s.then(t=>Gs(t,n,r,e));Gs(s,n,r,e)}});function Gs(e,t,n,r){if(!e){const e={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(zn(e))}}Symbol("ZodOutput"),Symbol("ZodInput");class Js{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){const n=t[0];if(this._map.set(e,n),n&&"object"==typeof n&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const n={...this.get(t)??{}};return delete n.id,{...n,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function Xs(){return new Js}const Qs=Xs();function Ys(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Cn(t)})}function eo(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Cn(t)})}function to(e,t){return new $r({check:"less_than",...Cn(t),value:e,inclusive:!1})}function no(e,t){return new $r({check:"less_than",...Cn(t),value:e,inclusive:!0})}function ro(e,t){return new Er({check:"greater_than",...Cn(t),value:e,inclusive:!1})}function so(e,t){return new Er({check:"greater_than",...Cn(t),value:e,inclusive:!0})}function oo(e,t){return new Sr({check:"multiple_of",...Cn(t),value:e})}function ao(e,t){return new Ir({check:"max_length",...Cn(t),maximum:e})}function io(e,t){return new Cr({check:"min_length",...Cn(t),minimum:e})}function co(e,t){return new Pr({check:"length_equals",...Cn(t),length:e})}function lo(e){return new Dr({check:"overwrite",tx:e})}const uo=un("ZodISODateTime",(e,t)=>{ts.init(e,t),So.init(e,t)});function po(e){return function(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Cn(t)})}(uo,e)}const ho=un("ZodISODate",(e,t)=>{ns.init(e,t),So.init(e,t)});const fo=un("ZodISOTime",(e,t)=>{rs.init(e,t),So.init(e,t)});const mo=un("ZodISODuration",(e,t)=>{ss.init(e,t),So.init(e,t)});const go=(e,t)=>{Dn.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>function(e,t){const n=t||function(e){return e.message},r={_errors:[]},s=e=>{for(const t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>s({issues:e}));else if("invalid_key"===t.code)s({issues:t.issues});else if("invalid_element"===t.code)s({issues:t.issues});else if(0===t.path.length)r._errors.push(n(t));else{let e=r,s=0;for(;s<t.path.length;){const r=t.path[s];s===t.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(n(t))):e[r]=e[r]||{_errors:[]},e=e[r],s++}}};return s(e),r}(e,t)},flatten:{value:t=>function(e,t=e=>e.message){const n={},r=[];for(const s of e.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(t(s))):r.push(t(s));return{formErrors:r,fieldErrors:n}}(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get:()=>0===e.issues.length}})},yo=(un("ZodError",go),un("ZodError",go,{Parent:Error})),_o=qn(yo),vo=Un(yo),wo=Fn(yo),bo=Vn(yo),xo=un("ZodType",(e,t)=>(Ur.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,n)=>In(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>_o(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>wo(e,t,n),e.parseAsync=async(t,n)=>vo(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>bo(e,t,n),e.spa=e.safeParseAsync,e.refine=(t,n)=>e.check(function(e,t={}){return function(e,t,n){return new e({type:"custom",check:"custom",fn:t,...Cn(n)})}(Oa,e,t)}(t,n)),e.superRefine=t=>e.check(function(e){const t=function(e){const t=new xr({check:"custom"});return t._zod.check=e,t}(n=>(n.addIssue=e=>{if("string"==typeof e)n.issues.push(zn(e,n.value,t._zod.def));else{const r=e;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(zn(r))}},e(n.value,n)));return t}(t)),e.overwrite=t=>e.check(lo(t)),e.optional=()=>Ea(e),e.nullable=()=>Ta(e),e.nullish=()=>Ea(Ta(e)),e.nonoptional=t=>function(e,t){return new Pa({type:"nonoptional",innerType:e,...Cn(t)})}(e,t),e.array=()=>aa(e),e.or=t=>da([e,t]),e.and=t=>ma(e,t),e.transform=t=>Na(e,ka(t)),e.default=t=>{return n=t,new Ia({type:"default",innerType:e,get defaultValue(){return"function"==typeof n?n():n}});var n},e.prefault=t=>{return n=t,new Ca({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof n?n():n}});var n},e.catch=t=>{return new Ra({type:"catch",innerType:e,catchValue:"function"==typeof(n=t)?n:()=>n});var n},e.pipe=t=>Na(e,t),e.readonly=()=>new Aa({type:"readonly",innerType:e}),e.describe=t=>{const n=e.clone();return Qs.add(n,{description:t}),n},Object.defineProperty(e,"description",{get:()=>Qs.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return Qs.get(e);const n=e.clone();return Qs.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),ko=un("_ZodString",(e,t)=>{Fr.init(e,t),xo.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new jr({check:"string_format",format:"regex",...Cn(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new Or({check:"string_format",format:"includes",...Cn(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new zr({check:"string_format",format:"starts_with",...Cn(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new Mr({check:"string_format",format:"ends_with",...Cn(t),suffix:e})}(...t)),e.min=(...t)=>e.check(io(...t)),e.max=(...t)=>e.check(ao(...t)),e.length=(...t)=>e.check(co(...t)),e.nonempty=(...t)=>e.check(io(1,...t)),e.lowercase=t=>e.check(function(e){return new Nr({check:"string_format",format:"lowercase",...Cn(e)})}(t)),e.uppercase=t=>e.check(function(e){return new Ar({check:"string_format",format:"uppercase",...Cn(e)})}(t)),e.trim=()=>e.check(lo(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return lo(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(lo(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(lo(e=>e.toUpperCase()))}),$o=un("ZodString",(e,t)=>{Fr.init(e,t),ko.init(e,t),e.email=t=>e.check(function(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Cn(t)})}(To,t)),e.url=t=>e.check(eo(Po,t)),e.jwt=t=>e.check(function(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Cn(t)})}(Bo,t)),e.emoji=t=>e.check(function(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Cn(t)})}(Ro,t)),e.guid=t=>e.check(Ys(Io,t)),e.uuid=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Cn(t)})}(Co,t)),e.uuidv4=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Cn(t)})}(Co,t)),e.uuidv6=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Cn(t)})}(Co,t)),e.uuidv7=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Cn(t)})}(Co,t)),e.nanoid=t=>e.check(function(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Cn(t)})}(jo,t)),e.guid=t=>e.check(Ys(Io,t)),e.cuid=t=>e.check(function(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Cn(t)})}(No,t)),e.cuid2=t=>e.check(function(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Cn(t)})}(Ao,t)),e.ulid=t=>e.check(function(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Cn(t)})}(Oo,t)),e.base64=t=>e.check(function(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Cn(t)})}(Fo,t)),e.base64url=t=>e.check(function(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Cn(t)})}(Ho,t)),e.xid=t=>e.check(function(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Cn(t)})}(zo,t)),e.ksuid=t=>e.check(function(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Cn(t)})}(Mo,t)),e.ipv4=t=>e.check(function(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Cn(t)})}(Do,t)),e.ipv6=t=>e.check(function(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Cn(t)})}(Lo,t)),e.cidrv4=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Cn(t)})}(qo,t)),e.cidrv6=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Cn(t)})}(Uo,t)),e.e164=t=>e.check(function(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Cn(t)})}(Vo,t)),e.datetime=t=>e.check(po(t)),e.date=t=>e.check(function(e){return function(e,t){return new e({type:"string",format:"date",check:"string_format",...Cn(t)})}(ho,e)}(t)),e.time=t=>e.check(function(e){return function(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Cn(t)})}(fo,e)}(t)),e.duration=t=>e.check(function(e){return function(e,t){return new e({type:"string",format:"duration",check:"string_format",...Cn(t)})}(mo,e)}(t))});function Eo(e){return function(e,t){return new e({type:"string",...Cn(t)})}($o,e)}const So=un("ZodStringFormat",(e,t)=>{Hr.init(e,t),ko.init(e,t)}),To=un("ZodEmail",(e,t)=>{Wr.init(e,t),So.init(e,t)}),Io=un("ZodGUID",(e,t)=>{Vr.init(e,t),So.init(e,t)}),Co=un("ZodUUID",(e,t)=>{Br.init(e,t),So.init(e,t)}),Po=un("ZodURL",(e,t)=>{Zr.init(e,t),So.init(e,t)}),Ro=un("ZodEmoji",(e,t)=>{Kr.init(e,t),So.init(e,t)}),jo=un("ZodNanoID",(e,t)=>{Gr.init(e,t),So.init(e,t)}),No=un("ZodCUID",(e,t)=>{Jr.init(e,t),So.init(e,t)}),Ao=un("ZodCUID2",(e,t)=>{Xr.init(e,t),So.init(e,t)}),Oo=un("ZodULID",(e,t)=>{Qr.init(e,t),So.init(e,t)}),zo=un("ZodXID",(e,t)=>{Yr.init(e,t),So.init(e,t)}),Mo=un("ZodKSUID",(e,t)=>{es.init(e,t),So.init(e,t)}),Do=un("ZodIPv4",(e,t)=>{os.init(e,t),So.init(e,t)}),Lo=un("ZodIPv6",(e,t)=>{as.init(e,t),So.init(e,t)}),qo=un("ZodCIDRv4",(e,t)=>{is.init(e,t),So.init(e,t)}),Uo=un("ZodCIDRv6",(e,t)=>{cs.init(e,t),So.init(e,t)}),Fo=un("ZodBase64",(e,t)=>{us.init(e,t),So.init(e,t)}),Ho=un("ZodBase64URL",(e,t)=>{ds.init(e,t),So.init(e,t)}),Vo=un("ZodE164",(e,t)=>{ps.init(e,t),So.init(e,t)}),Bo=un("ZodJWT",(e,t)=>{hs.init(e,t),So.init(e,t)}),Wo=un("ZodNumber",(e,t)=>{fs.init(e,t),xo.init(e,t),e.gt=(t,n)=>e.check(ro(t,n)),e.gte=(t,n)=>e.check(so(t,n)),e.min=(t,n)=>e.check(so(t,n)),e.lt=(t,n)=>e.check(to(t,n)),e.lte=(t,n)=>e.check(no(t,n)),e.max=(t,n)=>e.check(no(t,n)),e.int=t=>e.check(Go(t)),e.safe=t=>e.check(Go(t)),e.positive=t=>e.check(ro(0,t)),e.nonnegative=t=>e.check(so(0,t)),e.negative=t=>e.check(to(0,t)),e.nonpositive=t=>e.check(no(0,t)),e.multipleOf=(t,n)=>e.check(oo(t,n)),e.step=(t,n)=>e.check(oo(t,n)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Zo(e){return function(e,t){return new e({type:"number",checks:[],...Cn(t)})}(Wo,e)}const Ko=un("ZodNumberFormat",(e,t)=>{ms.init(e,t),Wo.init(e,t)});function Go(e){return function(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Cn(t)})}(Ko,e)}const Jo=un("ZodBoolean",(e,t)=>{gs.init(e,t),xo.init(e,t)});function Xo(e){return function(e,t){return new e({type:"boolean",...Cn(t)})}(Jo,e)}const Qo=un("ZodNull",(e,t)=>{ys.init(e,t),xo.init(e,t)});function Yo(e){return function(e,t){return new e({type:"null",...Cn(t)})}(Qo,e)}const ea=un("ZodAny",(e,t)=>{_s.init(e,t),xo.init(e,t)}),ta=un("ZodUnknown",(e,t)=>{vs.init(e,t),xo.init(e,t)});function na(){return new ta({type:"unknown"})}const ra=un("ZodNever",(e,t)=>{ws.init(e,t),xo.init(e,t)});function sa(e){return function(e,t){return new e({type:"never",...Cn(t)})}(ra,e)}const oa=un("ZodArray",(e,t)=>{xs.init(e,t),xo.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(io(t,n)),e.nonempty=t=>e.check(io(1,t)),e.max=(t,n)=>e.check(ao(t,n)),e.length=(t,n)=>e.check(co(t,n)),e.unwrap=()=>e.element});function aa(e,t){return function(e,t,n){return new e({type:"array",element:t,...Cn(n)})}(oa,e,t)}const ia=un("ZodObject",(e,t)=>{Es.init(e,t),xo.init(e,t),vn(e,"shape",()=>t.shape),e.keyof=()=>va(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:na()}),e.loose=()=>e.clone({...e._zod.def,catchall:na()}),e.strict=()=>e.clone({...e._zod.def,catchall:sa()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>function(e,t){if(!En(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return wn(this,"shape",n),n},checks:[]};return In(e,n)}(e,t),e.merge=t=>{return r=t,In(n=e,{...n._zod.def,get shape(){const e={...n._zod.def.shape,...r._zod.def.shape};return wn(this,"shape",e),e},catchall:r._zod.def.catchall,checks:[]});var n,r},e.pick=t=>function(e,t){const n={},r=e._zod.def;for(const e in t){if(!(e in r.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&(n[e]=r.shape[e])}return In(e,{...e._zod.def,shape:n,checks:[]})}(e,t),e.omit=t=>function(e,t){const n={...e._zod.def.shape},r=e._zod.def;for(const e in t){if(!(e in r.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete n[e]}return In(e,{...e._zod.def,shape:n,checks:[]})}(e,t),e.partial=(...t)=>function(e,t,n){const r=t._zod.def.shape,s={...r};if(n)for(const t in n){if(!(t in r))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(s[t]=e?new e({type:"optional",innerType:r[t]}):r[t])}else for(const t in r)s[t]=e?new e({type:"optional",innerType:r[t]}):r[t];return In(t,{...t._zod.def,shape:s,checks:[]})}($a,e,t[0]),e.required=(...t)=>function(e,t,n){const r=t._zod.def.shape,s={...r};if(n)for(const t in n){if(!(t in s))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(s[t]=new e({type:"nonoptional",innerType:r[t]}))}else for(const t in r)s[t]=new e({type:"nonoptional",innerType:r[t]});return In(t,{...t._zod.def,shape:s,checks:[]})}(Pa,e,t[0])});function ca(e,t){const n={type:"object",get shape(){return wn(this,"shape",{...e}),this.shape},...Cn(t)};return new ia(n)}function la(e,t){return new ia({type:"object",get shape(){return wn(this,"shape",{...e}),this.shape},catchall:na(),...Cn(t)})}const ua=un("ZodUnion",(e,t)=>{Ts.init(e,t),xo.init(e,t),e.options=t.options});function da(e,t){return new ua({type:"union",options:e,...Cn(t)})}const pa=un("ZodDiscriminatedUnion",(e,t)=>{ua.init(e,t),Is.init(e,t)});function ha(e,t,n){return new pa({type:"union",options:t,discriminator:e,...Cn(n)})}const fa=un("ZodIntersection",(e,t)=>{Cs.init(e,t),xo.init(e,t)});function ma(e,t){return new fa({type:"intersection",left:e,right:t})}const ga=un("ZodRecord",(e,t)=>{js.init(e,t),xo.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function ya(e,t,n){return new ga({type:"record",keyType:e,valueType:t,...Cn(n)})}const _a=un("ZodEnum",(e,t)=>{Ns.init(e,t),xo.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(e,r)=>{const s={};for(const r of e){if(!n.has(r))throw new Error(`Key ${r} not found in enum`);s[r]=t.entries[r]}return new _a({...t,checks:[],...Cn(r),entries:s})},e.exclude=(e,r)=>{const s={...t.entries};for(const t of e){if(!n.has(t))throw new Error(`Key ${t} not found in enum`);delete s[t]}return new _a({...t,checks:[],...Cn(r),entries:s})}});function va(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new _a({type:"enum",entries:n,...Cn(t)})}const wa=un("ZodLiteral",(e,t)=>{As.init(e,t),xo.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function ba(e,t){return new wa({type:"literal",values:Array.isArray(e)?e:[e],...Cn(t)})}const xa=un("ZodTransform",(e,t)=>{Os.init(e,t),xo.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=r=>{if("string"==typeof r)n.issues.push(zn(r,n.value,t));else{const t=r;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=n.value),t.inst??(t.inst=e),t.continue??(t.continue=!0),n.issues.push(zn(t))}};const s=t.transform(n.value,n);return s instanceof Promise?s.then(e=>(n.value=e,n)):(n.value=s,n)}});function ka(e){return new xa({type:"transform",transform:e})}const $a=un("ZodOptional",(e,t)=>{zs.init(e,t),xo.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ea(e){return new $a({type:"optional",innerType:e})}const Sa=un("ZodNullable",(e,t)=>{Ms.init(e,t),xo.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ta(e){return new Sa({type:"nullable",innerType:e})}const Ia=un("ZodDefault",(e,t)=>{Ds.init(e,t),xo.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}),Ca=un("ZodPrefault",(e,t)=>{qs.init(e,t),xo.init(e,t),e.unwrap=()=>e._zod.def.innerType}),Pa=un("ZodNonOptional",(e,t)=>{Us.init(e,t),xo.init(e,t),e.unwrap=()=>e._zod.def.innerType}),Ra=un("ZodCatch",(e,t)=>{Hs.init(e,t),xo.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}),ja=un("ZodPipe",(e,t)=>{Vs.init(e,t),xo.init(e,t),e.in=t.in,e.out=t.out});function Na(e,t){return new ja({type:"pipe",in:e,out:t})}const Aa=un("ZodReadonly",(e,t)=>{Ws.init(e,t),xo.init(e,t)}),Oa=un("ZodCustom",(e,t)=>{Ks.init(e,t),xo.init(e,t)});function za(e,t){return Na(ka(e),t)}const Ma="2025-11-25",Da=[Ma,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],La="io.modelcontextprotocol/related-task",qa="2.0",Ua=function(e,t,n){const r=Cn(n);return r.abort??(r.abort=!0),new e({type:"custom",check:"custom",fn:(e=>null!==e&&("object"==typeof e||"function"==typeof e))??(()=>!0),...r})}(Oa,0,undefined);const Fa=da([Eo(),Zo().int()]),Ha=Eo(),Va=(la({ttl:da([Zo(),Yo()]).optional(),pollInterval:Zo().optional()}),ca({ttl:Zo().optional()})),Ba=ca({taskId:Eo()}),Wa=la({progressToken:Fa.optional(),[La]:Ba.optional()}),Za=ca({_meta:Wa.optional()}),Ka=Za.extend({task:Va.optional()}),Ga=ca({method:Eo(),params:Za.loose().optional()}),Ja=ca({_meta:Wa.optional()}),Xa=ca({method:Eo(),params:Ja.loose().optional()}),Qa=la({_meta:Wa.optional()}),Ya=da([Eo(),Zo().int()]),ei=ca({jsonrpc:ba(qa),id:Ya,...Ga.shape}).strict(),ti=e=>ei.safeParse(e).success,ni=ca({jsonrpc:ba(qa),...Xa.shape}).strict(),ri=ca({jsonrpc:ba(qa),id:Ya,result:Qa}).strict(),si=e=>ri.safeParse(e).success;var oi;!function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.UrlElicitationRequired=-32042]="UrlElicitationRequired"}(oi||(oi={}));const ai=ca({jsonrpc:ba(qa),id:Ya.optional(),error:ca({code:Zo().int(),message:Eo(),data:na().optional()})}).strict(),ii=da([ei,ni,ri,ai]),ci=(da([ri,ai]),Qa.strict()),li=Ja.extend({requestId:Ya.optional(),reason:Eo().optional()}),ui=Xa.extend({method:ba("notifications/cancelled"),params:li}),di=ca({src:Eo(),mimeType:Eo().optional(),sizes:aa(Eo()).optional(),theme:va(["light","dark"]).optional()}),pi=ca({icons:aa(di).optional()}),hi=ca({name:Eo(),title:Eo().optional()}),fi=hi.extend({...hi.shape,...pi.shape,version:Eo(),websiteUrl:Eo().optional(),description:Eo().optional()}),mi=ma(ca({applyDefaults:Xo().optional()}),ya(Eo(),na())),gi=za(e=>e&&"object"==typeof e&&!Array.isArray(e)&&0===Object.keys(e).length?{form:{}}:e,ma(ca({form:mi.optional(),url:Ua.optional()}),ya(Eo(),na()).optional())),yi=la({list:Ua.optional(),cancel:Ua.optional(),requests:la({sampling:la({createMessage:Ua.optional()}).optional(),elicitation:la({create:Ua.optional()}).optional()}).optional()}),_i=la({list:Ua.optional(),cancel:Ua.optional(),requests:la({tools:la({call:Ua.optional()}).optional()}).optional()}),vi=ca({experimental:ya(Eo(),Ua).optional(),sampling:ca({context:Ua.optional(),tools:Ua.optional()}).optional(),elicitation:gi.optional(),roots:ca({listChanged:Xo().optional()}).optional(),tasks:yi.optional()}),wi=Za.extend({protocolVersion:Eo(),capabilities:vi,clientInfo:fi}),bi=Ga.extend({method:ba("initialize"),params:wi}),xi=ca({experimental:ya(Eo(),Ua).optional(),logging:Ua.optional(),completions:Ua.optional(),prompts:ca({listChanged:Xo().optional()}).optional(),resources:ca({subscribe:Xo().optional(),listChanged:Xo().optional()}).optional(),tools:ca({listChanged:Xo().optional()}).optional(),tasks:_i.optional()}),ki=Qa.extend({protocolVersion:Eo(),capabilities:xi,serverInfo:fi,instructions:Eo().optional()}),$i=Xa.extend({method:ba("notifications/initialized"),params:Ja.optional()}),Ei=Ga.extend({method:ba("ping"),params:Za.optional()}),Si=ca({progress:Zo(),total:Ea(Zo()),message:Ea(Eo())}),Ti=ca({...Ja.shape,...Si.shape,progressToken:Fa}),Ii=Xa.extend({method:ba("notifications/progress"),params:Ti}),Ci=Za.extend({cursor:Ha.optional()}),Pi=Ga.extend({params:Ci.optional()}),Ri=Qa.extend({nextCursor:Ha.optional()}),ji=va(["working","input_required","completed","failed","cancelled"]),Ni=ca({taskId:Eo(),status:ji,ttl:da([Zo(),Yo()]),createdAt:Eo(),lastUpdatedAt:Eo(),pollInterval:Ea(Zo()),statusMessage:Ea(Eo())}),Ai=Qa.extend({task:Ni}),Oi=Ja.merge(Ni),zi=Xa.extend({method:ba("notifications/tasks/status"),params:Oi}),Mi=Ga.extend({method:ba("tasks/get"),params:Za.extend({taskId:Eo()})}),Di=Qa.merge(Ni),Li=Ga.extend({method:ba("tasks/result"),params:Za.extend({taskId:Eo()})}),qi=(Qa.loose(),Pi.extend({method:ba("tasks/list")})),Ui=Ri.extend({tasks:aa(Ni)}),Fi=Ga.extend({method:ba("tasks/cancel"),params:Za.extend({taskId:Eo()})}),Hi=Qa.merge(Ni),Vi=ca({uri:Eo(),mimeType:Ea(Eo()),_meta:ya(Eo(),na()).optional()}),Bi=Vi.extend({text:Eo()}),Wi=Eo().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),Zi=Vi.extend({blob:Wi}),Ki=va(["user","assistant"]),Gi=ca({audience:aa(Ki).optional(),priority:Zo().min(0).max(1).optional(),lastModified:po({offset:!0}).optional()}),Ji=ca({...hi.shape,...pi.shape,uri:Eo(),description:Ea(Eo()),mimeType:Ea(Eo()),annotations:Gi.optional(),_meta:Ea(la({}))}),Xi=ca({...hi.shape,...pi.shape,uriTemplate:Eo(),description:Ea(Eo()),mimeType:Ea(Eo()),annotations:Gi.optional(),_meta:Ea(la({}))}),Qi=Pi.extend({method:ba("resources/list")}),Yi=Ri.extend({resources:aa(Ji)}),ec=Pi.extend({method:ba("resources/templates/list")}),tc=Ri.extend({resourceTemplates:aa(Xi)}),nc=Za.extend({uri:Eo()}),rc=nc,sc=Ga.extend({method:ba("resources/read"),params:rc}),oc=Qa.extend({contents:aa(da([Bi,Zi]))}),ac=Xa.extend({method:ba("notifications/resources/list_changed"),params:Ja.optional()}),ic=nc,cc=Ga.extend({method:ba("resources/subscribe"),params:ic}),lc=nc,uc=Ga.extend({method:ba("resources/unsubscribe"),params:lc}),dc=Ja.extend({uri:Eo()}),pc=Xa.extend({method:ba("notifications/resources/updated"),params:dc}),hc=ca({name:Eo(),description:Ea(Eo()),required:Ea(Xo())}),fc=ca({...hi.shape,...pi.shape,description:Ea(Eo()),arguments:Ea(aa(hc)),_meta:Ea(la({}))}),mc=Pi.extend({method:ba("prompts/list")}),gc=Ri.extend({prompts:aa(fc)}),yc=Za.extend({name:Eo(),arguments:ya(Eo(),Eo()).optional()}),_c=Ga.extend({method:ba("prompts/get"),params:yc}),vc=ca({type:ba("text"),text:Eo(),annotations:Gi.optional(),_meta:ya(Eo(),na()).optional()}),wc=ca({type:ba("image"),data:Wi,mimeType:Eo(),annotations:Gi.optional(),_meta:ya(Eo(),na()).optional()}),bc=ca({type:ba("audio"),data:Wi,mimeType:Eo(),annotations:Gi.optional(),_meta:ya(Eo(),na()).optional()}),xc=ca({type:ba("tool_use"),name:Eo(),id:Eo(),input:ya(Eo(),na()),_meta:ya(Eo(),na()).optional()}),kc=ca({type:ba("resource"),resource:da([Bi,Zi]),annotations:Gi.optional(),_meta:ya(Eo(),na()).optional()}),$c=da([vc,wc,bc,Ji.extend({type:ba("resource_link")}),kc]),Ec=ca({role:Ki,content:$c}),Sc=Qa.extend({description:Eo().optional(),messages:aa(Ec)}),Tc=Xa.extend({method:ba("notifications/prompts/list_changed"),params:Ja.optional()}),Ic=ca({title:Eo().optional(),readOnlyHint:Xo().optional(),destructiveHint:Xo().optional(),idempotentHint:Xo().optional(),openWorldHint:Xo().optional()}),Cc=ca({taskSupport:va(["required","optional","forbidden"]).optional()}),Pc=ca({...hi.shape,...pi.shape,description:Eo().optional(),inputSchema:ca({type:ba("object"),properties:ya(Eo(),Ua).optional(),required:aa(Eo()).optional()}).catchall(na()),outputSchema:ca({type:ba("object"),properties:ya(Eo(),Ua).optional(),required:aa(Eo()).optional()}).catchall(na()).optional(),annotations:Ic.optional(),execution:Cc.optional(),_meta:ya(Eo(),na()).optional()}),Rc=Pi.extend({method:ba("tools/list")}),jc=Ri.extend({tools:aa(Pc)}),Nc=Qa.extend({content:aa($c).default([]),structuredContent:ya(Eo(),na()).optional(),isError:Xo().optional()}),Ac=(Nc.or(Qa.extend({toolResult:na()})),Ka.extend({name:Eo(),arguments:ya(Eo(),na()).optional()})),Oc=Ga.extend({method:ba("tools/call"),params:Ac}),zc=Xa.extend({method:ba("notifications/tools/list_changed"),params:Ja.optional()}),Mc=ca({autoRefresh:Xo().default(!0),debounceMs:Zo().int().nonnegative().default(300)}),Dc=va(["debug","info","notice","warning","error","critical","alert","emergency"]),Lc=Za.extend({level:Dc}),qc=Ga.extend({method:ba("logging/setLevel"),params:Lc}),Uc=Ja.extend({level:Dc,logger:Eo().optional(),data:na()}),Fc=Xa.extend({method:ba("notifications/message"),params:Uc}),Hc=ca({name:Eo().optional()}),Vc=ca({hints:aa(Hc).optional(),costPriority:Zo().min(0).max(1).optional(),speedPriority:Zo().min(0).max(1).optional(),intelligencePriority:Zo().min(0).max(1).optional()}),Bc=ca({mode:va(["auto","required","none"]).optional()}),Wc=ca({type:ba("tool_result"),toolUseId:Eo().describe("The unique identifier for the corresponding tool call."),content:aa($c).default([]),structuredContent:ca({}).loose().optional(),isError:Xo().optional(),_meta:ya(Eo(),na()).optional()}),Zc=ha("type",[vc,wc,bc]),Kc=ha("type",[vc,wc,bc,xc,Wc]),Gc=ca({role:Ki,content:da([Kc,aa(Kc)]),_meta:ya(Eo(),na()).optional()}),Jc=Ka.extend({messages:aa(Gc),modelPreferences:Vc.optional(),systemPrompt:Eo().optional(),includeContext:va(["none","thisServer","allServers"]).optional(),temperature:Zo().optional(),maxTokens:Zo().int(),stopSequences:aa(Eo()).optional(),metadata:Ua.optional(),tools:aa(Pc).optional(),toolChoice:Bc.optional()}),Xc=Ga.extend({method:ba("sampling/createMessage"),params:Jc}),Qc=Qa.extend({model:Eo(),stopReason:Ea(va(["endTurn","stopSequence","maxTokens"]).or(Eo())),role:Ki,content:Zc}),Yc=Qa.extend({model:Eo(),stopReason:Ea(va(["endTurn","stopSequence","maxTokens","toolUse"]).or(Eo())),role:Ki,content:da([Kc,aa(Kc)])}),el=ca({type:ba("boolean"),title:Eo().optional(),description:Eo().optional(),default:Xo().optional()}),tl=ca({type:ba("string"),title:Eo().optional(),description:Eo().optional(),minLength:Zo().optional(),maxLength:Zo().optional(),format:va(["email","uri","date","date-time"]).optional(),default:Eo().optional()}),nl=ca({type:va(["number","integer"]),title:Eo().optional(),description:Eo().optional(),minimum:Zo().optional(),maximum:Zo().optional(),default:Zo().optional()}),rl=ca({type:ba("string"),title:Eo().optional(),description:Eo().optional(),enum:aa(Eo()),default:Eo().optional()}),sl=ca({type:ba("string"),title:Eo().optional(),description:Eo().optional(),oneOf:aa(ca({const:Eo(),title:Eo()})),default:Eo().optional()}),ol=ca({type:ba("string"),title:Eo().optional(),description:Eo().optional(),enum:aa(Eo()),enumNames:aa(Eo()).optional(),default:Eo().optional()}),al=da([rl,sl]),il=da([ca({type:ba("array"),title:Eo().optional(),description:Eo().optional(),minItems:Zo().optional(),maxItems:Zo().optional(),items:ca({type:ba("string"),enum:aa(Eo())}),default:aa(Eo()).optional()}),ca({type:ba("array"),title:Eo().optional(),description:Eo().optional(),minItems:Zo().optional(),maxItems:Zo().optional(),items:ca({anyOf:aa(ca({const:Eo(),title:Eo()}))}),default:aa(Eo()).optional()})]),cl=da([ol,al,il]),ll=da([cl,el,tl,nl]),ul=da([Ka.extend({mode:ba("form").optional(),message:Eo(),requestedSchema:ca({type:ba("object"),properties:ya(Eo(),ll),required:aa(Eo()).optional()})}),Ka.extend({mode:ba("url"),message:Eo(),elicitationId:Eo(),url:Eo().url()})]),dl=Ga.extend({method:ba("elicitation/create"),params:ul}),pl=Ja.extend({elicitationId:Eo()}),hl=Xa.extend({method:ba("notifications/elicitation/complete"),params:pl}),fl=Qa.extend({action:va(["accept","decline","cancel"]),content:za(e=>null===e?void 0:e,ya(Eo(),da([Eo(),Zo(),Xo(),aa(Eo())])).optional())}),ml=ca({type:ba("ref/resource"),uri:Eo()}),gl=ca({type:ba("ref/prompt"),name:Eo()}),yl=Za.extend({ref:da([gl,ml]),argument:ca({name:Eo(),value:Eo()}),context:ca({arguments:ya(Eo(),Eo()).optional()}).optional()}),_l=Ga.extend({method:ba("completion/complete"),params:yl}),vl=Qa.extend({completion:la({values:aa(Eo()).max(100),total:Ea(Zo().int()),hasMore:Ea(Xo())})}),wl=ca({uri:Eo().startsWith("file://"),name:Eo().optional(),_meta:ya(Eo(),na()).optional()}),bl=Ga.extend({method:ba("roots/list"),params:Za.optional()}),xl=Qa.extend({roots:aa(wl)}),kl=Xa.extend({method:ba("notifications/roots/list_changed"),params:Ja.optional()});da([Ei,bi,_l,qc,_c,mc,Qi,ec,sc,cc,uc,Oc,Rc,Mi,Li,qi,Fi]),da([ui,Ii,$i,kl,zi]),da([ci,Qc,Yc,fl,xl,Di,Ui,Ai]),da([Ei,Xc,dl,bl,Mi,Li,qi,Fi]),da([ui,Ii,Fc,pc,ac,zc,Tc,zi,hl]),da([ci,ki,vl,Sc,gc,Yi,tc,oc,Nc,jc,Di,Ui,Ai]);class $l extends Error{constructor(e,t,n){super(`MCP error ${e}: ${t}`),this.code=e,this.data=n,this.name="McpError"}static fromError(e,t,n){if(e===oi.UrlElicitationRequired&&n){const e=n;if(e.elicitations)return new El(e.elicitations,t)}return new $l(e,t,n)}}class El extends $l{constructor(e,t=`URL elicitation${e.length>1?"s":""} required`){super(oi.UrlElicitationRequired,t,{elicitations:e})}get elicitations(){return this.data?.elicitations??[]}}function Sl(e){return"completed"===e||"failed"===e||"cancelled"===e}function Tl(e){const t=Kn(e),n=t?.method;if(!n)throw new Error("Schema is missing a method literal");const r=function(e){if(Wn(e)){const t=e,n=t._zod?.def;if(n){if(void 0!==n.value)return n.value;if(Array.isArray(n.values)&&n.values.length>0)return n.values[0]}}const t=e._def;if(t){if(void 0!==t.value)return t.value;if(Array.isArray(t.values)&&t.values.length>0)return t.values[0]}const n=e.value;if(void 0!==n)return n}(n);if("string"!=typeof r)throw new Error("Schema method literal must be a string");return r}function Il(e,t){const n=Zn(e,t);if(!n.success)throw n.error;return n.data}Symbol("Let zodToJsonSchema decide on which parser to use"),new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");class Cl{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(ui,e=>{this._oncancel(e)}),this.setNotificationHandler(Ii,e=>{this._onprogress(e)}),this.setRequestHandler(Ei,e=>({})),this._taskStore=e?.taskStore,this._taskMessageQueue=e?.taskMessageQueue,this._taskStore&&(this.setRequestHandler(Mi,async(e,t)=>{const n=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!n)throw new $l(oi.InvalidParams,"Failed to retrieve task: Task not found");return{...n}}),this.setRequestHandler(Li,async(e,t)=>{const n=async()=>{const r=e.params.taskId;if(this._taskMessageQueue){let e;for(;e=await this._taskMessageQueue.dequeue(r,t.sessionId);){if("response"===e.type||"error"===e.type){const t=e.message,n=t.id,r=this._requestResolvers.get(n);if(r)if(this._requestResolvers.delete(n),"response"===e.type)r(t);else{const e=t;r(new $l(e.error.code,e.error.message,e.error.data))}else{const t="response"===e.type?"Response":"Error";this._onerror(new Error(`${t} handler missing for request ${n}`))}continue}await(this._transport?.send(e.message,{relatedRequestId:t.requestId}))}}const s=await this._taskStore.getTask(r,t.sessionId);if(!s)throw new $l(oi.InvalidParams,`Task not found: ${r}`);if(!Sl(s.status))return await this._waitForTaskUpdate(r,t.signal),await n();if(Sl(s.status)){const e=await this._taskStore.getTaskResult(r,t.sessionId);return this._clearTaskQueue(r),{...e,_meta:{...e._meta,[La]:{taskId:r}}}}return await n()};return await n()}),this.setRequestHandler(qi,async(e,t)=>{try{const{tasks:n,nextCursor:r}=await this._taskStore.listTasks(e.params?.cursor,t.sessionId);return{tasks:n,nextCursor:r,_meta:{}}}catch(e){throw new $l(oi.InvalidParams,`Failed to list tasks: ${e instanceof Error?e.message:String(e)}`)}}),this.setRequestHandler(Fi,async(e,t)=>{try{const n=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!n)throw new $l(oi.InvalidParams,`Task not found: ${e.params.taskId}`);if(Sl(n.status))throw new $l(oi.InvalidParams,`Cannot cancel task in terminal status: ${n.status}`);await this._taskStore.updateTaskStatus(e.params.taskId,"cancelled","Client cancelled task execution.",t.sessionId),this._clearTaskQueue(e.params.taskId);const r=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!r)throw new $l(oi.InvalidParams,`Task not found after cancellation: ${e.params.taskId}`);return{_meta:{},...r}}catch(e){if(e instanceof $l)throw e;throw new $l(oi.InvalidRequest,`Failed to cancel task: ${e instanceof Error?e.message:String(e)}`)}}))}async _oncancel(e){if(!e.params.requestId)return;const t=this._requestHandlerAbortControllers.get(e.params.requestId);t?.abort(e.params.reason)}_setupTimeout(e,t,n,r,s=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(r,t),startTime:Date.now(),timeout:t,maxTotalTimeout:n,resetTimeoutOnProgress:s,onTimeout:r})}_resetTimeout(e){const t=this._timeoutInfo.get(e);if(!t)return!1;const n=Date.now()-t.startTime;if(t.maxTotalTimeout&&n>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),$l.fromError(oi.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:n});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){const t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e;const t=this.transport?.onclose;this._transport.onclose=()=>{t?.(),this._onclose()};const n=this.transport?.onerror;this._transport.onerror=e=>{n?.(e),this._onerror(e)};const r=this._transport?.onmessage;this._transport.onmessage=(e,t)=>{var n;r?.(e,t),si(e)||(e=>ai.safeParse(e).success)(e)?this._onresponse(e):ti(e)?this._onrequest(e,t):(n=e,ni.safeParse(n).success?this._onnotification(e):this._onerror(new Error(`Unknown message type: ${JSON.stringify(e)}`)))},await this._transport.start()}_onclose(){const e=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();const t=$l.fromError(oi.ConnectionClosed,"Connection closed");this._transport=void 0,this.onclose?.();for(const n of e.values())n(t)}_onerror(e){this.onerror?.(e)}_onnotification(e){const t=this._notificationHandlers.get(e.method)??this.fallbackNotificationHandler;void 0!==t&&Promise.resolve().then(()=>t(e)).catch(e=>this._onerror(new Error(`Uncaught error in notification handler: ${e}`)))}_onrequest(e,t){const n=this._requestHandlers.get(e.method)??this.fallbackRequestHandler,r=this._transport,s=e.params?._meta?.[La]?.taskId;if(void 0===n){const t={jsonrpc:"2.0",id:e.id,error:{code:oi.MethodNotFound,message:"Method not found"}};return void(s&&this._taskMessageQueue?this._enqueueTaskMessage(s,{type:"error",message:t,timestamp:Date.now()},r?.sessionId).catch(e=>this._onerror(new Error(`Failed to enqueue error response: ${e}`))):r?.send(t).catch(e=>this._onerror(new Error(`Failed to send an error response: ${e}`))))}const o=new AbortController;this._requestHandlerAbortControllers.set(e.id,o);const a=(i=e.params,Ka.safeParse(i).success?e.params.task:void 0);var i;const c=this._taskStore?this.requestTaskStore(e,r?.sessionId):void 0,l={signal:o.signal,sessionId:r?.sessionId,_meta:e.params?._meta,sendNotification:async t=>{const n={relatedRequestId:e.id};s&&(n.relatedTask={taskId:s}),await this.notification(t,n)},sendRequest:async(t,n,r)=>{const o={...r,relatedRequestId:e.id};s&&!o.relatedTask&&(o.relatedTask={taskId:s});const a=o.relatedTask?.taskId??s;return a&&c&&await c.updateTaskStatus(a,"input_required"),await this.request(t,n,o)},authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo,taskId:s,taskStore:c,taskRequestedTtl:a?.ttl,closeSSEStream:t?.closeSSEStream,closeStandaloneSSEStream:t?.closeStandaloneSSEStream};Promise.resolve().then(()=>{a&&this.assertTaskHandlerCapability(e.method)}).then(()=>n(e,l)).then(async t=>{if(o.signal.aborted)return;const n={result:t,jsonrpc:"2.0",id:e.id};s&&this._taskMessageQueue?await this._enqueueTaskMessage(s,{type:"response",message:n,timestamp:Date.now()},r?.sessionId):await(r?.send(n))},async t=>{if(o.signal.aborted)return;const n={jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(t.code)?t.code:oi.InternalError,message:t.message??"Internal error",...void 0!==t.data&&{data:t.data}}};s&&this._taskMessageQueue?await this._enqueueTaskMessage(s,{type:"error",message:n,timestamp:Date.now()},r?.sessionId):await(r?.send(n))}).catch(e=>this._onerror(new Error(`Failed to send response: ${e}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){const{progressToken:t,...n}=e.params,r=Number(t),s=this._progressHandlers.get(r);if(!s)return void this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));const o=this._responseHandlers.get(r),a=this._timeoutInfo.get(r);if(a&&o&&a.resetTimeoutOnProgress)try{this._resetTimeout(r)}catch(e){return this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),void o(e)}s(n)}_onresponse(e){const t=Number(e.id),n=this._requestResolvers.get(t);if(n)return this._requestResolvers.delete(t),void(si(e)?n(e):n(new $l(e.error.code,e.error.message,e.error.data)));const r=this._responseHandlers.get(t);if(void 0===r)return void this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));this._responseHandlers.delete(t),this._cleanupTimeout(t);let s=!1;if(si(e)&&e.result&&"object"==typeof e.result){const n=e.result;if(n.task&&"object"==typeof n.task){const e=n.task;"string"==typeof e.taskId&&(s=!0,this._taskProgressTokens.set(e.taskId,t))}}s||this._progressHandlers.delete(t),si(e)?r(e):r($l.fromError(e.error.code,e.error.message,e.error.data))}get transport(){return this._transport}async close(){await(this._transport?.close())}async*requestStream(e,t,n){const{task:r}=n??{};if(!r){try{const r=await this.request(e,t,n);yield{type:"result",result:r}}catch(e){yield{type:"error",error:e instanceof $l?e:new $l(oi.InternalError,String(e))}}return}let s;try{const r=await this.request(e,Ai,n);if(!r.task)throw new $l(oi.InternalError,"Task creation did not return a task");for(s=r.task.taskId,yield{type:"taskCreated",task:r.task};;){const e=await this.getTask({taskId:s},n);if(yield{type:"taskStatus",task:e},Sl(e.status)){if("completed"===e.status){const e=await this.getTaskResult({taskId:s},t,n);yield{type:"result",result:e}}else"failed"===e.status?yield{type:"error",error:new $l(oi.InternalError,`Task ${s} failed`)}:"cancelled"===e.status&&(yield{type:"error",error:new $l(oi.InternalError,`Task ${s} was cancelled`)});return}if("input_required"===e.status){const e=await this.getTaskResult({taskId:s},t,n);return void(yield{type:"result",result:e})}const r=e.pollInterval??this._options?.defaultTaskPollInterval??1e3;await new Promise(e=>setTimeout(e,r)),n?.signal?.throwIfAborted()}}catch(e){yield{type:"error",error:e instanceof $l?e:new $l(oi.InternalError,String(e))}}}request(e,t,n){const{relatedRequestId:r,resumptionToken:s,onresumptiontoken:o,task:a,relatedTask:i}=n??{};return new Promise((c,l)=>{const u=e=>{l(e)};if(!this._transport)return void u(new Error("Not connected"));if(!0===this._options?.enforceStrictCapabilities)try{this.assertCapabilityForMethod(e.method),a&&this.assertTaskCapability(e.method)}catch(e){return void u(e)}n?.signal?.throwIfAborted();const d=this._requestMessageId++,p={...e,jsonrpc:"2.0",id:d};n?.onprogress&&(this._progressHandlers.set(d,n.onprogress),p.params={...e.params,_meta:{...e.params?._meta||{},progressToken:d}}),a&&(p.params={...p.params,task:a}),i&&(p.params={...p.params,_meta:{...p.params?._meta||{},[La]:i}});const h=e=>{this._responseHandlers.delete(d),this._progressHandlers.delete(d),this._cleanupTimeout(d),this._transport?.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:d,reason:String(e)}},{relatedRequestId:r,resumptionToken:s,onresumptiontoken:o}).catch(e=>this._onerror(new Error(`Failed to send cancellation: ${e}`)));const t=e instanceof $l?e:new $l(oi.RequestTimeout,String(e));l(t)};this._responseHandlers.set(d,e=>{if(!n?.signal?.aborted){if(e instanceof Error)return l(e);try{const n=Zn(t,e.result);n.success?c(n.data):l(n.error)}catch(e){l(e)}}}),n?.signal?.addEventListener("abort",()=>{h(n?.signal?.reason)});const f=n?.timeout??6e4;this._setupTimeout(d,f,n?.maxTotalTimeout,()=>h($l.fromError(oi.RequestTimeout,"Request timed out",{timeout:f})),n?.resetTimeoutOnProgress??!1);const m=i?.taskId;if(m){const e=e=>{const t=this._responseHandlers.get(d);t?t(e):this._onerror(new Error(`Response handler missing for side-channeled request ${d}`))};this._requestResolvers.set(d,e),this._enqueueTaskMessage(m,{type:"request",message:p,timestamp:Date.now()}).catch(e=>{this._cleanupTimeout(d),l(e)})}else this._transport.send(p,{relatedRequestId:r,resumptionToken:s,onresumptiontoken:o}).catch(e=>{this._cleanupTimeout(d),l(e)})})}async getTask(e,t){return this.request({method:"tasks/get",params:e},Di,t)}async getTaskResult(e,t,n){return this.request({method:"tasks/result",params:e},t,n)}async listTasks(e,t){return this.request({method:"tasks/list",params:e},Ui,t)}async cancelTask(e,t){return this.request({method:"tasks/cancel",params:e},Hi,t)}async notification(e,t){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);const n=t?.relatedTask?.taskId;if(n){const r={...e,jsonrpc:"2.0",params:{...e.params,_meta:{...e.params?._meta||{},[La]:t.relatedTask}}};return void await this._enqueueTaskMessage(n,{type:"notification",message:r,timestamp:Date.now()})}if((this._options?.debouncedNotificationMethods??[]).includes(e.method)&&!e.params&&!t?.relatedRequestId&&!t?.relatedTask){if(this._pendingDebouncedNotifications.has(e.method))return;return this._pendingDebouncedNotifications.add(e.method),void Promise.resolve().then(()=>{if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let n={...e,jsonrpc:"2.0"};t?.relatedTask&&(n={...n,params:{...n.params,_meta:{...n.params?._meta||{},[La]:t.relatedTask}}}),this._transport?.send(n,t).catch(e=>this._onerror(e))})}let r={...e,jsonrpc:"2.0"};t?.relatedTask&&(r={...r,params:{...r.params,_meta:{...r.params?._meta||{},[La]:t.relatedTask}}}),await this._transport.send(r,t)}setRequestHandler(e,t){const n=Tl(e);this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(n,r)=>{const s=Il(e,n);return Promise.resolve(t(s,r))})}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){const n=Tl(e);this._notificationHandlers.set(n,n=>{const r=Il(e,n);return Promise.resolve(t(r))})}removeNotificationHandler(e){this._notificationHandlers.delete(e)}_cleanupTaskProgressHandler(e){const t=this._taskProgressTokens.get(e);void 0!==t&&(this._progressHandlers.delete(t),this._taskProgressTokens.delete(e))}async _enqueueTaskMessage(e,t,n){if(!this._taskStore||!this._taskMessageQueue)throw new Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");const r=this._options?.maxTaskQueueSize;await this._taskMessageQueue.enqueue(e,t,n,r)}async _clearTaskQueue(e,t){if(this._taskMessageQueue){const n=await this._taskMessageQueue.dequeueAll(e,t);for(const t of n)if("request"===t.type&&ti(t.message)){const n=t.message.id,r=this._requestResolvers.get(n);r?(r(new $l(oi.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(n)):this._onerror(new Error(`Resolver missing for request ${n} during task ${e} cleanup`))}}}async _waitForTaskUpdate(e,t){let n=this._options?.defaultTaskPollInterval??1e3;try{const t=await(this._taskStore?.getTask(e));t?.pollInterval&&(n=t.pollInterval)}catch{}return new Promise((e,r)=>{if(t.aborted)return void r(new $l(oi.InvalidRequest,"Request cancelled"));const s=setTimeout(e,n);t.addEventListener("abort",()=>{clearTimeout(s),r(new $l(oi.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(e,t){const n=this._taskStore;if(!n)throw new Error("No task store configured");return{createTask:async r=>{if(!e)throw new Error("No request provided");return await n.createTask(r,e.id,{method:e.method,params:e.params},t)},getTask:async e=>{const r=await n.getTask(e,t);if(!r)throw new $l(oi.InvalidParams,"Failed to retrieve task: Task not found");return r},storeTaskResult:async(e,r,s)=>{await n.storeTaskResult(e,r,s,t);const o=await n.getTask(e,t);if(o){const t=zi.parse({method:"notifications/tasks/status",params:o});await this.notification(t),Sl(o.status)&&this._cleanupTaskProgressHandler(e)}},getTaskResult:e=>n.getTaskResult(e,t),updateTaskStatus:async(e,r,s)=>{const o=await n.getTask(e,t);if(!o)throw new $l(oi.InvalidParams,`Task "${e}" not found - it may have been cleaned up`);if(Sl(o.status))throw new $l(oi.InvalidParams,`Cannot update task "${e}" from terminal status "${o.status}" to "${r}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await n.updateTaskStatus(e,r,s,t);const a=await n.getTask(e,t);if(a){const t=zi.parse({method:"notifications/tasks/status",params:a});await this.notification(t),Sl(a.status)&&this._cleanupTaskProgressHandler(e)}},listTasks:e=>n.listTasks(e,t)}}}function Pl(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}var Rl=n(5133),jl=n(9625);class Nl{constructor(e){this._ajv=e??function(){const e=new Rl({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return jl(e),e}()}getValidator(e){const t="$id"in e&&"string"==typeof e.$id?this._ajv.getSchema(e.$id)??this._ajv.compile(e):this._ajv.compile(e);return e=>t(e)?{valid:!0,data:e,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(t.errors)}}}class Al{constructor(e){this._client=e}async*callToolStream(e,t=Nc,n){const r=this._client,s={...n,task:n?.task??(r.isToolTask(e.name)?{}:void 0)},o=r.requestStream({method:"tools/call",params:e},t,s),a=r.getToolOutputValidator(e.name);for await(const t of o){if("result"===t.type&&a){const n=t.result;if(!n.structuredContent&&!n.isError)return void(yield{type:"error",error:new $l(oi.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`)});if(n.structuredContent)try{const e=a(n.structuredContent);if(!e.valid)return void(yield{type:"error",error:new $l(oi.InvalidParams,`Structured content does not match the tool's output schema: ${e.errorMessage}`)})}catch(e){return e instanceof $l?void(yield{type:"error",error:e}):void(yield{type:"error",error:new $l(oi.InvalidParams,`Failed to validate structured content: ${e instanceof Error?e.message:String(e)}`)})}}yield t}}async getTask(e,t){return this._client.getTask({taskId:e},t)}async getTaskResult(e,t,n){return this._client.getTaskResult({taskId:e},t,n)}async listTasks(e,t){return this._client.listTasks(e?{cursor:e}:void 0,t)}async cancelTask(e,t){return this._client.cancelTask({taskId:e},t)}requestStream(e,t,n){return this._client.requestStream(e,t,n)}}function Ol(e,t){if(e&&null!==t&&"object"==typeof t){if("object"===e.type&&e.properties&&"object"==typeof e.properties){const n=t,r=e.properties;for(const e of Object.keys(r)){const t=r[e];void 0===n[e]&&Object.prototype.hasOwnProperty.call(t,"default")&&(n[e]=t.default),void 0!==n[e]&&Ol(t,n[e])}}if(Array.isArray(e.anyOf))for(const n of e.anyOf)"boolean"!=typeof n&&Ol(n,t);if(Array.isArray(e.oneOf))for(const n of e.oneOf)"boolean"!=typeof n&&Ol(n,t)}}class zl extends Cl{constructor(e,t){super(t),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._cachedKnownTaskTools=new Set,this._cachedRequiredTaskTools=new Set,this._listChangedDebounceTimers=new Map,this._capabilities=t?.capabilities??{},this._jsonSchemaValidator=t?.jsonSchemaValidator??new Nl,t?.listChanged&&(this._pendingListChangedConfig=t.listChanged)}_setupListChangedHandlers(e){e.tools&&this._serverCapabilities?.tools?.listChanged&&this._setupListChangedHandler("tools",zc,e.tools,async()=>(await this.listTools()).tools),e.prompts&&this._serverCapabilities?.prompts?.listChanged&&this._setupListChangedHandler("prompts",Tc,e.prompts,async()=>(await this.listPrompts()).prompts),e.resources&&this._serverCapabilities?.resources?.listChanged&&this._setupListChangedHandler("resources",ac,e.resources,async()=>(await this.listResources()).resources)}get experimental(){return this._experimental||(this._experimental={tasks:new Al(this)}),this._experimental}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=function(e,t){const n={...e};for(const e in t){const r=e,s=t[r];if(void 0===s)continue;const o=n[r];Pl(o)&&Pl(s)?n[r]={...o,...s}:n[r]=s}return n}(this._capabilities,e)}setRequestHandler(e,t){const n=Kn(e),r=n?.method;if(!r)throw new Error("Schema is missing a method literal");let s;if(Wn(r)){const e=r,t=e._zod?.def;s=t?.value??e.value}else{const e=r,t=e._def;s=t?.value??e.value}if("string"!=typeof s)throw new Error("Schema method literal must be a string");const o=s;if("elicitation/create"===o){const n=async(e,n)=>{const r=Zn(dl,e);if(!r.success){const e=r.error instanceof Error?r.error.message:String(r.error);throw new $l(oi.InvalidParams,`Invalid elicitation request: ${e}`)}const{params:s}=r.data;s.mode=s.mode??"form";const{supportsFormMode:o,supportsUrlMode:a}=function(e){if(!e)return{supportsFormMode:!1,supportsUrlMode:!1};const t=void 0!==e.form,n=void 0!==e.url;return{supportsFormMode:t||!t&&!n,supportsUrlMode:n}}(this._capabilities.elicitation);if("form"===s.mode&&!o)throw new $l(oi.InvalidParams,"Client does not support form-mode elicitation requests");if("url"===s.mode&&!a)throw new $l(oi.InvalidParams,"Client does not support URL-mode elicitation requests");const i=await Promise.resolve(t(e,n));if(s.task){const e=Zn(Ai,i);if(!e.success){const t=e.error instanceof Error?e.error.message:String(e.error);throw new $l(oi.InvalidParams,`Invalid task creation result: ${t}`)}return e.data}const c=Zn(fl,i);if(!c.success){const e=c.error instanceof Error?c.error.message:String(c.error);throw new $l(oi.InvalidParams,`Invalid elicitation result: ${e}`)}const l=c.data,u="form"===s.mode?s.requestedSchema:void 0;if("form"===s.mode&&"accept"===l.action&&l.content&&u&&this._capabilities.elicitation?.form?.applyDefaults)try{Ol(u,l.content)}catch{}return l};return super.setRequestHandler(e,n)}if("sampling/createMessage"===o){const n=async(e,n)=>{const r=Zn(Xc,e);if(!r.success){const e=r.error instanceof Error?r.error.message:String(r.error);throw new $l(oi.InvalidParams,`Invalid sampling request: ${e}`)}const{params:s}=r.data,o=await Promise.resolve(t(e,n));if(s.task){const e=Zn(Ai,o);if(!e.success){const t=e.error instanceof Error?e.error.message:String(e.error);throw new $l(oi.InvalidParams,`Invalid task creation result: ${t}`)}return e.data}const a=Zn(s.tools||s.toolChoice?Yc:Qc,o);if(!a.success){const e=a.error instanceof Error?a.error.message:String(a.error);throw new $l(oi.InvalidParams,`Invalid sampling result: ${e}`)}return a.data};return super.setRequestHandler(e,n)}return super.setRequestHandler(e,t)}assertCapability(e,t){if(!this._serverCapabilities?.[e])throw new Error(`Server does not support ${e} (required for ${t})`)}async connect(e,t){if(await super.connect(e),void 0===e.sessionId)try{const n=await this.request({method:"initialize",params:{protocolVersion:Ma,capabilities:this._capabilities,clientInfo:this._clientInfo}},ki,t);if(void 0===n)throw new Error(`Server sent invalid initialize result: ${n}`);if(!Da.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(n.protocolVersion),this._instructions=n.instructions,await this.notification({method:"notifications/initialized"}),this._pendingListChangedConfig&&(this._setupListChangedHandlers(this._pendingListChangedConfig),this._pendingListChangedConfig=void 0)}catch(e){throw this.close(),e}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){switch(e){case"logging/setLevel":if(!this._serverCapabilities?.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._serverCapabilities?.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!this._serverCapabilities?.resources)throw new Error(`Server does not support resources (required for ${e})`);if("resources/subscribe"===e&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._serverCapabilities?.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!this._serverCapabilities?.completions)throw new Error(`Server does not support completions (required for ${e})`)}}assertNotificationCapability(e){if("notifications/roots/list_changed"===e&&!this._capabilities.roots?.listChanged)throw new Error(`Client does not support roots list changed notifications (required for ${e})`)}assertRequestHandlerCapability(e){if(this._capabilities)switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw new Error(`Client does not support tasks capability (required for ${e})`)}}assertTaskCapability(e){!function(e,t,n){if(!e)throw new Error(`${n} does not support task creation (required for ${t})`);if("tools/call"===t&&!e.tools?.call)throw new Error(`${n} does not support task creation for tools/call (required for ${t})`)}(this._serverCapabilities?.tasks?.requests,e,"Server")}assertTaskHandlerCapability(e){this._capabilities&&function(e,t,n){if(!e)throw new Error(`${n} does not support task creation (required for ${t})`);switch(t){case"sampling/createMessage":if(!e.sampling?.createMessage)throw new Error(`${n} does not support task creation for sampling/createMessage (required for ${t})`);break;case"elicitation/create":if(!e.elicitation?.create)throw new Error(`${n} does not support task creation for elicitation/create (required for ${t})`)}}(this._capabilities.tasks?.requests,e,"Client")}async ping(e){return this.request({method:"ping"},ci,e)}async complete(e,t){return this.request({method:"completion/complete",params:e},vl,t)}async setLoggingLevel(e,t){return this.request({method:"logging/setLevel",params:{level:e}},ci,t)}async getPrompt(e,t){return this.request({method:"prompts/get",params:e},Sc,t)}async listPrompts(e,t){return this.request({method:"prompts/list",params:e},gc,t)}async listResources(e,t){return this.request({method:"resources/list",params:e},Yi,t)}async listResourceTemplates(e,t){return this.request({method:"resources/templates/list",params:e},tc,t)}async readResource(e,t){return this.request({method:"resources/read",params:e},oc,t)}async subscribeResource(e,t){return this.request({method:"resources/subscribe",params:e},ci,t)}async unsubscribeResource(e,t){return this.request({method:"resources/unsubscribe",params:e},ci,t)}async callTool(e,t=Nc,n){if(this.isToolTaskRequired(e.name))throw new $l(oi.InvalidRequest,`Tool "${e.name}" requires task-based execution. Use client.experimental.tasks.callToolStream() instead.`);const r=await this.request({method:"tools/call",params:e},t,n),s=this.getToolOutputValidator(e.name);if(s){if(!r.structuredContent&&!r.isError)throw new $l(oi.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(r.structuredContent)try{const e=s(r.structuredContent);if(!e.valid)throw new $l(oi.InvalidParams,`Structured content does not match the tool's output schema: ${e.errorMessage}`)}catch(e){if(e instanceof $l)throw e;throw new $l(oi.InvalidParams,`Failed to validate structured content: ${e instanceof Error?e.message:String(e)}`)}}return r}isToolTask(e){return!!this._serverCapabilities?.tasks?.requests?.tools?.call&&this._cachedKnownTaskTools.has(e)}isToolTaskRequired(e){return this._cachedRequiredTaskTools.has(e)}cacheToolMetadata(e){this._cachedToolOutputValidators.clear(),this._cachedKnownTaskTools.clear(),this._cachedRequiredTaskTools.clear();for(const t of e){if(t.outputSchema){const e=this._jsonSchemaValidator.getValidator(t.outputSchema);this._cachedToolOutputValidators.set(t.name,e)}const e=t.execution?.taskSupport;"required"!==e&&"optional"!==e||this._cachedKnownTaskTools.add(t.name),"required"===e&&this._cachedRequiredTaskTools.add(t.name)}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,t){const n=await this.request({method:"tools/list",params:e},jc,t);return this.cacheToolMetadata(n.tools),n}_setupListChangedHandler(e,t,n,r){const s=Mc.safeParse(n);if(!s.success)throw new Error(`Invalid ${e} listChanged options: ${s.error.message}`);if("function"!=typeof n.onChanged)throw new Error(`Invalid ${e} listChanged options: onChanged must be a function`);const{autoRefresh:o,debounceMs:a}=s.data,{onChanged:i}=n,c=async()=>{if(o)try{const e=await r();i(null,e)}catch(e){const t=e instanceof Error?e:new Error(String(e));i(t,null)}else i(null,null)};this.setNotificationHandler(t,()=>{if(a){const t=this._listChangedDebounceTimers.get(e);t&&clearTimeout(t);const n=setTimeout(c,a);this._listChangedDebounceTimers.set(e,n)}else c()})}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}}function Ml(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):{...e}:{}}let Dl;async function Ll(e){return(await Dl).getRandomValues(new Uint8Array(e))}async function ql(e){const t=await(await Dl).subtle.digest("SHA-256",(new TextEncoder).encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}Dl=globalThis.crypto;const Ul=eo(Po,undefined).superRefine((e,t)=>{if(!URL.canParse(e))return t.addIssue({code:"custom",message:"URL must be parseable",fatal:!0}),ln}).refine(e=>{const t=new URL(e);return"javascript:"!==t.protocol&&"data:"!==t.protocol&&"vbscript:"!==t.protocol},{message:"URL cannot use javascript:, data:, or vbscript: scheme"});const Fl=la({resource:Eo().url(),authorization_servers:aa(Ul).optional(),jwks_uri:Eo().url().optional(),scopes_supported:aa(Eo()).optional(),bearer_methods_supported:aa(Eo()).optional(),resource_signing_alg_values_supported:aa(Eo()).optional(),resource_name:Eo().optional(),resource_documentation:Eo().optional(),resource_policy_uri:Eo().url().optional(),resource_tos_uri:Eo().url().optional(),tls_client_certificate_bound_access_tokens:Xo().optional(),authorization_details_types_supported:aa(Eo()).optional(),dpop_signing_alg_values_supported:aa(Eo()).optional(),dpop_bound_access_tokens_required:Xo().optional()}),Hl=la({issuer:Eo(),authorization_endpoint:Ul,token_endpoint:Ul,registration_endpoint:Ul.optional(),scopes_supported:aa(Eo()).optional(),response_types_supported:aa(Eo()),response_modes_supported:aa(Eo()).optional(),grant_types_supported:aa(Eo()).optional(),token_endpoint_auth_methods_supported:aa(Eo()).optional(),token_endpoint_auth_signing_alg_values_supported:aa(Eo()).optional(),service_documentation:Ul.optional(),revocation_endpoint:Ul.optional(),revocation_endpoint_auth_methods_supported:aa(Eo()).optional(),revocation_endpoint_auth_signing_alg_values_supported:aa(Eo()).optional(),introspection_endpoint:Eo().optional(),introspection_endpoint_auth_methods_supported:aa(Eo()).optional(),introspection_endpoint_auth_signing_alg_values_supported:aa(Eo()).optional(),code_challenge_methods_supported:aa(Eo()).optional(),client_id_metadata_document_supported:Xo().optional()}),Vl=ca({...la({issuer:Eo(),authorization_endpoint:Ul,token_endpoint:Ul,userinfo_endpoint:Ul.optional(),jwks_uri:Ul,registration_endpoint:Ul.optional(),scopes_supported:aa(Eo()).optional(),response_types_supported:aa(Eo()),response_modes_supported:aa(Eo()).optional(),grant_types_supported:aa(Eo()).optional(),acr_values_supported:aa(Eo()).optional(),subject_types_supported:aa(Eo()),id_token_signing_alg_values_supported:aa(Eo()),id_token_encryption_alg_values_supported:aa(Eo()).optional(),id_token_encryption_enc_values_supported:aa(Eo()).optional(),userinfo_signing_alg_values_supported:aa(Eo()).optional(),userinfo_encryption_alg_values_supported:aa(Eo()).optional(),userinfo_encryption_enc_values_supported:aa(Eo()).optional(),request_object_signing_alg_values_supported:aa(Eo()).optional(),request_object_encryption_alg_values_supported:aa(Eo()).optional(),request_object_encryption_enc_values_supported:aa(Eo()).optional(),token_endpoint_auth_methods_supported:aa(Eo()).optional(),token_endpoint_auth_signing_alg_values_supported:aa(Eo()).optional(),display_values_supported:aa(Eo()).optional(),claim_types_supported:aa(Eo()).optional(),claims_supported:aa(Eo()).optional(),service_documentation:Eo().optional(),claims_locales_supported:aa(Eo()).optional(),ui_locales_supported:aa(Eo()).optional(),claims_parameter_supported:Xo().optional(),request_parameter_supported:Xo().optional(),request_uri_parameter_supported:Xo().optional(),require_request_uri_registration:Xo().optional(),op_policy_uri:Ul.optional(),op_tos_uri:Ul.optional(),client_id_metadata_document_supported:Xo().optional()}).shape,...Hl.pick({code_challenge_methods_supported:!0}).shape}),Bl=ca({access_token:Eo(),id_token:Eo().optional(),token_type:Eo(),expires_in:function(e){return new e({type:"number",coerce:!0,checks:[],...Cn(undefined)})}(Wo,void 0).optional(),scope:Eo().optional(),refresh_token:Eo().optional()}).strip(),Wl=ca({error:Eo(),error_description:Eo().optional(),error_uri:Eo().optional()}),Zl=Ul.optional().or(ba("").transform(()=>{})),Kl=ca({redirect_uris:aa(Ul),token_endpoint_auth_method:Eo().optional(),grant_types:aa(Eo()).optional(),response_types:aa(Eo()).optional(),client_name:Eo().optional(),client_uri:Ul.optional(),logo_uri:Zl,scope:Eo().optional(),contacts:aa(Eo()).optional(),tos_uri:Zl,policy_uri:Eo().optional(),jwks_uri:Ul.optional(),jwks:(Xl=ea,new Xl({type:"any"})).optional(),software_id:Eo().optional(),software_version:Eo().optional(),software_statement:Eo().optional()}).strip(),Gl=ca({client_id:Eo(),client_secret:Eo().optional(),client_id_issued_at:Zo().optional(),client_secret_expires_at:Zo().optional()}).strip(),Jl=Kl.merge(Gl);var Xl;ca({error:Eo(),error_description:Eo().optional()}).strip(),ca({token:Eo(),token_type_hint:Eo().optional()}).strip();class Ql extends Error{constructor(e,t){super(e),this.errorUri=t,this.name=this.constructor.name}toResponseObject(){const e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}}class Yl extends Ql{}Yl.errorCode="invalid_request";class eu extends Ql{}eu.errorCode="invalid_client";class tu extends Ql{}tu.errorCode="invalid_grant";class nu extends Ql{}nu.errorCode="unauthorized_client";class ru extends Ql{}ru.errorCode="unsupported_grant_type";class su extends Ql{}su.errorCode="invalid_scope";class ou extends Ql{}ou.errorCode="access_denied";class au extends Ql{}au.errorCode="server_error";class iu extends Ql{}iu.errorCode="temporarily_unavailable";class cu extends Ql{}cu.errorCode="unsupported_response_type";class lu extends Ql{}lu.errorCode="unsupported_token_type";class uu extends Ql{}uu.errorCode="invalid_token";class du extends Ql{}du.errorCode="method_not_allowed";class pu extends Ql{}pu.errorCode="too_many_requests";class hu extends Ql{}hu.errorCode="invalid_client_metadata";class fu extends Ql{}fu.errorCode="insufficient_scope";class mu extends Ql{}mu.errorCode="invalid_target";const gu={[Yl.errorCode]:Yl,[eu.errorCode]:eu,[tu.errorCode]:tu,[nu.errorCode]:nu,[ru.errorCode]:ru,[su.errorCode]:su,[ou.errorCode]:ou,[au.errorCode]:au,[iu.errorCode]:iu,[cu.errorCode]:cu,[lu.errorCode]:lu,[uu.errorCode]:uu,[du.errorCode]:du,[pu.errorCode]:pu,[hu.errorCode]:hu,[fu.errorCode]:fu,[mu.errorCode]:mu};class yu extends Error{constructor(e){super(e??"Unauthorized")}}const _u="code",vu="S256";async function wu(e){const t=e instanceof Response?e.status:void 0,n=e instanceof Response?await e.text():e;try{const e=Wl.parse(JSON.parse(n)),{error:t,error_description:r,error_uri:s}=e;return new(gu[t]||au)(r||"",s)}catch(e){return new au(`${t?`HTTP ${t}: `:""}Invalid OAuth error response: ${e}. Raw body: ${n}`)}}async function bu(e,t){try{return await xu(e,t)}catch(n){if(n instanceof eu||n instanceof nu)return await(e.invalidateCredentials?.("all")),await xu(e,t);if(n instanceof tu)return await(e.invalidateCredentials?.("tokens")),await xu(e,t);throw n}}async function xu(e,{serverUrl:t,authorizationCode:n,scope:r,resourceMetadataUrl:s,fetchFn:o}){let a,i;try{a=await async function(e,t,n=fetch){const r=await async function(e,t,n,r){const s=new URL(e),o=r?.protocolVersion??Ma;let a;if(r?.metadataUrl)a=new URL(r.metadataUrl);else{const e=function(e,t="",n={}){return t.endsWith("/")&&(t=t.slice(0,-1)),n.prependPathname?`${t}/.well-known/${e}`:`/.well-known/${e}${t}`}(t,s.pathname);a=new URL(e,r?.metadataServerUrl??s),a.search=s.search}let i=await Su(a,o,n);if(!r?.metadataUrl&&function(e,t){return!e||e.status>=400&&e.status<500&&"/"!==t}(i,s.pathname)){const e=new URL(`/.well-known/${t}`,s);i=await Su(e,o,n)}return i}(e,"oauth-protected-resource",n,{protocolVersion:t?.protocolVersion,metadataUrl:t?.resourceMetadataUrl});if(!r||404===r.status)throw await(r?.body?.cancel()),new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!r.ok)throw await(r.body?.cancel()),new Error(`HTTP ${r.status} trying to load well-known OAuth protected resource metadata.`);return Fl.parse(await r.json())}(t,{resourceMetadataUrl:s},o),a.authorization_servers&&a.authorization_servers.length>0&&(i=a.authorization_servers[0])}catch{}i||(i=new URL("/",t));const c=await async function(e,t,n){const r=function(e){const t="string"==typeof e?new URL(e):new URL(e.href);return t.hash="",t}(e);if(t.validateResourceURL)return await t.validateResourceURL(r,n?.resource);if(n){if(!function({requestedResource:e,configuredResource:t}){const n="string"==typeof e?new URL(e):new URL(e.href),r="string"==typeof t?new URL(t):new URL(t.href);if(n.origin!==r.origin)return!1;if(n.pathname.length<r.pathname.length)return!1;const s=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",o=r.pathname.endsWith("/")?r.pathname:r.pathname+"/";return s.startsWith(o)}({requestedResource:r,configuredResource:n.resource}))throw new Error(`Protected resource ${n.resource} does not match expected ${r} (or origin)`);return new URL(n.resource)}}(t,e,a),l=await async function(e,{fetchFn:t=fetch,protocolVersion:n=Ma}={}){const r={"MCP-Protocol-Version":n,Accept:"application/json"},s=function(e){const t="string"==typeof e?new URL(e):e,n=[];if(!("/"!==t.pathname))return n.push({url:new URL("/.well-known/oauth-authorization-server",t.origin),type:"oauth"}),n.push({url:new URL("/.well-known/openid-configuration",t.origin),type:"oidc"}),n;let r=t.pathname;return r.endsWith("/")&&(r=r.slice(0,-1)),n.push({url:new URL(`/.well-known/oauth-authorization-server${r}`,t.origin),type:"oauth"}),n.push({url:new URL(`/.well-known/openid-configuration${r}`,t.origin),type:"oidc"}),n.push({url:new URL(`${r}/.well-known/openid-configuration`,t.origin),type:"oidc"}),n}(e);for(const{url:e,type:n}of s){const s=await Eu(e,r,t);if(s){if(!s.ok){if(await(s.body?.cancel()),s.status>=400&&s.status<500)continue;throw new Error(`HTTP ${s.status} trying to load ${"oauth"===n?"OAuth":"OpenID provider"} metadata from ${e}`)}return"oauth"===n?Hl.parse(await s.json()):Vl.parse(await s.json())}}}(i,{fetchFn:o});let u=await Promise.resolve(e.clientInformation());if(!u){if(void 0!==n)throw new Error("Existing OAuth client information is required when exchanging an authorization code");const t=!0===l?.client_id_metadata_document_supported,r=e.clientMetadataUrl;if(r&&!function(e){if(!e)return!1;try{const t=new URL(e);return"https:"===t.protocol&&"/"!==t.pathname}catch{return!1}}(r))throw new hu(`clientMetadataUrl must be a valid HTTPS URL with a non-root pathname, got: ${r}`);if(t&&r)u={client_id:r},await(e.saveClientInformation?.(u));else{if(!e.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");const t=await async function(e,{metadata:t,clientMetadata:n,fetchFn:r}){let s;if(t){if(!t.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");s=new URL(t.registration_endpoint)}else s=new URL("/register",e);const o=await(r??fetch)(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!o.ok)throw await wu(o);return Jl.parse(await o.json())}(i,{metadata:l,clientMetadata:e.clientMetadata,fetchFn:o});await e.saveClientInformation(t),u=t}}const d=!e.redirectUrl;if(void 0!==n||d){const t=await async function(e,t,{metadata:n,resource:r,authorizationCode:s,fetchFn:o}={}){const a=e.clientMetadata.scope;let i;if(e.prepareTokenRequest&&(i=await e.prepareTokenRequest(a)),!i){if(!s)throw new Error("Either provider.prepareTokenRequest() or authorizationCode is required");if(!e.redirectUrl)throw new Error("redirectUrl is required for authorization_code flow");i=function(e,t,n){return new URLSearchParams({grant_type:"authorization_code",code:e,code_verifier:t,redirect_uri:String(n)})}(s,await e.codeVerifier(),e.redirectUrl)}return Tu(t,{metadata:n,tokenRequestParams:i,clientInformation:await e.clientInformation()??void 0,addClientAuthentication:e.addClientAuthentication,resource:r,fetchFn:o})}(e,i,{metadata:l,resource:c,authorizationCode:n,fetchFn:o});return await e.saveTokens(t),"AUTHORIZED"}const p=await e.tokens();if(p?.refresh_token)try{const t=await async function(e,{metadata:t,clientInformation:n,refreshToken:r,resource:s,addClientAuthentication:o,fetchFn:a}){const i=new URLSearchParams({grant_type:"refresh_token",refresh_token:r});return{refresh_token:r,...await Tu(e,{metadata:t,tokenRequestParams:i,clientInformation:n,addClientAuthentication:o,resource:s,fetchFn:a})}}(i,{metadata:l,clientInformation:u,refreshToken:p.refresh_token,resource:c,addClientAuthentication:e.addClientAuthentication,fetchFn:o});return await e.saveTokens(t),"AUTHORIZED"}catch(e){if(e instanceof Ql&&!(e instanceof au))throw e}const h=e.state?await e.state():void 0,{authorizationUrl:f,codeVerifier:m}=await async function(e,{metadata:t,clientInformation:n,redirectUrl:r,scope:s,state:o,resource:a}){let i;if(t){if(i=new URL(t.authorization_endpoint),!t.response_types_supported.includes(_u))throw new Error(`Incompatible auth server: does not support response type ${_u}`);if(t.code_challenge_methods_supported&&!t.code_challenge_methods_supported.includes(vu))throw new Error(`Incompatible auth server: does not support code challenge method ${vu}`)}else i=new URL("/authorize",e);const c=await async function(e){if(e||(e=43),e<43||e>128)throw`Expected a length between 43 and 128. Received ${e}.`;const t=await async function(e){return await async function(e){const t=Math.pow(2,8)-Math.pow(2,8)%66;let n="";for(;n.length<e;){const r=await Ll(e-n.length);for(const e of r)e<t&&(n+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~"[e%66])}return n}(e)}(e);return{code_verifier:t,code_challenge:await ql(t)}}(),l=c.code_verifier,u=c.code_challenge;return i.searchParams.set("response_type",_u),i.searchParams.set("client_id",n.client_id),i.searchParams.set("code_challenge",u),i.searchParams.set("code_challenge_method",vu),i.searchParams.set("redirect_uri",String(r)),o&&i.searchParams.set("state",o),s&&i.searchParams.set("scope",s),s?.includes("offline_access")&&i.searchParams.append("prompt","consent"),a&&i.searchParams.set("resource",a.href),{authorizationUrl:i,codeVerifier:l}}(i,{metadata:l,clientInformation:u,state:h,redirectUrl:e.redirectUrl,scope:r||a?.scopes_supported?.join(" ")||e.clientMetadata.scope,resource:c});return await e.saveCodeVerifier(m),await e.redirectToAuthorization(f),"REDIRECT"}function ku(e){const t=e.headers.get("WWW-Authenticate");if(!t)return{};const[n,r]=t.split(" ");if("bearer"!==n.toLowerCase()||!r)return{};const s=$u(e,"resource_metadata")||void 0;let o;if(s)try{o=new URL(s)}catch{}return{resourceMetadataUrl:o,scope:$u(e,"scope")||void 0,error:$u(e,"error")||void 0}}function $u(e,t){const n=e.headers.get("WWW-Authenticate");if(!n)return null;const r=new RegExp(`${t}=(?:"([^"]+)"|([^\\s,]+))`),s=n.match(r);return s?s[1]||s[2]:null}async function Eu(e,t,n=fetch){try{return await n(e,{headers:t})}catch(r){if(r instanceof TypeError)return t?Eu(e,void 0,n):void 0;throw r}}async function Su(e,t,n=fetch){const r={"MCP-Protocol-Version":t};return await Eu(e,r,n)}async function Tu(e,{metadata:t,tokenRequestParams:n,clientInformation:r,addClientAuthentication:s,resource:o,fetchFn:a}){const i=t?.token_endpoint?new URL(t.token_endpoint):new URL("/token",e),c=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"});if(o&&n.set("resource",o.href),s)await s(c,n,i,t);else if(r){const e=function(e,t){const n=void 0!==e.client_secret;return 0===t.length?n?"client_secret_post":"none":"token_endpoint_auth_method"in e&&e.token_endpoint_auth_method&&(r=e.token_endpoint_auth_method,["client_secret_basic","client_secret_post","none"].includes(r))&&t.includes(e.token_endpoint_auth_method)?e.token_endpoint_auth_method:n&&t.includes("client_secret_basic")?"client_secret_basic":n&&t.includes("client_secret_post")?"client_secret_post":t.includes("none")?"none":n?"client_secret_post":"none";var r}(r,t?.token_endpoint_auth_methods_supported??[]);!function(e,t,n,r){const{client_id:s,client_secret:o}=t;switch(e){case"client_secret_basic":return void function(e,t,n){if(!t)throw new Error("client_secret_basic authentication requires a client_secret");const r=btoa(`${e}:${t}`);n.set("Authorization",`Basic ${r}`)}(s,o,n);case"client_secret_post":return void function(e,t,n){n.set("client_id",e),t&&n.set("client_secret",t)}(s,o,r);case"none":return void function(e,t){t.set("client_id",e)}(s,r);default:throw new Error(`Unsupported client authentication method: ${e}`)}}(e,r,c,n)}const l=await(a??fetch)(i,{method:"POST",headers:c,body:n});if(!l.ok)throw await wu(l);return Bl.parse(await l.json())}class Iu extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function Cu(e){}class Pu extends TransformStream{constructor({onError:e,onRetry:t,onComment:n}={}){let r;super({start(s){r=function(e){if("function"==typeof e)throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=Cu,onError:n=Cu,onRetry:r=Cu,onComment:s}=e;let o,a="",i=!0,c="",l="";function u(e){if(""===e)return c.length>0&&t({id:o,event:l||void 0,data:c.endsWith("\n")?c.slice(0,-1):c}),o=void 0,c="",void(l="");if(e.startsWith(":"))return void(s&&s(e.slice(e.startsWith(": ")?2:1)));const n=e.indexOf(":");if(-1!==n){const t=e.slice(0,n),r=" "===e[n+1]?2:1;return void d(t,e.slice(n+r),e)}d(e,"",e)}function d(e,t,s){switch(e){case"event":l=t;break;case"data":c=`${c}${t}\n`;break;case"id":o=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?r(parseInt(t,10)):n(new Iu(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:s}));break;default:n(new Iu(`Unknown field "${e.length>20?`${e.slice(0,20)}`:e}"`,{type:"unknown-field",field:e,value:t,line:s}))}}return{feed:function(e){const t=i?e.replace(/^\xEF\xBB\xBF/,""):e,[n,r]=function(e){const t=[];let n="",r=0;for(;r<e.length;){const s=e.indexOf("\r",r),o=e.indexOf("\n",r);let a=-1;if(-1!==s&&-1!==o?a=Math.min(s,o):-1!==s?a=s===e.length-1?-1:s:-1!==o&&(a=o),-1===a){n=e.slice(r);break}{const n=e.slice(r,a);t.push(n),r=a+1,"\r"===e[r-1]&&"\n"===e[r]&&r++}}return[t,n]}(`${a}${t}`);for(const e of n)u(e);a=r,i=!1},reset:function(e={}){a&&e.consume&&u(a),i=!0,o=void 0,c="",l="",a=""}}}({onEvent:e=>{s.enqueue(e)},onError(t){"terminate"===e?s.error(t):"function"==typeof e&&e(t)},onRetry:t,onComment:n})},transform(e){r.feed(e)}})}}const Ru={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2};class ju extends Error{constructor(e,t){super(`Streamable HTTP error: ${t}`),this.code=e}}class Nu{constructor(e,t){this._hasCompletedAuthFlow=!1,this._url=e,this._resourceMetadataUrl=void 0,this._scope=void 0,this._requestInit=t?.requestInit,this._authProvider=t?.authProvider,this._fetch=t?.fetch,this._fetchWithInit=function(e=fetch,t){return t?async(n,r)=>{const s={...t,...r,headers:r?.headers?{...Ml(t.headers),...Ml(r.headers)}:t.headers};return e(n,s)}:e}(t?.fetch,t?.requestInit),this._sessionId=t?.sessionId,this._reconnectionOptions=t?.reconnectionOptions??Ru}async _authThenStart(){if(!this._authProvider)throw new yu("No auth provider");let e;try{e=await bu(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})}catch(e){throw this.onerror?.(e),e}if("AUTHORIZED"!==e)throw new yu;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){const e={};if(this._authProvider){const t=await this._authProvider.tokens();t&&(e.Authorization=`Bearer ${t.access_token}`)}this._sessionId&&(e["mcp-session-id"]=this._sessionId),this._protocolVersion&&(e["mcp-protocol-version"]=this._protocolVersion);const t=Ml(this._requestInit?.headers);return new Headers({...e,...t})}async _startOrAuthSse(e){const{resumptionToken:t}=e;try{const n=await this._commonHeaders();n.set("Accept","text/event-stream"),t&&n.set("last-event-id",t);const r=await(this._fetch??fetch)(this._url,{method:"GET",headers:n,signal:this._abortController?.signal});if(!r.ok){if(await(r.body?.cancel()),401===r.status&&this._authProvider)return await this._authThenStart();if(405===r.status)return;throw new ju(r.status,`Failed to open SSE stream: ${r.statusText}`)}this._handleSseStream(r.body,e,!0)}catch(e){throw this.onerror?.(e),e}}_getNextReconnectionDelay(e){if(void 0!==this._serverRetryMs)return this._serverRetryMs;const t=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,r=this._reconnectionOptions.maxReconnectionDelay;return Math.min(t*Math.pow(n,e),r)}_scheduleReconnection(e,t=0){const n=this._reconnectionOptions.maxRetries;if(t>=n)return void this.onerror?.(new Error(`Maximum reconnection attempts (${n}) exceeded.`));const r=this._getNextReconnectionDelay(t);this._reconnectionTimeout=setTimeout(()=>{this._startOrAuthSse(e).catch(n=>{this.onerror?.(new Error(`Failed to reconnect SSE stream: ${n instanceof Error?n.message:String(n)}`)),this._scheduleReconnection(e,t+1)})},r)}_handleSseStream(e,t,n){if(!e)return;const{onresumptiontoken:r,replayMessageId:s}=t;let o,a=!1,i=!1;(async()=>{try{const t=e.pipeThrough(new TextDecoderStream).pipeThrough(new Pu({onRetry:e=>{this._serverRetryMs=e}})).getReader();for(;;){const{value:e,done:n}=await t.read();if(n)break;if(e.id&&(o=e.id,a=!0,r?.(e.id)),e.data&&(!e.event||"message"===e.event))try{const t=ii.parse(JSON.parse(e.data));si(t)&&(i=!0,void 0!==s&&(t.id=s)),this.onmessage?.(t)}catch(e){this.onerror?.(e)}}(n||a)&&!i&&this._abortController&&!this._abortController.signal.aborted&&this._scheduleReconnection({resumptionToken:o,onresumptiontoken:r,replayMessageId:s},0)}catch(e){if(this.onerror?.(new Error(`SSE stream disconnected: ${e}`)),(n||a)&&!i&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:o,onresumptiontoken:r,replayMessageId:s},0)}catch(e){this.onerror?.(new Error(`Failed to reconnect: ${e instanceof Error?e.message:String(e)}`))}}})()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new yu("No auth provider");if("AUTHORIZED"!==await bu(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit}))throw new yu("Failed to authorize")}async close(){this._reconnectionTimeout&&(clearTimeout(this._reconnectionTimeout),this._reconnectionTimeout=void 0),this._abortController?.abort(),this.onclose?.()}async send(e,t){try{const{resumptionToken:r,onresumptiontoken:s}=t||{};if(r)return void this._startOrAuthSse({resumptionToken:r,replayMessageId:ti(e)?e.id:void 0}).catch(e=>this.onerror?.(e));const o=await this._commonHeaders();o.set("content-type","application/json"),o.set("accept","application/json, text/event-stream");const a={...this._requestInit,method:"POST",headers:o,body:JSON.stringify(e),signal:this._abortController?.signal},i=await(this._fetch??fetch)(this._url,a),c=i.headers.get("mcp-session-id");if(c&&(this._sessionId=c),!i.ok){const t=await i.text().catch(()=>null);if(401===i.status&&this._authProvider){if(this._hasCompletedAuthFlow)throw new ju(401,"Server returned 401 after successful authentication");const{resourceMetadataUrl:t,scope:n}=ku(i);if(this._resourceMetadataUrl=t,this._scope=n,"AUTHORIZED"!==await bu(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit}))throw new yu;return this._hasCompletedAuthFlow=!0,this.send(e)}if(403===i.status&&this._authProvider){const{resourceMetadataUrl:t,scope:n,error:r}=ku(i);if("insufficient_scope"===r){const r=i.headers.get("WWW-Authenticate");if(this._lastUpscopingHeader===r)throw new ju(403,"Server returned 403 after trying upscoping");if(n&&(this._scope=n),t&&(this._resourceMetadataUrl=t),this._lastUpscopingHeader=r??void 0,"AUTHORIZED"!==await bu(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetch}))throw new yu;return this.send(e)}}throw new ju(i.status,`Error POSTing to endpoint: ${t}`)}if(this._hasCompletedAuthFlow=!1,this._lastUpscopingHeader=void 0,202===i.status)return await(i.body?.cancel()),n=e,void($i.safeParse(n).success&&this._startOrAuthSse({resumptionToken:void 0}).catch(e=>this.onerror?.(e)));const l=(Array.isArray(e)?e:[e]).filter(e=>"method"in e&&"id"in e&&void 0!==e.id).length>0,u=i.headers.get("content-type");if(l)if(u?.includes("text/event-stream"))this._handleSseStream(i.body,{onresumptiontoken:s},!1);else{if(!u?.includes("application/json"))throw await(i.body?.cancel()),new ju(-1,`Unexpected content type: ${u}`);{const e=await i.json(),t=Array.isArray(e)?e.map(e=>ii.parse(e)):[ii.parse(e)];for(const e of t)this.onmessage?.(e)}}else await(i.body?.cancel())}catch(e){throw this.onerror?.(e),e}var n}get sessionId(){return this._sessionId}async terminateSession(){if(this._sessionId)try{const e=await this._commonHeaders(),t={...this._requestInit,method:"DELETE",headers:e,signal:this._abortController?.signal},n=await(this._fetch??fetch)(this._url,t);if(await(n.body?.cancel()),!n.ok&&405!==n.status)throw new ju(n.status,`Failed to terminate session: ${n.statusText}`);this._sessionId=void 0}catch(e){throw this.onerror?.(e),e}}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}async resumeStream(e,t){await this._startOrAuthSse({resumptionToken:e,onresumptiontoken:t?.onresumptiontoken})}}class Au extends Error{constructor(e,t=null,n=null){super(e),this.name="MCPError",this.code=t,this.details=n}}new class{constructor(e={}){this.configKey=e.configKey||"nfdAIChat",this.client=null,this.transport=null,this.connected=!1,this.tools=[],this.resources=[],this.eventListeners=new Map}getConfig(){const e="undefined"!=typeof window&&window[this.configKey]||{};return{nonce:e.nonce||"",restUrl:e.restUrl||"/wp-json/",mcpUrl:e.mcpUrl||`${e.restUrl||"/wp-json/"}mcp/mcp-adapter-default-server`,homeUrl:e.homeUrl||""}}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e).add(t)}off(e,t){const n=this.eventListeners.get(e);n&&n.delete(t)}emit(e){const t=this.eventListeners.get(e.type);t&&t.forEach(t=>{try{t(e)}catch(e){console.error("Error in MCP event listener:",e)}})}async connect(e=null){try{const t=this.getConfig(),n=e||t.mcpUrl;if(!n)throw new Au("MCP endpoint URL not configured");this.client=new zl({name:"nfd-ai-chat-client",version:"1.0.0"},{capabilities:{}}),this.transport=new Nu(new URL(n),{requestInit:{headers:{"Content-Type":"application/json"}}}),await this.client.connect(this.transport),this.connected=!0,this.emit({type:"connected"})}catch(e){const t=e instanceof Au?e:new Au(`Connection failed: ${e.message}`);throw this.emit({type:"error",data:t}),t}}async initialize(){if(!this.connected)throw new Au("Not connected to MCP server");try{await Promise.all([this.loadTools(),this.loadResources()]);const e={protocolVersion:"2025-06-18",capabilities:{tools:{},resources:{},prompts:{}},serverInfo:{name:"WordPress MCP Server",version:"1.0.0"}};return this.emit({type:"initialized",data:e}),e}catch(e){const t=e instanceof Au?e:new Au(`Initialization failed: ${e.message}`);throw this.emit({type:"error",data:t}),t}}normalizeInputSchema(e){return!e||Array.isArray(e)||"object"!=typeof e||0===Object.keys(e).length?{type:"object",properties:{},required:[]}:{type:e.type||"object",properties:e.properties||{},required:Array.isArray(e.required)?e.required:[]}}async loadTools(){try{const e=await this.client.listTools();this.tools=e.tools.map(e=>({name:e.name,description:e.description||"",inputSchema:this.normalizeInputSchema(e.inputSchema),annotations:e.annotations||{}})),this.emit({type:"tools_updated",data:this.tools})}catch(e){console.error("Failed to load tools via SDK:",e),this.tools=[]}}async loadResources(){try{const e=await this.client.listResources();this.resources=e.resources.map(e=>({uri:e.uri,name:e.name||"",description:e.description,mimeType:e.mimeType})),this.emit({type:"resources_updated",data:this.resources})}catch(e){console.error("Failed to load resources via SDK:",e),this.resources=[]}}async listTools(){if(!this.connected)throw new Au("Not connected to MCP server");return this.tools}async callTool(e,t={}){if(!this.connected)throw new Au("Not connected to MCP server");try{const n=await this.client.callTool({name:e,arguments:t});return{content:Array.isArray(n.content)?n.content:[],isError:Boolean(n.isError),meta:n.meta||{}}}catch(t){console.error(`Tool "${e}" call failed:`,t);const n=t instanceof Au?t:new Au(`Tool call failed: ${t.message}`);throw this.emit({type:"error",data:n}),n}}async listResources(){if(!this.connected)throw new Au("Not connected to MCP server");return this.resources}async readResource(e){if(!this.connected)throw new Au("Not connected to MCP server");try{return await this.client.readResource({uri:e})}catch(t){console.error(`Resource "${e}" read failed:`,t);const n=t instanceof Au?t:new Au(`Resource read failed: ${t.message}`);throw this.emit({type:"error",data:n}),n}}async disconnect(){try{this.transport&&(await this.client.close(),this.transport=null),this.connected=!1,this.tools=[],this.resources=[],this.emit({type:"disconnected"})}catch(e){console.error("Error during SDK disconnect:",e)}}isConnected(){return this.connected}getTools(){return[...this.tools]}getResources(){return[...this.resources]}isToolReadOnly(e){const t=this.tools.find(t=>t.name===e);return!t||!0===t.annotations?.readonly||!0===t.annotations?.readOnlyHint}getToolsForOpenAI(){return this.tools.map(e=>{const t=this.normalizeInputSchema(e.inputSchema);return{type:"function",function:{name:e.name,description:e.description||"",parameters:t}}})}};const Ou="RFC3986",zu={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},Mu=(Object.prototype.hasOwnProperty,Array.isArray),Du=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),Lu=1024;function qu(e,t){if(Mu(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const Uu=Object.prototype.hasOwnProperty,Fu={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},Hu=Array.isArray,Vu=Array.prototype.push,Bu=function(e,t){Vu.apply(e,Hu(t)?t:[t])},Wu=Date.prototype.toISOString,Zu={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(e,t,n,r,s)=>{if(0===e.length)return e;let o=e;if("symbol"==typeof e?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===n)return escape(o).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let a="";for(let e=0;e<o.length;e+=Lu){const t=o.length>=Lu?o.slice(e,e+Lu):o,n=[];for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);45===r||46===r||95===r||126===r||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||"RFC1738"===s&&(40===r||41===r)?n[n.length]=t.charAt(e):r<128?n[n.length]=Du[r]:r<2048?n[n.length]=Du[192|r>>6]+Du[128|63&r]:r<55296||r>=57344?n[n.length]=Du[224|r>>12]+Du[128|r>>6&63]+Du[128|63&r]:(e+=1,r=65536+((1023&r)<<10|1023&t.charCodeAt(e)),n[n.length]=Du[240|r>>18]+Du[128|r>>12&63]+Du[128|r>>6&63]+Du[128|63&r])}a+=n.join("")}return a},encodeValuesOnly:!1,format:Ou,formatter:zu[Ou],indices:!1,serializeDate:e=>Wu.call(e),skipNulls:!1,strictNullHandling:!1},Ku={};function Gu(e,t,n,r,s,o,a,i,c,l,u,d,p,h,f,m,g,y){let _=e,v=y,w=0,b=!1;for(;void 0!==(v=v.get(Ku))&&!b;){const t=v.get(e);if(w+=1,void 0!==t){if(t===w)throw new RangeError("Cyclic object value");b=!0}void 0===v.get(Ku)&&(w=0)}if("function"==typeof l?_=l(t,_):_ instanceof Date?_=p?.(_):"comma"===n&&Hu(_)&&(_=qu(_,function(e){return e instanceof Date?p?.(e):e})),null===_){if(o)return c&&!m?c(t,Zu.encoder,g,"key",h):t;_=""}if("string"==typeof(x=_)||"number"==typeof x||"boolean"==typeof x||"symbol"==typeof x||"bigint"==typeof x||function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))}(_)){if(c){const e=m?t:c(t,Zu.encoder,g,"key",h);return[f?.(e)+"="+f?.(c(_,Zu.encoder,g,"value",h))]}return[f?.(t)+"="+f?.(String(_))]}var x;const k=[];if(void 0===_)return k;let $;if("comma"===n&&Hu(_))m&&c&&(_=qu(_,c)),$=[{value:_.length>0?_.join(",")||null:void 0}];else if(Hu(l))$=l;else{const e=Object.keys(_);$=u?e.sort(u):e}const E=i?String(t).replace(/\./g,"%2E"):String(t),S=r&&Hu(_)&&1===_.length?E+"[]":E;if(s&&Hu(_)&&0===_.length)return S+"[]";for(let t=0;t<$.length;++t){const v=$[t],b="object"==typeof v&&void 0!==v.value?v.value:_[v];if(a&&null===b)continue;const x=d&&i?v.replace(/\./g,"%2E"):v,E=Hu(_)?"function"==typeof n?n(S,x):S:S+(d?"."+x:"["+x+"]");y.set(e,w);const T=new WeakMap;T.set(Ku,y),Bu(k,Gu(b,E,n,r,s,o,a,i,"comma"===n&&m&&Hu(_)?null:c,l,u,d,p,h,f,m,g,T))}return k}const Ju="4.104.0";let Xu,Qu,Yu,ed,td,nd,rd,sd,od,ad=!1,id=null,cd=null,ld=null,ud=null;class dd{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}const pd=()=>{Xu||function(e,t={auto:!1}){if(ad)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(Xu)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${Xu}'\``);ad=t.auto,Xu=e.kind,Qu=e.fetch,id=e.Request,cd=e.Response,ld=e.Headers,Yu=e.FormData,ud=e.Blob,ed=e.File,td=e.ReadableStream,nd=e.getMultipartRequestOptions,rd=e.getDefaultAgent,sd=e.fileFromPath,od=e.isFsReadStream}(function({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,o;try{n=fetch,r=Request,s=Response,o=Headers}catch(e){throw new Error(`this environment is missing the following Web Fetch API type: ${e.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:o,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:"undefined"!=typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new dd(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0})};pd();class hd extends Error{}class fd extends hd{constructor(e,t,n,r){super(`${fd.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.request_id=r?.["x-request-id"],this.error=t;const s=t;this.code=s?.code,this.param=s?.param,this.type=s?.type}static makeMessage(e,t,n){const r=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new gd({message:n,cause:pp(t)});const s=t?.error;return 400===e?new _d(e,s,n,r):401===e?new vd(e,s,n,r):403===e?new wd(e,s,n,r):404===e?new bd(e,s,n,r):409===e?new xd(e,s,n,r):422===e?new kd(e,s,n,r):429===e?new $d(e,s,n,r):e>=500?new Ed(e,s,n,r):new fd(e,s,n,r)}}class md extends fd{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class gd extends fd{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class yd extends gd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class _d extends fd{}class vd extends fd{}class wd extends fd{}class bd extends fd{}class xd extends fd{}class kd extends fd{}class $d extends fd{}class Ed extends fd{}class Sd extends hd{constructor(){super("Could not parse response content as the length limit was reached")}}class Td extends hd{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var Id,Cd=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},Pd=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Rd{constructor(){Id.set(this,void 0),this.buffer=new Uint8Array,Cd(this,Id,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?(new TextEncoder).encode(e):e;let n=new Uint8Array(this.buffer.length+t.length);n.set(this.buffer),n.set(t,this.buffer.length),this.buffer=n;const r=[];let s;for(;null!=(s=jd(this.buffer,Pd(this,Id,"f")));){if(s.carriage&&null==Pd(this,Id,"f")){Cd(this,Id,s.index,"f");continue}if(null!=Pd(this,Id,"f")&&(s.index!==Pd(this,Id,"f")+1||s.carriage)){r.push(this.decodeText(this.buffer.slice(0,Pd(this,Id,"f")-1))),this.buffer=this.buffer.slice(Pd(this,Id,"f")),Cd(this,Id,null,"f");continue}const e=null!==Pd(this,Id,"f")?s.preceding-1:s.preceding,t=this.decodeText(this.buffer.slice(0,e));r.push(t),this.buffer=this.buffer.slice(s.index),Cd(this,Id,null,"f")}return r}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if("undefined"!=typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new hd(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new hd(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new hd("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode("\n"):[]}}function jd(e,t){for(let n=t??0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}function Nd(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}function Ad(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}Id=new WeakMap,Rd.NEWLINE_CHARS=new Set(["\n","\r"]),Rd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class Od{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;return new Od(async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const n of async function*(e,t){if(!e.body)throw t.abort(),new hd("Attempted to iterate over a response with no body");const n=new zd,r=new Rd,s=Ad(e.body);for await(const e of async function*(e){let t=new Uint8Array;for await(const n of e){if(null==n)continue;const e=n instanceof ArrayBuffer?new Uint8Array(n):"string"==typeof n?(new TextEncoder).encode(n):n;let r,s=new Uint8Array(t.length+e.length);for(s.set(t),s.set(e,t.length),t=s;-1!==(r=Nd(t));)yield t.slice(0,r),t=t.slice(r)}t.length>0&&(yield t)}(s))for(const t of r.decode(e)){const e=n.decode(t);e&&(yield e)}for(const e of r.flush()){const t=n.decode(e);t&&(yield t)}}(e,t))if(!r)if(n.data.startsWith("[DONE]"))r=!0;else if(null===n.event||n.event.startsWith("response.")||n.event.startsWith("transcript.")){let t;try{t=JSON.parse(n.data)}catch(e){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),e}if(t&&t.error)throw new fd(void 0,t.error,void 0,ep(e.headers));yield t}else{let e;try{e=JSON.parse(n.data)}catch(e){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),e}if("error"==n.event)throw new fd(void 0,e.error,e.message,void 0);yield{event:n.event,data:e}}r=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{r||t.abort()}},t)}static fromReadableStream(e,t){let n=!1;return new Od(async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const t of async function*(){const t=new Rd,n=Ad(e);for await(const e of n)for(const n of t.decode(e))yield n;for(const e of t.flush())yield e}())r||t&&(yield JSON.parse(t));r=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{r||t.abort()}},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new Od(()=>r(e),this.controller),new Od(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new td({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:r,done:s}=await t.next();if(s)return e.close();const o=n.encode(JSON.stringify(r)+"\n");e.enqueue(o)}catch(t){e.error(t)}},async cancel(){await(t.return?.())}})}}class zd{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e){const t=e.indexOf(":");return-1!==t?[e.substring(0,t),":",e.substring(t+1)]:[e,"",""]}(e);return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}const Md=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,Dd=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&Ld(e),Ld=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function qd(e,t,n){if(e=await e,Dd(e))return e;if(Md(e)){const r=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const s=Ld(r)?[await r.arrayBuffer()]:[r];return new ed(s,t,n)}const r=await async function(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Ld(e))t.push(await e.arrayBuffer());else{if(!Fd(e))throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){return`[${Object.getOwnPropertyNames(e).map(e=>`"${e}"`).join(", ")}]`}(e)}`);for await(const n of e)t.push(n)}return t}(e);if(t||(t=function(e){return Ud(e.name)||Ud(e.filename)||Ud(e.path)?.split(/[\\/]/).pop()}(e)??"unknown_file"),!n?.type){const e=r[0]?.type;"string"==typeof e&&(n={...n,type:e})}return new ed(r,t,n)}const Ud=e=>"string"==typeof e?e:"undefined"!=typeof Buffer&&e instanceof Buffer?String(e):void 0,Fd=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],Hd=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],Vd=async e=>{const t=await Bd(e.body);return nd(t,e)},Bd=async e=>{const t=new Yu;return await Promise.all(Object.entries(e||{}).map(([e,n])=>Wd(t,e,n))),t},Wd=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)e.append(t,String(n));else if((e=>Dd(e)||Md(e)||od(e))(n)){const r=await qd(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(n=>Wd(e,t+"[]",n)));else{if("object"!=typeof n)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`);await Promise.all(Object.entries(n).map(([n,r])=>Wd(e,`${t}[${n}]`,r)))}}};var Zd;async function Kd(e){const{response:t}=e;if(e.options.stream)return _p("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):Od.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type"),r=n?.split(";")[0]?.trim();if(r?.includes("application/json")||r?.endsWith("+json")){const e=await t.json();return _p("response",t.status,t.url,t.headers,e),Gd(e,t)}const s=await t.text();return _p("response",t.status,t.url,t.headers,s),s}function Gd(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}pd();class Jd extends Promise{constructor(e,t=Kd){super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new Jd(this.responsePromise,async t=>Gd(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Xd{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:r,fetch:s}){this.baseURL=e,this.maxRetries=dp("maxRetries",t),this.timeout=dp("timeout",n),this.httpAgent=r,this.fetch=s??Qu}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...ap(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${vp()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async n=>{const r=n&&Ld(n?.body)?new DataView(await n.body.arrayBuffer()):n?.body instanceof DataView?n.body:n?.body instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n?.body)?new DataView(n.body.buffer):n?.body;return{method:e,path:t,...n,body:r}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if("string"==typeof e){if("undefined"!=typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){const n={...e},{method:r,path:s,query:o,headers:a={}}=n,i=ArrayBuffer.isView(n.body)||n.__binaryRequest&&"string"==typeof n.body?n.body:Hd(n.body)?n.body.body:n.body?JSON.stringify(n.body,null,2):null,c=this.calculateContentLength(i),l=this.buildURL(s,o);"timeout"in n&&dp("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const u=n.httpAgent??this.httpAgent??rd(l),d=n.timeout+1e3;return"number"==typeof u?.options?.timeout&&d>(u.options.timeout??0)&&(u.options.timeout=d),this.idempotencyHeader&&"get"!==r&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey),{req:{method:r,...i&&{body:i},headers:this.buildHeaders({options:n,headers:a,contentLength:c,retryCount:t}),...u&&{agent:u},signal:n.signal??null},url:l,timeout:n.timeout}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:r}){const s={};n&&(s["content-length"]=n);const o=this.defaultHeaders(e);return gp(s,o),gp(s,t),Hd(e.body)&&"node"!==Xu&&delete s["content-type"],void 0===wp(o,"x-stainless-retry-count")&&void 0===wp(t,"x-stainless-retry-count")&&(s["x-stainless-retry-count"]=String(r)),void 0===wp(o,"x-stainless-timeout")&&void 0===wp(t,"x-stainless-timeout")&&e.timeout&&(s["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(s,t),s}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,n,r){return fd.generate(e,t,n,r)}request(e,t=null){return new Jd(this.makeRequest(e,t))}async makeRequest(e,t){const n=await e,r=n.maxRetries??this.maxRetries;null==t&&(t=r),await this.prepareOptions(n);const{req:s,url:o,timeout:a}=this.buildRequest(n,{retryCount:r-t});if(await this.prepareRequest(s,{url:o,options:n}),_p("request",o,n,s.headers),n.signal?.aborted)throw new md;const i=new AbortController,c=await this.fetchWithTimeout(o,s,a,i).catch(pp);if(c instanceof Error){if(n.signal?.aborted)throw new md;if(t)return this.retryRequest(n,t);if("AbortError"===c.name)throw new yd;throw new gd({cause:c})}const l=ep(c.headers);if(!c.ok){if(t&&this.shouldRetry(c))return _p(`response (error; retrying, ${t} attempts remaining)`,c.status,o,l),this.retryRequest(n,t,l);const e=await c.text().catch(e=>pp(e).message),r=ip(e),s=r?void 0:e;throw _p(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,c.status,o,l,s),this.makeStatusError(c.status,r,s,l)}return{response:c,options:n,controller:i}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new Yd(this,n,e)}buildURL(e,t){const n=lp(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return fp(r)||(t={...r,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new hd(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:s,...o}=t||{};s&&s.addEventListener("abort",()=>r.abort());const a=setTimeout(()=>r.abort(),n),i={signal:r.signal,...o};return i.method&&(i.method=i.method.toUpperCase()),this.fetch.call(void 0,e,i).finally(()=>{clearTimeout(a)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,n){let r;const s=n?.["retry-after-ms"];if(s){const e=parseFloat(s);Number.isNaN(e)||(r=e)}const o=n?.["retry-after"];if(o&&!r){const e=parseFloat(o);r=Number.isNaN(e)?Date.parse(o)-Date.now():1e3*e}if(!(r&&0<=r&&r<6e4)){const n=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,n)}return await up(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Ju}`}}class Qd{constructor(e,t,n,r){Zd.set(this,void 0),function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?s.call(e,n):s?s.value=n:t.set(e,n)}(this,Zd,e,"f"),this.options=r,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new hd("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&"object"==typeof t.query)t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,r]of n)e.url.searchParams.set(t,r);t.query=void 0,t.path=e.url.toString()}return await function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}(this,Zd,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(Zd=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class Yd extends Jd{constructor(e,t,n){super(t,async t=>new n(e,t.response,await Kd(t),t.options))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}const ep=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),tp={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},np=e=>"object"==typeof e&&null!==e&&!fp(e)&&Object.keys(e).every(e=>mp(tp,e)),rp=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",sp=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let op;const ap=()=>op??(op=(()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ju,"X-Stainless-OS":sp(Deno.build.os),"X-Stainless-Arch":rp(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ju,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ju,"X-Stainless-OS":sp(process.platform),"X-Stainless-Arch":rp(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e)return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ju,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ju,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),ip=e=>{try{return JSON.parse(e)}catch(e){return}},cp=/^[a-z][a-z0-9+.-]*:/i,lp=e=>cp.test(e),up=e=>new Promise(t=>setTimeout(t,e)),dp=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new hd(`${e} must be an integer`);if(t<0)throw new hd(`${e} must be a positive integer`);return t},pp=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},hp=e=>"undefined"!=typeof process?process.env?.[e]?.trim()??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(e)?.trim():void 0;function fp(e){if(!e)return!0;for(const t in e)return!1;return!0}function mp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function gp(e,t){for(const n in t){if(!mp(t,n))continue;const r=n.toLowerCase();if(!r)continue;const s=t[n];null===s?delete e[r]:void 0!==s&&(e[r]=s)}}const yp=new Set(["authorization","api-key"]);function _p(e,...t){if("undefined"!=typeof process&&"true"===process?.env?.DEBUG){const n=t.map(e=>{if(!e)return e;if(e.headers){const t={...e,headers:{...e.headers}};for(const n in e.headers)yp.has(n.toLowerCase())&&(t.headers[n]="REDACTED");return t}let t=null;for(const n in e)yp.has(n.toLowerCase())&&(t??(t={...e}),t[n]="REDACTED");return t??e});console.log(`OpenAI:DEBUG:${e}`,...n)}}const vp=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),wp=(e,t)=>{const n=t.toLowerCase();if((e=>"function"==typeof e?.get)(e)){const r=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,(e,t,n)=>t+n.toUpperCase());for(const s of[t,n,t.toUpperCase(),r]){const t=e.get(s);if(t)return t}}for(const[r,s]of Object.entries(e))if(r.toLowerCase()===n)return Array.isArray(s)?(s.length<=1||console.warn(`Received ${s.length} entries for the ${t} header, using the first entry.`),s[0]):s};function bp(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}class xp{constructor(e){this._client=e}}class kp extends xp{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class $p extends xp{list(e,t={},n){return np(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,Cp,{query:t,...n})}}class Ep extends Qd{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Sp extends Qd{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class Tp extends xp{constructor(){super(...arguments),this.messages=new $p(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return np(e)?this.list({},e):this._client.getAPIList("/chat/completions",Ip,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}}class Ip extends Sp{}class Cp extends Sp{}Tp.ChatCompletionsPage=Ip,Tp.Messages=$p;class Pp extends xp{constructor(){super(...arguments),this.completions=new Tp(this._client)}}Pp.Completions=Tp,Pp.ChatCompletionsPage=Ip;class Rp extends xp{create(e,t){const n=!!e.encoding_format;let r=n?e.encoding_format:"base64";n&&_p("Request","User defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return n?s:(_p("response","Decoding base64 embeddings to float32 array"),s._thenUnwrap(e=>(e&&e.data&&e.data.forEach(e=>{const t=e.embedding;e.embedding=(e=>{if("undefined"!=typeof Buffer){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return Array.from(new Float32Array(r.buffer))}})(t)}),e)))}}class jp extends xp{create(e,t){return this._client.post("/files",Vd({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return np(e)?this.list({},e):this._client.getAPIList("/files",Np,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t?.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=18e5}={}){const r=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!r.has(o.status);)if(await up(t),o=await this.retrieve(e),Date.now()-s>n)throw new yd({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return o}}class Np extends Sp{}jp.FileObjectsPage=Np;class Ap extends xp{createVariation(e,t){return this._client.post("/images/variations",Vd({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",Vd({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class Op extends xp{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t?.headers},__binaryResponse:!0})}}class zp extends xp{create(e,t){return this._client.post("/audio/transcriptions",Vd({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class Mp extends xp{create(e,t){return this._client.post("/audio/translations",Vd({body:e,...t,__metadata:{model:e.model}}))}}class Dp extends xp{constructor(){super(...arguments),this.transcriptions=new zp(this._client),this.translations=new Mp(this._client),this.speech=new Op(this._client)}}Dp.Transcriptions=zp,Dp.Translations=Mp,Dp.Speech=Op;class Lp extends xp{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class qp extends xp{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Up,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class Up extends Ep{}qp.ModelsPage=Up;class Fp extends xp{}class Hp extends xp{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}}class Vp extends xp{constructor(){super(...arguments),this.graders=new Hp(this._client)}}Vp.Graders=Hp;class Bp extends xp{create(e,t,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,Wp,{body:t,method:"post",...n})}retrieve(e,t={},n){return np(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}del(e,t,n){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,n)}}class Wp extends Ep{}Bp.PermissionCreateResponsesPage=Wp;class Zp extends xp{constructor(){super(...arguments),this.permissions=new Bp(this._client)}}Zp.Permissions=Bp,Zp.PermissionCreateResponsesPage=Wp;class Kp extends xp{list(e,t={},n){return np(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Gp,{query:t,...n})}}class Gp extends Sp{}Kp.FineTuningJobCheckpointsPage=Gp;class Jp extends xp{constructor(){super(...arguments),this.checkpoints=new Kp(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return np(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Xp,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return np(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Qp,{query:t,...n})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class Xp extends Sp{}class Qp extends Sp{}Jp.FineTuningJobsPage=Xp,Jp.FineTuningJobEventsPage=Qp,Jp.Checkpoints=Kp,Jp.FineTuningJobCheckpointsPage=Gp;class Yp extends xp{constructor(){super(...arguments),this.methods=new Fp(this._client),this.jobs=new Jp(this._client),this.checkpoints=new Zp(this._client),this.alpha=new Vp(this._client)}}Yp.Methods=Fp,Yp.Jobs=Jp,Yp.FineTuningJobsPage=Xp,Yp.FineTuningJobEventsPage=Qp,Yp.Checkpoints=Zp,Yp.Alpha=Vp;class eh extends xp{}class th extends xp{constructor(){super(...arguments),this.graderModels=new eh(this._client)}}th.GraderModels=eh;class nh extends xp{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},n){return np(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,rh,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const s=await this.retrieve(e,t,{...n,headers:r}).withResponse(),o=s.data;switch(o.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=s.response.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await up(e);break;case"failed":case"completed":return o}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}content(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,sh,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class rh extends Sp{}class sh extends Ep{}nh.VectorStoreFilesPage=rh,nh.FileContentResponsesPage=sh;class oh extends xp{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n={},r){return np(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,rh,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(s.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=o.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await up(e);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){if(null==t||0==t.length)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=r?.maxConcurrency??5,o=Math.min(s,t.length),a=this._client,i=t.values(),c=[...n],l=Array(o).fill(i).map(async function(e){for(let t of e){const e=await a.files.create({file:t,purpose:"assistants"},r);c.push(e.id)}});return await(async e=>{const t=await Promise.allSettled(e),n=t.filter(e=>"rejected"===e.status);if(n.length){for(const e of n)console.error(e.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const e of t)"fulfilled"===e.status&&r.push(e.value);return r})(l),await this.createAndPoll(e,{file_ids:c})}}class ah extends xp{constructor(){super(...arguments),this.files=new nh(this._client),this.fileBatches=new oh(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e={},t){return np(e)?this.list({},e):this._client.getAPIList("/vector_stores",ih,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}search(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/search`,ch,{body:t,method:"post",...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class ih extends Sp{}class ch extends Ep{}ah.VectorStoresPage=ih,ah.VectorStoreSearchResponsesPage=ch,ah.Files=nh,ah.VectorStoreFilesPage=rh,ah.FileContentResponsesPage=sh,ah.FileBatches=oh;class lh extends xp{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e={},t){return np(e)?this.list({},e):this._client.getAPIList("/assistants",uh,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class uh extends Sp{}function dh(e){return"function"==typeof e.parse}lh.AssistantsPage=uh;const ph=e=>"assistant"===e?.role,hh=e=>"function"===e?.role,fh=e=>"tool"===e?.role;var mh,gh,yh,_h,vh,wh,bh,xh,kh,$h,Eh,Sh,Th,Ih=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},Ch=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Ph{constructor(){mh.add(this),this.controller=new AbortController,gh.set(this,void 0),yh.set(this,()=>{}),_h.set(this,()=>{}),vh.set(this,void 0),wh.set(this,()=>{}),bh.set(this,()=>{}),xh.set(this,{}),kh.set(this,!1),$h.set(this,!1),Eh.set(this,!1),Sh.set(this,!1),Ih(this,gh,new Promise((e,t)=>{Ih(this,yh,e,"f"),Ih(this,_h,t,"f")}),"f"),Ih(this,vh,new Promise((e,t)=>{Ih(this,wh,e,"f"),Ih(this,bh,t,"f")}),"f"),Ch(this,gh,"f").catch(()=>{}),Ch(this,vh,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Ch(this,mh,"m",Th).bind(this))},0)}_connected(){this.ended||(Ch(this,yh,"f").call(this),this._emit("connect"))}get ended(){return Ch(this,kh,"f")}get errored(){return Ch(this,$h,"f")}get aborted(){return Ch(this,Eh,"f")}abort(){this.controller.abort()}on(e,t){return(Ch(this,xh,"f")[e]||(Ch(this,xh,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=Ch(this,xh,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(Ch(this,xh,"f")[e]||(Ch(this,xh,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{Ih(this,Sh,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){Ih(this,Sh,!0,"f"),await Ch(this,vh,"f")}_emit(e,...t){if(Ch(this,kh,"f"))return;"end"===e&&(Ih(this,kh,!0,"f"),Ch(this,wh,"f").call(this));const n=Ch(this,xh,"f")[e];if(n&&(Ch(this,xh,"f")[e]=n.filter(e=>!e.once),n.forEach(({listener:e})=>e(...t))),"abort"===e){const e=t[0];return Ch(this,Sh,"f")||n?.length||Promise.reject(e),Ch(this,_h,"f").call(this,e),Ch(this,bh,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];Ch(this,Sh,"f")||n?.length||Promise.reject(e),Ch(this,_h,"f").call(this,e),Ch(this,bh,"f").call(this,e),this._emit("end")}}_emitFinal(){}}function Rh(e){return"auto-parseable-response-format"===e?.$brand}function jh(e){return"auto-parseable-tool"===e?.$brand}function Nh(e,t){const n=e.choices.map(e=>{if("length"===e.finish_reason)throw new Sd;if("content_filter"===e.finish_reason)throw new Td;return{...e,message:{...e.message,...e.message.tool_calls?{tool_calls:e.message.tool_calls?.map(e=>function(e,t){const n=e.tools?.find(e=>e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:jh(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}(t,e))??void 0}:void 0,parsed:e.message.content&&!e.message.refusal?Ah(t,e.message.content):null}}});return{...e,choices:n}}function Ah(e,t){return"json_schema"!==e.response_format?.type?null:"json_schema"===e.response_format?.type?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function Oh(e,t){if(!e)return!1;const n=e.tools?.find(e=>e.function?.name===t.function.name);return jh(n)||n?.function.strict||!1}function zh(e){return!!Rh(e.response_format)||(e.tools?.some(e=>jh(e)||"function"===e.type&&!0===e.function.strict)??!1)}gh=new WeakMap,yh=new WeakMap,_h=new WeakMap,vh=new WeakMap,wh=new WeakMap,bh=new WeakMap,xh=new WeakMap,kh=new WeakMap,$h=new WeakMap,Eh=new WeakMap,Sh=new WeakMap,mh=new WeakSet,Th=function(e){if(Ih(this,$h,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new md),e instanceof md)return Ih(this,Eh,!0,"f"),this._emit("abort",e);if(e instanceof hd)return this._emit("error",e);if(e instanceof Error){const t=new hd(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new hd(String(e)))};var Mh,Dh,Lh,qh,Uh,Fh,Hh,Vh,Bh=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const Wh=10;class Zh extends Ph{constructor(){super(...arguments),Mh.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),(hh(e)||fh(e))&&e.content)this._emit("functionCallResult",e.content);else if(ph(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(ph(e)&&e.tool_calls)for(const t of e.tool_calls)"function"===t.type&&this._emit("functionCall",t.function)}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new hd("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),Bh(this,Mh,"m",Dh).call(this)}async finalMessage(){return await this.done(),Bh(this,Mh,"m",Lh).call(this)}async finalFunctionCall(){return await this.done(),Bh(this,Mh,"m",qh).call(this)}async finalFunctionCallResult(){return await this.done(),Bh(this,Mh,"m",Uh).call(this)}async totalUsage(){return await this.done(),Bh(this,Mh,"m",Fh).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=Bh(this,Mh,"m",Lh).call(this);t&&this._emit("finalMessage",t);const n=Bh(this,Mh,"m",Dh).call(this);n&&this._emit("finalContent",n);const r=Bh(this,Mh,"m",qh).call(this);r&&this._emit("finalFunctionCall",r);const s=Bh(this,Mh,"m",Uh).call(this);null!=s&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",Bh(this,Mh,"m",Fh).call(this))}async _createChatCompletion(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Bh(this,Mh,"m",Hh).call(this,t);const s=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Nh(s,t))}async _runChatCompletion(e,t,n){for(const e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){const r="function",{function_call:s="auto",stream:o,...a}=t,i="string"!=typeof s&&s?.name,{maxChatCompletions:c=Wh}=n||{},l={};for(const e of t.functions)l[e.name||e.function.name]=e;const u=t.functions.map(e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description}));for(const e of t.messages)this._addMessage(e,!1);for(let t=0;t<c;++t){const t=await this._createChatCompletion(e,{...a,function_call:s,functions:u,messages:[...this.messages]},n),o=t.choices[0]?.message;if(!o)throw new hd("missing message in ChatCompletion response");if(!o.function_call)return;const{name:c,arguments:d}=o.function_call,p=l[c];if(!p){const e=`Invalid function_call: ${JSON.stringify(c)}. Available options are: ${u.map(e=>JSON.stringify(e.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:c,content:e});continue}if(i&&i!==c){const e=`Invalid function_call: ${JSON.stringify(c)}. ${JSON.stringify(i)} requested. Please try again`;this._addMessage({role:r,name:c,content:e});continue}let h;try{h=dh(p)?await p.parse(d):d}catch(e){this._addMessage({role:r,name:c,content:e instanceof Error?e.message:String(e)});continue}const f=await p.function(h,this),m=Bh(this,Mh,"m",Vh).call(this,f);if(this._addMessage({role:r,name:c,content:m}),i)return}}async _runTools(e,t,n){const r="tool",{tool_choice:s="auto",stream:o,...a}=t,i="string"!=typeof s&&s?.function?.name,{maxChatCompletions:c=Wh}=n||{},l=t.tools.map(e=>{if(jh(e)){if(!e.$callback)throw new hd("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),u={};for(const e of l)"function"===e.type&&(u[e.function.name||e.function.function.name]=e.function);const d="tools"in t?l.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(const e of t.messages)this._addMessage(e,!1);for(let t=0;t<c;++t){const t=await this._createChatCompletion(e,{...a,tool_choice:s,tools:d,messages:[...this.messages]},n),o=t.choices[0]?.message;if(!o)throw new hd("missing message in ChatCompletion response");if(!o.tool_calls?.length)return;for(const e of o.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:n,arguments:s}=e.function,o=u[n];if(!o){const e=`Invalid tool_call: ${JSON.stringify(n)}. Available options are: ${Object.keys(u).map(e=>JSON.stringify(e)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}if(i&&i!==n){const e=`Invalid tool_call: ${JSON.stringify(n)}. ${JSON.stringify(i)} requested. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}let a;try{a=dh(o)?await o.parse(s):s}catch(e){const n=e instanceof Error?e.message:String(e);this._addMessage({role:r,tool_call_id:t,content:n});continue}const c=await o.function(a,this),l=Bh(this,Mh,"m",Vh).call(this,c);if(this._addMessage({role:r,tool_call_id:t,content:l}),i)return}}}}Mh=new WeakSet,Dh=function(){return Bh(this,Mh,"m",Lh).call(this).content??null},Lh=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(ph(t)){const{function_call:e,...n}=t,r={...n,content:t.content??null,refusal:t.refusal??null};return e&&(r.function_call=e),r}}throw new hd("stream ended without producing a ChatCompletionMessage with role=assistant")},qh=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(ph(t)&&t?.function_call)return t.function_call;if(ph(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},Uh=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(hh(t)&&null!=t.content)return t.content;if(fh(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some(e=>"assistant"===e.role&&e.tool_calls?.some(e=>"function"===e.type&&e.id===t.tool_call_id)))return t.content}},Fh=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},Hh=function(e){if(null!=e.n&&e.n>1)throw new hd("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Vh=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class Kh extends Zh{static runFunctions(e,t,n){const r=new Kh,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,s)),r}static runTools(e,t,n){const r=new Kh,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,s)),r}_addMessage(e,t=!0){super._addMessage(e,t),ph(e)&&e.content&&this._emit("content",e.content)}}class Gh extends Error{}class Jh extends Error{}const Xh=e=>function(e,t=511){if("string"!=typeof e)throw new TypeError("expecting str, got "+typeof e);if(!e.trim())throw new Error(`${e} is empty`);return((e,t)=>{const n=e.length;let r=0;const s=e=>{throw new Gh(`${e} at position ${r}`)},o=e=>{throw new Jh(`${e} at position ${r}`)},a=()=>(d(),r>=n&&s("Unexpected end of input"),'"'===e[r]?i():"{"===e[r]?c():"["===e[r]?l():"null"===e.substring(r,r+4)||16&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):"true"===e.substring(r,r+4)||32&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):"false"===e.substring(r,r+5)||32&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):"Infinity"===e.substring(r,r+8)||128&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):"-Infinity"===e.substring(r,r+9)||256&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):"NaN"===e.substring(r,r+3)||64&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):u()),i=()=>{const a=r;let i=!1;for(r++;r<n&&('"'!==e[r]||i&&"\\"===e[r-1]);)i="\\"===e[r]&&!i,r++;if('"'==e.charAt(r))try{return JSON.parse(e.substring(a,++r-Number(i)))}catch(e){o(String(e))}else if(1&t)try{return JSON.parse(e.substring(a,r-Number(i))+'"')}catch(t){return JSON.parse(e.substring(a,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},c=()=>{r++,d();const o={};try{for(;"}"!==e[r];){if(d(),r>=n&&8&t)return o;const s=i();d(),r++;try{const e=a();Object.defineProperty(o,s,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(e){if(8&t)return o;throw e}d(),","===e[r]&&r++}}catch(e){if(8&t)return o;s("Expected '}' at end of object")}return r++,o},l=()=>{r++;const n=[];try{for(;"]"!==e[r];)n.push(a()),d(),","===e[r]&&r++}catch(e){if(4&t)return n;s("Expected ']' at end of array")}return r++,n},u=()=>{if(0===r){"-"===e&&2&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(n){if(2&t)try{return"."===e[e.length-1]?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(e){}o(String(n))}}const a=r;for("-"===e[r]&&r++;e[r]&&!",]}".includes(e[r]);)r++;r!=n||2&t||s("Unterminated number literal");try{return JSON.parse(e.substring(a,r))}catch(n){"-"===e.substring(a,r)&&2&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(a,e.lastIndexOf("e")))}catch(e){o(String(e))}}},d=()=>{for(;r<n&&" \n\r\t".includes(e[r]);)r++};return a()})(e.trim(),t)}(e,509);var Qh,Yh,ef,tf,nf,rf,sf,of,af,cf,lf,uf,df=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},pf=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class hf extends Zh{constructor(e){super(),Qh.add(this),Yh.set(this,void 0),ef.set(this,void 0),tf.set(this,void 0),df(this,Yh,e,"f"),df(this,ef,[],"f")}get currentChatCompletionSnapshot(){return pf(this,tf,"f")}static fromReadableStream(e){const t=new hf(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const r=new hf(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,n){super._createChatCompletion;const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),pf(this,Qh,"m",nf).call(this);const s=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const e of s)pf(this,Qh,"m",sf).call(this,e);if(s.controller.signal?.aborted)throw new md;return this._addChatCompletion(pf(this,Qh,"m",cf).call(this))}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),pf(this,Qh,"m",nf).call(this),this._connected();const r=Od.fromReadableStream(e,this.controller);let s;for await(const e of r)s&&s!==e.id&&this._addChatCompletion(pf(this,Qh,"m",cf).call(this)),pf(this,Qh,"m",sf).call(this,e),s=e.id;if(r.controller.signal?.aborted)throw new md;return this._addChatCompletion(pf(this,Qh,"m",cf).call(this))}[(Yh=new WeakMap,ef=new WeakMap,tf=new WeakMap,Qh=new WeakSet,nf=function(){this.ended||df(this,tf,void 0,"f")},rf=function(e){let t=pf(this,ef,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},pf(this,ef,"f")[e.index]=t,t)},sf=function(e){if(this.ended)return;const t=pf(this,Qh,"m",uf).call(this,e);this._emit("chunk",e,t);for(const n of e.choices){const e=t.choices[n.index];null!=n.delta.content&&"assistant"===e.message?.role&&e.message?.content&&(this._emit("content",n.delta.content,e.message.content),this._emit("content.delta",{delta:n.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=n.delta.refusal&&"assistant"===e.message?.role&&e.message?.refusal&&this._emit("refusal.delta",{delta:n.delta.refusal,snapshot:e.message.refusal}),null!=n.logprobs?.content&&"assistant"===e.message?.role&&this._emit("logprobs.content.delta",{content:n.logprobs?.content,snapshot:e.logprobs?.content??[]}),null!=n.logprobs?.refusal&&"assistant"===e.message?.role&&this._emit("logprobs.refusal.delta",{refusal:n.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});const r=pf(this,Qh,"m",rf).call(this,e);e.finish_reason&&(pf(this,Qh,"m",af).call(this,e),null!=r.current_tool_call_index&&pf(this,Qh,"m",of).call(this,e,r.current_tool_call_index));for(const t of n.delta.tool_calls??[])r.current_tool_call_index!==t.index&&(pf(this,Qh,"m",af).call(this,e),null!=r.current_tool_call_index&&pf(this,Qh,"m",of).call(this,e,r.current_tool_call_index)),r.current_tool_call_index=t.index;for(const t of n.delta.tool_calls??[]){const n=e.message.tool_calls?.[t.index];n?.type&&("function"===n?.type?this._emit("tool_calls.function.arguments.delta",{name:n.function?.name,index:t.index,arguments:n.function.arguments,parsed_arguments:n.function.parsed_arguments,arguments_delta:t.function?.arguments??""}):gf())}}},of=function(e,t){if(pf(this,Qh,"m",rf).call(this,e).done_tool_calls.has(t))return;const n=e.message.tool_calls?.[t];if(!n)throw new Error("no tool call snapshot");if(!n.type)throw new Error("tool call snapshot missing `type`");if("function"===n.type){const e=pf(this,Yh,"f")?.tools?.find(e=>"function"===e.type&&e.function.name===n.function.name);this._emit("tool_calls.function.arguments.done",{name:n.function.name,index:t,arguments:n.function.arguments,parsed_arguments:jh(e)?e.$parseRaw(n.function.arguments):e?.function.strict?JSON.parse(n.function.arguments):null})}else n.type},af=function(e){const t=pf(this,Qh,"m",rf).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;const n=pf(this,Qh,"m",lf).call(this);this._emit("content.done",{content:e.message.content,parsed:n?n.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},cf=function(){if(this.ended)throw new hd("stream has ended, this shouldn't happen");const e=pf(this,tf,"f");if(!e)throw new hd("request ended without sending any chunks");return df(this,tf,void 0,"f"),df(this,ef,[],"f"),function(e,t){const{id:n,choices:r,created:s,model:o,system_fingerprint:a,...i}=e,c={...i,id:n,choices:r.map(({message:t,finish_reason:n,index:r,logprobs:s,...o})=>{if(!n)throw new hd(`missing finish_reason for choice ${r}`);const{content:a=null,function_call:i,tool_calls:c,...l}=t,u=t.role;if(!u)throw new hd(`missing role for choice ${r}`);if(i){const{arguments:e,name:c}=i;if(null==e)throw new hd(`missing function_call.arguments for choice ${r}`);if(!c)throw new hd(`missing function_call.name for choice ${r}`);return{...o,message:{content:a,function_call:{arguments:e,name:c},role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:s}}return c?{...o,index:r,finish_reason:n,logprobs:s,message:{...l,role:u,content:a,refusal:t.refusal??null,tool_calls:c.map((t,n)=>{const{function:s,type:o,id:a,...i}=t,{arguments:c,name:l,...u}=s||{};if(null==a)throw new hd(`missing choices[${r}].tool_calls[${n}].id\n${ff(e)}`);if(null==o)throw new hd(`missing choices[${r}].tool_calls[${n}].type\n${ff(e)}`);if(null==l)throw new hd(`missing choices[${r}].tool_calls[${n}].function.name\n${ff(e)}`);if(null==c)throw new hd(`missing choices[${r}].tool_calls[${n}].function.arguments\n${ff(e)}`);return{...i,id:a,type:o,function:{...u,name:l,arguments:c}}})}}:{...o,message:{...l,content:a,role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:s}}),created:s,model:o,object:"chat.completion",...a?{system_fingerprint:a}:{}};return function(e,t){return t&&zh(t)?Nh(e,t):{...e,choices:e.choices.map(e=>({...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}}(c,t)}(e,pf(this,Yh,"f"))},lf=function(){const e=pf(this,Yh,"f")?.response_format;return Rh(e)?e:null},uf=function(e){var t,n,r,s;let o=pf(this,tf,"f");const{choices:a,...i}=e;o?Object.assign(o,i):o=df(this,tf,{...i,choices:[]},"f");for(const{delta:a,finish_reason:i,index:c,logprobs:l=null,...u}of e.choices){let e=o.choices[c];if(e||(e=o.choices[c]={finish_reason:i,index:c,message:{},logprobs:l,...u}),l)if(e.logprobs){const{content:r,refusal:s,...o}=l;mf(),Object.assign(e.logprobs,o),r&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...r)),s&&((n=e.logprobs).refusal??(n.refusal=[]),e.logprobs.refusal.push(...s))}else e.logprobs=Object.assign({},l);if(i&&(e.finish_reason=i,pf(this,Yh,"f")&&zh(pf(this,Yh,"f")))){if("length"===i)throw new Sd;if("content_filter"===i)throw new Td}if(Object.assign(e,u),!a)continue;const{content:d,refusal:p,function_call:h,role:f,tool_calls:m,...g}=a;if(mf(),Object.assign(e.message,g),p&&(e.message.refusal=(e.message.refusal||"")+p),f&&(e.message.role=f),h&&(e.message.function_call?(h.name&&(e.message.function_call.name=h.name),h.arguments&&((r=e.message.function_call).arguments??(r.arguments=""),e.message.function_call.arguments+=h.arguments)):e.message.function_call=h),d&&(e.message.content=(e.message.content||"")+d,!e.message.refusal&&pf(this,Qh,"m",lf).call(this)&&(e.message.parsed=Xh(e.message.content))),m){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:n,type:r,function:o,...a}of m){const i=(s=e.message.tool_calls)[t]??(s[t]={});Object.assign(i,a),n&&(i.id=n),r&&(i.type=r),o&&(i.function??(i.function={name:o.name??"",arguments:""})),o?.name&&(i.function.name=o.name),o?.arguments&&(i.function.arguments+=o.arguments,Oh(pf(this,Yh,"f"),i)&&(i.function.parsed_arguments=Xh(i.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Od(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function ff(e){return JSON.stringify(e)}function mf(e){}function gf(_x){}class yf extends hf{static fromReadableStream(e){const t=new yf(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,n){const r=new yf(null),s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,s)),r}static runTools(e,t,n){const r=new yf(t),s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,s)),r}}class _f extends xp{parse(e,t){return function(e){for(const t of e??[]){if("function"!==t.type)throw new hd(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new hd(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(t=>Nh(t,e))}runFunctions(e,t){return e.stream?yf.runFunctions(this._client,e,t):Kh.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?yf.runTools(this._client,e,t):Kh.runTools(this._client,e,t)}stream(e,t){return hf.createChatCompletion(this._client,e,t)}}class vf extends xp{constructor(){super(...arguments),this.completions=new _f(this._client)}}!function(e){e.Completions=_f}(vf||(vf={}));class wf extends xp{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class bf extends xp{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class xf extends xp{constructor(){super(...arguments),this.sessions=new wf(this._client),this.transcriptionSessions=new bf(this._client)}}xf.Sessions=wf,xf.TranscriptionSessions=bf;var kf,$f,Ef,Sf,Tf,If,Cf,Pf,Rf,jf,Nf,Af,Of,zf,Mf,Df,Lf,qf,Uf,Ff,Hf,Vf,Bf=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},Wf=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};class Zf extends Ph{constructor(){super(...arguments),kf.add(this),$f.set(this,[]),Ef.set(this,{}),Sf.set(this,{}),Tf.set(this,void 0),If.set(this,void 0),Cf.set(this,void 0),Pf.set(this,void 0),Rf.set(this,void 0),jf.set(this,void 0),Nf.set(this,void 0),Af.set(this,void 0),Of.set(this,void 0)}[($f=new WeakMap,Ef=new WeakMap,Sf=new WeakMap,Tf=new WeakMap,If=new WeakMap,Cf=new WeakMap,Pf=new WeakMap,Rf=new WeakMap,jf=new WeakMap,Nf=new WeakMap,Af=new WeakMap,Of=new WeakMap,kf=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Zf;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=Od.fromReadableStream(e,this.controller);for await(const e of r)Bf(this,kf,"m",zf).call(this,e);if(r.controller.signal?.aborted)throw new md;return this._addRun(Bf(this,kf,"m",Mf).call(this))}toReadableStream(){return new Od(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r,s){const o=new Zf;return o._run(()=>o._runToolAssistantStream(e,t,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,n,r,s){const o=s?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},i=await e.submitToolOutputs(t,n,a,{...s,signal:this.controller.signal});this._connected();for await(const e of i)Bf(this,kf,"m",zf).call(this,e);if(i.controller.signal?.aborted)throw new md;return this._addRun(Bf(this,kf,"m",Mf).call(this))}static createThreadAssistantStream(e,t,n){const r=new Zf;return r._run(()=>r._threadAssistantStream(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,n,r){const s=new Zf;return s._run(()=>s._runAssistantStream(e,t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return Bf(this,Nf,"f")}currentRun(){return Bf(this,Af,"f")}currentMessageSnapshot(){return Bf(this,Tf,"f")}currentRunStepSnapshot(){return Bf(this,Of,"f")}async finalRunSteps(){return await this.done(),Object.values(Bf(this,Ef,"f"))}async finalMessages(){return await this.done(),Object.values(Bf(this,Sf,"f"))}async finalRun(){if(await this.done(),!Bf(this,If,"f"))throw Error("Final run was not received.");return Bf(this,If,"f")}async _createThreadAssistantStream(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const s={...t,stream:!0},o=await e.createAndRun(s,{...n,signal:this.controller.signal});this._connected();for await(const e of o)Bf(this,kf,"m",zf).call(this,e);if(o.controller.signal?.aborted)throw new md;return this._addRun(Bf(this,kf,"m",Mf).call(this))}async _createAssistantStream(e,t,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},a=await e.create(t,o,{...r,signal:this.controller.signal});this._connected();for await(const e of a)Bf(this,kf,"m",zf).call(this,e);if(a.controller.signal?.aborted)throw new md;return this._addRun(Bf(this,kf,"m",Mf).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let t=e[n];if(null!=t)if("index"!==n&&"type"!==n){if("string"==typeof t&&"string"==typeof r)t+=r;else if("number"==typeof t&&"number"==typeof r)t+=r;else{if(!bp(t)||!bp(r)){if(Array.isArray(t)&&Array.isArray(r)){if(t.every(e=>"string"==typeof e||"number"==typeof e)){t.push(...r);continue}for(const e of r){if(!bp(e))throw new Error(`Expected array delta entry to be an object but got: ${e}`);const n=e.index;if(null==n)throw console.error(e),new Error("Expected array delta entry to have an `index` property");if("number"!=typeof n)throw new Error(`Expected array delta entry \`index\` property to be a number but got ${n}`);const r=t[n];null==r?t.push(e):t[n]=this.accumulateDelta(r,e)}continue}throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${t}`)}t=this.accumulateDelta(t,r)}e[n]=t}else e[n]=r;else e[n]=r}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,s){return await this._createToolAssistantStream(n,e,t,r,s)}}zf=function(e){if(!this.ended)switch(Wf(this,Nf,e,"f"),Bf(this,kf,"m",qf).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Bf(this,kf,"m",Vf).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Bf(this,kf,"m",Lf).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Bf(this,kf,"m",Df).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Mf=function(){if(this.ended)throw new hd("stream has ended, this shouldn't happen");if(!Bf(this,If,"f"))throw Error("Final run has not been received");return Bf(this,If,"f")},Df=function(e){const[t,n]=Bf(this,kf,"m",Ff).call(this,e,Bf(this,Tf,"f"));Wf(this,Tf,t,"f"),Bf(this,Sf,"f")[t.id]=t;for(const e of n){const n=t.content[e.index];"text"==n?.type&&this._emit("textCreated",n.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const n of e.data.delta.content){if("text"==n.type&&n.text){let e=n.text,r=t.content[n.index];if(!r||"text"!=r.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",e,r.text)}if(n.index!=Bf(this,Cf,"f")){if(Bf(this,Pf,"f"))switch(Bf(this,Pf,"f").type){case"text":this._emit("textDone",Bf(this,Pf,"f").text,Bf(this,Tf,"f"));break;case"image_file":this._emit("imageFileDone",Bf(this,Pf,"f").image_file,Bf(this,Tf,"f"))}Wf(this,Cf,n.index,"f")}Wf(this,Pf,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==Bf(this,Cf,"f")){const t=e.data.content[Bf(this,Cf,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,Bf(this,Tf,"f"));break;case"text":this._emit("textDone",t.text,Bf(this,Tf,"f"))}}Bf(this,Tf,"f")&&this._emit("messageDone",e.data),Wf(this,Tf,void 0,"f")}},Lf=function(e){const t=Bf(this,kf,"m",Uf).call(this,e);switch(Wf(this,Of,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&"tool_calls"==n.step_details.type&&n.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const e of n.step_details.tool_calls)e.index==Bf(this,Rf,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(Bf(this,jf,"f")&&this._emit("toolCallDone",Bf(this,jf,"f")),Wf(this,Rf,e.index,"f"),Wf(this,jf,t.step_details.tool_calls[e.index],"f"),Bf(this,jf,"f")&&this._emit("toolCallCreated",Bf(this,jf,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Wf(this,Of,void 0,"f"),"tool_calls"==e.data.step_details.type&&Bf(this,jf,"f")&&(this._emit("toolCallDone",Bf(this,jf,"f")),Wf(this,jf,void 0,"f")),this._emit("runStepDone",e.data,t)}},qf=function(e){Bf(this,$f,"f").push(e),this._emit("event",e)},Uf=function(e){switch(e.event){case"thread.run.step.created":return Bf(this,Ef,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=Bf(this,Ef,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=Zf.accumulateDelta(t,n.delta);Bf(this,Ef,"f")[e.data.id]=r}return Bf(this,Ef,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Bf(this,Ef,"f")[e.data.id]=e.data}if(Bf(this,Ef,"f")[e.data.id])return Bf(this,Ef,"f")[e.data.id];throw new Error("No snapshot available")},Ff=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const e of r.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=Bf(this,kf,"m",Hf).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Hf=function(e,t){return Zf.accumulateDelta(t,e)},Vf=function(e){switch(Wf(this,Af,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.cancelling":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":Wf(this,If,e.data,"f"),Bf(this,jf,"f")&&(this._emit("toolCallDone",Bf(this,jf,"f")),Wf(this,jf,void 0,"f"))}};class Kf extends xp{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},n){return np(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Gf,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class Gf extends Sp{}Kf.MessagesPage=Gf;class Jf extends xp{retrieve(e,t,n,r={},s){return np(r)?this.retrieve(e,t,n,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e,t,n={},r){return np(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Xf,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class Xf extends Sp{}Jf.RunStepsPage=Xf;class Qf extends xp{constructor(){super(...arguments),this.steps=new Jf(this._client)}create(e,t,n){const{include:r,...s}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},n){return np(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,Yf,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return Zf.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(e,t,{...n,headers:{...n?.headers,...r}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=o.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await up(e);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,t,n){return Zf.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,r){const s=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,s.id,r)}submitToolOutputsStream(e,t,n,r){return Zf.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}}class Yf extends Sp{}Qf.RunsPage=Yf,Qf.Steps=Jf,Qf.RunStepsPage=Xf;class em extends xp{constructor(){super(...arguments),this.runs=new Qf(this._client),this.messages=new Kf(this._client)}create(e={},t){return np(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return Zf.createThreadAssistantStream(e,this._client.beta.threads,t)}}em.Runs=Qf,em.RunsPage=Yf,em.Messages=Kf,em.MessagesPage=Gf;class tm extends xp{constructor(){super(...arguments),this.realtime=new xf(this._client),this.chat=new vf(this._client),this.assistants=new lh(this._client),this.threads=new em(this._client)}}tm.Realtime=xf,tm.Assistants=lh,tm.AssistantsPage=uh,tm.Threads=em;class nm extends xp{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return np(e)?this.list({},e):this._client.getAPIList("/batches",rm,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class rm extends Sp{}nm.BatchesPage=rm;class sm extends xp{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,Vd({body:t,...n}))}}class om extends xp{constructor(){super(...arguments),this.parts=new sm(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}}function am(e,t){const n=e.output.map(e=>{if("function_call"===e.type)return{...e,parsed_arguments:cm(t,e)};if("message"===e.type){const n=e.content.map(e=>"output_text"===e.type?{...e,parsed:im(t,e.text)}:e);return{...e,content:n}}return e}),r=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||lm(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const e of r.output)if("message"===e.type)for(const t of e.content)if("output_text"===t.type&&null!==t.parsed)return t.parsed;return null}}),r}function im(e,t){if("json_schema"!==e.text?.format?.type)return null;if("$parseRaw"in e.text?.format){const n=e.text?.format;return n.$parseRaw(t)}return JSON.parse(t)}function cm(e,t){const n=(r=e.tools??[],s=t.name,r.find(e=>"function"===e.type&&e.name===s));var r,s,o;return{...t,...t,parsed_arguments:(o=n,"auto-parseable-tool"===o?.$brand?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null)}}function lm(e){const t=[];for(const n of e.output)if("message"===n.type)for(const e of n.content)"output_text"===e.type&&t.push(e.text);e.output_text=t.join("")}om.Parts=sm;class um extends xp{list(e,t={},n){return np(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,$m,{query:t,...n})}}var dm,pm,hm,fm,mm,gm,ym,_m,vm,wm=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},bm=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class xm extends Ph{constructor(e){super(),dm.add(this),pm.set(this,void 0),hm.set(this,void 0),fm.set(this,void 0),wm(this,pm,e,"f")}static createResponse(e,t,n){const r=new xm(t);return r._run(()=>r._createOrRetrieveResponse(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,t,n){const r=n?.signal;let s;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),bm(this,dm,"m",mm).call(this);let o=null;"response_id"in t?(s=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),o=t.starting_after??null):s=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const e of s)bm(this,dm,"m",gm).call(this,e,o);if(s.controller.signal?.aborted)throw new md;return bm(this,dm,"m",ym).call(this)}[(pm=new WeakMap,hm=new WeakMap,fm=new WeakMap,dm=new WeakSet,mm=function(){this.ended||wm(this,hm,void 0,"f")},gm=function(e,t){if(this.ended)return;const n=(e,n)=>{(null==t||n.sequence_number>t)&&this._emit(e,n)},r=bm(this,dm,"m",_m).call(this,e);switch(n("event",e),e.type){case"response.output_text.delta":{const t=r.output[e.output_index];if(!t)throw new hd(`missing output at index ${e.output_index}`);if("message"===t.type){const r=t.content[e.content_index];if(!r)throw new hd(`missing content at index ${e.content_index}`);if("output_text"!==r.type)throw new hd(`expected content to be 'output_text', got ${r.type}`);n("response.output_text.delta",{...e,snapshot:r.text})}break}case"response.function_call_arguments.delta":{const t=r.output[e.output_index];if(!t)throw new hd(`missing output at index ${e.output_index}`);"function_call"===t.type&&n("response.function_call_arguments.delta",{...e,snapshot:t.arguments});break}default:n(e.type,e)}},ym=function(){if(this.ended)throw new hd("stream has ended, this shouldn't happen");const e=bm(this,hm,"f");if(!e)throw new hd("request ended without sending any events");wm(this,hm,void 0,"f");const t=function(e,t){return function(e,t){return t&&function(e){return!!Rh(e.text?.format)}(t)?am(e,t):{...e,output_parsed:null,output:e.output.map(e=>"function_call"===e.type?{...e,parsed_arguments:null}:"message"===e.type?{...e,content:e.content.map(e=>({...e,parsed:null}))}:e)}}(e,t)}(e,bm(this,pm,"f"));return wm(this,fm,t,"f"),t},_m=function(e){let t=bm(this,hm,"f");if(!t){if("response.created"!==e.type)throw new hd(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return t=wm(this,hm,e.response,"f"),t}switch(e.type){case"response.output_item.added":t.output.push(e.item);break;case"response.content_part.added":{const n=t.output[e.output_index];if(!n)throw new hd(`missing output at index ${e.output_index}`);"message"===n.type&&n.content.push(e.part);break}case"response.output_text.delta":{const n=t.output[e.output_index];if(!n)throw new hd(`missing output at index ${e.output_index}`);if("message"===n.type){const t=n.content[e.content_index];if(!t)throw new hd(`missing content at index ${e.content_index}`);if("output_text"!==t.type)throw new hd(`expected content to be 'output_text', got ${t.type}`);t.text+=e.delta}break}case"response.function_call_arguments.delta":{const n=t.output[e.output_index];if(!n)throw new hd(`missing output at index ${e.output_index}`);"function_call"===n.type&&(n.arguments+=e.delta);break}case"response.completed":wm(this,hm,e.response,"f")}return t},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=bm(this,fm,"f");if(!e)throw new hd("stream ended without producing a ChatCompletion");return e}}class km extends xp{constructor(){super(...arguments),this.inputItems=new um(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&lm(e),e))}retrieve(e,t={},n){return this._client.get(`/responses/${e}`,{query:t,...n,stream:t?.stream??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t?.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(t=>am(t,e))}stream(e,t){return xm.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...t?.headers}})}}class $m extends Sp{}km.InputItems=um;class Em extends xp{retrieve(e,t,n,r){return this._client.get(`/evals/${e}/runs/${t}/output_items/${n}`,r)}list(e,t,n={},r){return np(n)?this.list(e,t,{},n):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,Sm,{query:n,...r})}}class Sm extends Sp{}Em.OutputItemListResponsesPage=Sm;class Tm extends xp{constructor(){super(...arguments),this.outputItems=new Em(this._client)}create(e,t,n){return this._client.post(`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){return this._client.get(`/evals/${e}/runs/${t}`,n)}list(e,t={},n){return np(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,Im,{query:t,...n})}del(e,t,n){return this._client.delete(`/evals/${e}/runs/${t}`,n)}cancel(e,t,n){return this._client.post(`/evals/${e}/runs/${t}`,n)}}class Im extends Sp{}Tm.RunListResponsesPage=Im,Tm.OutputItems=Em,Tm.OutputItemListResponsesPage=Sm;class Cm extends xp{constructor(){super(...arguments),this.runs=new Tm(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,n){return this._client.post(`/evals/${e}`,{body:t,...n})}list(e={},t){return np(e)?this.list({},e):this._client.getAPIList("/evals",Pm,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class Pm extends Sp{}Cm.EvalListResponsesPage=Pm,Cm.Runs=Tm,Cm.RunListResponsesPage=Im;class Rm extends xp{retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}/content`,{...n,headers:{Accept:"application/binary",...n?.headers},__binaryResponse:!0})}}class jm extends xp{constructor(){super(...arguments),this.content=new Rm(this._client)}create(e,t,n){return this._client.post(`/containers/${e}/files`,Vd({body:t,...n}))}retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}`,n)}list(e,t={},n){return np(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,Nm,{query:t,...n})}del(e,t,n){return this._client.delete(`/containers/${e}/files/${t}`,{...n,headers:{Accept:"*/*",...n?.headers}})}}class Nm extends Sp{}jm.FileListResponsesPage=Nm,jm.Content=Rm;class Am extends xp{constructor(){super(...arguments),this.files=new jm(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return np(e)?this.list({},e):this._client.getAPIList("/containers",Om,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...t?.headers}})}}class Om extends Sp{}Am.ContainerListResponsesPage=Om,Am.Files=jm,Am.FileListResponsesPage=Nm;class zm extends Xd{constructor({baseURL:e=hp("OPENAI_BASE_URL"),apiKey:t=hp("OPENAI_API_KEY"),organization:n=hp("OPENAI_ORG_ID")??null,project:r=hp("OPENAI_PROJECT_ID")??null,...s}={}){if(void 0===t)throw new hd("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:n,project:r,...s,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator)throw new hd("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new kp(this),this.chat=new Pp(this),this.embeddings=new Rp(this),this.files=new jp(this),this.images=new Ap(this),this.audio=new Dp(this),this.moderations=new Lp(this),this.models=new qp(this),this.fineTuning=new Yp(this),this.graders=new th(this),this.vectorStores=new ah(this),this.beta=new tm(this),this.batches=new nm(this),this.uploads=new om(this),this.responses=new km(this),this.evals=new Cm(this),this.containers=new Am(this),this._options=o,this.apiKey=t,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return function(e,t={}){let n=e;const r=function(e=Zu){if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");const t=e.charset||Zu.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=Ou;if(void 0!==e.format){if(!Uu.call(zu,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=zu[n];let s,o=Zu.filter;if(("function"==typeof e.filter||Hu(e.filter))&&(o=e.filter),s=e.arrayFormat&&e.arrayFormat in Fu?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":Zu.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=void 0===e.allowDots?1==!!e.encodeDotInKeys||Zu.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:Zu.addQueryPrefix,allowDots:a,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:Zu.allowEmptyArrays,arrayFormat:s,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:Zu.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?Zu.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:Zu.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:Zu.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:Zu.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:Zu.encodeValuesOnly,filter:o,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:Zu.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:Zu.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:Zu.strictNullHandling}}(t);let s,o;"function"==typeof r.filter?(o=r.filter,n=o("",n)):Hu(r.filter)&&(o=r.filter,s=o);const a=[];if("object"!=typeof n||null===n)return"";const i=Fu[r.arrayFormat],c="comma"===i&&r.commaRoundTrip;s||(s=Object.keys(n)),r.sort&&s.sort(r.sort);const l=new WeakMap;for(let e=0;e<s.length;++e){const t=s[e];r.skipNulls&&null===n[t]||Bu(a,Gu(n[t],t,i,c,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,l))}const u=a.join(r.delimiter);let d=!0===r.addQueryPrefix?"?":"";return r.charsetSentinel&&("iso-8859-1"===r.charset?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""}(e,{arrayFormat:"brackets"})}}vm=zm,zm.OpenAI=vm,zm.DEFAULT_TIMEOUT=6e5,zm.OpenAIError=hd,zm.APIError=fd,zm.APIConnectionError=gd,zm.APIConnectionTimeoutError=yd,zm.APIUserAbortError=md,zm.NotFoundError=bd,zm.ConflictError=xd,zm.RateLimitError=$d,zm.BadRequestError=_d,zm.AuthenticationError=vd,zm.InternalServerError=Ed,zm.PermissionDeniedError=wd,zm.UnprocessableEntityError=kd,zm.toFile=qd,zm.fileFromPath=sd,zm.Completions=kp,zm.Chat=Pp,zm.ChatCompletionsPage=Ip,zm.Embeddings=Rp,zm.Files=jp,zm.FileObjectsPage=Np,zm.Images=Ap,zm.Audio=Dp,zm.Moderations=Lp,zm.Models=qp,zm.ModelsPage=Up,zm.FineTuning=Yp,zm.Graders=th,zm.VectorStores=ah,zm.VectorStoresPage=ih,zm.VectorStoreSearchResponsesPage=ch,zm.Beta=tm,zm.Batches=nm,zm.BatchesPage=rm,zm.Uploads=om,zm.Responses=km,zm.Evals=Cm,zm.EvalListResponsesPage=Pm,zm.Containers=Am,zm.ContainerListResponsesPage=Om,new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations","/images/edits"]);const Mm=zm,Dm="gpt-4o-mini";class Lm extends Error{constructor(e,t=null,n=null){super(e),this.name="OpenAIError",this.status=t,this.code=n}}new class{constructor(e={}){this.configKey=e.configKey||"nfdAIChat",this.apiPath=e.apiPath||"ai",this.mode=e.mode||"help",this.openai=null,this.config=null}getConfig(){return this.config||("undefined"!=typeof window&&window[this.configKey]?this.config={nonce:window[this.configKey].nonce,restUrl:window[this.configKey].restUrl,homeUrl:window[this.configKey].homeUrl}:this.config={nonce:"",restUrl:"",homeUrl:""}),this.config}getOpenAIClient(){if(this.openai)return this.openai;const e=this.getConfig();return this.openai=new Mm({apiKey:"proxy",baseURL:`${e.restUrl}${this.apiPath}`,dangerouslyAllowBrowser:!0,defaultHeaders:{"X-WP-Nonce":e.nonce}}),this.openai}async createChatCompletion(e){try{const t=this.getOpenAIClient();return await t.chat.completions.create({model:e.model||Dm,messages:e.messages,tools:e.tools,tool_choice:e.tool_choice,stream:!1,max_tokens:e.max_tokens,temperature:e.temperature,mode:e.mode||this.mode})}catch(e){throw new Lm(e.message||"OpenAI API request failed",e.status,e.code)}}async createStreamingCompletion(e,t,n,r){try{const r=this.getOpenAIClient(),s=await r.chat.completions.create({...e,messages:e.messages,stream:!0,mode:e.mode||this.mode});let o="";const a={};for await(const e of s){const r=e.choices[0]?.delta;if(r?.content&&(o+=r.content,t({type:"content",content:r.content})),r?.tool_calls){for(const e of r.tool_calls){const t=e.index;a[t]||(a[t]={id:e.id||"",type:"function",function:{name:e.function?.name||"",arguments:""}}),e.id&&(a[t].id=e.id),e.function?.name&&(a[t].function.name=e.function.name),e.function?.arguments&&(a[t].function.arguments+=e.function.arguments)}t({type:"tool_calls",tool_calls:Object.values(a)})}if(e.choices[0]?.finish_reason){const e=Object.values(a).map(e=>({id:e.id,name:e.function.name,arguments:e.function.arguments?JSON.parse(e.function.arguments):{}}));await n(o,e.length>0?e:null);break}}}catch(e){r(new Lm(e.message||"Streaming request failed",e.status,e.code))}}convertMessagesToOpenAI(e){const t=[];for(const o of e){var n;if("system"===o.role||"user"===o.role)t.push({role:o.role,content:null!==(n=o.content)&&void 0!==n?n:""});else if("assistant"===o.role){var r,s;const e=o.toolCalls&&o.toolCalls.length>0;if((null===o.content||void 0===o.content||""===o.content)&&!e){console.warn("Skipping invalid assistant message with no content and no tool calls");continue}const n={role:"assistant",content:e?null!==(r=o.content)&&void 0!==r?r:null:null!==(s=o.content)&&void 0!==s?s:""};if(e&&(n.tool_calls=o.toolCalls.map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:"string"==typeof e.arguments?e.arguments:JSON.stringify(e.arguments)}}))),t.push(n),e&&o.toolResults&&o.toolResults.length>0)for(const e of o.toolResults)o.toolCalls.some(t=>t.id===e.id)&&t.push({role:"tool",content:e.error||JSON.stringify(e.result),tool_call_id:e.id})}}return t}convertMCPToolsToOpenAI(e){return e.map(e=>({type:"function",function:{name:e.name,description:e.description,parameters:e.inputSchema}}))}processToolCalls(e){return e.map(e=>({id:e.id,name:e.function.name,arguments:JSON.parse(e.function.arguments||"{}")}))}async sendMessage(e,t=[],n=[]){const r=this.convertMessagesToOpenAI([...t,{id:`user-${Date.now()}`,role:"user",content:e,timestamp:new Date}]),s={model:Dm,messages:r,tools:n.length>0?this.convertMCPToolsToOpenAI(n):void 0,tool_choice:n.length>0?"auto":void 0,temperature:.7,max_tokens:2e3};try{const e=(await this.createChatCompletion(s)).choices[0];if(!e)throw new Lm("No response from OpenAI");const t={message:e.message.content||""};return e.message.tool_calls&&(t.toolCalls=this.processToolCalls(e.message.tool_calls)),t}catch(e){if(e instanceof Lm)throw e;throw new Lm(`Failed to send message: ${e}`)}}};const qm=e=>{if(!e||"string"!=typeof e)return!1;const t=e.toLowerCase().trim(),n=[/^hello!?\s+how\s+can\s+i\s+assist\s+you/i,/^hi!?\s+how\s+can\s+i\s+help/i,/^hello!?\s+how\s+can\s+i\s+help/i,/^hi\s+there!?\s+how\s+can/i,/^greetings!?\s+how\s+can/i,/^how\s+can\s+i\s+assist\s+you\s+today/i,/^how\s+can\s+i\s+help\s+you\s+today/i,/^hello!?\s+how\s+can\s+i\s+assist\s+you\s+today/i,/^hello!?\s+how\s+can\s+i\s+assist\s+you.*feel\s+free/i].some(e=>e.test(t)),r=t.includes("hello")&&(t.includes("assist")||t.includes("help"))&&(t.includes("today")||t.includes("feel free")||t.includes("ask")),s=t.length<150&&(t.includes("hello")&&(t.includes("assist")||t.includes("help"))||t.includes("hi")&&t.includes("help"));return n||r||s};const{entries:Um,setPrototypeOf:Fm,isFrozen:Hm,getPrototypeOf:Vm,getOwnPropertyDescriptor:Bm}=Object;let{freeze:Wm,seal:Zm,create:Km}=Object,{apply:Gm,construct:Jm}="undefined"!=typeof Reflect&&Reflect;Wm||(Wm=function(e){return e}),Zm||(Zm=function(e){return e}),Gm||(Gm=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return e.apply(t,r)}),Jm||(Jm=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new e(...n)});const Xm=pg(Array.prototype.forEach),Qm=pg(Array.prototype.lastIndexOf),Ym=pg(Array.prototype.pop),eg=pg(Array.prototype.push),tg=pg(Array.prototype.splice),ng=pg(String.prototype.toLowerCase),rg=pg(String.prototype.toString),sg=pg(String.prototype.match),og=pg(String.prototype.replace),ag=pg(String.prototype.indexOf),ig=pg(String.prototype.trim),cg=pg(Object.prototype.hasOwnProperty),lg=pg(RegExp.prototype.test),ug=(dg=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jm(dg,t)});var dg;function pg(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return Gm(e,t,r)}}function hg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ng;Fm&&Fm(e,null);let r=t.length;for(;r--;){let s=t[r];if("string"==typeof s){const e=n(s);e!==s&&(Hm(t)||(t[r]=e),s=e)}e[s]=!0}return e}function fg(e){for(let t=0;t<e.length;t++)cg(e,t)||(e[t]=null);return e}function mg(e){const t=Km(null);for(const[n,r]of Um(e))cg(e,n)&&(Array.isArray(r)?t[n]=fg(r):r&&"object"==typeof r&&r.constructor===Object?t[n]=mg(r):t[n]=r);return t}function gg(e,t){for(;null!==e;){const n=Bm(e,t);if(n){if(n.get)return pg(n.get);if("function"==typeof n.value)return pg(n.value)}e=Vm(e)}return function(){return null}}const yg=Wm(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),_g=Wm(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),vg=Wm(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),wg=Wm(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),bg=Wm(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),xg=Wm(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),kg=Wm(["#text"]),$g=Wm(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Eg=Wm(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Sg=Wm(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Tg=Wm(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ig=Zm(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Cg=Zm(/<%[\w\W]*|[\w\W]*%>/gm),Pg=Zm(/\$\{[\w\W]*/gm),Rg=Zm(/^data-[\-\w.\u00B7-\uFFFF]+$/),jg=Zm(/^aria-[\-\w]+$/),Ng=Zm(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ag=Zm(/^(?:\w+script|data):/i),Og=Zm(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zg=Zm(/^html$/i),Mg=Zm(/^[a-z][.\w]*(-[.\w]+)+$/i);var Dg=Object.freeze({__proto__:null,ARIA_ATTR:jg,ATTR_WHITESPACE:Og,CUSTOM_ELEMENT:Mg,DATA_ATTR:Rg,DOCTYPE_NAME:zg,ERB_EXPR:Cg,IS_ALLOWED_URI:Ng,IS_SCRIPT_OR_DATA:Ag,MUSTACHE_EXPR:Ig,TMPLIT_EXPR:Pg});const Lg=function(){return"undefined"==typeof window?null:window};var qg=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lg();const n=t=>e(t);if(n.version="3.3.1",n.removed=[],!t||!t.document||9!==t.document.nodeType||!t.Element)return n.isSupported=!1,n;let{document:r}=t;const s=r,o=s.currentScript,{DocumentFragment:a,HTMLTemplateElement:i,Node:c,Element:l,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:h,trustedTypes:f}=t,m=l.prototype,g=gg(m,"cloneNode"),y=gg(m,"remove"),_=gg(m,"nextSibling"),v=gg(m,"childNodes"),w=gg(m,"parentNode");if("function"==typeof i){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let b,x="";const{implementation:k,createNodeIterator:$,createDocumentFragment:E,getElementsByTagName:S}=r,{importNode:T}=s;let I={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof Um&&"function"==typeof w&&k&&void 0!==k.createHTMLDocument;const{MUSTACHE_EXPR:C,ERB_EXPR:P,TMPLIT_EXPR:R,DATA_ATTR:j,ARIA_ATTR:N,IS_SCRIPT_OR_DATA:A,ATTR_WHITESPACE:O,CUSTOM_ELEMENT:z}=Dg;let{IS_ALLOWED_URI:M}=Dg,D=null;const L=hg({},[...yg,..._g,...vg,...bg,...kg]);let q=null;const U=hg({},[...$g,...Eg,...Sg,...Tg]);let F=Object.seal(Km(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),H=null,V=null;const B=Object.seal(Km(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let W=!0,Z=!0,K=!1,G=!0,J=!1,X=!0,Q=!1,Y=!1,ee=!1,te=!1,ne=!1,re=!1,se=!0,oe=!1,ae=!0,ie=!1,ce={},le=null;const ue=hg({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let de=null;const pe=hg({},["audio","video","img","source","image","track"]);let he=null;const fe=hg({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),me="http://www.w3.org/1998/Math/MathML",ge="http://www.w3.org/2000/svg",ye="http://www.w3.org/1999/xhtml";let _e=ye,ve=!1,we=null;const be=hg({},[me,ge,ye],rg);let xe=hg({},["mi","mo","mn","ms","mtext"]),ke=hg({},["annotation-xml"]);const $e=hg({},["title","style","font","a","script"]);let Ee=null;const Se=["application/xhtml+xml","text/html"];let Te=null,Ie=null;const Ce=r.createElement("form"),Pe=function(e){return e instanceof RegExp||e instanceof Function},Re=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ie||Ie!==e){if(e&&"object"==typeof e||(e={}),e=mg(e),Ee=-1===Se.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,Te="application/xhtml+xml"===Ee?rg:ng,D=cg(e,"ALLOWED_TAGS")?hg({},e.ALLOWED_TAGS,Te):L,q=cg(e,"ALLOWED_ATTR")?hg({},e.ALLOWED_ATTR,Te):U,we=cg(e,"ALLOWED_NAMESPACES")?hg({},e.ALLOWED_NAMESPACES,rg):be,he=cg(e,"ADD_URI_SAFE_ATTR")?hg(mg(fe),e.ADD_URI_SAFE_ATTR,Te):fe,de=cg(e,"ADD_DATA_URI_TAGS")?hg(mg(pe),e.ADD_DATA_URI_TAGS,Te):pe,le=cg(e,"FORBID_CONTENTS")?hg({},e.FORBID_CONTENTS,Te):ue,H=cg(e,"FORBID_TAGS")?hg({},e.FORBID_TAGS,Te):mg({}),V=cg(e,"FORBID_ATTR")?hg({},e.FORBID_ATTR,Te):mg({}),ce=!!cg(e,"USE_PROFILES")&&e.USE_PROFILES,W=!1!==e.ALLOW_ARIA_ATTR,Z=!1!==e.ALLOW_DATA_ATTR,K=e.ALLOW_UNKNOWN_PROTOCOLS||!1,G=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,J=e.SAFE_FOR_TEMPLATES||!1,X=!1!==e.SAFE_FOR_XML,Q=e.WHOLE_DOCUMENT||!1,te=e.RETURN_DOM||!1,ne=e.RETURN_DOM_FRAGMENT||!1,re=e.RETURN_TRUSTED_TYPE||!1,ee=e.FORCE_BODY||!1,se=!1!==e.SANITIZE_DOM,oe=e.SANITIZE_NAMED_PROPS||!1,ae=!1!==e.KEEP_CONTENT,ie=e.IN_PLACE||!1,M=e.ALLOWED_URI_REGEXP||Ng,_e=e.NAMESPACE||ye,xe=e.MATHML_TEXT_INTEGRATION_POINTS||xe,ke=e.HTML_INTEGRATION_POINTS||ke,F=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&Pe(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(F.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&Pe(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(F.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(F.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),J&&(Z=!1),ne&&(te=!0),ce&&(D=hg({},kg),q=[],!0===ce.html&&(hg(D,yg),hg(q,$g)),!0===ce.svg&&(hg(D,_g),hg(q,Eg),hg(q,Tg)),!0===ce.svgFilters&&(hg(D,vg),hg(q,Eg),hg(q,Tg)),!0===ce.mathMl&&(hg(D,bg),hg(q,Sg),hg(q,Tg))),e.ADD_TAGS&&("function"==typeof e.ADD_TAGS?B.tagCheck=e.ADD_TAGS:(D===L&&(D=mg(D)),hg(D,e.ADD_TAGS,Te))),e.ADD_ATTR&&("function"==typeof e.ADD_ATTR?B.attributeCheck=e.ADD_ATTR:(q===U&&(q=mg(q)),hg(q,e.ADD_ATTR,Te))),e.ADD_URI_SAFE_ATTR&&hg(he,e.ADD_URI_SAFE_ATTR,Te),e.FORBID_CONTENTS&&(le===ue&&(le=mg(le)),hg(le,e.FORBID_CONTENTS,Te)),e.ADD_FORBID_CONTENTS&&(le===ue&&(le=mg(le)),hg(le,e.ADD_FORBID_CONTENTS,Te)),ae&&(D["#text"]=!0),Q&&hg(D,["html","head","body"]),D.table&&(hg(D,["tbody"]),delete H.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw ug('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw ug('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=e.TRUSTED_TYPES_POLICY,x=b.createHTML("")}else void 0===b&&(b=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+s+" could not be created."),null}}(f,o)),null!==b&&"string"==typeof x&&(x=b.createHTML(""));Wm&&Wm(e),Ie=e}},je=hg({},[..._g,...vg,...wg]),Ne=hg({},[...bg,...xg]),Ae=function(e){eg(n.removed,{element:e});try{w(e).removeChild(e)}catch(t){y(e)}},Oe=function(e,t){try{eg(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){eg(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(te||ne)try{Ae(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},ze=function(e){let t=null,n=null;if(ee)e="<remove></remove>"+e;else{const t=sg(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===Ee&&_e===ye&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const s=b?b.createHTML(e):e;if(_e===ye)try{t=(new h).parseFromString(s,Ee)}catch(e){}if(!t||!t.documentElement){t=k.createDocument(_e,"template",null);try{t.documentElement.innerHTML=ve?x:s}catch(e){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(r.createTextNode(n),o.childNodes[0]||null),_e===ye?S.call(t,Q?"html":"body")[0]:Q?t.documentElement:o},Me=function(e){return $.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},De=function(e){return e instanceof p&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof d)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},Le=function(e){return"function"==typeof c&&e instanceof c};function qe(e,t,r){Xm(e,e=>{e.call(n,t,r,Ie)})}const Ue=function(e){let t=null;if(qe(I.beforeSanitizeElements,e,null),De(e))return Ae(e),!0;const r=Te(e.nodeName);if(qe(I.uponSanitizeElement,e,{tagName:r,allowedTags:D}),X&&e.hasChildNodes()&&!Le(e.firstElementChild)&&lg(/<[/\w!]/g,e.innerHTML)&&lg(/<[/\w!]/g,e.textContent))return Ae(e),!0;if(7===e.nodeType)return Ae(e),!0;if(X&&8===e.nodeType&&lg(/<[/\w]/g,e.data))return Ae(e),!0;if(!(B.tagCheck instanceof Function&&B.tagCheck(r))&&(!D[r]||H[r])){if(!H[r]&&He(r)){if(F.tagNameCheck instanceof RegExp&&lg(F.tagNameCheck,r))return!1;if(F.tagNameCheck instanceof Function&&F.tagNameCheck(r))return!1}if(ae&&!le[r]){const t=w(e)||e.parentNode,n=v(e)||e.childNodes;if(n&&t)for(let r=n.length-1;r>=0;--r){const s=g(n[r],!0);s.__removalCount=(e.__removalCount||0)+1,t.insertBefore(s,_(e))}}return Ae(e),!0}return e instanceof l&&!function(e){let t=w(e);t&&t.tagName||(t={namespaceURI:_e,tagName:"template"});const n=ng(e.tagName),r=ng(t.tagName);return!!we[e.namespaceURI]&&(e.namespaceURI===ge?t.namespaceURI===ye?"svg"===n:t.namespaceURI===me?"svg"===n&&("annotation-xml"===r||xe[r]):Boolean(je[n]):e.namespaceURI===me?t.namespaceURI===ye?"math"===n:t.namespaceURI===ge?"math"===n&&ke[r]:Boolean(Ne[n]):e.namespaceURI===ye?!(t.namespaceURI===ge&&!ke[r])&&!(t.namespaceURI===me&&!xe[r])&&!Ne[n]&&($e[n]||!je[n]):!("application/xhtml+xml"!==Ee||!we[e.namespaceURI]))}(e)?(Ae(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!lg(/<\/no(script|embed|frames)/i,e.innerHTML)?(J&&3===e.nodeType&&(t=e.textContent,Xm([C,P,R],e=>{t=og(t,e," ")}),e.textContent!==t&&(eg(n.removed,{element:e.cloneNode()}),e.textContent=t)),qe(I.afterSanitizeElements,e,null),!1):(Ae(e),!0)},Fe=function(e,t,n){if(se&&("id"===t||"name"===t)&&(n in r||n in Ce))return!1;if(Z&&!V[t]&&lg(j,t));else if(W&&lg(N,t));else if(B.attributeCheck instanceof Function&&B.attributeCheck(t,e));else if(!q[t]||V[t]){if(!(He(e)&&(F.tagNameCheck instanceof RegExp&&lg(F.tagNameCheck,e)||F.tagNameCheck instanceof Function&&F.tagNameCheck(e))&&(F.attributeNameCheck instanceof RegExp&&lg(F.attributeNameCheck,t)||F.attributeNameCheck instanceof Function&&F.attributeNameCheck(t,e))||"is"===t&&F.allowCustomizedBuiltInElements&&(F.tagNameCheck instanceof RegExp&&lg(F.tagNameCheck,n)||F.tagNameCheck instanceof Function&&F.tagNameCheck(n))))return!1}else if(he[t]);else if(lg(M,og(n,O,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==ag(n,"data:")||!de[e])if(K&&!lg(A,og(n,O,"")));else if(n)return!1;return!0},He=function(e){return"annotation-xml"!==e&&sg(e,z)},Ve=function(e){qe(I.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||De(e))return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q,forceKeepAttr:void 0};let s=t.length;for(;s--;){const o=t[s],{name:a,namespaceURI:i,value:c}=o,l=Te(a),u=c;let d="value"===a?u:ig(u);if(r.attrName=l,r.attrValue=d,r.keepAttr=!0,r.forceKeepAttr=void 0,qe(I.uponSanitizeAttribute,e,r),d=r.attrValue,!oe||"id"!==l&&"name"!==l||(Oe(a,e),d="user-content-"+d),X&&lg(/((--!?|])>)|<\/(style|title|textarea)/i,d)){Oe(a,e);continue}if("attributename"===l&&sg(d,"href")){Oe(a,e);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr){Oe(a,e);continue}if(!G&&lg(/\/>/i,d)){Oe(a,e);continue}J&&Xm([C,P,R],e=>{d=og(d,e," ")});const p=Te(e.nodeName);if(Fe(p,l,d)){if(b&&"object"==typeof f&&"function"==typeof f.getAttributeType)if(i);else switch(f.getAttributeType(p,l)){case"TrustedHTML":d=b.createHTML(d);break;case"TrustedScriptURL":d=b.createScriptURL(d)}if(d!==u)try{i?e.setAttributeNS(i,a,d):e.setAttribute(a,d),De(e)?Ae(e):Ym(n.removed)}catch(t){Oe(a,e)}}else Oe(a,e)}qe(I.afterSanitizeAttributes,e,null)},Be=function e(t){let n=null;const r=Me(t);for(qe(I.beforeSanitizeShadowDOM,t,null);n=r.nextNode();)qe(I.uponSanitizeShadowNode,n,null),Ue(n),Ve(n),n.content instanceof a&&e(n.content);qe(I.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,o=null,i=null,l=null;if(ve=!e,ve&&(e="\x3c!--\x3e"),"string"!=typeof e&&!Le(e)){if("function"!=typeof e.toString)throw ug("toString is not a function");if("string"!=typeof(e=e.toString()))throw ug("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Y||Re(t),n.removed=[],"string"==typeof e&&(ie=!1),ie){if(e.nodeName){const t=Te(e.nodeName);if(!D[t]||H[t])throw ug("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof c)r=ze("\x3c!----\x3e"),o=r.ownerDocument.importNode(e,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?r=o:r.appendChild(o);else{if(!te&&!J&&!Q&&-1===e.indexOf("<"))return b&&re?b.createHTML(e):e;if(r=ze(e),!r)return te?null:re?x:""}r&&ee&&Ae(r.firstChild);const u=Me(ie?e:r);for(;i=u.nextNode();)Ue(i),Ve(i),i.content instanceof a&&Be(i.content);if(ie)return e;if(te){if(ne)for(l=E.call(r.ownerDocument);r.firstChild;)l.appendChild(r.firstChild);else l=r;return(q.shadowroot||q.shadowrootmode)&&(l=T.call(s,l,!0)),l}let d=Q?r.outerHTML:r.innerHTML;return Q&&D["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&lg(zg,r.ownerDocument.doctype.name)&&(d="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+d),J&&Xm([C,P,R],e=>{d=og(d,e," ")}),b&&re?b.createHTML(d):d},n.setConfig=function(){Re(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Y=!0},n.clearConfig=function(){Ie=null,Y=!1},n.isValidAttribute=function(e,t,n){Ie||Re({});const r=Te(e),s=Te(t);return Fe(r,s,n)},n.addHook=function(e,t){"function"==typeof t&&eg(I[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=Qm(I[e],t);return-1===n?void 0:tg(I[e],n,1)[0]}return Ym(I[e])},n.removeHooks=function(e){I[e]=[]},n.removeAllHooks=function(){I={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}();const Ug=e=>qg.sanitize(e,{ALLOWED_TAGS:["section","div","h1","h2","h3","h4","h5","h6","p","span","strong","em","b","i","u","s","mark","small","sub","sup","a","br","ul","ol","li","dl","dt","dd","blockquote","code","pre","table","thead","tbody","tr","th","td","hr","address","time"],ALLOWED_ATTR:["style","class","id","href","datetime","target","rel"],ALLOW_DATA_ATTR:!1,FORBID_TAGS:["script","object","embed","iframe","form","fieldset","legend","label","input","textarea","select","option","button","details","summary","progress","meter"],FORBID_ATTR:["onerror","onload","onclick","onmouseover","onfocus","onblur"]}),Fg=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim();var Hg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Vg=(0,u.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...i},c)=>(0,u.createElement)("svg",{ref:c,...Hg,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:Fg("lucide",s),...i},[...a.map(([e,t])=>(0,u.createElement)(e,t)),...Array.isArray(o)?o:[o]])),Bg=(e,t)=>{const n=(0,u.forwardRef)(({className:n,...r},s)=>{return(0,u.createElement)(Vg,{ref:s,iconNode:t,className:Fg(`lucide-${o=e,o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...r});var o});return n.displayName=`${e}`,n},Wg=Bg("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Zg=Bg("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Kg=({executedTools:e=[]})=>{if(!e||0===e.length)return null;const t=e.some(e=>e.isError);return(0,dt.jsx)("div",{className:"nfd-ai-chat-tool-status-line",children:t?(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)(Wg,{className:"nfd-ai-chat-tool-status-line__icon nfd-ai-chat-tool-status-line__icon--error",size:14}),(0,dt.jsx)("span",{className:"nfd-ai-chat-tool-status-line__text",children:(0,nt.__)("Some actions failed","wp-module-ai-chat")})]}):(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)(Zg,{className:"nfd-ai-chat-tool-status-line__icon",size:14}),(0,dt.jsx)("span",{className:"nfd-ai-chat-tool-status-line__text",children:(0,nt.__)("Changes applied","wp-module-ai-chat")})]})})};var Gg=n(4071),Jg=n.n(Gg);const Xg=({approvalRequest:t,onApprove:n,onReject:r,onExecuteTool:s,onSendMessage:o,onSendSystemMessage:a,conversationId:i,onClearTyping:c,brandId:l})=>{const[u,d]=(0,e.useState)(!1),[p,h]=(0,e.useState)(null),f=(0,e.useCallback)(e=>e?e.split("/").pop().replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase()):(0,nt.__)("Execute Action","wp-module-ai-chat"),[]),m=(0,e.useCallback)(e=>e&&"object"==typeof e&&0!==Object.keys(e).length?Object.entries(e).map(([e,t])=>e.toLowerCase().includes("password")||e.toLowerCase().includes("token")?`${e}: `:`${e}: ${"object"==typeof t?JSON.stringify(t,null,2):String(t)}`).join("\n"):(0,nt.__)("No arguments provided","wp-module-ai-chat"),[]),g=(0,e.useCallback)(async()=>{if(s&&t?.tool_name){d(!0),h(null);try{let e=t.tool_arguments||{};if("string"==typeof e)try{e=JSON.parse(e)}catch{e={}}const r=await s(t.tool_name,e,t.site_url);if(c&&c(),a){const e=((e,t)=>{const n=(e||"").toLowerCase();let r="";if(t&&"object"==typeof t)r=t.title?.rendered||t.title||t.name||"";else if("string"==typeof t)try{const e=JSON.parse(t);r=e.title?.rendered||e.title||e.name||""}catch(e){}return n.includes("posts-create")||n.includes("create-post")?r?(0,nt.sprintf)(/* translators: %s: post title */ /* translators: %s: post title */
(0,nt.__)('Post "%s" has been created successfully.',"wp-module-ai-chat"),r):(0,nt.__)("Post has been created successfully.","wp-module-ai-chat"):n.includes("posts-update")||n.includes("update-post")?r?(0,nt.sprintf)(/* translators: %s: post title */ /* translators: %s: post title */
(0,nt.__)('Post "%s" has been updated successfully.',"wp-module-ai-chat"),r):(0,nt.__)("Post has been updated successfully.","wp-module-ai-chat"):n.includes("posts-delete")||n.includes("delete-post")?(0,nt.__)("Post has been deleted successfully.","wp-module-ai-chat"):n.includes("pages-create")||n.includes("create-page")?r?(0,nt.sprintf)(/* translators: %s: page title */ /* translators: %s: page title */
(0,nt.__)('Page "%s" has been created successfully.',"wp-module-ai-chat"),r):(0,nt.__)("Page has been created successfully.","wp-module-ai-chat"):n.includes("pages-update")||n.includes("update-page")?r?(0,nt.sprintf)(/* translators: %s: page title */ /* translators: %s: page title */
(0,nt.__)('Page "%s" has been updated successfully.',"wp-module-ai-chat"),r):(0,nt.__)("Page has been updated successfully.","wp-module-ai-chat"):n.includes("pages-delete")||n.includes("delete-page")?(0,nt.__)("Page has been deleted successfully.","wp-module-ai-chat"):n.includes("media-create")||n.includes("upload")?r?(0,nt.sprintf)(/* translators: %s: media title */ /* translators: %s: media title */
(0,nt.__)('Media "%s" has been uploaded successfully.',"wp-module-ai-chat"),r):(0,nt.__)("Media has been uploaded successfully.","wp-module-ai-chat"):n.includes("media-delete")||n.includes("delete-media")?(0,nt.__)("Media has been deleted successfully.","wp-module-ai-chat"):n.includes("categories-create")||n.includes("create-category")?r?(0,nt.sprintf)(/* translators: %s: category name */ /* translators: %s: category name */
(0,nt.__)('Category "%s" has been created successfully.',"wp-module-ai-chat"),r):(0,nt.__)("Category has been created successfully.","wp-module-ai-chat"):n.includes("tags-create")||n.includes("create-tag")?r?(0,nt.sprintf)(/* translators: %s: tag name */ /* translators: %s: tag name */
(0,nt.__)('Tag "%s" has been created successfully.',"wp-module-ai-chat"),r):(0,nt.__)("Tag has been created successfully.","wp-module-ai-chat"):n.includes("users-create")||n.includes("create-user")?(0,nt.__)("User has been created successfully.","wp-module-ai-chat"):n.includes("comments-create")||n.includes("create-comment")?(0,nt.__)("Comment has been created successfully.","wp-module-ai-chat"):n.includes("settings-update")||n.includes("update-settings")?(0,nt.__)("Settings have been updated successfully.","wp-module-ai-chat"):n.includes("create")?(0,nt.__)("Item has been created successfully.","wp-module-ai-chat"):n.includes("update")?(0,nt.__)("Item has been updated successfully.","wp-module-ai-chat"):n.includes("delete")?(0,nt.__)("Item has been deleted successfully.","wp-module-ai-chat"):(0,nt.__)("Action completed successfully.","wp-module-ai-chat")})(t.tool_name,r);let n="";try{const e="string"==typeof r?JSON.parse(r):r;if(e){const t=e.title?.rendered||e.title||e.name||"",r=e.id||"",s=e.link||e.guid?.rendered||"",o=e.status||"";(t||r||s)&&(n="\nDetails: ",t&&(n+=`Title: "${t}"`),r&&(n+=`${t?", ":""}ID: ${r}`),o&&(n+=`, Status: ${o}`),s&&(n+=`\nLink: ${s}`))}}catch(e){}a(`[Tool Execution Result]\n${e}${n}`)}n&&n(r)}catch(e){const n=e.message||(0,nt.__)("Tool execution failed","wp-module-ai-chat");h(n),c&&c(),a&&a(`[Tool Execution Error]\nFailed to execute ${t.tool_name}: ${n}`)}finally{d(!1)}}else n&&n()},[t,n,s,a,c]),y=(0,e.useCallback)((e=(0,nt.__)("Action rejected by user.","wp-module-ai-chat"))=>{a&&a(`[Tool Execution Cancelled]\n${e}`),r&&r()},[r,a]);if((0,e.useEffect)(()=>{if(t){const e=setTimeout(()=>{y((0,nt.__)("Approval request timed out.","wp-module-ai-chat"))},3e5);return()=>clearTimeout(e)}},[t,y]),(0,e.useEffect)(()=>{const e=e=>{"Escape"!==e.key||u?"Enter"!==e.key||!e.ctrlKey&&!e.metaKey||u||g():y()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[u,y,g]),!t)return null;const{tool_name:_,tool_arguments:v}=t;return(0,dt.jsx)("div",{className:`nfd-inline-approval nfd-brand-${l||"default"}`,role:"region","aria-label":(0,nt.__)("Action approval required","wp-module-ai-chat"),"aria-live":"polite",children:(0,dt.jsxs)("div",{className:"nfd-inline-approval__card",children:[(0,dt.jsxs)("div",{className:"nfd-inline-approval__header",children:[(0,dt.jsx)("span",{className:"nfd-inline-approval__icon",role:"img","aria-label":(0,nt.__)("Warning","wp-module-ai-chat"),children:""}),(0,dt.jsx)("h3",{className:"nfd-inline-approval__title",children:(0,nt.__)("Action Required","wp-module-ai-chat")})]}),(0,dt.jsxs)("div",{className:"nfd-inline-approval__content",children:[(0,dt.jsxs)("p",{className:"nfd-inline-approval__description",children:[(0,nt.__)("Approve execution of:","wp-module-ai-chat")," ",(0,dt.jsx)("strong",{children:f(_)})]}),v&&Object.keys(v).length>0&&(0,dt.jsxs)("div",{className:"nfd-inline-approval__arguments",children:[(0,dt.jsx)("label",{className:"nfd-inline-approval__arguments-label",children:(0,nt.__)("Arguments:","wp-module-ai-chat")}),(0,dt.jsx)("pre",{className:"nfd-inline-approval__arguments-code",role:"textbox","aria-label":(0,nt.__)("Tool arguments","wp-module-ai-chat"),children:m(v)})]}),p&&(0,dt.jsxs)("div",{className:"nfd-inline-approval__error",role:"alert","aria-live":"assertive",children:[(0,dt.jsx)("span",{className:"nfd-inline-approval__error-icon",children:""}),(0,dt.jsx)("span",{className:"nfd-inline-approval__error-message",children:p})]})]}),(0,dt.jsxs)("div",{className:"nfd-inline-approval__actions",children:[(0,dt.jsx)("button",{type:"button",onClick:y,disabled:u,className:"nfd-inline-approval__button nfd-inline-approval__button--secondary","aria-label":(0,nt.__)("Cancel action","wp-module-ai-chat"),children:(0,nt.__)("Cancel","wp-module-ai-chat")}),(0,dt.jsx)("button",{type:"button",onClick:g,disabled:u,className:"nfd-inline-approval__button nfd-inline-approval__button--primary","aria-label":(0,nt.__)("Approve and execute action","wp-module-ai-chat"),"aria-busy":u,children:u?(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("span",{className:"nfd-inline-approval__spinner","aria-hidden":"true"}),(0,dt.jsx)("span",{children:(0,nt.__)("Executing...","wp-module-ai-chat")})]}):(0,nt.__)("Approve","wp-module-ai-chat")})]})]})})};Xg.propTypes={approvalRequest:Jg().shape({tool_name:Jg().string.isRequired,tool_arguments:Jg().object,site_url:Jg().string,frontend:Jg().string}),onApprove:Jg().func.isRequired,onReject:Jg().func.isRequired,onExecuteTool:Jg().func,onSendMessage:Jg().func,onSendSystemMessage:Jg().func,conversationId:Jg().string,onClearTyping:Jg().func,brandId:Jg().string};const Qg=Xg,Yg=({message:t,type:n="assistant",executedTools:r=[],approvalRequest:s,onApprove:o,onReject:a,onExecuteTool:i,onSendMessage:c,onSendSystemMessage:l,conversationId:u,onClearTyping:d,brandId:p})=>{if("approval_request"===n&&s)return(0,dt.jsx)("div",{className:"nfd-ai-chat-message nfd-ai-chat-message--approval",children:(0,dt.jsx)(Qg,{approvalRequest:s,onApprove:o,onReject:a,onExecuteTool:i,onSendMessage:c,onSendSystemMessage:l,conversationId:u,onClearTyping:d,brandId:p})});const h="user"===n,{content:f,isRichContent:m}=(0,e.useMemo)(()=>{if(!t)return{content:"",isRichContent:!1};if(h)return{content:t,isRichContent:!1};if((e=>/<[a-z][\s\S]*>/i.test(e))(t))return{content:Ug(t),isRichContent:!0};if((e=t)&&"string"==typeof e&&[/^#{1,6}\s/m,/\*\*[^*]+\*\*/,/\*[^*]+\*/,/__[^_]+__/,/_[^_]+_/,/`[^`]+`/,/```[\s\S]*?```/,/^\s*[-*+]\s/m,/^\s*\d+\.\s/m,/\[([^\]]+)\]\(([^)]+)\)/].some(t=>t.test(e))){const e=function(e){if(!e||"string"!=typeof e)return"";let t=e;t=t.replace(/&(?![\w#]+;)/g,"&amp;").replace(/<(?![a-zA-Z/])/g,"&lt;").replace(/(?<![a-zA-Z"])>/g,"&gt;"),t=t.replace(/```(\w*)\n?([\s\S]*?)```/g,(e,t,n)=>`<pre><code class="language-${t||"plaintext"}">${n.trim().replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`),t=t.replace(/`([^`]+)`/g,'<code class="inline-code">$1</code>'),t=t.replace(/^######\s+(.+)$/gm,'<h6 class="chat-h6">$1</h6>'),t=t.replace(/^#####\s+(.+)$/gm,'<h5 class="chat-h5">$1</h5>'),t=t.replace(/^####\s+(.+)$/gm,'<h4 class="chat-h4">$1</h4>'),t=t.replace(/^###\s+(.+)$/gm,'<h3 class="chat-h3">$1</h3>'),t=t.replace(/^##\s+(.+)$/gm,'<h2 class="chat-h2">$1</h2>'),t=t.replace(/^#\s+(.+)$/gm,'<h1 class="chat-h1">$1</h1>'),t=t.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),t=t.replace(/__([^_]+)__/g,"<strong>$1</strong>"),t=t.replace(/(?<![*_])\*(?!\*)([^*\n]+)(?<!\*)\*(?!\*)/g,"<em>$1</em>"),t=t.replace(/(?<![_*])_(?!_)([^_\n]+)(?<!_)_(?!_)/g,"<em>$1</em>"),t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'),t=t.replace(/^(\s*)[-*+]\s+(.+)$/gm,(e,t,n)=>`<li class="chat-li" data-level="${Math.floor(t.length/2)}">${n}</li>`),t=t.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,e=>`<ul class="chat-ul">${e.replace(/(<\/li>)\s+(<li)/g,"$1$2")}</ul>`),t=t.replace(/^(\s*)\d+\.\s+(.+)$/gm,(e,t,n)=>`<oli class="chat-oli" data-level="${Math.floor(t.length/2)}">${n}</oli>`),t=t.replace(/((?:<oli[^>]*>.*?<\/oli>\s*)+)/g,e=>`<ol class="chat-ol">${e.replace(/(<\/oli>)\s+(<oli)/g,"$1$2").replace(/<\/?oli/g,e=>e.replace("oli","li"))}</ol>`),t=t.replace(/^---+$/gm,'<hr class="chat-hr" />'),t=t.replace(/^>\s+(.+)$/gm,'<blockquote class="chat-blockquote">$1</blockquote>');const n=t.split(/\n\n+/);return t=n.map(e=>{const t=e.trim();return t.startsWith("<h")||t.startsWith("<ul")||t.startsWith("<ol")||t.startsWith("<pre")||t.startsWith("<blockquote")||t.startsWith("<hr")||t.startsWith("<p")?t:t?`<p class="chat-p">${t}</p>`:""}).filter(Boolean).join(""),t=t.replace(/<p([^>]*)>([\s\S]*?)<\/p>/g,(e,t,n)=>`<p${t}>${n.trim().replace(/\n/g,"<br>")}</p>`),t=t.replace(/<br\s*\/?>\s*(<\/?(ul|ol|li|p|h[1-6]|pre|blockquote|hr))/gi,"$1"),t=t.replace(/(<\/(ul|ol|li|p|h[1-6]|pre|blockquote)>)\s*<br\s*\/?>/gi,"$1"),t=t.replace(/<p[^>]*>\s*<\/p>/g,""),t=t.replace(/(<br\s*\/?>){2,}/g,"<br>"),t}(t);return{content:Ug(e),isRichContent:!0}}var e;return{content:t,isRichContent:!1}},[t,h]);return f||r&&0!==r.length?(0,dt.jsxs)("div",{className:`nfd-ai-chat-message nfd-ai-chat-message--${n}`,children:[f&&(m?(0,dt.jsx)("div",{className:"nfd-ai-chat-message__content nfd-ai-chat-message__content--rich",dangerouslySetInnerHTML:{__html:f}}):(0,dt.jsx)("div",{className:"nfd-ai-chat-message__content",children:f})),r&&r.length>0&&(0,dt.jsx)(Kg,{executedTools:r})]}):null},ey=({message:e,className:t=""})=>(0,dt.jsxs)("div",{className:`nfd-ai-chat-error-alert ${t}`,children:[(0,dt.jsx)("div",{className:"nfd-ai-chat-error-alert__icon",children:(0,dt.jsx)(Wg,{width:16,height:16})}),(0,dt.jsx)("div",{className:"nfd-ai-chat-error-alert__content",children:(0,dt.jsx)("div",{className:"nfd-ai-chat-error-alert__message",children:e})})]}),ty=Bg("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ny=Bg("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),ry=Bg("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),sy=Bg("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var oy=n(435),ay=n.n(oy);const iy=e=>({"nfd-agents/get-global-styles":{title:(0,nt.__)("Reading Site Colors","wp-module-ai-chat"),description:(0,nt.__)("Fetching current color palette and typography settings","wp-module-ai-chat")},"nfd-agents/update-global-palette":{title:(0,nt.__)("Updating Site Colors","wp-module-ai-chat"),description:(0,nt.__)("Applying new colors to global styles","wp-module-ai-chat")},"newfold-agents/get-global-styles":{title:(0,nt.__)("Reading Site Colors","wp-module-ai-chat"),description:(0,nt.__)("Fetching current color palette and typography settings","wp-module-ai-chat")},"newfold-agents/update-global-palette":{title:(0,nt.__)("Updating Site Colors","wp-module-ai-chat"),description:(0,nt.__)("Applying new colors to global styles","wp-module-ai-chat")},"blu/get-global-styles":{title:(0,nt.__)("Reading Site Colors","wp-module-ai-chat"),description:(0,nt.__)("Fetching current color palette and typography settings","wp-module-ai-chat")},"blu/update-global-palette":{title:(0,nt.__)("Updating Site Colors","wp-module-ai-chat"),description:(0,nt.__)("Applying new colors to global styles","wp-module-ai-chat")},"mcp-adapter-discover-abilities":{title:(0,nt.__)("Discovering Actions","wp-module-ai-chat"),description:(0,nt.__)("Finding available WordPress abilities","wp-module-ai-chat")},"mcp-adapter-get-ability-info":{title:(0,nt.__)("Getting Ability Info","wp-module-ai-chat"),description:(0,nt.__)("Fetching ability details","wp-module-ai-chat")},"mcp-adapter-execute-ability":{title:(0,nt.__)("Executing Action","wp-module-ai-chat"),description:(0,nt.__)("Running WordPress ability","wp-module-ai-chat")}}[e]||{title:e?.replace(/[-_\/]/g," ").replace(/\b\w/g,e=>e.toUpperCase())||(0,nt.__)("Executing","wp-module-ai-chat"),description:(0,nt.__)("Running action","wp-module-ai-chat")}),cy=({tool:e,isActive:t,progress:n,isComplete:r,isError:s})=>{const o=((e,t={})=>{if("mcp-adapter-execute-ability"===e){const e=t?.ability_name||"unknown",n=iy(e);let r=null;if(("nfd-agents/update-global-palette"===e||"newfold-agents/update-global-palette"===e||"blu/update-global-palette"===e)&&t?.parameters?.colors){const e=t.parameters.colors.length;r=`${e} color${1!==e?"s":""}`}return{...n,params:r}}return iy(e)})(e.name,e.arguments);return(0,dt.jsxs)("div",{className:ay()("nfd-ai-chat-tool-execution__item",{"nfd-ai-chat-tool-execution__item--active":t,"nfd-ai-chat-tool-execution__item--complete":r,"nfd-ai-chat-tool-execution__item--error":s}),children:[(0,dt.jsxs)("div",{className:"nfd-ai-chat-tool-execution__item-header",children:[s?(0,dt.jsx)(Wg,{className:"nfd-ai-chat-tool-execution__icon nfd-ai-chat-tool-execution__icon--error",size:12}):r?(0,dt.jsx)(Zg,{className:"nfd-ai-chat-tool-execution__icon nfd-ai-chat-tool-execution__icon--success",size:12}):t?(0,dt.jsx)(ty,{className:"nfd-ai-chat-tool-execution__icon nfd-ai-chat-tool-execution__icon--active",size:12}):(0,dt.jsx)(ny,{className:"nfd-ai-chat-tool-execution__icon nfd-ai-chat-tool-execution__icon--pending",size:12}),(0,dt.jsx)("span",{className:"nfd-ai-chat-tool-execution__item-title",children:o.title}),o.params&&(0,dt.jsx)("span",{className:"nfd-ai-chat-tool-execution__item-params",children:o.params})]}),t&&n&&(0,dt.jsx)("div",{className:"nfd-ai-chat-tool-execution__item-progress",children:n})]})},ly=({status:t=null,activeToolCall:n=null,toolProgress:r=null,executedTools:s=[],pendingTools:o=[]})=>{const[a,i]=(0,e.useState)(!0),c=!!n;(0,e.useEffect)(()=>{i(c)},[c]);const l=n||s.length>0||o.length>0,u=s.length+(n?1:0)+o.length;return l?(0,dt.jsx)("div",{className:"nfd-ai-chat-message nfd-ai-chat-message--assistant",children:(0,dt.jsx)("div",{className:"nfd-ai-chat-message__content",children:(0,dt.jsxs)("div",{className:ay()("nfd-ai-chat-tool-execution",{"nfd-ai-chat-tool-execution--collapsed":!a}),children:[(0,dt.jsxs)("button",{type:"button",className:"nfd-ai-chat-tool-execution__header",onClick:()=>i(!a),"aria-expanded":a?"true":"false",children:[a?(0,dt.jsx)(ry,{className:"nfd-ai-chat-tool-execution__chevron",size:12}):(0,dt.jsx)(sy,{className:"nfd-ai-chat-tool-execution__chevron",size:12}),c?(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("span",{children:(0,nt.__)("Executing actions","wp-module-ai-chat")}),n.total>1&&(0,dt.jsxs)("span",{className:"nfd-ai-chat-tool-execution__header-count",children:["(",n.index,"/",n.total,")"]})]}):(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("span",{children:(0,nt.__)("Actions completed","wp-module-ai-chat")}),(0,dt.jsxs)("span",{className:"nfd-ai-chat-tool-execution__header-count",children:["(",u,")"]})]})]}),a&&(0,dt.jsxs)("div",{className:"nfd-ai-chat-tool-execution__list",children:[s.map((e,t)=>(0,dt.jsx)(cy,{tool:e,isActive:!1,isComplete:!e.isError,isError:e.isError,progress:null},e.id||`executed-${t}`)),n&&(0,dt.jsx)(cy,{tool:n,isActive:!0,isComplete:!1,isError:!1,progress:r},n.id||"active"),o.map((e,t)=>(0,dt.jsx)(cy,{tool:e,isActive:!1,isComplete:!1,isError:!1,progress:null},e.id||`pending-${t}`))]})]})})}):(0,dt.jsx)("div",{className:"nfd-ai-chat-message nfd-ai-chat-message--assistant",children:(0,dt.jsx)("div",{className:"nfd-ai-chat-message__content",children:(0,dt.jsxs)("div",{className:"nfd-ai-chat-typing-indicator",children:[(0,dt.jsxs)("span",{className:"nfd-ai-chat-typing-indicator__dots","aria-hidden":"true",children:[(0,dt.jsx)("span",{}),(0,dt.jsx)("span",{}),(0,dt.jsx)("span",{})]}),(0,dt.jsx)("span",{className:"nfd-ai-chat-typing-indicator__text",children:(()=>{switch(t){case"received":return(0,nt.__)("Message received","wp-module-ai-chat");case"generating":default:return(0,nt.__)("Agent is typing","wp-module-ai-chat");case"tool_call":return(0,nt.__)("Executing actions","wp-module-ai-chat");case"summarizing":return(0,nt.__)("Summarizing results","wp-module-ai-chat");case"completed":return(0,nt.__)("Processing","wp-module-ai-chat");case"failed":return(0,nt.__)("Error occurred","wp-module-ai-chat")}})()})]})})})},uy=({messages:t=[],isLoading:n=!1,error:r=null,status:s=null,activeToolCall:o=null,toolProgress:a=null,executedTools:i=[],pendingTools:c=[],onApprove:l,onReject:u,onExecuteTool:d,onSendMessage:p,onSendSystemMessage:h,conversationId:f,onClearTyping:m,brandId:g})=>{const y=(0,e.useRef)(null);(0,e.useEffect)(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[t,n,a]);const _=o||i.length>0||c.length>0;return(0,dt.jsxs)("div",{className:"nfd-ai-chat-messages",children:[t.length>0&&t.map((e,t)=>(0,dt.jsx)(Yg,{message:e.content,type:e.type,executedTools:e.executedTools,approvalRequest:e.approvalRequest,onApprove:l,onReject:u,onExecuteTool:d,onSendMessage:p,onSendSystemMessage:h,conversationId:f,onClearTyping:m,brandId:g},e.id||t)),r&&(0,dt.jsx)(ey,{message:r}),n&&(0,dt.jsx)(ly,{status:s,activeToolCall:o,toolProgress:a,executedTools:_?i:[],pendingTools:c}),(0,dt.jsx)("div",{ref:y})]})},dy=window.wp.components,py=Bg("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]]),hy=Bg("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),fy=({onSendMessage:t,onStopRequest:n,disabled:r=!1,placeholder:s,contextComponent:o=null})=>{const[a,i]=(0,e.useState)(""),[c,l]=(0,e.useState)(!1),u=(0,e.useRef)(null),d=(0,e.useRef)(null),p=(0,nt.__)("How can I help you today?","wp-module-ai-chat");(0,e.useEffect)(()=>{if(u.current){u.current.style.height="auto";const e=u.current.scrollHeight,t=Math.min(e,200);u.current.style.height=`${t}px`,u.current.style.overflowY=e>200?"auto":"hidden"}},[a]),(0,e.useEffect)(()=>{!r&&u.current&&setTimeout(()=>{u.current.focus()},100)},[r]);const h=()=>{a.trim()&&!r&&(t(a),i(""),u.current&&(u.current.style.height="auto",u.current.style.overflowY="hidden",u.current.focus()))};return(0,dt.jsxs)("div",{className:"nfd-ai-chat-input",children:[(0,dt.jsxs)("div",{className:"nfd-ai-chat-input__container",children:[(0,dt.jsx)("textarea",{name:"nfd-ai-chat-input",ref:u,value:a,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),h())},placeholder:s||p,className:"nfd-ai-chat-input__textarea",rows:1,disabled:r}),(0,dt.jsxs)("div",{className:"nfd-ai-chat-input__actions",children:[o,r?(0,dt.jsx)(dy.Button,{ref:d,icon:(0,dt.jsx)(py,{width:16,height:16}),label:(0,nt.__)("Stop generating","wp-module-ai-chat"),onClick:()=>{c||(l(!0),n&&n(),setTimeout(()=>{l(!1)},500))},className:"nfd-ai-chat-input__stop",disabled:c,"aria-busy":c}):(0,dt.jsx)(dy.Button,{icon:(0,dt.jsx)(hy,{width:16,height:16}),label:(0,nt.__)("Send message","wp-module-ai-chat"),onClick:h,className:"nfd-ai-chat-input__submit",disabled:!a.trim()})]})]}),(0,dt.jsx)("div",{className:"nfd-ai-chat-input__disclaimer",children:(0,nt.__)("AI-generated content is not guaranteed for accuracy.","wp-module-ai-chat")})]})},my=({width:e=24,height:t=24})=>(0,dt.jsx)("div",{className:"nfd-ai-chat-avatar",style:{width:e,height:t},children:(0,dt.jsx)(ny,{width:.625*e,height:.625*t})}),gy=({icon:e,text:t,onClick:n,className:r=""})=>(0,dt.jsxs)(dy.Button,{className:`nfd-ai-chat-suggestion ${r}`,onClick:n,children:[(0,dt.jsx)("div",{className:"nfd-ai-chat-suggestion__icon",children:e}),(0,dt.jsx)("div",{className:"nfd-ai-chat-suggestion__text",children:t})]}),yy=({onSendMessage:e,title:t,subtitle:n,suggestions:r=[],showSuggestions:s=!1})=>{const o=(0,nt.__)("Hi, I'm your AI assistant.","wp-module-ai-chat"),a=(0,nt.__)("How can I help you today?","wp-module-ai-chat");return(0,dt.jsxs)("div",{className:"nfd-ai-chat-welcome",children:[(0,dt.jsxs)("div",{className:"nfd-ai-chat-welcome__content",children:[(0,dt.jsx)("div",{className:"nfd-ai-chat-welcome__avatar",children:(0,dt.jsx)(my,{width:48,height:48})}),(0,dt.jsxs)("div",{className:"nfd-ai-chat-welcome__message",children:[(0,dt.jsx)("div",{className:"nfd-ai-chat-welcome__title",children:t||o}),(0,dt.jsx)("div",{className:"nfd-ai-chat-welcome__subtitle",children:n||a})]})]}),s&&r.length>0&&(0,dt.jsx)("div",{className:"nfd-ai-chat-suggestions",children:r.map((t,n)=>(0,dt.jsx)(gy,{icon:t.icon,text:t.text,onClick:()=>e(t.action||t.text)},n))})]})};var _y,vy,wy,by,xy,ky;function $y(){return $y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$y.apply(null,arguments)}var Ey,Sy=function(e){return u.createElement("svg",$y({xmlns:"http://www.w3.org/2000/svg",width:97,height:82,fill:"none"},e),_y||(_y=u.createElement("path",{fill:"#ECF1F9",fillOpacity:.53,d:"M94.282 49.475c-.595-1.15-.367-2.762-.578-4.06-.264-1.619-.962-3.137-1.707-4.637-2.545-5.119-6.678-9.246-11.664-12.594-10.8-7.253-25.52-8.786-38.63-7.418-7.315.764-13.61 4.056-16.536 10.47-1.955 4.287-.097 7.155 3.043 10.21 2.635 2.563 6.212 5.627 4.845 9.516-2.236 6.36-13.937 7.321-11.882 15.684 3.16 12.86 26.217 11.642 36.51 10.062 13.352-2.05 39.26-8.764 36.768-25.53-.193-1.299-.734-2.55-.752-3.877m-72.02-5.912c-.502 5.553-7.478 6.812-12.369 5.309-6.01-1.847-7.188-7.979-4.597-12.94 2.195-4.203 7.05-5.48 11.42-3.498 4.86 2.203 5.825 7.534 5.46 12.167"})),vy||(vy=u.createElement("path",{fill:"#798199",fillOpacity:.7,d:"M74.645 49.06a.683.683 0 0 1-.743-.616l-.982-9.958c-.147-1.491-1.549-2.58-3.124-2.427h-.006a2.93 2.93 0 0 0-1.956 1.006 2.62 2.62 0 0 0-.636 1.986l.906 9.203a.684.684 0 0 1-.612.75.683.683 0 0 1-.744-.616l-.906-9.204a4.01 4.01 0 0 1 .961-3.017 4.29 4.29 0 0 1 2.855-1.478h.009c2.32-.225 4.389 1.415 4.611 3.66l.982 9.958a.684.684 0 0 1-.612.75z"})),wy||(wy=u.createElement("path",{fill:"#798199",fillOpacity:.7,d:"M61.774 71.41c-2.017.128-3.887-1.453-4.413-1.94-1.893-1.76-4.487-5.54-8.155-11.898-.61-1.054-5.827-11.275-6.207-12.026a3.96 3.96 0 0 1-.508-3.026 4.1 4.1 0 0 1 1.93-2.606c1.985-1.178 4.59-.59 5.81 1.315l.033.057 3.463 6.745a.686.686 0 0 1-.293.924.68.68 0 0 1-.92-.297l-3.447-6.716c-.834-1.269-2.598-1.652-3.952-.848a2.75 2.75 0 0 0-1.3 1.74 2.58 2.58 0 0 0 .346 1.995l.032.057c.055.11 5.587 10.95 6.19 11.992 3.548 6.15 6.134 9.938 7.9 11.58.876.811 2.221 1.653 3.377 1.58l14.007-1.351.044-.005c1.107-.106 2.405-1.554 2.766-2.707 1.072-3.413 1.802-6.22 2.373-10.467.17-1.276.33-5.395.256-6.575l-.653-6.767c-.147-1.491-1.562-2.593-3.13-2.424a2.93 2.93 0 0 0-1.956 1.006 2.62 2.62 0 0 0-.636 1.986l.457 5.135a.68.68 0 0 1-.613.744h-.005a.68.68 0 0 1-.742-.622l-.456-5.13a4.01 4.01 0 0 1 .962-3.01 4.27 4.27 0 0 1 2.854-1.476h.012c2.321-.225 4.39 1.415 4.612 3.66l.655 6.79c.088 1.38-.095 5.616-.264 6.87-.642 4.797-1.549 7.917-2.422 10.698-.45 1.435-2.052 3.477-3.914 3.657l-.089.009-14.007 1.351z"})),by||(by=u.createElement("path",{fill:"#798199",fillOpacity:.7,d:"M60.315 48.883a.683.683 0 0 1-.744-.617l-2.128-21.5c-.147-1.492-1.549-2.58-3.124-2.428h-.006a2.93 2.93 0 0 0-1.956 1.007 2.62 2.62 0 0 0-.636 1.985l2.084 20.946a.684.684 0 0 1-.612.75.683.683 0 0 1-.744-.617l-2.084-20.945a4.01 4.01 0 0 1 .961-3.018 4.29 4.29 0 0 1 2.855-1.478h.012c2.32-.225 4.389 1.415 4.611 3.66l2.128 21.5a.684.684 0 0 1-.611.751z"})),xy||(xy=u.createElement("path",{fill:"#798199",fillOpacity:.7,d:"M67.494 49.056a.683.683 0 0 1-.744-.617l-1.222-12.26c-.147-1.492-1.548-2.58-3.124-2.428H62.4a2.93 2.93 0 0 0-1.956 1.007 2.62 2.62 0 0 0-.636 1.985L60.955 48.4a.684.684 0 0 1-.612.75.683.683 0 0 1-.743-.616L58.45 36.88a4.01 4.01 0 0 1 .961-3.018 4.29 4.29 0 0 1 2.855-1.478h.009c2.32-.224 4.389 1.416 4.611 3.66l1.222 12.261a.684.684 0 0 1-.612.75zM81.35 23.768 63.084 25.53a.685.685 0 0 1-.132-1.364l18.265-1.762a2.956 2.956 0 0 0 2.646-3.232L82.54 5.444a2.956 2.956 0 0 0-3.216-2.666L25.42 7.978a2.956 2.956 0 0 0-2.646 3.232l1.324 13.726a2.956 2.956 0 0 0 3.215 2.666l17.954-1.733a.685.685 0 0 1 .132 1.364l-17.954 1.733c-2.365.228-4.474-1.522-4.703-3.899l-1.324-13.726c-.23-2.377 1.508-4.499 3.87-4.727l53.903-5.2c2.365-.229 4.473 1.522 4.703 3.898l1.324 13.727c.23 2.38-1.508 4.498-3.87 4.726z"})),ky||(ky=u.createElement("path",{fill:"#798199",fillOpacity:.7,d:"m32.308 10.404 1.243-.12 1.22 12.636-1.244.12zm1.396 5.709 7.49-.723.117 1.21-7.49.722zm6.257-6.448 1.243-.12 1.22 12.637-1.244.12zM44.316 9.245l1.244-.12 1.22 12.637-1.244.12zm.856-.082 7.215-.697.113 1.165-7.216.696zm.558 5.78 6.265-.604.112 1.164-6.265.605zm.55 5.695 7.214-.697.113 1.165-7.215.696zM54.892 8.225l1.243-.12 1.22 12.636-1.244.12zm1.99 11.39 7.188-.694.112 1.165-7.189.693zM65.038 7.246l1.244-.12L67.5 19.762l-1.244.12zm1.54 6.485 4.018-.387q.733-.07 1.264-.465a2.3 2.3 0 0 0 .776-1.03q.248-.638.172-1.44c-.052-.532-.201-1.002-.445-1.39a2.3 2.3 0 0 0-.96-.87 2.47 2.47 0 0 0-1.329-.214l-4.018.388-.112-1.165 3.959-.381q1.123-.11 2.024.291a3.34 3.34 0 0 1 1.457 1.233q.555.834.668 1.989c.074.771-.019 1.454-.276 2.068a3.35 3.35 0 0 1-1.196 1.483q-.809.564-1.931.673l-3.958.382z"})))};function Ty(){return Ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ty.apply(null,arguments)}var Iy=function(e){return u.createElement("svg",Ty({xmlns:"http://www.w3.org/2000/svg",width:17,height:17,fill:"#4276DA",viewBox:"0 0 20 20"},e),Ey||(Ey=u.createElement("path",{fillRule:"evenodd",d:"M18 10a.75.75 0 0 1-.75.75H4.66l2.1 1.95a.75.75 0 1 1-1.02 1.1l-3.5-3.25a.75.75 0 0 1 0-1.1l3.5-3.25a.75.75 0 1 1 1.02 1.1l-2.1 1.95h12.59A.75.75 0 0 1 18 10",clipRule:"evenodd"})))};const Cy=({handleBackClick:e})=>(0,dt.jsxs)("div",{className:"helpcenter-back-arrow",role:"button",tabIndex:0,onClick:e,onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||e?.()},children:[(0,dt.jsx)("span",{children:(0,dt.jsx)(Iy,{})}),(0,dt.jsx)("span",{children:(0,nt.__)("Back","wp-module-help-center")})]}),Py=()=>{const e=S();return(0,dt.jsxs)("div",{className:"dislike-feedback",children:[(0,dt.jsx)(Cy,{handleBackClick:()=>{e(et.setDisliked(!1))}}),(0,dt.jsx)("div",{className:"dislike-feedback-icon",children:(0,dt.jsx)(Sy,{})}),(0,dt.jsxs)("div",{children:[(0,nt.__)("We're sorry the suggestions didnt help.","wp-module-help-center"),(0,dt.jsx)("p",{children:(0,nt.__)("Try to:","wp-module-help-center")}),(0,dt.jsxs)("ul",{children:[(0,dt.jsxs)("li",{children:[(0,nt.__)("Use different keywords in the search field.","wp-module-help-center"),(0,dt.jsx)("br",{}),(0,nt.__)("A clear, short prompt can make the difference.","wp-module-help-center")]}),(0,dt.jsxs)("li",{children:[(0,nt.__)("Reach out to our customer support.","wp-module-help-center"),(0,dt.jsx)("br",{}),(0,nt.__)("Call at","wp-module-help-center")," ",(0,dt.jsx)("span",{children:(0,dt.jsx)("a",{href:"tel:8884014678",children:"888-401-4678"})})," ",(0,nt.__)("or","wp-module-help-center")," ",(0,dt.jsxs)("span",{children:[(0,dt.jsx)("a",{href:window.NewfoldRuntime?.linkTracker?.addUtmParams("https://www.bluehost.com/contact")||"https://www.bluehost.com/contact",target:"_blank",rel:"noreferrer",children:"Chat Live"})," "]}),(0,nt.__)("with one of our support agents  we will assist you as soon as possible.","wp-module-help-center")]})]})]})]})},Ry=()=>{const t=ut(),[n,r]=(0,e.useState)(!1);(0,e.useEffect)(()=>{r(t.resultContent.length<=0)},[]);const s=(0,nt.__)("Hey there! Im here to help you find your way around WordPress. </br></br> If youre not sure how to do something, just ask  Ill walk you through it step by step. Im still learning, so I might not have every answer, but Ill do my best to help!","wp-module-help-center"),{displayedText:o}=Ke(s||"",50,n);return(0,dt.jsx)("div",{role:"region","aria-labelledby":"helpcenter-intro-heading",className:"helpcenter-intro",style:{display:t.resultContent?.postId?"none":"flex"},children:(0,dt.jsx)("div",{className:"helpcenter-intro__text",dangerouslySetInnerHTML:{__html:o}})})},jy=({isOpen:t,onClose:n,iframeAttributes:r})=>{const s=(0,e.useRef)(null);return(0,e.useEffect)(()=>{if(!t)return;const e=s.current;if(!e)return;e.innerHTML="";const n=document.createElement("iframe");return Object.entries(r||{}).forEach(([e,t])=>{null!==t&&n.setAttribute(e,t)}),n.className="iframe-modal__iframe",e.appendChild(n),()=>{if(e)try{e.contains(n)?e.removeChild(n):e.innerHTML=""}catch{}}},[t,r]),t?(0,dt.jsx)("div",{className:"iframe-modal__overlay",onClick:n,children:(0,dt.jsxs)("div",{className:"iframe-modal__content",onClick:e=>e.stopPropagation(),children:[(0,dt.jsx)("button",{onClick:n,className:"iframe-modal__close","aria-label":"Close modal",children:""}),(0,dt.jsx)("div",{className:"iframe-modal__iframe-wrapper",ref:s})]})}):null},Ny=function({source:t,index:n,questionBlock:r,content:s}){const{isLoading:o,loadingQuery:a,loadingIndex:i}=C(e=>e.helpcenter),[c,l]=(0,e.useState)(!1),[u,d]=(0,e.useState)({}),p=(0,e.useRef)(),h=S();return(0,e.useEffect)(()=>{const e=p.current;if(!e)return;e.querySelectorAll("iframe").forEach(e=>{if("1"===e.dataset.hcOverlay)return;const t=e.closest(".wp-block-embed__wrapper")||e.parentElement;if(!t)return;"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=document.createElement("button");n.type="button",n.className="hc-iframe-click-overlay",n.setAttribute("aria-label","Open player"),n.tabIndex=0;const r=()=>{const t={};for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n];t[r.name]=r.value}n.dataset.hcAttrs=JSON.stringify(t)};n.addEventListener("mouseenter",r,{passive:!0}),n.addEventListener("focus",r,{passive:!0}),n.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();let r={};try{if(n.dataset.hcAttrs)r=JSON.parse(n.dataset.hcAttrs)||{};else for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t];r[n.name]=n.value}}catch{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t];r[n.name]=n.value}}d(r),l(!0)}),t.appendChild(n),e.dataset.hcOverlay="1",e.style.cursor="pointer"});const t=t=>{const n=t.target.closest('a[href*="bhmultisite.com/"]');if(n&&e.contains(n)){t.preventDefault();const e=n.textContent.trim();h(et.updateSearchInput(e)),h(et.setAIResultLoading()),h(et.setTriggerSearch(!0)),h(et.setShowBackButton(!0))}};return e.addEventListener("click",t),()=>{e.removeEventListener("click",t)}},[s]),(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("br",{}),(0,dt.jsx)("div",{className:"helpcenter-result-block",ref:p,children:(0,dt.jsx)("div",{children:o&&"ai"===t&&a===r&&i===n?(0,dt.jsx)("div",{className:"loading-cursor"}):s&&s.length>0?(0,dt.jsx)("div",{className:"helpcenter-results",dangerouslySetInnerHTML:{__html:s}}):null})}),(0,dt.jsx)(jy,{isOpen:c,onClose:()=>{l(!1),d({})},iframeAttributes:u})]})};var Ay,Oy,zy,My,Dy,Ly;function qy(){return qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qy.apply(null,arguments)}var Uy,Fy,Hy,Vy,By,Wy,Zy=function(e){return u.createElement("svg",qy({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",fill:"none",viewBox:"0 0 29 29"},e),Ay||(Ay=u.createElement("path",{fill:"#F5F5F5",d:"M0 0h29v29H0z"})),Oy||(Oy=u.createElement("path",{fill:"url(#thumb-down_svg__a)",d:"M-1108-641H52v928h-1160z"})),zy||(zy=u.createElement("g",{filter:"url(#thumb-down_svg__b)"},u.createElement("path",{fill:"#fff",d:"M-251-641H52v928h-303z"}))),My||(My=u.createElement("circle",{cx:14.5,cy:14.5,r:14.5,fill:"#FFE4E4"})),Dy||(Dy=u.createElement("path",{stroke:"#C71A1A",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M11.04 16.75h-2.4c-.8 0-1.5-.54-1.59-1.33a9.36 9.36 0 0 1 1.99-6.85c.3-.38.76-.57 1.23-.57h3.1c.36 0 .73.06 1.09.18l2.4.8c.34.13.71.19 1.09.19h1m-7.91 7.58c.47 0 .76.56.55 1-.35.76-.55 1.6-.55 2.5 0 .97.77 1.75 1.73 1.75.32 0 .58-.26.58-.58v-.5c0-.44.08-.88.24-1.3.24-.59.72-1.03 1.28-1.33.85-.46 1.6-1.1 2.2-1.87.38-.49.94-.84 1.56-.84h.3m-7.9 1.17h1.7m6.21-7.58.04.11a7.04 7.04 0 0 1-.06 6.3m.02-6.41c-.06-.29.14-.59.44-.59h.7c.69 0 1.32.4 1.52 1.07a9.43 9.43 0 0 1-.24 6.15c-.23.6-.83.95-1.47.95h-.81c-.37 0-.58-.43-.39-.75.08-.13.16-.27.23-.42"})),Ly||(Ly=u.createElement("defs",null,u.createElement("pattern",{id:"thumb-down_svg__a",width:1,height:1,patternContentUnits:"objectBoundingBox"},u.createElement("use",{xlinkHref:"#thumb-down_svg__c",transform:"scale(0)"})),u.createElement("filter",{id:"thumb-down_svg__b",width:327,height:952,x:-263,y:-649,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},u.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),u.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),u.createElement("feMorphology",{in:"SourceAlpha",operator:"dilate",radius:8,result:"effect1_dropShadow_58_120"}),u.createElement("feOffset",{dy:4}),u.createElement("feGaussianBlur",{stdDeviation:2}),u.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),u.createElement("feColorMatrix",{values:"0 0 0 0 0.371717 0 0 0 0 0.672951 0 0 0 0 0.919415 0 0 0 0.1 0"}),u.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_58_120"}),u.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_58_120",result:"shape"})))))};function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ky.apply(null,arguments)}var Gy=function(e){return u.createElement("svg",Ky({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",fill:"none",viewBox:"0 0 29 29"},e),Uy||(Uy=u.createElement("path",{fill:"#F5F5F5",d:"M0 0h29v29H0z"})),Fy||(Fy=u.createElement("path",{fill:"url(#thumb-up_svg__a)",d:"M-1070-641H90v928h-1160z"})),Hy||(Hy=u.createElement("g",{filter:"url(#thumb-up_svg__b)"},u.createElement("path",{fill:"#fff",d:"M-213-641H90v928h-303z"}))),Vy||(Vy=u.createElement("circle",{cx:14.5,cy:14.5,r:14.5,fill:"#E4F5CB"})),By||(By=u.createElement("path",{stroke:"#5CAA0A",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.2,d:"M17.963 11.875h2.404c.79 0 1.497.501 1.58 1.239q.053.457.053.928c0 2.056-.763 3.946-2.038 5.432-.298.347-.759.526-1.234.526h-3.09c-.371 0-.741-.056-1.094-.167l-2.396-.75a3.7 3.7 0 0 0-1.094-.166h-.996m7.905-7.042c-.476 0-.762-.523-.558-.926a5.1 5.1 0 0 0 .556-2.324c0-.897-.774-1.625-1.73-1.625-.319 0-.577.243-.577.542v.457c0 .414-.084.823-.248 1.207-.234.549-.716.961-1.271 1.24a6.9 6.9 0 0 0-2.201 1.732c-.383.458-.942.78-1.563.78h-.295m7.887-1.083h-1.694m-6.21 7.042a.4.4 0 0 0-.04-.107 6.15 6.15 0 0 1 .057-5.852m-.018 5.959a.45.45 0 0 1-.442.541h-.698c-.684 0-1.318-.374-1.518-.988a8.2 8.2 0 0 1-.4-2.532c0-1.122.227-2.193.64-3.177.234-.559.835-.886 1.475-.886h.81c.363 0 .573.402.384.693a6 6 0 0 0-.233.39"})),Wy||(Wy=u.createElement("defs",null,u.createElement("pattern",{id:"thumb-up_svg__a",width:1,height:1,patternContentUnits:"objectBoundingBox"},u.createElement("use",{xlinkHref:"#thumb-up_svg__c",transform:"scale(0)"})),u.createElement("filter",{id:"thumb-up_svg__b",width:327,height:952,x:-225,y:-649,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},u.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),u.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),u.createElement("feMorphology",{in:"SourceAlpha",operator:"dilate",radius:8,result:"effect1_dropShadow_58_120"}),u.createElement("feOffset",{dy:4}),u.createElement("feGaussianBlur",{stdDeviation:2}),u.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),u.createElement("feColorMatrix",{values:"0 0 0 0 0.371717 0 0 0 0 0.672951 0 0 0 0 0.919415 0 0 0 0.1 0"}),u.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_58_120"}),u.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_58_120",result:"shape"})))))};const Jy=({postId:t,source:n})=>{const[r,o]=(0,e.useState)(""),[a,i]=(0,e.useState)(!1),[c,l]=(0,e.useState)(!1),u=(0,e.useRef)(null),d=(0,e.useRef)(null),p=S();(0,e.useEffect)(()=>{o(""),d.current&&(d.current.className="feedback-button no"),u.current&&(u.current.className="feedback-button yes")},[t]),(0,e.useEffect)(()=>{if((async()=>{"helpful"!==r&&"notHelpful"!==r||(((e,t)=>{s()({path:"nfd-help-center/v1/feedback",method:"POST",data:{post_id:e,status:t}})})(t,r),Ze("help_feedback_submitted",{label_key:"type",type:"helpful"===r?"positive":"negative",source:n,post_id:t,page:window.location.href.toString()}))})(),"helpful"===r||"notHelpful"===r){i(!0),l(!0);const e=setTimeout(()=>{l(!1)},3e3);return()=>clearTimeout(e)}},[r]);const h=e=>{"notHelpful"===e&&p(et.setDisliked(!0)),p(et.setFeeback({feedbackStatus:"helpful"===e,postId:t})),o(e),We.updateFeedbackStatus(t)};return(0,dt.jsxs)("div",{className:"feedback-container",children:[!a&&(0,dt.jsxs)(dt.Fragment,{children:[(0,dt.jsx)("div",{className:"feedback-question",children:(0,dt.jsx)("p",{children:(0,nt.__)("Did this result help you?","wp-module-help-center")})}),(0,dt.jsxs)("div",{className:"icon",children:[(0,dt.jsx)("button",{ref:u,onClick:()=>h("helpful"),children:(0,dt.jsx)(Gy,{})}),(0,dt.jsx)("button",{onClick:()=>h("notHelpful"),ref:d,children:(0,dt.jsx)(Zy,{})})]})]}),a&&c&&(0,dt.jsx)("div",{className:"thanks-message",children:(0,nt.__)("Thanks for the feedback!","wp-module-help-center")})]})};function Xy({noResult:e,questionBlock:t}){const{isNewEntry:n,hasLaunchedFromTooltip:r}=ut();return(0,dt.jsx)("div",{className:"helpcenter-question-block",children:(0,dt.jsx)("div",{children:!t||e&&n?"":r?t:`"${t}"`})})}const Qy=({content:t,postId:n,source:r,questionBlock:s,index:o,wrapper:a,feedbackSubmitted:i})=>{const{isLoading:c,isNewResult:l,noResult:u,showBackButton:d,hasLaunchedFromTooltip:p}=ut(),h=l,f=(0,e.useRef)(null),[m,g]=(0,e.useState)(!1),y=S();(0,e.useEffect)(()=>{(h&&f.current||c)&&_()},[h,c]);const _=()=>{const e=window.innerHeight-255;f.current.style.minHeight=`${e}px`;const t=a.current.scrollHeight;a.current.scrollBy({top:t,left:0,behavior:"smooth"}),g(!0)},v=!!l&&m,{displayedText:w,isComplete:b}=Ke(t||"",50,v),x=(0,e.useMemo)(()=>{const e=(e=>{if(!e)return"";const t=(new DOMParser).parseFromString(e,"text/html");return t.querySelectorAll("p").forEach(e=>{let t=e.innerHTML;t=t.replace(/\*\*\*(.+?)\*\*\*/g,"<strong><em>$1</em></strong>").replace(/___(.+?)___/g,"<strong><em>$1</em></strong>").replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/__(.+?)__/g,"<strong>$1</strong>").replace(/\*([^\s*](?:[^*]*[^\s*])?)\*/g,"<em>$1</em>").replace(/_([^\s_](?:[^_]*[^\s_])?)_/g,"<em>$1</em>").replace(/~~(.+?)~~/g,"<del>$1</del>").replace(/`([^`]+)`/g,"<code>$1</code>").replace(/\[([^\]]+)\]\(([^)]+?)(?:\s+"([^"]*)")?\)/g,(e,t,n,r)=>r?`<a href="${n}" title="${r}">${t}</a>`:`<a href="${n}">${t}</a>`).replace(/!\[([^\]]*)\]\(([^)]+?)(?:\s+"([^"]*)")?\)/g,(e,t,n,r)=>r?`<img src="${n}" alt="${t}" title="${r}" />`:`<img src="${n}" alt="${t}" />`),e.innerHTML=t}),t.body.innerHTML})(w);return e},[w]);return(0,dt.jsxs)("div",{ref:f,className:"helpcenter-response-block",children:[d&&!p&&(0,dt.jsx)(Cy,{handleBackClick:()=>{y(et.goBackInHistory())}}),(0,dt.jsx)(Xy,{noResult:u,questionBlock:s}),(0,dt.jsx)(Ny,{content:x,index:o,questionBlock:s,source:r}),!u&&null===i&&t&&b&&t.length>0&&!p&&(0,dt.jsx)(Jy,{postId:n,source:r})]})},Yy=({wrapper:e,resultsContainer:t})=>{const{resultContent:n,isLoading:r}=C(e=>e.helpcenter);return(0,dt.jsx)(dt.Fragment,{children:(0,dt.jsx)("div",{className:"hc-results-container",ref:t,children:r?(0,dt.jsxs)("div",{children:[(0,dt.jsx)("div",{className:"skeleton skeleton-text"}),(0,dt.jsx)("div",{className:"skeleton skeleton-text",style:{margin:0,marginTop:"30px",borderRadius:"4px 4px 0 0"}}),(0,dt.jsx)("div",{className:"skeleton skeleton-subtext",style:{borderRadius:" 0 0 4px 4px"}}),(0,dt.jsx)("br",{}),(0,dt.jsx)("div",{className:"skeleton skeleton-card"})]}):(0,dt.jsx)(Qy,{content:n?.resultContent,postId:n?.postId,questionBlock:n?.searchInput,wrapper:e,feedbackSubmitted:n?.feedbackSubmitted})})})};var e_,t_,n_;function r_(){return r_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r_.apply(null,arguments)}var s_=function(e){return u.createElement("svg",r_({xmlns:"http://www.w3.org/2000/svg",width:92,height:58,fill:"none"},e),e_||(e_=u.createElement("path",{fill:"#ECF1F9",fillOpacity:.53,d:"M91.282 29.475c-.595-1.15-.367-2.762-.578-4.06-.264-1.619-.962-3.136-1.707-4.637-2.545-5.118-6.678-9.245-11.664-12.593C66.533.93 51.813-.602 38.703.767c-7.315.763-13.61 4.055-16.536 10.47-1.955 4.287-.097 7.154 3.043 10.208 2.635 2.564 6.212 5.628 4.845 9.517-2.236 6.36-13.937 7.322-11.882 15.684 3.16 12.86 26.217 11.643 36.51 10.062 13.352-2.05 39.26-8.764 36.768-25.53-.193-1.299-.734-2.55-.752-3.877m-72.02-5.912c-.502 5.553-7.478 6.812-12.369 5.309C.3 24.85-.878 18.719 1.713 13.758c2.195-4.203 7.05-5.48 11.42-3.498 4.86 2.204 5.825 7.534 5.46 12.167"})),t_||(t_=u.createElement("path",{stroke:"#9EA5B6",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m83.625 50.625-9.31-9.31m0 0a13.4 13.4 0 0 0 3.935-9.502c0-7.422-6.016-13.438-13.437-13.438-7.422 0-13.438 6.016-13.438 13.438 0 7.42 6.016 13.437 13.438 13.437 3.71 0 7.07-1.504 9.501-3.936"})),n_||(n_=u.createElement("path",{fill:"#9EA5B6",d:"M34.5 22a.35.35 0 0 1-.35-.349v-1.996a.35.35 0 1 1 .7 0v1.996a.35.35 0 0 1-.35.35M34.5 13.695a.35.35 0 0 1-.35-.35V11.35a.35.35 0 1 1 .7 0v1.996a.35.35 0 0 1-.35.35M31.346 16.85h-1.997a.35.35 0 1 1 0-.7h1.997a.35.35 0 1 1 0 .7M39.65 16.85h-1.996a.35.35 0 1 1 0-.7h1.996a.35.35 0 1 1 0 .7M43 38a.254.254 0 0 1-.254-.254v-1.452a.254.254 0 1 1 .508 0v1.452c0 .14-.113.255-.254.255M43 31.96a.254.254 0 0 1-.254-.254v-1.452a.254.254 0 1 1 .508 0v1.452c0 .14-.113.254-.254.254M40.706 34.254h-1.452a.254.254 0 1 1 0-.508h1.452a.254.254 0 1 1 0 .508M46.746 34.254h-1.452a.254.254 0 1 1 0-.508h1.452a.254.254 0 1 1 0 .508M48 16a.254.254 0 0 1-.254-.254v-1.452a.254.254 0 1 1 .508 0v1.452c0 .14-.113.254-.254.254M48 9.96a.254.254 0 0 1-.254-.254V8.254a.254.254 0 1 1 .508 0v1.452c0 .14-.113.254-.254.254M45.706 12.254h-1.452a.254.254 0 1 1 0-.508h1.452a.254.254 0 1 1 0 .508M51.746 12.254h-1.452a.254.254 0 1 1 0-.508h1.452a.254.254 0 1 1 0 .508"})))};const o_=({hasLaunchedFromTooltip:t})=>{const n=(0,e.useRef)(null),r=window?.nfdHelpCenter?.resourceLink||"#",s=(0,nt.__)('You can try searching our <a href="{link}">Resource center.</a> though to see if theres a helpful article or video on that subject.',"wp-module-help-center").replace("{link}",r),o=We.getSearchInput();return(0,dt.jsx)("div",{ref:n,className:"helpcenter-response-block",children:(0,dt.jsx)("div",{className:"helpcenter-noresult-wrapper",children:(0,dt.jsxs)("div",{className:"helpcenter-noresult-block",children:[(0,dt.jsx)("div",{className:"helpcenter-noresult-icon",children:(0,dt.jsx)(s_,{})}),(0,dt.jsx)("p",{children:(0,nt.sprintf)((0,nt.__)("Sorry, I dont have any information on %s yet.","wp-module-help-center"),t?"this":`"${o}"`)}),(0,dt.jsxs)("div",{children:[(0,dt.jsx)("h4",{children:(0,nt.__)("Try to:","wp-module-help-center")}),(0,dt.jsxs)("ul",{children:[(0,dt.jsx)("li",{children:(0,dt.jsx)("p",{dangerouslySetInnerHTML:{__html:s}})}),(0,dt.jsx)("li",{children:(0,dt.jsxs)("p",{children:[(0,nt.__)("Use different keywords in the search field.","wp-module-help-center"),(0,dt.jsx)("br",{}),(0,nt.__)("A clear, short prompt can make the difference.","wp-module-help-center")]})}),(0,dt.jsx)("li",{children:(0,dt.jsxs)("p",{children:[(0,nt.__)("Reach out to our customer support.","wp-module-help-center"),(0,dt.jsx)("br",{}),(0,nt.__)("Call at","wp-module-help-center")," ",(0,dt.jsx)("a",{href:"tel:8884014678",children:"888-401-4678"})," ",(0,nt.__)("or","wp-module-help-center")," ",(0,dt.jsx)("a",{href:window.NewfoldRuntime?.linkTracker?.addUtmParams("https://www.bluehost.com/contact")||"https://www.bluehost.com/contact",target:"_blank",rel:"noreferrer",children:"Chat Live"})," ",(0,nt.__)("with one of our support agents  we will assist you as soon as possible.","wp-module-help-center")]})})]})]})]})})})},a_="newfold-ai/v1",i_={getSearchResult:(e,t,n)=>s()({path:a_+"/search",method:"POST",data:{user_prompt:e,identifier:t,extra:n}}),getDefaultSearchResult:()=>s()({path:a_+"/search/default",method:"POST"})};var c_;function l_(){return l_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l_.apply(null,arguments)}var u_,d_=function(e){return u.createElement("svg",l_({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none"},e),c_||(c_=u.createElement("path",{stroke:"#7A889D",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 10 2.723 2.604A49.8 49.8 0 0 1 17.904 10a49.8 49.8 0 0 1-15.18 7.396zm0 0h6.25"})))};function p_(){return p_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p_.apply(null,arguments)}var h_=function(e){return u.createElement("svg",p_({xmlns:"http://www.w3.org/2000/svg",width:9,height:8,fill:"none"},e),u_||(u_=u.createElement("path",{fill:"#3F73D9",fillRule:"evenodd",d:"M1.162 3.137C1.656 1.36 3.55.305 5.394.781a3.47 3.47 0 0 1 1.55.862l.877.846H6.354a.34.34 0 0 0-.346.333.34.34 0 0 0 .346.333h2.3c.092 0 .18-.035.245-.098A.33.33 0 0 0 9 2.822V.603A.34.34 0 0 0 8.654.27a.34.34 0 0 0-.345.333v1.413l-.876-.844A4.17 4.17 0 0 0 5.573.137C3.361-.434 1.087.832.494 2.965c-.05.178.06.36.244.408a.347.347 0 0 0 .424-.236m7.1 1.49a.347.347 0 0 0-.424.236C7.344 6.64 5.45 7.695 3.605 7.219a3.47 3.47 0 0 1-1.549-.862l-.876-.846h1.466a.34.34 0 0 0 .346-.333.34.34 0 0 0-.346-.333h-2.3A.34.34 0 0 0 0 5.178v2.219a.34.34 0 0 0 .346.333.34.34 0 0 0 .345-.333V5.983l.876.845c.498.481 1.13.846 1.86 1.035 2.212.571 4.486-.695 5.079-2.828a.33.33 0 0 0-.245-.408",clipRule:"evenodd"})))};const f_=()=>{const e=S(),{helpResultHistory:t}=ut(),n=t=>{e(et.clearViaLinkSearch()),e(et.setIsFooterVisible(!1)),e(et.updateResultContent(t)),e(et.updateSearchInput(t.searchInput)),We.persistResult(t.resultContent,t.postId,t.searchInput,t.feedbackSubmitted,!1),We.persistSearchInput(t.searchInput)};return[...t].reverse().map((e,t)=>(0,dt.jsxs)("div",{className:"HistoryList",role:"button",tabIndex:0,onClick:()=>n(e),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||n(e)},children:[(0,dt.jsx)(h_,{}),(0,dt.jsx)("div",{children:e.searchInput})]},e.searchInput+t))},m_=()=>{const t=(0,e.useRef)(!0),n=(()=>{const e=window.NewfoldRuntime?.plugin?.brand||"wordpress";return e.includes("hostgator")&&window.NewfoldRuntime?.plugin?.region?e+"-"+window.NewfoldRuntime?.plugin?.region:e})(),r=S(),[o,a]=(0,e.useState)(""),i=ut();(0,e.useEffect)(()=>{t.current?t.current=!1:i.helpResultHistory?.length>0&&(async e=>{const t=Ve.NewfoldRuntime.createApiUrl("/wp/v2/settings");try{await s()({url:t,method:"POST",data:{nfd_helpcenter_data:JSON.stringify(e)}})}catch(e){}})(i.helpResultHistory)},[i.helpResultHistory]),(0,e.useEffect)(()=>{i.triggerSearch&&(u(),r(et.setTriggerSearch(!1)))},[i.triggerSearch]);const c=async(e,t,n,s="kb")=>{const o={resultContent:e?Je(e):"",postId:t,searchInput:n,feedbackSubmitted:null};We.persistResult(o.resultContent,t,o.searchInput,o.feedbackSubmitted,!1),We.persistSearchInput(o.searchInput),r(et.updateResultContent(o)),r(et.updateHelpResultHistory(o)),t&&(r(et.setNewSearchResult(!!t)),Ze("help_search",{label_key:"term",term:n,page:window.location.href.toString(),search_source:s}))},l=async()=>{r(et.setAIResultLoading());try{const e=await(async(e,t)=>{try{return await s()({path:"/newfold-multi-search/v1/multi_search",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,brand:t})})}catch(e){return console.error("Error in getMultiSearchResults:",e),{}}})(i.searchInput,n),t=e?.results?.[0]?.grouped_hits?.[0]?.hits;if((e=>!!(e?.length>0&&function(e,t,n){const r=t/e.replace(/[^\w\s]|_/g,"").replace(/\s{2,}/g," ").trim().split(/\s+/).length;return n>=1&&r>=.99}(i.searchInput,e[0]?.text_match_info?.tokens_matched,e[0]?.text_match_info?.fields_matched))&&(c(e[0].document.post_content,e[0].document.post_id||e[0].document.id,i.searchInput),!0))(t))return;const o=await i_.getSearchResult(i.searchInput,"helpcenter");o.result[0]?c(o.result[0].text,o.post_id,i.searchInput,"ai"):r(et.setNoResult())}catch(e){console.error("An error occurred:",e),r(et.searchInputCatch())}finally{r(et.searchInputFinally()),We.persistSearchInput(i.searchInput)}},u=async()=>{(()=>{const e=i.searchInput.trim().length>0;return a(e?"":(0,nt.__)("Please enter a specific search term to get results.","wp-module-help-center")),e})()&&(i.triggerSearch||r(et.clearViaLinkSearch()),r(et.setIsFooterVisible(!1)),r(et.setDisliked(!1)),await l())};return(0,dt.jsx)("div",{className:"helpcenter-input-wrapper",id:"nfdHelpcenterInputWrapper",role:"search","aria-label":(0,nt.__)("Search Help Center","wp-module-help-center"),style:{bottom:(d=i,d.isFooterVisible&&(d.disliked||d.noResult)?"222px":d.isFooterVisible?"375px":"0px")},children:(0,dt.jsxs)("div",{className:"search-container__wrapper",children:[(0,dt.jsxs)("div",{className:"attribute",children:[(0,dt.jsx)("p",{className:"hc-input-label",children:(0,nt.__)("Ask anything about WordPress","wp-module-help-center")}),(0,dt.jsx)("p",{className:"hc-input-counter",children:(0,dt.jsxs)("span",{children:[i.searchInput?i.searchInput.length:0,"/144"]})})]}),(0,dt.jsxs)("div",{className:"search-container",children:[(0,dt.jsx)("input",{type:"text",id:"search-input-box",value:i.searchInput,maxLength:"144",onChange:e=>(e=>{r(et.updateSearchInput(e.target.value))})(e),onKeyDown:e=>"Enter"===e.key&&u()}),(0,dt.jsx)("button",{"aria-label":(0,nt.__)("submit text","wp-module-help-center"),title:(0,nt.__)("submit text","wp-module-help-center"),onClick:()=>u(),children:(0,dt.jsx)(d_,{})})]}),o&&(0,dt.jsx)("p",{className:"hc-input-error-message",children:o}),(0,dt.jsx)("p",{}),(0,dt.jsx)(f_,{})]})});var d},g_=()=>{const t=S(),{visible:n,helpEnabled:r,disliked:s,noResult:o,initComplete:a,resultContent:i,isLoading:c,hasLaunchedFromTooltip:l}=ut(),u=(0,e.useRef)(),d=(0,e.useRef)();(0,e.useEffect)(()=>{p();const e=()=>t(et.updateVisibility(We.getHelpVisible()));return window.addEventListener("storage",e),e(),()=>{window.removeEventListener("storage",e)}},[t]),(0,e.useEffect)(()=>{n&&(t(et.updateInitComplete(!0)),h(),Xe(u))},[n]),(0,e.useEffect)(()=>{a&&(h(),Xe(u))},[a,s]);const p=async()=>{try{const e=await(window.NewfoldRuntime?.capabilities?.canAccessHelpCenter||!1);t(et.updateHelpEnabled(e))}catch{t(et.updateHelpEnabled(!1))}},h=()=>{t(et.setIsFooterVisible(i.length<1||s))};return r&&n?(0,dt.jsxs)("div",{className:"nfd-help-center",id:"helpcenterResultsWrapper",ref:u,style:l?{height:window.innerHeight-100}:void 0,children:[o?(0,dt.jsx)(o_,{hasLaunchedFromTooltip:l}):s?(0,dt.jsx)(Py,{}):(0,dt.jsxs)(dt.Fragment,{children:[i?.length<1&&!c&&(0,dt.jsx)(Ry,{}),(0,dt.jsx)(Yy,{wrapper:u,resultsContainer:d})]}),!l&&(0,dt.jsx)(m_,{})]}):null},y_=e=>!e,v_=()=>{const t=Be(),[n]=(()=>{const[t,n]=(0,e.useState)(()=>We.getHelpVisible());return(0,e.useEffect)(()=>{const e=()=>{n(We.getHelpVisible())};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[]),[t,n]})(),{hasLaunchedFromTooltip:r}=ut(),s=(0,e.useRef)(!1),{messages:o,sendMessage:a,sendSystemMessage:i,error:c,isTyping:l,isConnecting:u,currentResponse:d,conversationId:p,clearApprovalRequest:h,clearTyping:f,updateMessage:m,stopRequest:g,clearChatHistory:y,brandId:_}=(({configEndpoint:t,storageNamespace:n="default",autoConnect:r=!1,consumerType:s="editor_chat"})=>{const o=`nfd-ai-chat-${n}-history`,a=`nfd-ai-chat-${n}-conversation-id`,i=()=>{try{const e=localStorage.getItem(o),t=localStorage.getItem(a);if(e){const n=JSON.parse(e);if(Array.isArray(n)&&n.length>0)return{messages:n.map(e=>({...e,timestamp:e.timestamp?new Date(e.timestamp):new Date})),conversationId:t||null}}}catch(e){console.warn("[AI Chat] Failed to restore chat history from localStorage:",e)}return{messages:[],conversationId:null}},[c,l]=(0,e.useState)(()=>i().messages),[u,d]=(0,e.useState)(()=>i().conversationId),[p,h]=(0,e.useState)(!1),[f,m]=(0,e.useState)(!1),[g,y]=(0,e.useState)(null),[_,v]=(0,e.useState)(!1),[w,b]=(0,e.useState)(""),[x,k]=(0,e.useState)(null),$=(0,e.useRef)(null),E=(0,e.useRef)(null),S=(0,e.useRef)(0),T=(0,e.useRef)(null),I=(0,e.useRef)(null),C=(0,e.useRef)(!1),P=(0,e.useRef)(null),R=(0,e.useRef)(!1),j=(0,e.useRef)(!1),N=(0,e.useRef)(null),A=(0,e.useRef)(!0),O=(0,e.useRef)([]),z=6e4,M=(0,e.useCallback)(()=>"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),[]),D=(0,e.useCallback)(async()=>{try{const e=new URLSearchParams;e.set("storage_namespace",n);const r=`${t}?${e.toString()}`,s=await fetch(r);if(!s.ok){if(403===s.status)throw new Error((0,nt.__)("Access denied. Please check your capabilities.","wp-module-ai-chat"));if(404===s.status)throw new Error((0,nt.__)("Config endpoint not found. Please ensure the backend is deployed.","wp-module-ai-chat"));throw new Error((0,nt.sprintf)(/* translators: %1$s: HTTP status, %2$s: status text */ /* translators: %1$s: HTTP status, %2$s: status text */
(0,nt.__)("Failed to fetch config: %1$s %2$s","wp-module-ai-chat"),s.status,s.statusText))}const o=await s.json();return T.current=o,o}catch(e){throw console.error("[AI Chat] Failed to fetch config:",e.message),y((0,nt.sprintf)(/* translators: %s: error message */ /* translators: %s: error message */
(0,nt.__)("Failed to connect: %s","wp-module-ai-chat"),e.message)),e}},[t,n]),L=(0,e.useCallback)(async()=>{if($.current?.readyState!==WebSocket.OPEN&&$.current?.readyState!==WebSocket.CONNECTING&&!C.current){C.current=!0,m(!0),y(null);try{T.current||await D();const t=T.current;if(!t)throw new Error((0,nt.__)("No configuration available","wp-module-ai-chat"));P.current||(P.current=M());const n=(e=t.gateway_url)&&"string"==typeof e?e.startsWith("http://")?e.replace("http://","ws://"):e.startsWith("https://")?e.replace("https://","wss://"):e.startsWith("ws://")||e.startsWith("wss://")?e:(e=>{if(!e||"string"!=typeof e)return!1;const t=e.toLowerCase();return t.includes("localhost")||t.includes("127.0.0.1")})(e)?`ws://${e}`:`wss://${e}`:e,r=("nfd-agents"===t.agent_type?"blu":t.agent_type)||"blu";let o=`${n}/${t.brand_id}/agents/${r}/v1/ws?session_id=${P.current}&token=${encodeURIComponent(t.huapi_token)}`;const i=`wordpress_${s}`;o+=`&consumer=${encodeURIComponent(i)}`,t.site_url&&console.warn("[AI Chat] site_url parameter is deprecated. Use consumerType instead.");const c=new WebSocket(o);$.current=c,c.onopen=()=>{C.current=!1,h(!0),m(!1),y(null),S.current=0,R.current=O.current&&O.current.length>0,j.current=!1,b("")},c.onmessage=e=>{try{const t=JSON.parse(e.data);if(j.current&&"session_established"!==t.type)return;if("session_established"===t.type)t.session_id&&(P.current=t.session_id);else if("streaming_chunk"===t.type||"chunk"===t.type){if(j.current)return;const e=t.content||t.chunk||t.text||"";e&&b(t=>{const n=t+e;return!R.current&&qm(n)?"":(v(!0),N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{v(!1),N.current=null},z),n)})}else if("structured_output"===t.type){const e=t.response_content?.content?.human_input_request;if(e&&"APPROVAL_REQUEST"===(e.input_type||e.inputType||"").toUpperCase()){if(t.conversation_id||t.conversationId){const e=t.conversation_id||t.conversationId;d(e);try{localStorage.setItem(a,e)}catch(e){console.warn("[AI Chat] Failed to save conversation ID to localStorage:",e)}}return}const n=t.message||t.response_content?.message,r=n?.trim();if(r&&"No content provided"!==r&&"sales_requested"!==r&&"sales_requested"!==r.toLowerCase()){if(!R.current&&qm(r))return void b("");b(e=>(e&&l(t=>[...t,{id:`msg-${Date.now()}-streaming`,role:"assistant",type:"assistant",content:e,timestamp:new Date}]),"")),l(e=>[...e,{id:`msg-${Date.now()}`,role:"assistant",type:"assistant",content:r,timestamp:new Date}]),v(!1),b(""),N.current&&(clearTimeout(N.current),N.current=null)}}else if("tool_result"===t.type){if(t.conversation_id||t.conversationId){const e=t.conversation_id||t.conversationId;d(e);try{localStorage.setItem(a,e)}catch(e){console.warn("[AI Chat] Failed to save conversation ID to localStorage:",e)}}}else if("message"===t.type||"complete"===t.type){let e=!1;b(t=>{if(t){const n=t.trim();if("No content provided"===n||"sales_requested"===n||"sales_requested"===n.toLowerCase())return"";if(!R.current&&qm(t))return"";l(e=>[...e,{id:`msg-${Date.now()}`,role:"assistant",type:"assistant",content:t,timestamp:new Date}]),e=!0}return""}),e&&(v(!1),N.current&&(clearTimeout(N.current),N.current=null))}else if("handoff_request"===t.type){const e=t.message||t.response_content?.message,n=e?.trim();if(!n||"No content provided"===n||"sales_requested"===n||"sales_requested"===n.toLowerCase())return void b("");l(e=>[...e,{id:`msg-${Date.now()}`,role:"assistant",type:"assistant",content:n,timestamp:new Date}]),v(!1),b(""),N.current&&(clearTimeout(N.current),N.current=null)}else if("error"===t.type)y(t.message||t.error||(0,nt.__)("An error occurred","wp-module-ai-chat")),v(!1),b("");else if(t.message||t.response_content?.message){const e=t.message||t.response_content?.message,n=e?.trim();if(!n||"No content provided"===n||"sales_requested"===n||"sales_requested"===n.toLowerCase())return void b("");if(!R.current&&qm(n))return void b("");l(e=>[...e,{id:`msg-${Date.now()}`,role:"assistant",type:"assistant",content:n,timestamp:new Date}]),v(!1),b(""),N.current&&(clearTimeout(N.current),N.current=null)}}catch(e){console.error("[AI Chat] Error parsing WebSocket message:",e)}},c.onerror=e=>{console.error("[AI Chat] WebSocket error:",e),C.current=!1,y((0,nt.__)("Connection error. Please check server status and configuration.","wp-module-ai-chat")),m(!1)},c.onclose=e=>{if(C.current=!1,h(!1),m(!1),v(!1),$.current===c&&($.current=null),1e3!==e.code&&S.current<5){S.current++;const e=1e3*Math.pow(2,S.current-1);E.current=setTimeout(()=>{L()},e)}else S.current>=5&&y((0,nt.__)("Failed to reconnect. Please refresh the page.","wp-module-ai-chat"))}}catch(e){C.current=!1,console.error("[AI Chat] Error creating WebSocket:",e),y(e.message||(0,nt.__)("Failed to connect. Please check configuration and server status.","wp-module-ai-chat")),m(!1)}}var e},[D,M]);(0,e.useEffect)(()=>{O.current=c},[c]);const q=(0,e.useCallback)((e,t=null)=>{if(j.current=!1,R.current=!0,!$.current||$.current.readyState!==WebSocket.OPEN)return void y((0,nt.__)("Not connected. Please wait for connection.","wp-module-ai-chat"));if(!t){const t={id:`msg-${Date.now()}`,role:"user",type:"user",content:e,timestamp:new Date};l(e=>[...e,t]),b(""),v(!0),N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{v(!1),N.current=null},z)}const n={type:"chat",message:e};t?n.conversationId=t:u&&(n.conversationId=u),$.current.send(JSON.stringify(n))},[u]),U=(0,e.useCallback)(e=>{if(!$.current||$.current.readyState!==WebSocket.OPEN)return void console.warn("[AI Chat] Cannot send system message - not connected");const t={type:"chat",message:e};u&&(t.conversationId=u),v(!0),b(""),N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{v(!1),N.current=null},z),$.current.send(JSON.stringify(t))},[u]),F=(0,e.useCallback)(()=>{E.current&&clearTimeout(E.current),N.current&&(clearTimeout(N.current),N.current=null),$.current&&($.current.close(1e3,"User disconnected"),$.current=null),h(!1),m(!1)},[]),H=(0,e.useCallback)(()=>{j.current=!0,v(!1),b(""),N.current&&(clearTimeout(N.current),N.current=null)},[]),V=(0,e.useCallback)(()=>{k(null)},[]),B=(0,e.useCallback)(()=>{v(!1),N.current&&(clearTimeout(N.current),N.current=null)},[]),W=(0,e.useCallback)(e=>{let t;if(null==e)t=(0,nt.__)("No content provided.","wp-module-ai-chat");else if("object"==typeof e)try{t=JSON.stringify(e,null,2)}catch(n){console.warn("[useNfdAgentsWebSocket] Failed to stringify content object:",n),t=String(e)}else t=String(e);l(e=>[...e,{id:`msg-${Date.now()}`,role:"assistant",type:"assistant",content:t,timestamp:new Date}]),v(!1),N.current&&(clearTimeout(N.current),N.current=null)},[]),Z=(0,e.useCallback)((e,t)=>{l(n=>n.map(n=>("function"==typeof e?e(n):n.id===e)?t(n):n))},[]);(0,e.useEffect)(()=>{const e=I.current;if(null===e)return I.current=r,void(r&&!C.current&&(!$.current||$.current.readyState!==WebSocket.OPEN&&$.current.readyState!==WebSocket.CONNECTING)&&L());e!==r&&(I.current=r,r?C.current||$.current&&($.current.readyState===WebSocket.OPEN||$.current.readyState===WebSocket.CONNECTING)||L():F())},[r]),(0,e.useEffect)(()=>{if(A.current){if(A.current=!1,c.length>0)try{localStorage.setItem(o,JSON.stringify(c))}catch(e){console.warn("[AI Chat] Failed to save messages to localStorage:",e)}}else try{localStorage.setItem(o,JSON.stringify(c))}catch(e){console.warn("[AI Chat] Failed to save messages to localStorage:",e)}},[c]),(0,e.useEffect)(()=>{try{u?localStorage.setItem(a,u):localStorage.removeItem(a)}catch(e){console.warn("[AI Chat] Failed to save conversation ID to localStorage:",e)}},[u]);const K=(0,e.useCallback)(()=>{try{localStorage.removeItem(o),localStorage.removeItem(a),l([]),d(null),k(null),v(!1),b(""),y(null),P.current=null,$.current&&($.current.close(),$.current=null,h(!1)),R.current=!1,j.current=!1,N.current&&(clearTimeout(N.current),N.current=null),E.current&&(clearTimeout(E.current),E.current=null),S.current=0}catch(e){console.warn("[AI Chat] Failed to clear chat history:",e)}},[]);return{messages:c,sendMessage:q,sendSystemMessage:U,isConnected:p,isConnecting:f,error:g,isTyping:_,currentResponse:w,approvalRequest:x,conversationId:u,clearApprovalRequest:V,clearTyping:B,addAssistantMessage:W,updateMessage:Z,connect:L,disconnect:F,stopRequest:H,clearChatHistory:K,brandId:T.current?.brand_id||null}})({configEndpoint:"/wp-json/nfd-agents/chat/v1/config",storageNamespace:"help_center",autoConnect:n&&t,consumerType:"help_center"}),v=(0,e.useCallback)(()=>{m&&m(e=>"approval_request"===e.type&&e.approvalRequest,e=>({...e,type:"assistant",content:(0,nt.__)("Action approved and executed.","wp-module-help-center"),approvalRequest:null})),h()},[h,m]),w=(0,e.useCallback)(()=>{m&&m(e=>"approval_request"===e.type&&e.approvalRequest,e=>{const t=e.approvalRequest?.tool_name||"action";return{...e,type:"assistant",content:(0,nt.sprintf)(/* translators: %s: the name of the action or tool that was cancelled */ /* translators: %s: the name of the action or tool that was cancelled */
(0,nt.__)('Action "%s" was cancelled.',"wp-module-help-center"),t),approvalRequest:null}}),h()},[h,m]),b=(0,e.useCallback)(()=>{window.confirm((0,nt.__)("Are you sure you want to clear the chat? This will start a new conversation.","wp-module-help-center"))&&(s.current=!1,y())},[y]),x=[...o];d&&l&&x.push({id:"streaming",role:"assistant",type:"assistant",content:d,timestamp:new Date});const k=0===x.length&&!s.current;if((0,e.useEffect)(()=>{x.length>0&&(s.current=!0)},[x.length]),!t)return(0,dt.jsx)(g_,{});const $=("nfd-help-center-chat nfd-ai-chat-container "+(_?`nfd-brand-${_}`:"")).trim();return(0,dt.jsxs)("div",{className:$,"data-brand":_||void 0,style:{flex:1,minHeight:0,display:"flex",flexDirection:"column",overflow:"hidden",width:"100%",position:"relative"},children:[c&&(0,dt.jsx)("div",{style:{padding:"10px 20px",flexShrink:0},children:(0,dt.jsx)(ey,{message:c})}),k?(0,dt.jsx)("div",{style:{flex:"1 1 0%",minHeight:0,display:"flex",flexDirection:"column",overflow:"hidden",padding:"20px",backgroundColor:"#fff"},children:(0,dt.jsx)(yy,{onSendMessage:a,title:(0,nt.__)("Hi, I'm your AI assistant.","wp-module-help-center"),subtitle:(0,nt.__)("How can I help you with WordPress today?","wp-module-help-center"),showSuggestions:!1})}):(0,dt.jsx)(uy,{messages:x,isLoading:l,error:c,onApprove:v,onReject:w,onSendMessage:a,onSendSystemMessage:i,conversationId:p,onClearTyping:f,brandId:_}),o.length>0&&(0,dt.jsx)("div",{style:{padding:"8px 20px",textAlign:"right",flexShrink:0,borderTop:"1px solid #e0e0e0",background:"#fff",position:"relative",zIndex:10},children:(0,dt.jsx)("button",{onClick:b,className:"nfd-clear-chat-link",style:{background:"none",border:"none",padding:0,fontSize:"12px",color:"#666",cursor:"pointer",textDecoration:"none",fontFamily:"inherit"},onMouseEnter:e=>{e.target.style.textDecoration="underline",e.target.style.color="#333"},onMouseLeave:e=>{e.target.style.textDecoration="none",e.target.style.color="#666"},"aria-label":(0,nt.__)("Clear chat","wp-module-help-center"),children:(0,nt.__)("Clear Chat","wp-module-help-center")})}),(0,dt.jsx)("div",{style:{padding:"20px",borderTop:o.length>0?"none":"1px solid #e0e0e0",background:"#fff",flexShrink:0,position:"relative",zIndex:20,overflow:"visible"},children:(0,dt.jsx)(fy,{onSendMessage:a,onStopRequest:g,disabled:l,placeholder:(0,nt.__)("Ask me anything about WordPress","wp-module-help-center")})}),y_(r)&&(0,dt.jsx)("div",{style:{flexShrink:0,borderTop:"1px solid #e0e0e0",background:"#fff",width:"100%"},children:(0,dt.jsx)(cn,{})}),u&&(0,dt.jsx)("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1e3,background:"rgba(255, 255, 255, 0.85)",display:"flex",alignItems:"center",justifyContent:"center"},"aria-live":"polite","aria-busy":"true",children:(0,dt.jsx)("span",{style:{fontSize:"14px",color:"#666"},children:(0,nt.__)("Connecting","wp-module-help-center")})})]})},w_=({onClose:t})=>{const n=S(),{isFooterVisible:r,hasLaunchedFromTooltip:o}=ut(),a=(({isFooterVisible:e,hasLaunchedFromTooltip:t,canAccessAIHelpCenter:n})=>!t&&e&&!n)({isFooterVisible:r,hasLaunchedFromTooltip:o,canAccessAIHelpCenter:Be()});return(0,e.useEffect)(()=>{n(et.initialDataSet({isFooterVisible:We.getResultInfo()?.length<1,SearchInput:We.getSearchInput()||""}));const e=!window.newfoldHelpCenter?.closeOnLoad&&We.getHelpVisible();E_(e)},[]),(0,e.useEffect)(()=>{let e=[];!async function(){e=await(async()=>{const e=Ve.NewfoldRuntime.createApiUrl("/wp/v2/settings");try{const t=await s()({url:e,method:"GET"}),n=t.nfd_helpcenter_data&&JSON.parse(t.nfd_helpcenter_data);if(n?.length>0)return n}catch(e){}})(),e&&n(et.updateHelpResultHistoryFromDB(e))}()},[]),(0,dt.jsxs)("div",{role:"dialog","aria-labelledby":"helpcenter-modal-heading","aria-describedby":"helpcenter-modal-description","aria-modal":"true",className:"nfd-hc-modal",children:[(0,dt.jsxs)("div",{className:"nfd-hc-modal__header",style:{flexShrink:0},children:[(0,dt.jsxs)("h3",{id:"helpcenter-modal-heading",className:"nfd-hc-modal__header__heading",children:[(0,dt.jsx)("span",{className:"nfd-hc-modal__header__heading__icon",children:(0,dt.jsx)(sn,{})}),(0,dt.jsx)("span",{children:(0,nt.__)("Help with WordPress","wp-module-help-center")})]}),o&&(0,dt.jsx)("button",{className:"nfd-hc-modal__header__minimize-button","aria-label":(0,nt.__)("Minimize HelpCenter","wp-module-help-center"),title:(0,nt.__)("Minimize HelpCenter","wp-module-help-center"),onClick:()=>{n(et.updateFloatingIconVisibilty(!0)),E_(!1)}}),(0,dt.jsx)("button",{"aria-label":(0,nt.__)("Close Help Modal","wp-module-help-center"),title:(0,nt.__)("Close Help Modal","wp-module-help-center"),className:"nfd-hc-modal__header__close-button",onClick:()=>{n(et.resetState()),t()},children:(0,dt.jsx)(gt,{"aria-hidden":"true"})})]}),(0,dt.jsx)("div",{className:"nfd-hc-seperator",style:{flexShrink:0},children:(0,dt.jsx)("hr",{})}),(0,dt.jsx)("div",{id:"helpcenter-modal-description",className:"nfd-hc-modal__content",children:(0,dt.jsx)(v_,{})}),a&&(0,dt.jsx)(cn,{})]})};var b_;function x_(){return x_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x_.apply(null,arguments)}var k_=function(e){return u.createElement("svg",x_({xmlns:"http://www.w3.org/2000/svg",width:22,height:22,style:{verticalAlign:"middle",cursor:"pointer"},viewBox:"0 1 36 37"},e),b_||(b_=u.createElement("path",{fillRule:"evenodd",d:"M18 .902c-9.941 0-18 8.059-18 18s8.059 18 18 18h15.366A2.634 2.634 0 0 0 36 34.268V18.902c0-9.941-8.059-18-18-18m-.913 17.877q-.504.883-.504 2.092v.832h3.326v-.404q0-.881.303-1.461.327-.58 1.184-1.386 1.084-1.033 1.638-1.966.555-.932.555-2.243 0-1.335-.706-2.419-.68-1.109-1.915-1.739t-2.823-.63q-2.116 0-3.528 1.185-1.386 1.16-1.864 2.772l2.898 1.21a3.3 3.3 0 0 1 .907-1.462q.655-.605 1.663-.605.957 0 1.537.555.58.529.58 1.31 0 .655-.353 1.16-.327.503-1.084 1.184-1.284 1.134-1.814 2.015m-.428 8.644q.654.63 1.562.63.907 0 1.537-.63.63-.655.63-1.562t-.63-1.538-1.537-.63-1.562.63q-.63.63-.63 1.538 0 .906.63 1.562",clipRule:"evenodd"})))};l()(()=>{window?.nfdHelpCenter?.restUrl&&i.HiiveAnalytics.initialize({namespace:"wonder_help",urls:{single:window.nfdHelpCenter.restUrl+"/newfold-data/v1/events"},dependencies:{wpData:a(),wpApiFetch:s()}})});const $_=document.getElementById("wpcontent"),E_=e=>{$_.classList.toggle("wpcontent-container",e),document.getElementById("nfd-help-center").classList.toggle("help-container",e),We.updateHelpVisible(e),window.dispatchEvent(new Event("storage")),We.clearSearchInput(),e||We.clearSearchInput()};window.newfoldEmbeddedHelp={toggleNFDLaunchedEmbeddedHelp:()=>{(()=>{const e=We.getHelpVisible();if(Object.is(e,void 0))return E_(!0),void Ze("help_sidebar_opened",{page:window.location.href.toString()});e||Ze("help_sidebar_opened",{page:window.location.href.toString()}),E_(!e)})()},renderEmbeddedHelp:()=>{const t=document.createElement("div");t.id="nfd-help-center",t.style.display="none",$_.appendChild(t);const n=document.createElement("div");n.id="nfd-hc-floating-icon-wrapper",$_.appendChild(n);const r=document.getElementById("nfd-help-center"),s=document.getElementById("nfd-hc-floating-icon-wrapper"),{hasLaunchedFromTooltip:o}=tt.getState().helpcenter;null!==r&&("undefined"!==e.createRoot?((0,e.createRoot)(r).render((0,dt.jsx)(w,{store:tt,children:(0,dt.jsx)(w_,{onClose:()=>{We.clear(),tt.dispatch(et.resetState()),E_(!1)}})})),o&&(0,e.createRoot)(s).render((0,dt.jsx)(w,{store:tt,children:(0,dt.jsx)(pt,{})}))):"undefined"!==e.render&&((0,e.render)((0,dt.jsx)(w,{store:tt,children:(0,dt.jsx)(w_,{onClose:()=>{We.clear(),tt.dispatch(et.resetState()),E_(!1)}})}),r),o&&(0,e.render)((0,dt.jsx)(w,{store:tt,children:(0,dt.jsx)(pt,{})}),s)))}};const S_=(0,o.subscribe)(()=>{document.getElementById("nfd-help-menu-button-wrapper")?S_():l()(()=>{const t=document.querySelector(".edit-post-header__settings");if(!t)return;const n=document.createElement("div");n.id="nfd-help-menu-button-wrapper",n.classList.add("nfd-help-menu-button-wrapper");const r=t.querySelector(".components-dropdown-menu.interface-more-menu-dropdown");r?t.insertBefore(n,r):t.appendChild(n);const s=(0,dt.jsx)("button",{className:"components-button has-icon",onClick:()=>{window.newfoldEmbeddedHelp.toggleNFDLaunchedEmbeddedHelp()},children:(0,dt.jsx)(k_,{})});(0,e.render)(s,document.getElementById("nfd-help-menu-button-wrapper"))})});window.newfoldEmbeddedHelp.renderEmbeddedHelp(),window.newfoldEmbeddedHelp.launchNFDEmbeddedHelpQuery=function(e,t){const n=We.getHelpVisible();We.persistSearchInput(e),"true"!==n&&t&&(window.newfoldEmbeddedHelp.renderEmbeddedHelp(),E_(!0));const r=new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,key:"Enter",code:"Enter",keyCode:13}),s=document.getElementById("nfd-help-center");let o=0;const a=setInterval(()=>{if(o++,s&&(e=>{const t=window.getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility})(s)){const t=document.getElementById("search-input-box");t.value=e,t.focus(),t.setSelectionRange(t.value.length,t.value.length),t.dispatchEvent(r),clearInterval(a)}else o>=5&&clearInterval(a)},500)},document.addEventListener("click",async e=>{try{if(e.target?.classList?.contains("nfd-help-center-tip")){!We.getHelpVisible()&&document.getElementById("wp-admin-bar-help-center").querySelector(".ab-item").click(),tt.dispatch(et.setIsTooltipLoading());const t=e.target.dataset.postId,n=await(async e=>{try{return await s()({path:"/newfold-multi-search/v1/tooltip_search",method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:e})})}catch(e){return console.error("Error in getMultiSearchResults:",e),{}}})(t);if(!n?.content)return tt.dispatch(et.updateIsTooltipLoading()),void tt.dispatch(et.setNoResult());const r={resultContent:Je(n.content.rendered),postId:t,searchInput:n.title.rendered,feedbackSubmitted:null};We.persistResult(r.resultContent,t,r.searchInput,r.feedbackSubmitted,!0),We.persistSearchInput(r.searchInput),tt.dispatch(et.updateIsTooltipLoading()),tt.dispatch(et.updateResultContent(r))}}catch(e){console.error("Error launching help center via query:",e)}})})()})();