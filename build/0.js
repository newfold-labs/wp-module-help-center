"use strict";(globalThis.webpackChunk_newfold_labs_wp_module_help_center=globalThis.webpackChunk_newfold_labs_wp_module_help_center||[]).push([[0],{7e3:(e,t,s)=>{s.d(t,{default:()=>oe});var n=s(8394),a=s(2975);const o=(e,t="")=>{if(e.includes("rest_route="))return e;const s=e.match(/\/wp-json\/(.+)$/);if(!s)return e;const n=s[1];t||"undefined"==typeof window||(t=window.location.origin);const a=t.replace(/\/wp-json\/?$/,""),o=a.includes("?")?"&":"?";return`${a}${o}rest_route=/${n}`};class r extends Error{constructor(e,t=null,s=null){super(e),this.name="MCPError",this.code=t,this.details=s}}new class{constructor(e={}){this.configKey=e.configKey||"nfdAIChat",this.client=null,this.transport=null,this.connected=!1,this.tools=[],this.resources=[],this.eventListeners=new Map}getConfig(){const e="undefined"!=typeof window&&window[this.configKey]||{},t=e.homeUrl||("undefined"!=typeof window?window.location.origin:"");let s=e.restUrl||"/wp-json/";s.includes("/wp-json/")?s=o(s,t):s.includes("rest_route=")||(s=o("/wp-json/",t));let n=e.mcpUrl;return n?n.includes("/wp-json/")&&(n=o(n,t)):n=((e,t,s="")=>{const n=((e="")=>{if(e&&e.includes("rest_route="))return e;e||"undefined"==typeof window||(e=window.location.origin);const t=e.includes("?")?"&":"?";return`${e}${t}rest_route=/`})(s),a=`${e}/${t}`;if(n.includes("rest_route="))return n.replace("rest_route=/",`rest_route=/${a}`);const o=n.includes("?")?"&":"?";return`${n}${o}rest_route=/${a}`})("mcp","mcp-adapter-default-server",t),{nonce:e.nonce||"",restUrl:s,mcpUrl:n,homeUrl:t}}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e).add(t)}off(e,t){const s=this.eventListeners.get(e);s&&s.delete(t)}emit(e){const t=this.eventListeners.get(e.type);t&&t.forEach(t=>{try{t(e)}catch(e){console.error("Error in MCP event listener:",e)}})}async connect(e=null){try{const t=this.getConfig(),s=e||t.mcpUrl;if(!s)throw new r("MCP endpoint URL not configured");this.client=new n.K({name:"nfd-ai-chat-client",version:"1.0.0"},{capabilities:{}}),this.transport=new a.j(new URL(s),{requestInit:{headers:{"Content-Type":"application/json"}}}),await this.client.connect(this.transport),this.connected=!0,this.emit({type:"connected"})}catch(e){const t=e instanceof r?e:new r(`Connection failed: ${e.message}`);throw this.emit({type:"error",data:t}),t}}async initialize(){if(!this.connected)throw new r("Not connected to MCP server");try{await Promise.all([this.loadTools(),this.loadResources()]);const e={protocolVersion:"2025-06-18",capabilities:{tools:{},resources:{},prompts:{}},serverInfo:{name:"WordPress MCP Server",version:"1.0.0"}};return this.emit({type:"initialized",data:e}),e}catch(e){const t=e instanceof r?e:new r(`Initialization failed: ${e.message}`);throw this.emit({type:"error",data:t}),t}}normalizeInputSchema(e){return!e||Array.isArray(e)||"object"!=typeof e||0===Object.keys(e).length?{type:"object",properties:{},required:[]}:{type:e.type||"object",properties:e.properties||{},required:Array.isArray(e.required)?e.required:[]}}async loadTools(){try{const e=await this.client.listTools();this.tools=e.tools.map(e=>({name:e.name,description:e.description||"",inputSchema:this.normalizeInputSchema(e.inputSchema),annotations:e.annotations||{}})),this.emit({type:"tools_updated",data:this.tools})}catch(e){console.error("Failed to load tools via SDK:",e),this.tools=[]}}async loadResources(){try{const e=await this.client.listResources();this.resources=e.resources.map(e=>({uri:e.uri,name:e.name||"",description:e.description,mimeType:e.mimeType})),this.emit({type:"resources_updated",data:this.resources})}catch(e){console.error("Failed to load resources via SDK:",e),this.resources=[]}}async listTools(){if(!this.connected)throw new r("Not connected to MCP server");return this.tools}async callTool(e,t={}){if(!this.connected)throw new r("Not connected to MCP server");try{const s=await this.client.callTool({name:e,arguments:t});return{content:Array.isArray(s.content)?s.content:[],isError:Boolean(s.isError),meta:s.meta||{}}}catch(t){console.error(`Tool "${e}" call failed:`,t);const s=t instanceof r?t:new r(`Tool call failed: ${t.message}`);throw this.emit({type:"error",data:s}),s}}async listResources(){if(!this.connected)throw new r("Not connected to MCP server");return this.resources}async readResource(e){if(!this.connected)throw new r("Not connected to MCP server");try{return await this.client.readResource({uri:e})}catch(t){console.error(`Resource "${e}" read failed:`,t);const s=t instanceof r?t:new r(`Resource read failed: ${t.message}`);throw this.emit({type:"error",data:s}),s}}async disconnect(){try{this.transport&&(await this.client.close(),this.transport=null),this.connected=!1,this.tools=[],this.resources=[],this.emit({type:"disconnected"})}catch(e){console.error("Error during SDK disconnect:",e)}}isConnected(){return this.connected}getTools(){return[...this.tools]}getResources(){return[...this.resources]}isToolReadOnly(e){const t=this.tools.find(t=>t.name===e);return!t||!0===t.annotations?.readonly||!0===t.annotations?.readOnlyHint}getToolsForOpenAI(){return this.tools.map(e=>{const t=this.normalizeInputSchema(e.inputSchema);return{type:"function",function:{name:e.name,description:e.description||"",parameters:t}}})}};var i=s(3556);const c="gpt-4o-mini";class l extends Error{constructor(e,t=null,s=null){super(e),this.name="OpenAIError",this.status=t,this.code=s}}new class{constructor(e={}){this.configKey=e.configKey||"nfdAIChat",this.apiPath=e.apiPath||"ai",this.mode=e.mode||"help",this.openai=null,this.config=null}getConfig(){if(this.config)return this.config;if("undefined"!=typeof window&&window[this.configKey]){const e=window[this.configKey].homeUrl||window.location.origin;let t=window[this.configKey].restUrl||"/wp-json/";t.includes("/wp-json/")?t=o(t,e):t.includes("rest_route=")||(t=o("/wp-json/",e)),this.config={nonce:window[this.configKey].nonce,restUrl:t,homeUrl:e}}else this.config={nonce:"",restUrl:"",homeUrl:""};return this.config}getOpenAIClient(){if(this.openai)return this.openai;const e=this.getConfig();return this.openai=new i.Ay({apiKey:"proxy",baseURL:`${e.restUrl}${this.apiPath}`,dangerouslyAllowBrowser:!0,defaultHeaders:{"X-WP-Nonce":e.nonce}}),this.openai}async createChatCompletion(e){try{const t=this.getOpenAIClient();return await t.chat.completions.create({model:e.model||c,messages:e.messages,tools:e.tools,tool_choice:e.tool_choice,stream:!1,max_tokens:e.max_tokens,temperature:e.temperature,mode:e.mode||this.mode})}catch(e){throw new l(e.message||"OpenAI API request failed",e.status,e.code)}}async createStreamingCompletion(e,t,s,n){try{const n=this.getOpenAIClient(),a=await n.chat.completions.create({...e,messages:e.messages,stream:!0,mode:e.mode||this.mode});let o="";const r={};for await(const e of a){const n=e.choices[0]?.delta;if(n?.content&&(o+=n.content,t({type:"content",content:n.content})),n?.tool_calls){for(const e of n.tool_calls){const t=e.index;r[t]||(r[t]={id:e.id||"",type:"function",function:{name:e.function?.name||"",arguments:""}}),e.id&&(r[t].id=e.id),e.function?.name&&(r[t].function.name=e.function.name),e.function?.arguments&&(r[t].function.arguments+=e.function.arguments)}t({type:"tool_calls",tool_calls:Object.values(r)})}if(e.choices[0]?.finish_reason){const e=Object.values(r).map(e=>({id:e.id,name:e.function.name,arguments:e.function.arguments?JSON.parse(e.function.arguments):{}}));await s(o,e.length>0?e:null);break}}}catch(e){n(new l(e.message||"Streaming request failed",e.status,e.code))}}convertMessagesToOpenAI(e){const t=[];for(const o of e){var s;if("system"===o.role||"user"===o.role)t.push({role:o.role,content:null!==(s=o.content)&&void 0!==s?s:""});else if("assistant"===o.role){var n,a;const e=o.toolCalls&&o.toolCalls.length>0;if((null===o.content||void 0===o.content||""===o.content)&&!e){console.warn("Skipping invalid assistant message with no content and no tool calls");continue}const s={role:"assistant",content:e?null!==(n=o.content)&&void 0!==n?n:null:null!==(a=o.content)&&void 0!==a?a:""};if(e&&(s.tool_calls=o.toolCalls.map(e=>({id:e.id,type:"function",function:{name:e.name,arguments:"string"==typeof e.arguments?e.arguments:JSON.stringify(e.arguments)}}))),t.push(s),e&&o.toolResults&&o.toolResults.length>0)for(const e of o.toolResults)o.toolCalls.some(t=>t.id===e.id)&&t.push({role:"tool",content:e.error||JSON.stringify(e.result),tool_call_id:e.id})}}return t}convertMCPToolsToOpenAI(e){return e.map(e=>({type:"function",function:{name:e.name,description:e.description,parameters:e.inputSchema}}))}processToolCalls(e){return e.map(e=>({id:e.id,name:e.function.name,arguments:JSON.parse(e.function.arguments||"{}")}))}async sendMessage(e,t=[],s=[]){const n=this.convertMessagesToOpenAI([...t,{id:`user-${Date.now()}`,role:"user",content:e,timestamp:new Date}]),a={model:c,messages:n,tools:s.length>0?this.convertMCPToolsToOpenAI(s):void 0,tool_choice:s.length>0?"auto":void 0,temperature:.7,max_tokens:2e3};try{const e=(await this.createChatCompletion(a)).choices[0];if(!e)throw new l("No response from OpenAI");const t={message:e.message.content||""};return e.message.tool_calls&&(t.toolCalls=this.processToolCalls(e.message.tool_calls)),t}catch(e){if(e instanceof l)throw e;throw new l(`Failed to send message: ${e}`)}}};var u=s(6087),d=s(7723),h=s(1455),p=s.n(h);const m=e=>({history:`nfd-ai-chat-${e}-history`,conversationId:`nfd-ai-chat-${e}-conversation-id`,sessionId:`nfd-ai-chat-${e}-session-id`,archive:`nfd-ai-chat-${e}-archive`}),g=e=>{if(!e||"string"!=typeof e)return!1;const t=e.toLowerCase().trim(),s=[/^hello!?\s+how\s+can\s+i\s+assist\s+you/i,/^hi!?\s+how\s+can\s+i\s+help/i,/^hello!?\s+how\s+can\s+i\s+help/i,/^hi\s+there!?\s+how\s+can/i,/^greetings!?\s+how\s+can/i,/^how\s+can\s+i\s+assist\s+you\s+today/i,/^how\s+can\s+i\s+help\s+you\s+today/i,/^hello!?\s+how\s+can\s+i\s+assist\s+you\s+today/i,/^hello!?\s+how\s+can\s+i\s+assist\s+you.*feel\s+free/i].some(e=>e.test(t)),n=t.includes("hello")&&(t.includes("assist")||t.includes("help"))&&(t.includes("today")||t.includes("feel free")||t.includes("ask")),a=t.length<150&&(t.includes("hello")&&(t.includes("assist")||t.includes("help"))||t.includes("hi")&&t.includes("help"));return s||n||a};var f=s(325);const _=e=>f.A.sanitize(e,{ALLOWED_TAGS:["section","div","h1","h2","h3","h4","h5","h6","p","span","strong","em","b","i","u","s","mark","small","sub","sup","a","br","ul","ol","li","dl","dt","dd","blockquote","code","pre","table","thead","tbody","tr","th","td","hr","address","time"],ALLOWED_ATTR:["style","class","id","href","datetime","target","rel"],ALLOW_DATA_ATTR:!1,FORBID_TAGS:["script","object","embed","iframe","form","fieldset","legend","label","input","textarea","select","option","button","details","summary","progress","meter"],FORBID_ATTR:["onerror","onload","onclick","onmouseover","onfocus","onblur"]});var y=s(5243),w=s(7640),v=s(3152),x=s(4648),b=s(435),S=s.n(b),C=s(790);const j=e=>({"blu/get-global-styles":{title:(0,d.__)("Reading Site Colors","wp-module-ai-chat")},"blu-get-global-styles":{title:(0,d.__)("Reading Site Colors","wp-module-ai-chat")},"blu/get-active-global-styles":{title:(0,d.__)("Reading Active Styles","wp-module-ai-chat")},"blu-get-active-global-styles":{title:(0,d.__)("Reading Active Styles","wp-module-ai-chat")},"blu/get-active-global-styles-id":{title:(0,d.__)("Getting Styles ID","wp-module-ai-chat")},"blu-get-active-global-styles-id":{title:(0,d.__)("Getting Styles ID","wp-module-ai-chat")},"blu/update-global-styles":{title:(0,d.__)("Updating Site Styles","wp-module-ai-chat")},"blu-update-global-styles":{title:(0,d.__)("Updating Site Styles","wp-module-ai-chat")},"blu/update-global-palette":{title:(0,d.__)("Updating Site Colors","wp-module-ai-chat")},"blu-update-global-palette":{title:(0,d.__)("Updating Site Colors","wp-module-ai-chat")}}[e]||{title:e?.replace(/[-_\/]/g," ").replace(/\b\w/g,e=>e.toUpperCase())||(0,d.__)("Action","wp-module-ai-chat")}),I=({tool:e,isError:t,result:s})=>{const n=((e,t={})=>{if("mcp-adapter-execute-ability"===e){const e=t?.ability_name||"unknown",s=j(e);let n=null;if(("blu/update-global-palette"===e||"blu/update-global-styles"===e)&&t?.parameters?.colors){const e=t.parameters.colors.length;n=`${e} color${1!==e?"s":""}`}return{...s,params:n}}return j(e)})(e.name,e.arguments),a=((e,t)=>{if(!e||e.isError)return s=e?.error,null==s?null:"string"==typeof s?s:"number"==typeof s||"boolean"==typeof s?String(s):null;var s;try{let s=e.result;if(Array.isArray(s)&&s.length>0&&s[0].text?s=JSON.parse(s[0].text):"string"==typeof s&&(s=JSON.parse(s)),!s||"object"!=typeof s)return null;if(t?.includes("update")){if(s.updatedColors&&Array.isArray(s.updatedColors)){const e=s.updatedColors;return e.length<=3?e.map(e=>`${e.name||e.slug}: ${e.color}`).join(", "):`${e.length} colors updated`}if(s.message&&"string"==typeof s.message)return s.message}if(t?.includes("get")||t?.includes("read")){if(s.color?.palette){const e=s.color.palette,t=e.custom?.length||0,n=e.theme?.length||0;if(t||n)return`Found ${t+n} colors`}if(s.typography){const e=s.typography.fontFamilies?.length||0,t=s.typography.fontSizes?.length||0,n=[];if(e&&n.push(`${e} font families`),t&&n.push(`${t} sizes`),n.length)return n.join(", ")}if(s.message&&"string"==typeof s.message)return s.message}return s.id&&t?.includes("id")?`ID: ${s.id}`:null}catch{return null}})(s,e.name);return(0,C.jsxs)("div",{className:S()("nfd-ai-chat-tool-execution__item",{"nfd-ai-chat-tool-execution__item--complete":!t,"nfd-ai-chat-tool-execution__item--error":t}),children:[(0,C.jsxs)("div",{className:"nfd-ai-chat-tool-execution__item-header",children:[t?(0,C.jsx)(y.A,{className:"nfd-ai-chat-tool-execution__icon nfd-ai-chat-tool-execution__icon--error",size:12}):(0,C.jsx)(w.A,{className:"nfd-ai-chat-tool-execution__icon nfd-ai-chat-tool-execution__icon--success",size:12}),(0,C.jsx)("span",{className:"nfd-ai-chat-tool-execution__item-title",children:n.title}),n.params&&(0,C.jsx)("span",{className:"nfd-ai-chat-tool-execution__item-params",children:n.params})]}),a&&(0,C.jsx)("div",{className:"nfd-ai-chat-tool-execution__item-summary",children:a})]})},N=({executedTools:e=[],toolResults:t=[]})=>{const[s,n]=(0,u.useState)(!1);if(!e||0===e.length)return null;const a=new Map;t&&Array.isArray(t)&&t.forEach(e=>{e.id&&a.set(e.id,e)});const o=e.some(e=>e.isError),r=e.length;return(0,C.jsxs)("div",{className:S()("nfd-ai-chat-tool-execution",{"nfd-ai-chat-tool-execution--collapsed":!s}),children:[(0,C.jsxs)("button",{type:"button",className:"nfd-ai-chat-tool-execution__header",onClick:()=>n(!s),"aria-expanded":s?"true":"false",children:[s?(0,C.jsx)(v.A,{className:"nfd-ai-chat-tool-execution__chevron",size:12}):(0,C.jsx)(x.A,{className:"nfd-ai-chat-tool-execution__chevron",size:12}),(0,C.jsx)("span",{children:o?(0,d.__)("Some actions failed","wp-module-ai-chat"):(0,d.__)("Actions completed","wp-module-ai-chat")}),(0,C.jsxs)("span",{className:"nfd-ai-chat-tool-execution__header-count",children:["(",r,")"]})]}),s&&(0,C.jsx)("div",{className:"nfd-ai-chat-tool-execution__list",children:e.map((e,t)=>(0,C.jsx)(I,{tool:e,isError:e.isError,result:a.get(e.id)},e.id||`tool-${t}`))})]})},A=({message:e,type:t="assistant",executedTools:s=[],onExecuteTool:n,onSendMessage:a,onSendSystemMessage:o,conversationId:r,onClearTyping:i,brandId:c,toolResults:l=[]})=>{const d="approval_request"===t?"assistant":t,h="user"===d,{content:p,isRichContent:m}=(0,u.useMemo)(()=>{if(!e)return{content:"",isRichContent:!1};if(h)return{content:e,isRichContent:!1};if((e=>/<[a-z][\s\S]*>/i.test(e))(e))return{content:_(e),isRichContent:!0};if((t=e)&&"string"==typeof t&&[/^#{1,6}\s/m,/\*\*[^*]+\*\*/,/\*[^*]+\*/,/__[^_]+__/,/_[^_]+_/,/`[^`]+`/,/```[\s\S]*?```/,/^\s*[-*+]\s/m,/^\s*\d+\.\s/m,/\[([^\]]+)\]\(([^)]+)\)/].some(e=>e.test(t))){const t=function(e){if(!e||"string"!=typeof e)return"";let t=e;t=t.replace(/&(?![\w#]+;)/g,"&amp;").replace(/<(?![a-zA-Z/])/g,"&lt;").replace(/(?<![a-zA-Z"])>/g,"&gt;"),t=t.replace(/```(\w*)\n?([\s\S]*?)```/g,(e,t,s)=>`<pre><code class="language-${t||"plaintext"}">${s.trim().replace(/</g,"&lt;").replace(/>/g,"&gt;")}</code></pre>`),t=t.replace(/`([^`]+)`/g,'<code class="inline-code">$1</code>'),t=t.replace(/^######\s+(.+)$/gm,'<h6 class="chat-h6">$1</h6>'),t=t.replace(/^#####\s+(.+)$/gm,'<h5 class="chat-h5">$1</h5>'),t=t.replace(/^####\s+(.+)$/gm,'<h4 class="chat-h4">$1</h4>'),t=t.replace(/^###\s+(.+)$/gm,'<h3 class="chat-h3">$1</h3>'),t=t.replace(/^##\s+(.+)$/gm,'<h2 class="chat-h2">$1</h2>'),t=t.replace(/^#\s+(.+)$/gm,'<h1 class="chat-h1">$1</h1>'),t=t.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),t=t.replace(/__([^_]+)__/g,"<strong>$1</strong>"),t=t.replace(/(?<![*_])\*(?!\*)([^*\n]+)(?<!\*)\*(?!\*)/g,"<em>$1</em>"),t=t.replace(/(?<![_*])_(?!_)([^_\n]+)(?<!_)_(?!_)/g,"<em>$1</em>"),t=t.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'),t=t.replace(/^(\s*)[-*+]\s+(.+)$/gm,(e,t,s)=>`<li class="chat-li" data-level="${Math.floor(t.length/2)}">${s}</li>`),t=t.replace(/((?:<li[^>]*>.*?<\/li>\s*)+)/g,e=>`<ul class="chat-ul">${e.replace(/(<\/li>)\s+(<li)/g,"$1$2")}</ul>`),t=t.replace(/^(\s*)\d+\.\s+(.+)$/gm,(e,t,s)=>`<oli class="chat-oli" data-level="${Math.floor(t.length/2)}">${s}</oli>`),t=t.replace(/((?:<oli[^>]*>.*?<\/oli>\s*)+)/g,e=>`<ol class="chat-ol">${e.replace(/(<\/oli>)\s+(<oli)/g,"$1$2").replace(/<\/?oli/g,e=>e.replace("oli","li"))}</ol>`),t=t.replace(/^---+$/gm,'<hr class="chat-hr" />'),t=t.replace(/^>\s+(.+)$/gm,'<blockquote class="chat-blockquote">$1</blockquote>');const s=t.split(/\n\n+/);return t=s.map(e=>{const t=e.trim();return t.startsWith("<h")||t.startsWith("<ul")||t.startsWith("<ol")||t.startsWith("<pre")||t.startsWith("<blockquote")||t.startsWith("<hr")||t.startsWith("<p")?t:t?`<p class="chat-p">${t}</p>`:""}).filter(Boolean).join(""),t=t.replace(/<p([^>]*)>([\s\S]*?)<\/p>/g,(e,t,s)=>`<p${t}>${s.trim().replace(/\n/g,"<br>")}</p>`),t=t.replace(/<br\s*\/?>\s*(<\/?(ul|ol|li|p|h[1-6]|pre|blockquote|hr))/gi,"$1"),t=t.replace(/(<\/(ul|ol|li|p|h[1-6]|pre|blockquote)>)\s*<br\s*\/?>/gi,"$1"),t=t.replace(/<p[^>]*>\s*<\/p>/g,""),t=t.replace(/(<br\s*\/?>){2,}/g,"<br>"),t}(e);return{content:_(t),isRichContent:!0}}var t;return{content:e,isRichContent:!1}},[e,h]);return p||s&&0!==s.length?(0,C.jsxs)("div",{className:`nfd-ai-chat-message nfd-ai-chat-message--${d}`,children:[p&&(m?(0,C.jsx)("div",{className:"nfd-ai-chat-message__content nfd-ai-chat-message__content--rich",dangerouslySetInnerHTML:{__html:p}}):(0,C.jsx)("div",{className:"nfd-ai-chat-message__content",children:p})),s&&s.length>0&&(0,C.jsx)(N,{executedTools:s,toolResults:l})]}):null},$=({message:e,className:t=""})=>(0,C.jsxs)("div",{className:`nfd-ai-chat-error-alert ${t}`,children:[(0,C.jsx)("div",{className:"nfd-ai-chat-error-alert__icon",children:(0,C.jsx)(y.A,{width:16,height:16})}),(0,C.jsx)("div",{className:"nfd-ai-chat-error-alert__content",children:(0,C.jsx)("div",{className:"nfd-ai-chat-error-alert__message",children:e})})]});var T=s(2074),k=s(1045);const R=e=>({"nfd-agents/get-global-styles":{title:(0,d.__)("Reading Site Colors","wp-module-ai-chat"),description:(0,d.__)("Fetching current color palette and typography settings","wp-module-ai-chat")},"nfd-agents/update-global-palette":{title:(0,d.__)("Updating Site Colors","wp-module-ai-chat"),description:(0,d.__)("Applying new colors to global styles","wp-module-ai-chat")},"newfold-agents/get-global-styles":{title:(0,d.__)("Reading Site Colors","wp-module-ai-chat"),description:(0,d.__)("Fetching current color palette and typography settings","wp-module-ai-chat")},"newfold-agents/update-global-palette":{title:(0,d.__)("Updating Site Colors","wp-module-ai-chat"),description:(0,d.__)("Applying new colors to global styles","wp-module-ai-chat")},"blu/get-global-styles":{title:(0,d.__)("Reading Site Colors","wp-module-ai-chat"),description:(0,d.__)("Fetching current color palette and typography settings","wp-module-ai-chat")},"blu/update-global-palette":{title:(0,d.__)("Updating Site Colors","wp-module-ai-chat"),description:(0,d.__)("Applying new colors to global styles","wp-module-ai-chat")},"mcp-adapter-discover-abilities":{title:(0,d.__)("Discovering Actions","wp-module-ai-chat"),description:(0,d.__)("Finding available WordPress abilities","wp-module-ai-chat")},"mcp-adapter-get-ability-info":{title:(0,d.__)("Getting Ability Info","wp-module-ai-chat"),description:(0,d.__)("Fetching ability details","wp-module-ai-chat")},"mcp-adapter-execute-ability":{title:(0,d.__)("Executing Action","wp-module-ai-chat"),description:(0,d.__)("Running WordPress ability","wp-module-ai-chat")}}[e]||{title:e?.replace(/[-_\/]/g," ").replace(/\b\w/g,e=>e.toUpperCase())||(0,d.__)("Executing","wp-module-ai-chat"),description:(0,d.__)("Running action","wp-module-ai-chat")}),E=({tool:e,isActive:t,progress:s,isComplete:n,isError:a})=>{const o=((e,t={})=>{if("mcp-adapter-execute-ability"===e){const e=t?.ability_name||"unknown",s=R(e);let n=null;if(("nfd-agents/update-global-palette"===e||"newfold-agents/update-global-palette"===e||"blu/update-global-palette"===e)&&t?.parameters?.colors){const e=t.parameters.colors.length;n=`${e} color${1!==e?"s":""}`}return{...s,params:n}}return R(e)})(e.name,e.arguments);return(0,C.jsxs)("div",{className:S()("nfd-ai-chat-tool-execution__item",{"nfd-ai-chat-tool-execution__item--active":t,"nfd-ai-chat-tool-execution__item--complete":n,"nfd-ai-chat-tool-execution__item--error":a}),children:[(0,C.jsxs)("div",{className:"nfd-ai-chat-tool-execution__item-header",children:[a?(0,C.jsx)(y.A,{className:"nfd-ai-chat-tool-execution__icon nfd-ai-chat-tool-execution__icon--error",size:12}):n?(0,C.jsx)(w.A,{className:"nfd-ai-chat-tool-execution__icon nfd-ai-chat-tool-execution__icon--success",size:12}):t?(0,C.jsx)(T.A,{className:"nfd-ai-chat-tool-execution__icon nfd-ai-chat-tool-execution__icon--active",size:12}):(0,C.jsx)(k.A,{className:"nfd-ai-chat-tool-execution__icon nfd-ai-chat-tool-execution__icon--pending",size:12}),(0,C.jsx)("span",{className:"nfd-ai-chat-tool-execution__item-title",children:o.title}),o.params&&(0,C.jsx)("span",{className:"nfd-ai-chat-tool-execution__item-params",children:o.params})]}),t&&s&&(0,C.jsx)("div",{className:"nfd-ai-chat-tool-execution__item-progress",children:s})]})},D=({status:e=null,activeToolCall:t=null,toolProgress:s=null,executedTools:n=[],pendingTools:a=[]})=>{const[o,r]=(0,u.useState)(!0),i=!!t;(0,u.useEffect)(()=>{r(i)},[i]);const c=t||n.length>0||a.length>0,l=n.length+(t?1:0)+a.length;return c?(0,C.jsx)("div",{className:"nfd-ai-chat-message nfd-ai-chat-message--assistant",children:(0,C.jsx)("div",{className:"nfd-ai-chat-message__content",children:(0,C.jsxs)("div",{className:S()("nfd-ai-chat-tool-execution",{"nfd-ai-chat-tool-execution--collapsed":!o}),children:[(0,C.jsxs)("button",{type:"button",className:"nfd-ai-chat-tool-execution__header",onClick:()=>r(!o),"aria-expanded":o?"true":"false",children:[o?(0,C.jsx)(v.A,{className:"nfd-ai-chat-tool-execution__chevron",size:12}):(0,C.jsx)(x.A,{className:"nfd-ai-chat-tool-execution__chevron",size:12}),i?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{children:(0,d.__)("Executing actions","wp-module-ai-chat")}),t.total>1&&(0,C.jsxs)("span",{className:"nfd-ai-chat-tool-execution__header-count",children:["(",t.index,"/",t.total,")"]})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("span",{children:(0,d.__)("Actions completed","wp-module-ai-chat")}),(0,C.jsxs)("span",{className:"nfd-ai-chat-tool-execution__header-count",children:["(",l,")"]})]})]}),o&&(0,C.jsxs)("div",{className:"nfd-ai-chat-tool-execution__list",children:[n.map((e,t)=>(0,C.jsx)(E,{tool:e,isActive:!1,isComplete:!e.isError,isError:e.isError,progress:null},e.id||`executed-${t}`)),t&&(0,C.jsx)(E,{tool:t,isActive:!0,isComplete:!1,isError:!1,progress:s},t.id||"active"),a.map((e,t)=>(0,C.jsx)(E,{tool:e,isActive:!1,isComplete:!1,isError:!1,progress:null},e.id||`pending-${t}`))]})]})})}):(0,C.jsx)("div",{className:"nfd-ai-chat-message nfd-ai-chat-message--assistant",children:(0,C.jsx)("div",{className:"nfd-ai-chat-message__content",children:(0,C.jsxs)("div",{className:"nfd-ai-chat-typing-indicator",children:[(0,C.jsxs)("span",{className:"nfd-ai-chat-typing-indicator__dots","aria-hidden":"true",children:[(0,C.jsx)("span",{}),(0,C.jsx)("span",{}),(0,C.jsx)("span",{})]}),(0,C.jsx)("span",{className:"nfd-ai-chat-typing-indicator__text",children:(()=>{switch(e){case"received":return(0,d.__)("Message received","wp-module-ai-chat");case"generating":default:return(0,d.__)("Blu is typing","wp-module-ai-chat");case"tool_call":return(0,d.__)("Executing actions","wp-module-ai-chat");case"summarizing":return(0,d.__)("Summarizing results","wp-module-ai-chat");case"completed":return(0,d.__)("Processing","wp-module-ai-chat");case"failed":return(0,d.__)("Error occurred","wp-module-ai-chat")}})()})]})})})},O=({messages:e=[],isLoading:t=!1,error:s=null,status:n=null,activeToolCall:a=null,toolProgress:o=null,executedTools:r=[],pendingTools:i=[],onApprove:c,onReject:l,onExecuteTool:d,onSendMessage:h,onSendSystemMessage:p,conversationId:m,onClearTyping:g,brandId:f})=>{const _=(0,u.useRef)(null);(0,u.useEffect)(()=>{_.current?.scrollIntoView({behavior:"smooth"})},[e,t,o]);const y=a||r.length>0||i.length>0;return(0,C.jsxs)("div",{className:"nfd-ai-chat-messages",children:[e.length>0&&e.map((e,t)=>(0,C.jsx)(A,{message:e.content,type:e.type,executedTools:e.executedTools,approvalRequest:e.approvalRequest,onApprove:c,onReject:l,onExecuteTool:d,onSendMessage:h,onSendSystemMessage:p,conversationId:m,onClearTyping:g,brandId:f,toolResults:e.toolResults},e.id||t)),s&&(0,C.jsx)($,{message:s}),t&&(0,C.jsx)(D,{status:n,activeToolCall:a,toolProgress:o,executedTools:y?r:[],pendingTools:i}),(0,C.jsx)("div",{ref:_})]})};var M=s(6427),L=s(5963),F=s(9947);const U=({onSendMessage:e,onStopRequest:t,disabled:s=!1,showStopButton:n,placeholder:a,contextComponent:o=null,showTopBorder:r=!0})=>{const i=null!=n?n:s,[c,l]=(0,u.useState)(""),[h,p]=(0,u.useState)(!1),m=(0,u.useRef)(null),g=(0,u.useRef)(null),f=(0,d.__)("How can I help you today?","wp-module-ai-chat");(0,u.useEffect)(()=>{if(m.current){m.current.style.height="auto";const e=m.current.scrollHeight,t=Math.min(e,200);m.current.style.height=`${t}px`,m.current.style.overflowY=e>200?"auto":"hidden"}},[c]),(0,u.useEffect)(()=>{!s&&m.current&&setTimeout(()=>{m.current.focus()},100)},[s]);const _=()=>{c.trim()&&!s&&(e(c),l(""),m.current&&(m.current.style.height="auto",m.current.style.overflowY="hidden",m.current.focus()))},y=["nfd-ai-chat-input",!r&&"nfd-ai-chat-input--no-top-border"].filter(Boolean).join(" ");return(0,C.jsxs)("div",{className:y,children:[(0,C.jsxs)("div",{className:"nfd-ai-chat-input__container",children:[(0,C.jsx)("textarea",{name:"nfd-ai-chat-input",ref:m,value:c,onChange:e=>l(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_())},placeholder:a||f,className:"nfd-ai-chat-input__textarea",rows:1,disabled:s}),(0,C.jsxs)("div",{className:"nfd-ai-chat-input__actions",children:[o,i?(0,C.jsx)(M.Button,{ref:g,icon:(0,C.jsx)(L.A,{width:16,height:16}),label:(0,d.__)("Stop generating","wp-module-ai-chat"),onClick:()=>{h||(p(!0),t&&t(),setTimeout(()=>{p(!1)},500))},className:"nfd-ai-chat-input__stop",disabled:h,"aria-busy":h}):(0,C.jsx)(M.Button,{icon:(0,C.jsx)(F.A,{width:16,height:16}),label:(0,d.__)("Send message","wp-module-ai-chat"),onClick:_,className:"nfd-ai-chat-input__submit",disabled:!c.trim()})]})]}),(0,C.jsx)("div",{className:"nfd-ai-chat-input__disclaimer",children:(0,d.__)("AI-generated content is not guaranteed for accuracy.","wp-module-ai-chat")})]})},P=({width:e=24,height:t=24})=>(0,C.jsx)("div",{className:"nfd-ai-chat-avatar",style:{width:e,height:t},children:(0,C.jsx)(k.A,{width:.625*e,height:.625*t})}),q=()=>(0,C.jsx)("span",{className:"nfd-ai-chat-blu-beta-badge",children:(0,d.__)("BETA","wp-module-ai-chat")}),W=({title:e,badge:t,logo:s,leftActions:n,rightActions:a,className:o=""})=>(0,C.jsxs)("div",{className:`nfd-ai-chat-header ${o}`.trim(),role:"banner",children:[(0,C.jsxs)("div",{className:"nfd-ai-chat-header__brand",children:[s,null!=e&&(0,C.jsx)("span",{className:"nfd-ai-chat-header__title",children:e}),t]}),(n||a)&&(0,C.jsxs)("div",{className:"nfd-ai-chat-header__actions",children:[n,a]})]}),z=e=>(0,C.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",...e,children:(0,C.jsx)("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),H=({title:e,onNewChat:t,onClose:s,extraActions:n,newChatDisabled:a=!1})=>(0,C.jsx)(W,{logo:(0,C.jsx)(P,{width:24,height:24}),title:e||(0,d.__)("Blu Chat","wp-module-ai-chat"),badge:(0,C.jsx)(q,{}),rightActions:(0,C.jsxs)(C.Fragment,{children:["function"==typeof t&&(0,C.jsx)("button",{type:"button",className:"nfd-ai-chat-header__btn nfd-ai-chat-header__btn--new",onClick:a?void 0:t,disabled:a,"aria-label":(0,d.__)("New chat","wp-module-ai-chat"),title:(0,d.__)("New chat","wp-module-ai-chat"),children:"+"}),n,"function"==typeof s&&(0,C.jsx)("button",{type:"button",className:"nfd-ai-chat-header__btn nfd-ai-chat-header__btn--close",onClick:s,"aria-label":(0,d.__)("Close","wp-module-ai-chat"),title:(0,d.__)("Close","wp-module-ai-chat"),children:(0,C.jsx)(z,{})})]})}),B=({icon:e,text:t,onClick:s,className:n=""})=>(0,C.jsxs)(M.Button,{className:`nfd-ai-chat-suggestion ${n}`,onClick:s,children:[(0,C.jsx)("div",{className:"nfd-ai-chat-suggestion__icon",children:e}),(0,C.jsx)("div",{className:"nfd-ai-chat-suggestion__text",children:t})]}),J=({onSendMessage:e,title:t,subtitle:s,suggestions:n=[],showSuggestions:a=!1,animateWelcome:o=!1})=>{const r=(0,d.__)("Hi, I'm your AI assistant.","wp-module-ai-chat"),i=(0,d.__)("How can I help you today?","wp-module-ai-chat"),c=t||r,l=s||i,h=`${c} ${l}`,[p,m]=(0,u.useState)(0),g=(0,u.useRef)(null);(0,u.useEffect)(()=>{if(!o)return void m(h.length);m(0);const e=()=>{m(t=>t>=h.length?t:(g.current=setTimeout(e,40),t+1))};return g.current=setTimeout(e,40),()=>{g.current&&clearTimeout(g.current)}},[o,h]);const f=o&&p<h.length,_=f&&p<=c.length?c.slice(0,p):c,y=f?p>c.length?l.slice(0,p-c.length-1):"":l;return(0,C.jsxs)("div",{className:"nfd-ai-chat-welcome",children:[(0,C.jsxs)("div",{className:"nfd-ai-chat-welcome__content",children:[(0,C.jsx)("div",{className:"nfd-ai-chat-welcome__avatar",children:(0,C.jsx)(P,{width:64,height:64})}),(0,C.jsxs)("div",{className:"nfd-ai-chat-welcome__message",children:[(0,C.jsx)("div",{className:"nfd-ai-chat-welcome__title",children:_}),(0,C.jsxs)("div",{className:"nfd-ai-chat-welcome__subtitle",children:[y,f&&p<h.length&&(0,C.jsx)("span",{className:"nfd-ai-chat-welcome__cursor","aria-hidden":"true"})]})]})]}),a&&n.length>0&&(0,C.jsx)("div",{className:"nfd-ai-chat-suggestions",children:n.map((t,s)=>(0,C.jsx)(B,{icon:t.icon,text:t.text,onClick:()=>e(t.action||t.text)},s))})]})};var K=s(2836);const G=e=>{const t=e.messages||e;return Array.isArray(t)&&t.some(e=>("user"===e.role||"user"===e.type)&&e.content&&String(e.content).trim())},V=({storageNamespace:e,onSelectConversation:t,refreshTrigger:s=0,disabled:n=!1,emptyMessage:a=null,maxHistoryItems:o=3})=>{const[r,i]=(0,u.useState)([]),c=m(e);if((0,u.useEffect)(()=>{try{const e=localStorage.getItem(c.archive);if(e){const t=JSON.parse(e);if(Array.isArray(t)&&t.length>0){const e=t.slice(0,o);e.length<t.length&&localStorage.setItem(c.archive,JSON.stringify(e));const s=e.map(e=>{var t,s;const n=(e.messages||[]).map(e=>({...e,timestamp:e.timestamp?new Date(e.timestamp):new Date}));return{sessionId:null!==(t=e.sessionId)&&void 0!==t?t:null,conversationId:null!==(s=e.conversationId)&&void 0!==s?s:null,messages:n}}).filter(G);return void i(s)}}const t=localStorage.getItem(c.history);if(t){const e=JSON.parse(t);if(Array.isArray(e)&&e.length>0){const t=((e,t)=>{if(!Array.isArray(e)||0===e.length)return[];const s={},n=[];e.forEach(e=>{if(e.sessionId){s[e.sessionId]||(s[e.sessionId]={sessionId:e.sessionId,messages:[],timestamp:e.timestamp?new Date(e.timestamp).getTime():0}),s[e.sessionId].messages.push(e);const t=e.timestamp?new Date(e.timestamp).getTime():0;t>s[e.sessionId].timestamp&&(s[e.sessionId].timestamp=t)}else n.push(e)});let a=Object.values(s).sort((e,t)=>t.timestamp-e.timestamp).map(e=>({sessionId:e.sessionId,messages:e.messages}));if(n.length>0&&a.length<t){const e=(e=>{const t=[];let s=[],n=null;return e.forEach(e=>{const a=e.timestamp?new Date(e.timestamp).getTime():Date.now();n&&a-n>3e5&&s.length>0&&(t.push({sessionId:null,messages:[...s]}),s=[]),s.push(e),n=a}),s.length>0&&t.push({sessionId:null,messages:s}),t.reverse()})(n);a=[...a,...e]}return a=a.filter(G),a.slice(0,t)})(e.map(e=>({...e,timestamp:e.timestamp?new Date(e.timestamp):new Date})),o);i(t)}}}catch(e){console.warn("[Chat History] Failed to load chat history:",e)}},[e,s,o]),0===r.length)return a?(0,C.jsx)("div",{className:"nfd-ai-chat-history-list nfd-ai-chat-history-list--empty",children:a}):null;const l=e=>{if(!n)try{const s=(e.messages||e).map(e=>({...e,timestamp:e.timestamp instanceof Date?e.timestamp.toISOString():e.timestamp}));localStorage.setItem(c.history,JSON.stringify(s)),e.sessionId&&localStorage.setItem(c.sessionId,e.sessionId),e.conversationId&&localStorage.setItem(c.conversationId,e.conversationId),t&&t(e)}catch(e){console.warn("[Chat History] Failed to restore conversation:",e)}};return(0,C.jsx)("div",{className:"nfd-ai-chat-history-list",children:r.map((e,t)=>{const s=(e=>{const t=(e.messages||e).find(e=>"user"===e.role||"user"===e.type);if(t&&t.content){const e=t.content;return e.length>50?e.substring(0,50)+"...":e}return(0,d.__)("Previous conversation","wp-module-ai-chat")})(e),a=e.sessionId||`legacy-${t}`;return(0,C.jsxs)("div",{className:"nfd-ai-chat-history-item"+(n?" nfd-ai-chat-history-item--disabled":""),role:"button",tabIndex:n?-1:0,"aria-disabled":n,onClick:()=>l(e),onKeyDown:t=>{n||"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),l(e))},children:[(0,C.jsx)(K.A,{width:14,height:14,"aria-hidden":!0}),(0,C.jsx)("span",{children:s})]},a)})})},Y=e=>(0,C.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",...e,children:[(0,C.jsx)("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"2"}),(0,C.jsx)("path",{d:"M12 7v5l3 3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),X=({storageNamespace:e,open:t,onOpenChange:s,onSelectConversation:n,refreshTrigger:a=0,disabled:o=!1,maxHistoryItems:r})=>{const i=(0,u.useRef)(null),c=(0,u.useRef)(null),[l,h]=(0,u.useState)({top:0,left:0,openUp:!1}),p=(0,u.useCallback)(()=>{if(!i.current)return;const e=i.current.getBoundingClientRect(),t=window.innerHeight-e.bottom,s=t<280&&e.top>t;h({top:s?e.top:e.bottom,left:e.right,openUp:s})},[]);(0,u.useLayoutEffect)(()=>{t&&p()},[t,p]),(0,u.useEffect)(()=>{if(!t)return;const e=()=>p();return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t,p]),(0,u.useEffect)(()=>{if(!t)return;const e=e=>{i.current?.contains(e.target)||c.current?.contains(e.target)||s(!1)},n=e=>{"Escape"===e.key&&s(!1)};return document.addEventListener("mousedown",e),document.addEventListener("keydown",n),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",n)}},[t,s]);const m=(0,u.useCallback)(e=>{n(e),s(!1)},[n,s]),g=(0,C.jsx)("div",{ref:c,className:"nfd-ai-chat-history-dropdown",role:"dialog","aria-label":(0,d.__)("Chat history","wp-module-ai-chat"),style:{position:"fixed",top:l.openUp?"auto":l.top,bottom:l.openUp?window.innerHeight-l.top:"auto",left:"auto",right:window.innerWidth-l.left,zIndex:1e5},children:(0,C.jsx)("div",{className:"nfd-ai-chat-history-dropdown-inner",children:(0,C.jsx)(V,{storageNamespace:e,onSelectConversation:m,disabled:o,refreshTrigger:t?a:0,emptyMessage:(0,d.__)("No conversations yet.","wp-module-ai-chat"),maxHistoryItems:r})})});return(0,C.jsxs)("div",{className:"nfd-ai-chat-history-dropdown-wrapper",children:[(0,C.jsx)("button",{ref:i,type:"button",className:"nfd-ai-chat-history-dropdown-trigger "+(t?"is-open":""),onClick:()=>{o||s(!t)},disabled:o,"aria-expanded":t,"aria-haspopup":"true","aria-label":(0,d.__)("Chat history","wp-module-ai-chat"),title:(0,d.__)("Chat history","wp-module-ai-chat"),children:(0,C.jsx)(Y,{})}),t&&(0,u.createPortal)(g,document.body)]})};var Z=s(3875),Q=s(3733);function ee(e){const t=e&&String(e).trim()?`"${String(e).trim()}"`:"this",s=window?.nfdHelpCenter?.resourceLink||"#",n=(0,d.__)("Resource center","wp-module-help-center"),a=(0,d.__)("You can try searching our ","wp-module-help-center"),o=(0,d.__)(" though to see if there's a helpful article or video on that subject.","wp-module-help-center"),r=(0,d.sprintf)((0,d.__)("Sorry, I don't have any information on %s yet.","wp-module-help-center"),t),i=(0,d.__)("Try to:","wp-module-help-center"),c=(0,d.__)("Use different keywords in the search field.","wp-module-help-center"),l=(0,d.__)("A clear, short prompt can make the difference.","wp-module-help-center"),u=(0,d.__)("Reach out to our customer support.","wp-module-help-center"),h=(0,d.__)("Call at","wp-module-help-center"),p=(0,d.__)("or","wp-module-help-center"),m=(0,d.__)("Chat Live","wp-module-help-center"),g=(0,d.__)("with one of our support agents — we will assist you as soon as possible.","wp-module-help-center");return["<p>"+r+"</p>","<p><strong>"+i+"</strong></p>","<ul>","<li>"+te(a)+'<a href="'+(f=s,te(f)+'" target="_blank" rel="noopener noreferrer">')+te(n)+"</a>"+te(o)+"</li>","<li>"+te(c+" "+l)+"</li>","<li>"+te(u+" "+h)+' <a href="tel:8884014678">888-401-4678</a> '+te(p)+" "+te(m)+" "+te(g)+"</li>","</ul>"].join("");var f}function te(e){return"string"!=typeof e?"":e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}var se=s(1069),ne=s(4989);var ae=s(7738);const oe=()=>{const[e]=(()=>{const[e,t]=(0,u.useState)(()=>se.Sp.getHelpVisible());return(0,u.useEffect)(()=>{const e=()=>{t(se.Sp.getHelpVisible())};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[]),[e,t]})(),{hasLaunchedFromTooltip:t}=(0,ne.X)(),{onClose:s}=(0,Q.b_)(),n=(0,u.useRef)(!1),[a,o]=(0,u.useState)(!1),[r,i]=(0,u.useState)(0),c=(0,d.__)("Connecting…","wp-module-help-center"),l=(()=>{try{if("true"===localStorage.getItem("nfd-ai-chat-help_center-load-history"))return localStorage.removeItem("nfd-ai-chat-help_center-load-history"),!0}catch(e){}return!1})(),{messages:h,sendMessage:f,sendSystemMessage:_,isTyping:y,isConnecting:w,currentResponse:v,conversationId:x,clearApprovalRequest:b,clearTyping:S,updateMessage:j,stopRequest:I,clearChatHistory:N,loadConversation:A,getSessionId:$,connectionState:T,manualRetry:k,brandId:R}=(({configEndpoint:e,storageNamespace:t="default",autoConnect:s=!1,consumerType:n="editor_chat",autoLoadHistory:a=!0,getConnectionFailedFallbackMessage:o}={})=>{const r=`nfd-ai-chat-${t}-history`,i=`nfd-ai-chat-${t}-conversation-id`,c=`nfd-ai-chat-${t}-session-id`,l=()=>{try{const e=localStorage.getItem(r),t=localStorage.getItem(i),s=localStorage.getItem(c);if(e){const n=JSON.parse(e);if(Array.isArray(n)&&n.length>0)return{messages:n.map(e=>({...e,timestamp:e.timestamp?new Date(e.timestamp):new Date})),conversationId:t||null,sessionId:s||null}}}catch(e){console.warn("[AI Chat] Failed to restore chat history from localStorage:",e)}return{messages:[],conversationId:null,sessionId:null}},[h,m]=(0,u.useState)(()=>a?l().messages:[]),[f,_]=(0,u.useState)(()=>a?l().conversationId:null),[y,w]=(0,u.useState)(!1),[v,x]=(0,u.useState)(!1),[b,S]=(0,u.useState)(null),[C,j]=(0,u.useState)(!1),[I,N]=(0,u.useState)(""),[A,$]=(0,u.useState)(null),[T,k]=(0,u.useState)(()=>{try{if("1"===sessionStorage.getItem(`nfd-ai-chat-${t}-connection-failed`))return"failed"}catch(e){}return"disconnected"}),[R,E]=(0,u.useState)(0),D=(0,u.useRef)(null),O=(0,u.useRef)(null),M=(0,u.useRef)(0),L=(0,u.useRef)(null),F=(0,u.useRef)(null),U=(0,u.useRef)(!1),P=(0,u.useRef)(a?l().sessionId:null),q=(0,u.useRef)(!1),W=(0,u.useRef)(!1),z=(0,u.useRef)(null),H=(0,u.useRef)(!0),B=(0,u.useRef)([]),J=(0,u.useRef)(T),K=(0,u.useRef)(T),G=6e4,V=(0,u.useCallback)(()=>"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),[]),Y=(0,u.useCallback)(async()=>{try{let s=e;if(e.startsWith("http://")||e.startsWith("https://")){const t=new URL(e);s=t.searchParams.has("rest_route")?t.searchParams.get("rest_route"):t.pathname.includes("/wp-json/")?t.pathname.replace("/wp-json/",""):t.pathname.replace(/^\//,"")}const n=`${s.startsWith("/")?s.slice(1):s}?storage_namespace=${encodeURIComponent(t)}`,a=await p()({path:n,parse:!0});return L.current=a,a}catch(e){console.error("[AI Chat] Failed to fetch config:",e),console.error("[AI Chat] Error details:",{message:e.message,code:e.code,data:e.data,status:e.data?.status,statusText:e.data?.statusText});let t=e.message||(0,d.__)("Failed to connect","wp-module-ai-chat");throw e.data?.message?t=e.data.message:e.message&&"Could not get a valid response from the server."!==e.message&&(t=e.message),"rest_forbidden"===e.code||403===e.data?.status?t=(0,d.__)("Access denied. Please check your capabilities.","wp-module-ai-chat"):"rest_no_route"===e.code||404===e.data?.status?t=(0,d.__)("Config endpoint not found. Please ensure the backend is deployed.","wp-module-ai-chat"):"gateway_url_not_configured"===e.code?t=(0,d.__)("Gateway URL not configured. Set NFD_AGENTS_CHAT_GATEWAY_URL in wp-config.php.","wp-module-ai-chat"):"huapi_token_fetch_failed"===e.code?t=(0,d.__)("Failed to fetch authentication token from Hiive. Check your connection or set NFD_AGENTS_CHAT_DEBUG_TOKEN for local development.","wp-module-ai-chat"):e.data?.status&&(t=(0,d.sprintf)(/* translators: %1$s: HTTP status, %2$s: status text */ /* translators: %1$s: HTTP status, %2$s: status text */
(0,d.__)("Failed to fetch config: %1$s %2$s","wp-module-ai-chat"),e.data.status,e.data.statusText||t)),S((0,d.sprintf)(/* translators: %s: error message */ /* translators: %s: error message */
(0,d.__)("Failed to connect: %s","wp-module-ai-chat"),t)),new Error(t)}},[e,t]),X=(0,u.useCallback)(async()=>{if(D.current?.readyState!==WebSocket.OPEN&&D.current?.readyState!==WebSocket.CONNECTING&&!U.current){try{sessionStorage.removeItem(`nfd-ai-chat-${t}-connection-failed`)}catch(e){}U.current=!0,x(!0),k("connecting"),S(null);try{L.current||await Y();const s=L.current;if(!s)throw new Error((0,d.__)("No configuration available","wp-module-ai-chat"));P.current||(P.current=V());const a=(e=s.gateway_url)&&"string"==typeof e?e.startsWith("http://")?e.replace("http://","ws://"):e.startsWith("https://")?e.replace("https://","wss://"):e.startsWith("ws://")||e.startsWith("wss://")?e:(e=>{if(!e||"string"!=typeof e)return!1;const t=e.toLowerCase();return t.includes("localhost")||t.includes("127.0.0.1")})(e)?`ws://${e}`:`wss://${e}`:e,o=("nfd-agents"===s.agent_type?"blu":s.agent_type)||"blu";let r=`${a}/${s.brand_id}/agents/${o}/v1/ws?session_id=${P.current}&token=${encodeURIComponent(s.huapi_token)}`;const l=`wordpress_${n}`;r+=`&consumer=${encodeURIComponent(l)}`,s.site_url&&console.warn("[AI Chat] site_url parameter is deprecated. Use consumerType instead.");const u=new WebSocket(r);D.current=u,u.onopen=()=>{U.current=!1,w(!0),x(!1),k("connected"),E(0),S(null),M.current=0,q.current=B.current&&B.current.length>0,W.current=!1,N("")},u.onmessage=e=>{try{const t=JSON.parse(e.data);if(W.current&&"session_established"!==t.type)return;if("session_established"===t.type){if(t.session_id){P.current=t.session_id;try{localStorage.setItem(c,t.session_id)}catch(e){console.warn("[AI Chat] Failed to save session ID to localStorage:",e)}}}else if("typing_start"===t.type)j(!0),z.current&&(clearTimeout(z.current),z.current=null);else if("typing_stop"===t.type)j(!1),N(""),z.current&&(clearTimeout(z.current),z.current=null);else if("streaming_chunk"===t.type||"chunk"===t.type){if(W.current)return;const e=t.content||t.chunk||t.text||"";e&&N(t=>{const s=t+e;return!q.current&&s.length<100&&g(s)?(console.debug("[AI Chat] Filtering initial greeting:",s.substring(0,50)),""):(j(!0),z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{j(!1),z.current=null},G),s)})}else if("structured_output"===t.type){const e=t.response_content?.content?.human_input_request;if(e&&"APPROVAL_REQUEST"===(e.input_type||e.inputType||"").toUpperCase()){if(t.conversation_id||t.conversationId){const e=t.conversation_id||t.conversationId;_(e);try{localStorage.setItem(i,e)}catch(e){console.warn("[AI Chat] Failed to save conversation ID to localStorage:",e)}}return}const s=t.message||t.response_content?.message,n=s?.trim();if(n&&"No content provided"!==n&&"sales_requested"!==n&&"sales_requested"!==n.toLowerCase()){if(!q.current&&n.length<150&&g(n))return console.debug("[AI Chat] Filtering greeting message:",n.substring(0,50)),void N("");N(e=>(e&&m(t=>[...t,{id:`msg-${Date.now()}-streaming`,role:"assistant",type:"assistant",content:e,timestamp:new Date}]),"")),m(e=>[...e,{id:`msg-${Date.now()}`,role:"assistant",type:"assistant",content:n,timestamp:new Date}]),j(!1),N(""),z.current&&(clearTimeout(z.current),z.current=null)}}else if("tool_result"===t.type){if(t.conversation_id||t.conversationId){const e=t.conversation_id||t.conversationId;_(e);try{localStorage.setItem(i,e)}catch(e){console.warn("[AI Chat] Failed to save conversation ID to localStorage:",e)}}}else if("message"===t.type||"complete"===t.type){let e=!1;if(N(t=>{if(t){const s=t.trim();if("No content provided"===s||"sales_requested"===s||"sales_requested"===s.toLowerCase())return"";if(!q.current&&t.length<150&&g(t))return console.debug("[AI Chat] Filtering greeting in complete message:",t.substring(0,50)),"";m(e=>[...e,{id:`msg-${Date.now()}`,role:"assistant",type:"assistant",content:t,timestamp:new Date}]),e=!0}return""}),!e){const s=t.message||t.response_content?.message,n=s?.trim();n&&"No content provided"!==n&&"sales_requested"!==n&&"sales_requested"!==n.toLowerCase()&&(!q.current&&n.length<150&&g(n)?console.debug("[AI Chat] Filtering greeting in message payload:",n.substring(0,50)):(m(e=>[...e,{id:`msg-${Date.now()}`,role:"assistant",type:"assistant",content:n,timestamp:new Date}]),e=!0))}e&&(j(!1),N(""),z.current&&(clearTimeout(z.current),z.current=null))}else if("handoff_request"===t.type){const e=t.message||t.response_content?.message,s=e?.trim();if(!s||"No content provided"===s||"sales_requested"===s||"sales_requested"===s.toLowerCase())return void N("");m(e=>[...e,{id:`msg-${Date.now()}`,role:"assistant",type:"assistant",content:s,timestamp:new Date}]),j(!1),N(""),z.current&&(clearTimeout(z.current),z.current=null)}else if("error"===t.type)S(t.message||t.error||(0,d.__)("An error occurred","wp-module-ai-chat")),j(!1),N("");else if(t.message||t.response_content?.message){const e=t.message||t.response_content?.message,s=e?.trim();if(!s||"No content provided"===s||"sales_requested"===s||"sales_requested"===s.toLowerCase())return void N("");if(!q.current&&s.length<150&&g(s))return console.debug("[AI Chat] Filtering greeting in generic message:",s.substring(0,50)),void N("");m(e=>[...e,{id:`msg-${Date.now()}`,role:"assistant",type:"assistant",content:s,timestamp:new Date}]),j(!1),N(""),z.current&&(clearTimeout(z.current),z.current=null)}}catch(e){console.error("[AI Chat] Error parsing WebSocket message:",e)}},u.onerror=e=>{console.error("[AI Chat] WebSocket error:",e),U.current=!1,S((0,d.__)("Connection error. Please check server status and configuration.","wp-module-ai-chat")),x(!1),k("failed");try{sessionStorage.setItem(`nfd-ai-chat-${t}-connection-failed`,"1")}catch(e){}},u.onclose=e=>{if(U.current=!1,w(!1),x(!1),j(!1),D.current===u&&(D.current=null),1e3!==e.code&&M.current<5){M.current++,E(M.current),k("reconnecting");const e=1e3*Math.pow(2,M.current-1);O.current=setTimeout(()=>{X()},e)}else if(M.current>=5){k("failed"),S((0,d.__)("Failed to reconnect. Please refresh the page.","wp-module-ai-chat"));try{sessionStorage.setItem(`nfd-ai-chat-${t}-connection-failed`,"1")}catch(e){}}else k("disconnected")}}catch(e){U.current=!1,console.error("[AI Chat] Error creating WebSocket:",e),S(e.message||(0,d.__)("Failed to connect. Please check configuration and server status.","wp-module-ai-chat")),x(!1),k("failed");try{sessionStorage.setItem(`nfd-ai-chat-${t}-connection-failed`,"1")}catch(e){}}var e}},[Y,V,t]);(0,u.useEffect)(()=>{B.current=h},[h]),(0,u.useEffect)(()=>{J.current=T},[T]),(0,u.useEffect)(()=>{"failed"===T&&"failed"!==K.current?(K.current=T,m(e=>{if(0===e.length)return e;const t=e[e.length-1];if("user"!==t.role||"user"!==t.type)return e;const s="function"==typeof o?o(t.content):(0,d.__)("Sorry, we couldn't connect. Please try again later or contact support.","wp-module-ai-chat");return[...e,{id:`msg-${Date.now()}-fallback`,role:"assistant",type:"assistant",content:s,timestamp:new Date}]}),S(null),N(""),j(!1),z.current&&(clearTimeout(z.current),z.current=null)):K.current=T},[T,o]);const Z=(0,u.useCallback)((e,t=null)=>{if(W.current=!1,q.current=!0,("failed"===J.current||M.current>=5&&(!D.current||D.current.readyState!==WebSocket.OPEN))&&!t){const t={id:`msg-${Date.now()}`,role:"user",type:"user",content:e,timestamp:new Date,sessionId:P.current},s="function"==typeof o?o(e):(0,d.__)("Sorry, we couldn't connect. Please try again later or contact support.","wp-module-ai-chat");return m(e=>[...e,t,{id:`msg-${Date.now()}-fallback`,role:"assistant",type:"assistant",content:s,timestamp:new Date}]),S(null),N(""),void j(!1)}if(!D.current||D.current.readyState!==WebSocket.OPEN){if(!t){const t={id:`msg-${Date.now()}`,role:"user",type:"user",content:e,timestamp:new Date,sessionId:P.current};m(e=>[...e,t])}return void S((0,d.__)("Not connected. Please wait for connection.","wp-module-ai-chat"))}if(!t){const t={id:`msg-${Date.now()}`,role:"user",type:"user",content:e,timestamp:new Date,sessionId:P.current};m(e=>[...e,t]),N(""),j(!0),z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{j(!1),z.current=null},G)}const s={type:"chat",message:e};t?s.conversationId=t:f&&(s.conversationId=f),D.current.send(JSON.stringify(s))},[f,o]),Q=(0,u.useCallback)(e=>{if(!D.current||D.current.readyState!==WebSocket.OPEN)return void console.warn("[AI Chat] Cannot send system message - not connected");const t={type:"chat",message:e};f&&(t.conversationId=f),j(!0),N(""),z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{j(!1),z.current=null},G),D.current.send(JSON.stringify(t))},[f]),ee=(0,u.useCallback)(()=>{O.current&&clearTimeout(O.current),z.current&&(clearTimeout(z.current),z.current=null),D.current&&(D.current.close(1e3,"User disconnected"),D.current=null),w(!1),x(!1),k("disconnected")},[]),te=(0,u.useCallback)(e=>{P.current=null!=e?e:null},[]),se=(0,u.useCallback)((e,t,s)=>{if(Array.isArray(e)){const t=e.map(e=>({...e,timestamp:e.timestamp?new Date(e.timestamp):new Date}));m(t)}_(null!=t?t:null),P.current=null!=s?s:null,S(null),j(!1),N("")},[]),ne=(0,u.useCallback)(()=>{var e;return null!==(e=P.current)&&void 0!==e?e:null},[]),ae=(0,u.useCallback)(()=>{W.current=!0,j(!1),N(""),z.current&&(clearTimeout(z.current),z.current=null)},[]),oe=(0,u.useCallback)(()=>{$(null)},[]),re=(0,u.useCallback)(()=>{j(!1),z.current&&(clearTimeout(z.current),z.current=null)},[]),ie=(0,u.useCallback)(e=>{let t;if(null==e)t=(0,d.__)("No content provided.","wp-module-ai-chat");else if("object"==typeof e)try{t=JSON.stringify(e,null,2)}catch(s){console.warn("[useNfdAgentsWebSocket] Failed to stringify content object:",s),t=String(e)}else t=String(e);m(e=>[...e,{id:`msg-${Date.now()}`,role:"assistant",type:"assistant",content:t,timestamp:new Date}]),j(!1),z.current&&(clearTimeout(z.current),z.current=null)},[]),ce=(0,u.useCallback)((e,t)=>{m(s=>s.map(s=>("function"==typeof e?e(s):s.id===e)?t(s):s))},[]);(0,u.useEffect)(()=>{const e=F.current;if(null===e)return F.current=s,void(s&&!U.current&&(!D.current||D.current.readyState!==WebSocket.OPEN&&D.current.readyState!==WebSocket.CONNECTING)&&X());e!==s&&(F.current=s,s?U.current||D.current&&(D.current.readyState===WebSocket.OPEN||D.current.readyState===WebSocket.CONNECTING)||X():ee())},[s]);const le=e=>Array.isArray(e)&&e.some(e=>("user"===e.role||"user"===e.type)&&e.content&&String(e.content).trim());(0,u.useEffect)(()=>{if(H.current){if(H.current=!1,h.length>0&&le(h))try{localStorage.setItem(r,JSON.stringify(h))}catch(e){console.warn("[AI Chat] Failed to save messages to localStorage:",e)}}else try{le(h)?localStorage.setItem(r,JSON.stringify(h)):localStorage.removeItem(r)}catch(e){console.warn("[AI Chat] Failed to save messages to localStorage:",e)}},[h]),(0,u.useEffect)(()=>{try{f?localStorage.setItem(i,f):localStorage.removeItem(i)}catch(e){console.warn("[AI Chat] Failed to save conversation ID to localStorage:",e)}},[f]);const ue=(0,u.useCallback)(()=>{try{localStorage.removeItem(r),localStorage.removeItem(i),localStorage.removeItem(c),m([]),_(null),$(null),j(!1),N(""),S(null),P.current=null,D.current&&(D.current.close(),D.current=null,w(!1)),q.current=!1,W.current=!1,z.current&&(clearTimeout(z.current),z.current=null),O.current&&(clearTimeout(O.current),O.current=null),M.current=0}catch(e){console.warn("[AI Chat] Failed to clear chat history:",e)}},[]),de=(0,u.useCallback)(()=>{M.current=0,E(0),S(null),X()},[X]);return{messages:h,setMessages:m,setConversationId:_,setSessionId:te,loadConversation:se,getSessionId:ne,sendMessage:Z,sendSystemMessage:Q,isConnected:y,isConnecting:v,error:b,isTyping:C,currentResponse:I,approvalRequest:A,conversationId:f,clearApprovalRequest:oe,clearTyping:re,addAssistantMessage:ie,updateMessage:ce,connect:X,disconnect:ee,stopRequest:ae,clearChatHistory:ue,brandId:L.current?.brand_id||null,connectionState:T,retryAttempt:R,maxRetries:5,manualRetry:de}})({configEndpoint:"/nfd-agents/chat/v1/config",storageNamespace:"help_center",autoConnect:e,consumerType:"help_center",autoLoadHistory:l,getConnectionFailedFallbackMessage:ee}),E=((e,{speed:t=50,enabled:s=!0,loop:n=!1,loopDelay:a=1e3}={})=>{const[o,r]=(0,u.useState)(""),i=(0,u.useRef)(0),c=(0,u.useRef)(null);return(0,u.useEffect)(()=>{if(!s||!e)return r(s?"":e),void(i.current=0);c.current&&clearTimeout(c.current),r(""),i.current=0;const o=()=>{i.current<e.length?(i.current++,r(e.slice(0,i.current)),c.current=setTimeout(o,t)):n&&(c.current=setTimeout(()=>{i.current=0,r(""),c.current=setTimeout(o,t)},a))};return c.current=setTimeout(o,t),()=>{c.current&&clearTimeout(c.current)}},[e,t,s,n,a]),o})(c,{speed:80,enabled:w,loop:!0,loopDelay:500}),D=(0,u.useCallback)(e=>{var t,s;const n=e.messages||e;A(n,null!==(t=e.conversationId)&&void 0!==t?t:null,null!==(s=e.sessionId)&&void 0!==s?s:null)},[A]),M=(0,u.useCallback)(()=>{j&&j(e=>"approval_request"===e.type&&e.approvalRequest,e=>({...e,type:"assistant",content:(0,d.__)("Action approved and executed.","wp-module-help-center"),approvalRequest:null})),b()},[b,j]),L=(0,u.useCallback)(()=>{j&&j(e=>"approval_request"===e.type&&e.approvalRequest,e=>{const t=e.approvalRequest?.tool_name||"action";return{...e,type:"assistant",content:(0,d.sprintf)(/* translators: %s: the name of the action or tool that was cancelled */ /* translators: %s: the name of the action or tool that was cancelled */
(0,d.__)('Action "%s" was cancelled.',"wp-module-help-center"),t),approvalRequest:null}}),b()},[b,j]),F=(0,u.useCallback)(()=>{h.length>0&&function(e,t,s,n,a={}){var o;if(!e||0===e.length)return;if(!e.some(e=>("user"===e.role||"user"===e.type)&&e.content&&String(e.content).trim()))return;const r=null!==(o=a.maxHistoryItems)&&void 0!==o?o:3,i=m(n);try{const n=JSON.parse(localStorage.getItem(i.archive)||"[]");n.unshift({sessionId:t,conversationId:s,messages:e.map(e=>({...e,timestamp:e.timestamp instanceof Date?e.timestamp.toISOString():e.timestamp})),archivedAt:(new Date).toISOString()}),localStorage.setItem(i.archive,JSON.stringify(n.slice(0,r)))}catch(e){console.warn("[Chat History] Failed to archive conversation:",e)}}(h,$(),x,"help_center"),n.current=!1,N()},[h,x,N,$]),P=[...h];v&&y&&P.push({id:"streaming",role:"assistant",type:"assistant",content:v,timestamp:new Date});const q=0===P.length&&!n.current;(0,u.useEffect)(()=>{P.length>0&&(n.current=!0)},[P.length]);const W=("nfd-help-center-chat nfd-ai-chat-container "+(R?`nfd-brand-${R}`:"")).trim(),z=h.length>0;let B;return B=q?(0,C.jsx)("div",{className:"nfd-help-center-chat__welcome-wrapper",children:(0,C.jsx)(J,{onSendMessage:f,title:(0,d.__)("Hi, I'm BLU, your AI assistant.","wp-module-help-center"),subtitle:(0,d.__)("I can help you update page sections and styles, add, remove, or edit existing content.","wp-module-help-center"),showSuggestions:!1})}):(0,C.jsxs)("div",{className:"nfd-help-center-chat__messages-wrapper",children:[h.length>0&&(0,C.jsx)("div",{className:"nfd-help-center-chat__messages-header",children:(0,C.jsx)("button",{onClick:F,className:"nfd-help-center-chat__clear-chat-button","aria-label":(0,d.__)("Clear chat","wp-module-help-center"),children:(0,d.__)("Clear Chat","wp-module-help-center")})}),(0,C.jsx)(O,{messages:P,isLoading:y,onApprove:M,onReject:L,onSendMessage:f,onSendSystemMessage:_,conversationId:x,onClearTyping:S,brandId:R})]}),(0,C.jsxs)("div",{className:W,"data-brand":R||void 0,children:[(0,C.jsxs)("div",{className:"nfd-help-center-chat__header-wrapper",children:[(0,C.jsx)(H,{title:(0,d.__)("Blu Chat","wp-module-help-center"),onNewChat:F,newChatDisabled:q,onClose:s,extraActions:(0,C.jsx)(X,{storageNamespace:"help_center",open:a,onOpenChange:e=>{o(e),e&&i(e=>e+1)},onSelectConversation:e=>{D(e),o(!1)},refreshTrigger:r,disabled:!1})}),(w||"reconnecting"===T)&&(0,C.jsx)("div",{className:"nfd-help-center-chat__connecting-bar","aria-live":"polite","aria-busy":"true",children:(0,C.jsxs)("span",{className:"nfd-help-center-chat__connecting-bar-text",children:[E,(0,C.jsx)("span",{className:"nfd-help-center-chat__connecting-cursor"})]})}),"failed"===T&&(0,C.jsxs)("div",{className:"nfd-help-center-chat__retry-bar",children:[(0,C.jsx)("span",{className:"nfd-help-center-chat__retry-text",children:(0,d.__)("Couldn't connect.","wp-module-help-center")}),(0,C.jsx)("button",{type:"button",className:"nfd-help-center-chat__retry-button",onClick:k,children:(0,d.__)("Retry","wp-module-help-center")})]})]}),B,(0,C.jsx)("div",{className:"nfd-help-center-chat__input-area "+(h.length>0?"nfd-help-center-chat__input-area--no-border":""),children:(0,C.jsx)("div",{className:"nfd-help-center-chat__input-wrapper",children:(0,C.jsx)(U,{onSendMessage:f,onStopRequest:I,disabled:y,placeholder:(0,d.__)("Ask me anything about WordPress…","wp-module-help-center"),showTopBorder:!1})})}),(0,ae.$)(t)&&(0,C.jsx)("div",{className:"nfd-help-center-chat__footer-wrapper"+(z?" nfd-help-center-chat__footer-wrapper--collapsed":""),"aria-hidden":z,children:(0,C.jsx)(Z.A,{})})]})}}}]);