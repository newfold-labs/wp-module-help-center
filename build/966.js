(globalThis.webpackChunk_newfold_labs_wp_module_help_center=globalThis.webpackChunk_newfold_labs_wp_module_help_center||[]).push([[966],{92:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,s,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(s=r;0!==s--;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(s=r;0!==s--;)if(!Object.prototype.hasOwnProperty.call(n,o[s]))return!1;for(s=r;0!==s--;){var a=o[s];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}},104:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const r=n(1910),s=n(4678),o=n(3758);t.error={message:({params:{property:e,depsCount:t,deps:n}})=>{const s=1===t?"property":"properties";return r.str`must have ${s} ${n} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:n,missingProperty:s}})=>r._`{property: ${e},
    missingProperty: ${s},
    depsCount: ${t},
    deps: ${n}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,n]=function({schema:e}){const t={},n={};for(const r in e)"__proto__"!==r&&((Array.isArray(e[r])?t:n)[r]=e[r]);return[t,n]}(e);i(e,t),c(e,n)}};function i(e,t=e.schema){const{gen:n,data:s,it:a}=e;if(0===Object.keys(t).length)return;const i=n.let("missing");for(const c in t){const l=t[c];if(0===l.length)continue;const u=(0,o.propertyInData)(n,s,c,a.opts.ownProperties);e.setParams({property:c,depsCount:l.length,deps:l.join(", ")}),a.allErrors?n.if(u,()=>{for(const t of l)(0,o.checkReportMissingProp)(e,t)}):(n.if(r._`${u} && (${(0,o.checkMissingProp)(e,l,i)})`),(0,o.reportMissingProp)(e,i),n.else())}}function c(e,t=e.schema){const{gen:n,data:r,keyword:a,it:i}=e,c=n.name("valid");for(const l in t)(0,s.alwaysValidSchema)(i,t[l])||(n.if((0,o.propertyInData)(n,r,l,i.opts.ownProperties),()=>{const t=e.subschema({keyword:a,schemaProp:l},c);e.mergeValidEvaluated(t,c)},()=>n.var(c,!0)),e.ok(c))}t.validatePropertyDeps=i,t.validateSchemaDeps=c,t.default=a},154:(e,t,n)=>{"use strict";n.d(t,{JM:()=>c,Kd:()=>i,Wk:()=>l,a$:()=>a});var r=n(5514),s=n(9125);const o=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,s.k8,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},a=(0,r.xI)("$ZodError",o),i=(0,r.xI)("$ZodError",o,{Parent:Error});function c(e,t=e=>e.message){const n={},r=[];for(const s of e.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(t(s))):r.push(t(s));return{formErrors:r,fieldErrors:n}}function l(e,t){const n=t||function(e){return e.message},r={_errors:[]},s=e=>{for(const t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>s({issues:e}));else if("invalid_key"===t.code)s({issues:t.issues});else if("invalid_element"===t.code)s({issues:t.issues});else if(0===t.path.length)r._errors.push(n(t));else{let e=r,s=0;for(;s<t.path.length;){const r=t.path[s];s===t.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(n(t))):e[r]=e[r]||{_errors:[]},e=e[r],s++}}};return s(e),r}},220:(e,t,n)=>{"use strict";n.d(t,{$9:()=>Yt,EV:()=>i,GU:()=>Gt,HM:()=>Xe,Iu:()=>a,K1:()=>Et,LW:()=>O,Mg:()=>ae,Nh:()=>tn,O$:()=>Se,O4:()=>P,OR:()=>j,Ql:()=>le,Rk:()=>W,Sc:()=>ue,Sq:()=>N,TF:()=>at,TI:()=>It,WT:()=>ot,Yu:()=>Ye,_r:()=>ee,a5:()=>pe,aE:()=>o,bZ:()=>y,br:()=>et,cv:()=>Ee,fH:()=>lt,gH:()=>me,gd:()=>fe,hh:()=>je,ig:()=>T,ki:()=>ce,lg:()=>I,n_:()=>Vt,oQ:()=>de,tC:()=>J,u9:()=>xt,ve:()=>Oe,vo:()=>x,wR:()=>C,wU:()=>G,xI:()=>ut,zR:()=>he});var r=n(5636),s=n(6191);const o="2025-11-25",a=[o,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],i="io.modelcontextprotocol/related-task",c="2.0",l=r.Ie(e=>null!==e&&("object"==typeof e||"function"==typeof e)),u=r.KC([r.Yj(),r.ai().int()]),d=r.Yj(),h=(r._H({ttl:r.KC([r.ai(),r.ch()]).optional(),pollInterval:r.ai().optional()}),r.Ik({ttl:r.ai().optional()})),p=r.Ik({taskId:r.Yj()}),f=r._H({progressToken:u.optional(),[i]:p.optional()}),m=r.Ik({_meta:f.optional()}),g=m.extend({task:h.optional()}),y=e=>g.safeParse(e).success,_=r.Ik({method:r.Yj(),params:m.loose().optional()}),v=r.Ik({_meta:f.optional()}),w=r.Ik({method:r.Yj(),params:v.loose().optional()}),b=r._H({_meta:f.optional()}),$=r.KC([r.Yj(),r.ai().int()]),k=r.Ik({jsonrpc:r.eu(c),id:$,..._.shape}).strict(),x=e=>k.safeParse(e).success,E=r.Ik({jsonrpc:r.eu(c),...w.shape}).strict(),I=e=>E.safeParse(e).success,S=r.Ik({jsonrpc:r.eu(c),id:$,result:b}).strict(),T=e=>S.safeParse(e).success;var P;!function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.UrlElicitationRequired=-32042]="UrlElicitationRequired"}(P||(P={}));const A=r.Ik({jsonrpc:r.eu(c),id:$.optional(),error:r.Ik({code:r.ai().int(),message:r.Yj(),data:r.L5().optional()})}).strict(),O=e=>A.safeParse(e).success,j=r.KC([k,E,S,A]),C=(r.KC([S,A]),b.strict()),R=v.extend({requestId:$.optional(),reason:r.Yj().optional()}),N=w.extend({method:r.eu("notifications/cancelled"),params:R}),z=r.Ik({src:r.Yj(),mimeType:r.Yj().optional(),sizes:r.YO(r.Yj()).optional(),theme:r.k5(["light","dark"]).optional()}),M=r.Ik({icons:r.YO(z).optional()}),D=r.Ik({name:r.Yj(),title:r.Yj().optional()}),q=D.extend({...D.shape,...M.shape,version:r.Yj(),websiteUrl:r.Yj().optional(),description:r.Yj().optional()}),L=r.E$(r.Ik({applyDefaults:r.zM().optional()}),r.g1(r.Yj(),r.L5())),U=r.vk(e=>e&&"object"==typeof e&&!Array.isArray(e)&&0===Object.keys(e).length?{form:{}}:e,r.E$(r.Ik({form:L.optional(),url:l.optional()}),r.g1(r.Yj(),r.L5()).optional())),Y=r._H({list:l.optional(),cancel:l.optional(),requests:r._H({sampling:r._H({createMessage:l.optional()}).optional(),elicitation:r._H({create:l.optional()}).optional()}).optional()}),F=r._H({list:l.optional(),cancel:l.optional(),requests:r._H({tools:r._H({call:l.optional()}).optional()}).optional()}),H=r.Ik({experimental:r.g1(r.Yj(),l).optional(),sampling:r.Ik({context:l.optional(),tools:l.optional()}).optional(),elicitation:U.optional(),roots:r.Ik({listChanged:r.zM().optional()}).optional(),tasks:Y.optional()}),V=m.extend({protocolVersion:r.Yj(),capabilities:H,clientInfo:q}),Z=_.extend({method:r.eu("initialize"),params:V}),B=r.Ik({experimental:r.g1(r.Yj(),l).optional(),logging:l.optional(),completions:l.optional(),prompts:r.Ik({listChanged:r.zM().optional()}).optional(),resources:r.Ik({subscribe:r.zM().optional(),listChanged:r.zM().optional()}).optional(),tools:r.Ik({listChanged:r.zM().optional()}).optional(),tasks:F.optional()}),W=b.extend({protocolVersion:r.Yj(),capabilities:B,serverInfo:q,instructions:r.Yj().optional()}),K=w.extend({method:r.eu("notifications/initialized"),params:v.optional()}),G=e=>K.safeParse(e).success,J=_.extend({method:r.eu("ping"),params:m.optional()}),Q=r.Ik({progress:r.ai(),total:r.lq(r.ai()),message:r.lq(r.Yj())}),X=r.Ik({...v.shape,...Q.shape,progressToken:u}),ee=w.extend({method:r.eu("notifications/progress"),params:X}),te=m.extend({cursor:d.optional()}),ne=_.extend({params:te.optional()}),re=b.extend({nextCursor:d.optional()}),se=r.k5(["working","input_required","completed","failed","cancelled"]),oe=r.Ik({taskId:r.Yj(),status:se,ttl:r.KC([r.ai(),r.ch()]),createdAt:r.Yj(),lastUpdatedAt:r.Yj(),pollInterval:r.lq(r.ai()),statusMessage:r.lq(r.Yj())}),ae=b.extend({task:oe}),ie=v.merge(oe),ce=w.extend({method:r.eu("notifications/tasks/status"),params:ie}),le=_.extend({method:r.eu("tasks/get"),params:m.extend({taskId:r.Yj()})}),ue=b.merge(oe),de=_.extend({method:r.eu("tasks/result"),params:m.extend({taskId:r.Yj()})}),he=(b.loose(),ne.extend({method:r.eu("tasks/list")})),pe=re.extend({tasks:r.YO(oe)}),fe=_.extend({method:r.eu("tasks/cancel"),params:m.extend({taskId:r.Yj()})}),me=b.merge(oe),ge=r.Ik({uri:r.Yj(),mimeType:r.lq(r.Yj()),_meta:r.g1(r.Yj(),r.L5()).optional()}),ye=ge.extend({text:r.Yj()}),_e=r.Yj().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),ve=ge.extend({blob:_e}),we=r.k5(["user","assistant"]),be=r.Ik({audience:r.YO(we).optional(),priority:r.ai().min(0).max(1).optional(),lastModified:s.w$({offset:!0}).optional()}),$e=r.Ik({...D.shape,...M.shape,uri:r.Yj(),description:r.lq(r.Yj()),mimeType:r.lq(r.Yj()),annotations:be.optional(),_meta:r.lq(r._H({}))}),ke=r.Ik({...D.shape,...M.shape,uriTemplate:r.Yj(),description:r.lq(r.Yj()),mimeType:r.lq(r.Yj()),annotations:be.optional(),_meta:r.lq(r._H({}))}),xe=ne.extend({method:r.eu("resources/list")}),Ee=re.extend({resources:r.YO($e)}),Ie=ne.extend({method:r.eu("resources/templates/list")}),Se=re.extend({resourceTemplates:r.YO(ke)}),Te=m.extend({uri:r.Yj()}),Pe=Te,Ae=_.extend({method:r.eu("resources/read"),params:Pe}),Oe=b.extend({contents:r.YO(r.KC([ye,ve]))}),je=w.extend({method:r.eu("notifications/resources/list_changed"),params:v.optional()}),Ce=Te,Re=_.extend({method:r.eu("resources/subscribe"),params:Ce}),Ne=Te,ze=_.extend({method:r.eu("resources/unsubscribe"),params:Ne}),Me=v.extend({uri:r.Yj()}),De=w.extend({method:r.eu("notifications/resources/updated"),params:Me}),qe=r.Ik({name:r.Yj(),description:r.lq(r.Yj()),required:r.lq(r.zM())}),Le=r.Ik({...D.shape,...M.shape,description:r.lq(r.Yj()),arguments:r.lq(r.YO(qe)),_meta:r.lq(r._H({}))}),Ue=ne.extend({method:r.eu("prompts/list")}),Ye=re.extend({prompts:r.YO(Le)}),Fe=m.extend({name:r.Yj(),arguments:r.g1(r.Yj(),r.Yj()).optional()}),He=_.extend({method:r.eu("prompts/get"),params:Fe}),Ve=r.Ik({type:r.eu("text"),text:r.Yj(),annotations:be.optional(),_meta:r.g1(r.Yj(),r.L5()).optional()}),Ze=r.Ik({type:r.eu("image"),data:_e,mimeType:r.Yj(),annotations:be.optional(),_meta:r.g1(r.Yj(),r.L5()).optional()}),Be=r.Ik({type:r.eu("audio"),data:_e,mimeType:r.Yj(),annotations:be.optional(),_meta:r.g1(r.Yj(),r.L5()).optional()}),We=r.Ik({type:r.eu("tool_use"),name:r.Yj(),id:r.Yj(),input:r.g1(r.Yj(),r.L5()),_meta:r.g1(r.Yj(),r.L5()).optional()}),Ke=r.Ik({type:r.eu("resource"),resource:r.KC([ye,ve]),annotations:be.optional(),_meta:r.g1(r.Yj(),r.L5()).optional()}),Ge=$e.extend({type:r.eu("resource_link")}),Je=r.KC([Ve,Ze,Be,Ge,Ke]),Qe=r.Ik({role:we,content:Je}),Xe=b.extend({description:r.Yj().optional(),messages:r.YO(Qe)}),et=w.extend({method:r.eu("notifications/prompts/list_changed"),params:v.optional()}),tt=r.Ik({title:r.Yj().optional(),readOnlyHint:r.zM().optional(),destructiveHint:r.zM().optional(),idempotentHint:r.zM().optional(),openWorldHint:r.zM().optional()}),nt=r.Ik({taskSupport:r.k5(["required","optional","forbidden"]).optional()}),rt=r.Ik({...D.shape,...M.shape,description:r.Yj().optional(),inputSchema:r.Ik({type:r.eu("object"),properties:r.g1(r.Yj(),l).optional(),required:r.YO(r.Yj()).optional()}).catchall(r.L5()),outputSchema:r.Ik({type:r.eu("object"),properties:r.g1(r.Yj(),l).optional(),required:r.YO(r.Yj()).optional()}).catchall(r.L5()).optional(),annotations:tt.optional(),execution:nt.optional(),_meta:r.g1(r.Yj(),r.L5()).optional()}),st=ne.extend({method:r.eu("tools/list")}),ot=re.extend({tools:r.YO(rt)}),at=b.extend({content:r.YO(Je).default([]),structuredContent:r.g1(r.Yj(),r.L5()).optional(),isError:r.zM().optional()}),it=(at.or(b.extend({toolResult:r.L5()})),g.extend({name:r.Yj(),arguments:r.g1(r.Yj(),r.L5()).optional()})),ct=_.extend({method:r.eu("tools/call"),params:it}),lt=w.extend({method:r.eu("notifications/tools/list_changed"),params:v.optional()}),ut=r.Ik({autoRefresh:r.zM().default(!0),debounceMs:r.ai().int().nonnegative().default(300)}),dt=r.k5(["debug","info","notice","warning","error","critical","alert","emergency"]),ht=m.extend({level:dt}),pt=_.extend({method:r.eu("logging/setLevel"),params:ht}),ft=v.extend({level:dt,logger:r.Yj().optional(),data:r.L5()}),mt=w.extend({method:r.eu("notifications/message"),params:ft}),gt=r.Ik({name:r.Yj().optional()}),yt=r.Ik({hints:r.YO(gt).optional(),costPriority:r.ai().min(0).max(1).optional(),speedPriority:r.ai().min(0).max(1).optional(),intelligencePriority:r.ai().min(0).max(1).optional()}),_t=r.Ik({mode:r.k5(["auto","required","none"]).optional()}),vt=r.Ik({type:r.eu("tool_result"),toolUseId:r.Yj().describe("The unique identifier for the corresponding tool call."),content:r.YO(Je).default([]),structuredContent:r.Ik({}).loose().optional(),isError:r.zM().optional(),_meta:r.g1(r.Yj(),r.L5()).optional()}),wt=r.gM("type",[Ve,Ze,Be]),bt=r.gM("type",[Ve,Ze,Be,We,vt]),$t=r.Ik({role:we,content:r.KC([bt,r.YO(bt)]),_meta:r.g1(r.Yj(),r.L5()).optional()}),kt=g.extend({messages:r.YO($t),modelPreferences:yt.optional(),systemPrompt:r.Yj().optional(),includeContext:r.k5(["none","thisServer","allServers"]).optional(),temperature:r.ai().optional(),maxTokens:r.ai().int(),stopSequences:r.YO(r.Yj()).optional(),metadata:l.optional(),tools:r.YO(rt).optional(),toolChoice:_t.optional()}),xt=_.extend({method:r.eu("sampling/createMessage"),params:kt}),Et=b.extend({model:r.Yj(),stopReason:r.lq(r.k5(["endTurn","stopSequence","maxTokens"]).or(r.Yj())),role:we,content:wt}),It=b.extend({model:r.Yj(),stopReason:r.lq(r.k5(["endTurn","stopSequence","maxTokens","toolUse"]).or(r.Yj())),role:we,content:r.KC([bt,r.YO(bt)])}),St=r.Ik({type:r.eu("boolean"),title:r.Yj().optional(),description:r.Yj().optional(),default:r.zM().optional()}),Tt=r.Ik({type:r.eu("string"),title:r.Yj().optional(),description:r.Yj().optional(),minLength:r.ai().optional(),maxLength:r.ai().optional(),format:r.k5(["email","uri","date","date-time"]).optional(),default:r.Yj().optional()}),Pt=r.Ik({type:r.k5(["number","integer"]),title:r.Yj().optional(),description:r.Yj().optional(),minimum:r.ai().optional(),maximum:r.ai().optional(),default:r.ai().optional()}),At=r.Ik({type:r.eu("string"),title:r.Yj().optional(),description:r.Yj().optional(),enum:r.YO(r.Yj()),default:r.Yj().optional()}),Ot=r.Ik({type:r.eu("string"),title:r.Yj().optional(),description:r.Yj().optional(),oneOf:r.YO(r.Ik({const:r.Yj(),title:r.Yj()})),default:r.Yj().optional()}),jt=r.Ik({type:r.eu("string"),title:r.Yj().optional(),description:r.Yj().optional(),enum:r.YO(r.Yj()),enumNames:r.YO(r.Yj()).optional(),default:r.Yj().optional()}),Ct=r.KC([At,Ot]),Rt=r.Ik({type:r.eu("array"),title:r.Yj().optional(),description:r.Yj().optional(),minItems:r.ai().optional(),maxItems:r.ai().optional(),items:r.Ik({type:r.eu("string"),enum:r.YO(r.Yj())}),default:r.YO(r.Yj()).optional()}),Nt=r.Ik({type:r.eu("array"),title:r.Yj().optional(),description:r.Yj().optional(),minItems:r.ai().optional(),maxItems:r.ai().optional(),items:r.Ik({anyOf:r.YO(r.Ik({const:r.Yj(),title:r.Yj()}))}),default:r.YO(r.Yj()).optional()}),zt=r.KC([Rt,Nt]),Mt=r.KC([jt,Ct,zt]),Dt=r.KC([Mt,St,Tt,Pt]),qt=g.extend({mode:r.eu("form").optional(),message:r.Yj(),requestedSchema:r.Ik({type:r.eu("object"),properties:r.g1(r.Yj(),Dt),required:r.YO(r.Yj()).optional()})}),Lt=g.extend({mode:r.eu("url"),message:r.Yj(),elicitationId:r.Yj(),url:r.Yj().url()}),Ut=r.KC([qt,Lt]),Yt=_.extend({method:r.eu("elicitation/create"),params:Ut}),Ft=v.extend({elicitationId:r.Yj()}),Ht=w.extend({method:r.eu("notifications/elicitation/complete"),params:Ft}),Vt=b.extend({action:r.k5(["accept","decline","cancel"]),content:r.vk(e=>null===e?void 0:e,r.g1(r.Yj(),r.KC([r.Yj(),r.ai(),r.zM(),r.YO(r.Yj())])).optional())}),Zt=r.Ik({type:r.eu("ref/resource"),uri:r.Yj()}),Bt=r.Ik({type:r.eu("ref/prompt"),name:r.Yj()}),Wt=m.extend({ref:r.KC([Bt,Zt]),argument:r.Ik({name:r.Yj(),value:r.Yj()}),context:r.Ik({arguments:r.g1(r.Yj(),r.Yj()).optional()}).optional()}),Kt=_.extend({method:r.eu("completion/complete"),params:Wt}),Gt=b.extend({completion:r._H({values:r.YO(r.Yj()).max(100),total:r.lq(r.ai().int()),hasMore:r.lq(r.zM())})}),Jt=r.Ik({uri:r.Yj().startsWith("file://"),name:r.Yj().optional(),_meta:r.g1(r.Yj(),r.L5()).optional()}),Qt=_.extend({method:r.eu("roots/list"),params:m.optional()}),Xt=b.extend({roots:r.YO(Jt)}),en=w.extend({method:r.eu("notifications/roots/list_changed"),params:v.optional()});r.KC([J,Z,Kt,pt,He,Ue,xe,Ie,Ae,Re,ze,ct,st,le,de,he,fe]),r.KC([N,ee,K,en,ce]),r.KC([C,Et,It,Vt,Xt,ue,pe,ae]),r.KC([J,xt,Yt,Qt,le,de,he,fe]),r.KC([N,ee,mt,De,je,lt,et,ce,Ht]),r.KC([C,W,Gt,Xe,Ye,Ee,Se,Oe,at,ot,ue,pe,ae]);class tn extends Error{constructor(e,t,n){super(`MCP error ${e}: ${t}`),this.code=e,this.data=n,this.name="McpError"}static fromError(e,t,n){if(e===P.UrlElicitationRequired&&n){const e=n;if(e.elicitations)return new nn(e.elicitations,t)}return new tn(e,t,n)}}class nn extends tn{constructor(e,t=`URL elicitation${e.length>1?"s":""} required`){super(P.UrlElicitationRequired,t,{elicitations:e})}get elicitations(){return this.data?.elicitations??[]}}},308:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>r.str`must match format "${e}"`,params:({schemaCode:e})=>r._`{format: ${e}}`},code(e,t){const{gen:n,data:s,$data:o,schema:a,schemaCode:i,it:c}=e,{opts:l,errSchemaPath:u,schemaEnv:d,self:h}=c;l.validateFormats&&(o?function(){const o=n.scopeValue("formats",{ref:h.formats,code:l.code.formats}),a=n.const("fDef",r._`${o}[${i}]`),c=n.let("fType"),u=n.let("format");n.if(r._`typeof ${a} == "object" && !(${a} instanceof RegExp)`,()=>n.assign(c,r._`${a}.type || "string"`).assign(u,r._`${a}.validate`),()=>n.assign(c,r._`"string"`).assign(u,a)),e.fail$data((0,r.or)(!1===l.strictSchema?r.nil:r._`${i} && !${u}`,function(){const e=d.$async?r._`(${a}.async ? await ${u}(${s}) : ${u}(${s}))`:r._`${u}(${s})`,n=r._`(typeof ${u} == "function" ? ${e} : ${u}.test(${s}))`;return r._`${u} && ${u} !== true && ${c} === ${t} && !${n}`}()))}():function(){const o=h.formats[a];if(!o)return void function(){if(!1!==l.strictSchema)throw new Error(e());function e(){return`unknown format "${a}" ignored in schema at path "${u}"`}h.logger.warn(e())}();if(!0===o)return;const[i,c,p]=function(e){const t=e instanceof RegExp?(0,r.regexpCode)(e):l.code.formats?r._`${l.code.formats}${(0,r.getProperty)(a)}`:void 0,s=n.scopeValue("formats",{key:a,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,s]:[e.type||"string",e.validate,r._`${s}.validate`]}(o);i===t&&e.pass(function(){if("object"==typeof o&&!(o instanceof RegExp)&&o.async){if(!d.$async)throw new Error("async format in sync schema");return r._`await ${p}(${s})`}return"function"==typeof c?r._`${p}(${s})`:r._`${p}.test(${s})`}())}())}};t.default=s},311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const r=n(7619),s=n(8514),o=n(2693),a=n(1910),i=n(4678);var c;function l(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(r.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(c||(t.DataType=c={})),t.getSchemaTypes=function(e){const t=l(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=l,t.coerceAndCheckDataType=function(e,t){const{gen:n,data:r,opts:o}=e,i=function(e,t){return t?e.filter(e=>u.has(e)||"array"===t&&"array"===e):[]}(t,o.coerceTypes),l=t.length>0&&!(0===i.length&&1===t.length&&(0,s.schemaHasRulesForType)(e,t[0]));if(l){const s=h(t,r,o.strictNumbers,c.Wrong);n.if(s,()=>{i.length?function(e,t,n){const{gen:r,data:s,opts:o}=e,i=r.let("dataType",a._`typeof ${s}`),c=r.let("coerced",a._`undefined`);"array"===o.coerceTypes&&r.if(a._`${i} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>r.assign(s,a._`${s}[0]`).assign(i,a._`typeof ${s}`).if(h(t,s,o.strictNumbers),()=>r.assign(c,s))),r.if(a._`${c} !== undefined`);for(const e of n)(u.has(e)||"array"===e&&"array"===o.coerceTypes)&&l(e);function l(e){switch(e){case"string":return void r.elseIf(a._`${i} == "number" || ${i} == "boolean"`).assign(c,a._`"" + ${s}`).elseIf(a._`${s} === null`).assign(c,a._`""`);case"number":return void r.elseIf(a._`${i} == "boolean" || ${s} === null
              || (${i} == "string" && ${s} && ${s} == +${s})`).assign(c,a._`+${s}`);case"integer":return void r.elseIf(a._`${i} === "boolean" || ${s} === null
              || (${i} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(c,a._`+${s}`);case"boolean":return void r.elseIf(a._`${s} === "false" || ${s} === 0 || ${s} === null`).assign(c,!1).elseIf(a._`${s} === "true" || ${s} === 1`).assign(c,!0);case"null":return r.elseIf(a._`${s} === "" || ${s} === 0 || ${s} === false`),void r.assign(c,null);case"array":r.elseIf(a._`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${s} === null`).assign(c,a._`[${s}]`)}}r.else(),f(e),r.endIf(),r.if(a._`${c} !== undefined`,()=>{r.assign(s,c),function({gen:e,parentData:t,parentDataProperty:n},r){e.if(a._`${t} !== undefined`,()=>e.assign(a._`${t}[${n}]`,r))}(e,c)})}(e,t,i):f(e)})}return l};const u=new Set(["string","number","integer","boolean","null"]);function d(e,t,n,r=c.Correct){const s=r===c.Correct?a.operators.EQ:a.operators.NEQ;let o;switch(e){case"null":return a._`${t} ${s} null`;case"array":o=a._`Array.isArray(${t})`;break;case"object":o=a._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=i(a._`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=i();break;default:return a._`typeof ${t} ${s} ${e}`}return r===c.Correct?o:(0,a.not)(o);function i(e=a.nil){return(0,a.and)(a._`typeof ${t} == "number"`,e,n?a._`isFinite(${t})`:a.nil)}}function h(e,t,n,r){if(1===e.length)return d(e[0],t,n,r);let s;const o=(0,i.toHash)(e);if(o.array&&o.object){const e=a._`typeof ${t} != "object"`;s=o.null?e:a._`!${t} || ${e}`,delete o.null,delete o.array,delete o.object}else s=a.nil;o.number&&delete o.integer;for(const e in o)s=(0,a.and)(s,d(e,t,n,r));return s}t.checkDataType=d,t.checkDataTypes=h;const p={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?a._`{type: ${e}}`:a._`{type: ${t}}`};function f(e){const t=function(e){const{gen:t,data:n,schema:r}=e,s=(0,i.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:s,schemaValue:s,parentSchema:r,params:{},it:e}}(e);(0,o.reportError)(t,p)}t.reportTypeError=f},318:(e,t,n)=>{"use strict";n.d(t,{AC:()=>C,Ak:()=>c,Gl:()=>s,K3:()=>v,OI:()=>b,Os:()=>u,Rp:()=>h,Yj:()=>T,Z0:()=>o,Zg:()=>f,Zv:()=>R,ai:()=>A,ch:()=>j,fO:()=>i,gF:()=>r,hQ:()=>$,kB:()=>I,kM:()=>a,l7:()=>_,nd:()=>P,p0:()=>l,p6:()=>x,r0:()=>w,uR:()=>d,uX:()=>m,ug:()=>g,w$:()=>S,zM:()=>O,zr:()=>y});const r=/^[cC][^\s-]{8,}$/,s=/^[0-9a-z]+$/,o=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,a=/^[0-9a-vA-V]{20}$/,i=/^[A-Za-z0-9]{27}$/,c=/^[a-zA-Z0-9_-]{21}$/,l=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,u=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,d=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,h=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,p="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function f(){return new RegExp(p,"u")}const m=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,g=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,y=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,_=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,v=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,w=/^[A-Za-z0-9_-]*$/,b=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,$=/^\+(?:[0-9]){6,14}[0-9]$/,k="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",x=new RegExp(`^${k}$`);function E(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function I(e){return new RegExp(`^${E(e)}$`)}function S(e){const t=E({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const r=`${t}(?:${n.join("|")})`;return new RegExp(`^${k}T(?:${r})$`)}const T=e=>new RegExp(`^${e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*"}$`),P=/^\d+$/,A=/^-?\d+(?:\.\d+)?/i,O=/true|false/i,j=/null/i,C=/^[^A-Z]*$/,R=/^[^a-z]*$/},322:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>r._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:n,data:o,it:a}=e;if((0,s.alwaysValidSchema)(a,n))return;const i=t.name("valid");t.forIn("key",o,n=>{e.setParams({propertyName:n}),e.subschema({keyword:"propertyNames",data:n,dataTypes:["string"],propertyName:n,compositeRule:!0},i),t.if((0,r.not)(i),()=>{e.error(!0),a.allErrors||t.break()})}),e.ok(i)}};t.default=o},325:(e,t,n)=>{"use strict";n.d(t,{A:()=>ne});const{entries:r,setPrototypeOf:s,isFrozen:o,getPrototypeOf:a,getOwnPropertyDescriptor:i}=Object;let{freeze:c,seal:l,create:u}=Object,{apply:d,construct:h}="undefined"!=typeof Reflect&&Reflect;c||(c=function(e){return e}),l||(l=function(e){return e}),d||(d=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return e.apply(t,r)}),h||(h=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new e(...n)});const p=T(Array.prototype.forEach),f=T(Array.prototype.lastIndexOf),m=T(Array.prototype.pop),g=T(Array.prototype.push),y=T(Array.prototype.splice),_=T(String.prototype.toLowerCase),v=T(String.prototype.toString),w=T(String.prototype.match),b=T(String.prototype.replace),$=T(String.prototype.indexOf),k=T(String.prototype.trim),x=T(Object.prototype.hasOwnProperty),E=T(RegExp.prototype.test),I=(S=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h(S,t)});var S;function T(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return d(e,t,r)}}function P(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_;s&&s(e,null);let r=t.length;for(;r--;){let s=t[r];if("string"==typeof s){const e=n(s);e!==s&&(o(t)||(t[r]=e),s=e)}e[s]=!0}return e}function A(e){for(let t=0;t<e.length;t++)x(e,t)||(e[t]=null);return e}function O(e){const t=u(null);for(const[n,s]of r(e))x(e,n)&&(Array.isArray(s)?t[n]=A(s):s&&"object"==typeof s&&s.constructor===Object?t[n]=O(s):t[n]=s);return t}function j(e,t){for(;null!==e;){const n=i(e,t);if(n){if(n.get)return T(n.get);if("function"==typeof n.value)return T(n.value)}e=a(e)}return function(){return null}}const C=c(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),R=c(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),N=c(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),z=c(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),M=c(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),D=c(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),q=c(["#text"]),L=c(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),U=c(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Y=c(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),F=c(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),H=l(/\{\{[\w\W]*|[\w\W]*\}\}/gm),V=l(/<%[\w\W]*|[\w\W]*%>/gm),Z=l(/\$\{[\w\W]*/gm),B=l(/^data-[\-\w.\u00B7-\uFFFF]+$/),W=l(/^aria-[\-\w]+$/),K=l(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G=l(/^(?:\w+script|data):/i),J=l(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Q=l(/^html$/i),X=l(/^[a-z][.\w]*(-[.\w]+)+$/i);var ee=Object.freeze({__proto__:null,ARIA_ATTR:W,ATTR_WHITESPACE:J,CUSTOM_ELEMENT:X,DATA_ATTR:B,DOCTYPE_NAME:Q,ERB_EXPR:V,IS_ALLOWED_URI:K,IS_SCRIPT_OR_DATA:G,MUSTACHE_EXPR:H,TMPLIT_EXPR:Z});const te=function(){return"undefined"==typeof window?null:window};var ne=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te();const n=t=>e(t);if(n.version="3.3.1",n.removed=[],!t||!t.document||9!==t.document.nodeType||!t.Element)return n.isSupported=!1,n;let{document:s}=t;const o=s,a=o.currentScript,{DocumentFragment:i,HTMLTemplateElement:l,Node:d,Element:h,NodeFilter:S,NamedNodeMap:T=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:A,DOMParser:H,trustedTypes:V}=t,Z=h.prototype,B=j(Z,"cloneNode"),W=j(Z,"remove"),G=j(Z,"nextSibling"),J=j(Z,"childNodes"),X=j(Z,"parentNode");if("function"==typeof l){const e=s.createElement("template");e.content&&e.content.ownerDocument&&(s=e.content.ownerDocument)}let ne,re="";const{implementation:se,createNodeIterator:oe,createDocumentFragment:ae,getElementsByTagName:ie}=s,{importNode:ce}=o;let le={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof r&&"function"==typeof X&&se&&void 0!==se.createHTMLDocument;const{MUSTACHE_EXPR:ue,ERB_EXPR:de,TMPLIT_EXPR:he,DATA_ATTR:pe,ARIA_ATTR:fe,IS_SCRIPT_OR_DATA:me,ATTR_WHITESPACE:ge,CUSTOM_ELEMENT:ye}=ee;let{IS_ALLOWED_URI:_e}=ee,ve=null;const we=P({},[...C,...R,...N,...M,...q]);let be=null;const $e=P({},[...L,...U,...Y,...F]);let ke=Object.seal(u(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xe=null,Ee=null;const Ie=Object.seal(u(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let Se=!0,Te=!0,Pe=!1,Ae=!0,Oe=!1,je=!0,Ce=!1,Re=!1,Ne=!1,ze=!1,Me=!1,De=!1,qe=!0,Le=!1,Ue=!0,Ye=!1,Fe={},He=null;const Ve=P({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ze=null;const Be=P({},["audio","video","img","source","image","track"]);let We=null;const Ke=P({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ge="http://www.w3.org/1998/Math/MathML",Je="http://www.w3.org/2000/svg",Qe="http://www.w3.org/1999/xhtml";let Xe=Qe,et=!1,tt=null;const nt=P({},[Ge,Je,Qe],v);let rt=P({},["mi","mo","mn","ms","mtext"]),st=P({},["annotation-xml"]);const ot=P({},["title","style","font","a","script"]);let at=null;const it=["application/xhtml+xml","text/html"];let ct=null,lt=null;const ut=s.createElement("form"),dt=function(e){return e instanceof RegExp||e instanceof Function},ht=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!lt||lt!==e){if(e&&"object"==typeof e||(e={}),e=O(e),at=-1===it.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,ct="application/xhtml+xml"===at?v:_,ve=x(e,"ALLOWED_TAGS")?P({},e.ALLOWED_TAGS,ct):we,be=x(e,"ALLOWED_ATTR")?P({},e.ALLOWED_ATTR,ct):$e,tt=x(e,"ALLOWED_NAMESPACES")?P({},e.ALLOWED_NAMESPACES,v):nt,We=x(e,"ADD_URI_SAFE_ATTR")?P(O(Ke),e.ADD_URI_SAFE_ATTR,ct):Ke,Ze=x(e,"ADD_DATA_URI_TAGS")?P(O(Be),e.ADD_DATA_URI_TAGS,ct):Be,He=x(e,"FORBID_CONTENTS")?P({},e.FORBID_CONTENTS,ct):Ve,xe=x(e,"FORBID_TAGS")?P({},e.FORBID_TAGS,ct):O({}),Ee=x(e,"FORBID_ATTR")?P({},e.FORBID_ATTR,ct):O({}),Fe=!!x(e,"USE_PROFILES")&&e.USE_PROFILES,Se=!1!==e.ALLOW_ARIA_ATTR,Te=!1!==e.ALLOW_DATA_ATTR,Pe=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Ae=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Oe=e.SAFE_FOR_TEMPLATES||!1,je=!1!==e.SAFE_FOR_XML,Ce=e.WHOLE_DOCUMENT||!1,ze=e.RETURN_DOM||!1,Me=e.RETURN_DOM_FRAGMENT||!1,De=e.RETURN_TRUSTED_TYPE||!1,Ne=e.FORCE_BODY||!1,qe=!1!==e.SANITIZE_DOM,Le=e.SANITIZE_NAMED_PROPS||!1,Ue=!1!==e.KEEP_CONTENT,Ye=e.IN_PLACE||!1,_e=e.ALLOWED_URI_REGEXP||K,Xe=e.NAMESPACE||Qe,rt=e.MATHML_TEXT_INTEGRATION_POINTS||rt,st=e.HTML_INTEGRATION_POINTS||st,ke=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&dt(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ke.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&dt(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ke.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(ke.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Oe&&(Te=!1),Me&&(ze=!0),Fe&&(ve=P({},q),be=[],!0===Fe.html&&(P(ve,C),P(be,L)),!0===Fe.svg&&(P(ve,R),P(be,U),P(be,F)),!0===Fe.svgFilters&&(P(ve,N),P(be,U),P(be,F)),!0===Fe.mathMl&&(P(ve,M),P(be,Y),P(be,F))),e.ADD_TAGS&&("function"==typeof e.ADD_TAGS?Ie.tagCheck=e.ADD_TAGS:(ve===we&&(ve=O(ve)),P(ve,e.ADD_TAGS,ct))),e.ADD_ATTR&&("function"==typeof e.ADD_ATTR?Ie.attributeCheck=e.ADD_ATTR:(be===$e&&(be=O(be)),P(be,e.ADD_ATTR,ct))),e.ADD_URI_SAFE_ATTR&&P(We,e.ADD_URI_SAFE_ATTR,ct),e.FORBID_CONTENTS&&(He===Ve&&(He=O(He)),P(He,e.FORBID_CONTENTS,ct)),e.ADD_FORBID_CONTENTS&&(He===Ve&&(He=O(He)),P(He,e.ADD_FORBID_CONTENTS,ct)),Ue&&(ve["#text"]=!0),Ce&&P(ve,["html","head","body"]),ve.table&&(P(ve,["tbody"]),delete xe.tbody),e.TRUSTED_TYPES_POLICY){if("function"!=typeof e.TRUSTED_TYPES_POLICY.createHTML)throw I('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw I('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');ne=e.TRUSTED_TYPES_POLICY,re=ne.createHTML("")}else void 0===ne&&(ne=function(e,t){if("object"!=typeof e||"function"!=typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML:e=>e,createScriptURL:e=>e})}catch(e){return console.warn("TrustedTypes policy "+s+" could not be created."),null}}(V,a)),null!==ne&&"string"==typeof re&&(re=ne.createHTML(""));c&&c(e),lt=e}},pt=P({},[...R,...N,...z]),ft=P({},[...M,...D]),mt=function(e){g(n.removed,{element:e});try{X(e).removeChild(e)}catch(t){W(e)}},gt=function(e,t){try{g(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){g(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e)if(ze||Me)try{mt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},yt=function(e){let t=null,n=null;if(Ne)e="<remove></remove>"+e;else{const t=w(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===at&&Xe===Qe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const r=ne?ne.createHTML(e):e;if(Xe===Qe)try{t=(new H).parseFromString(r,at)}catch(e){}if(!t||!t.documentElement){t=se.createDocument(Xe,"template",null);try{t.documentElement.innerHTML=et?re:r}catch(e){}}const o=t.body||t.documentElement;return e&&n&&o.insertBefore(s.createTextNode(n),o.childNodes[0]||null),Xe===Qe?ie.call(t,Ce?"html":"body")[0]:Ce?t.documentElement:o},_t=function(e){return oe.call(e.ownerDocument||e,e,S.SHOW_ELEMENT|S.SHOW_COMMENT|S.SHOW_TEXT|S.SHOW_PROCESSING_INSTRUCTION|S.SHOW_CDATA_SECTION,null)},vt=function(e){return e instanceof A&&("string"!=typeof e.nodeName||"string"!=typeof e.textContent||"function"!=typeof e.removeChild||!(e.attributes instanceof T)||"function"!=typeof e.removeAttribute||"function"!=typeof e.setAttribute||"string"!=typeof e.namespaceURI||"function"!=typeof e.insertBefore||"function"!=typeof e.hasChildNodes)},wt=function(e){return"function"==typeof d&&e instanceof d};function bt(e,t,r){p(e,e=>{e.call(n,t,r,lt)})}const $t=function(e){let t=null;if(bt(le.beforeSanitizeElements,e,null),vt(e))return mt(e),!0;const r=ct(e.nodeName);if(bt(le.uponSanitizeElement,e,{tagName:r,allowedTags:ve}),je&&e.hasChildNodes()&&!wt(e.firstElementChild)&&E(/<[/\w!]/g,e.innerHTML)&&E(/<[/\w!]/g,e.textContent))return mt(e),!0;if(7===e.nodeType)return mt(e),!0;if(je&&8===e.nodeType&&E(/<[/\w]/g,e.data))return mt(e),!0;if(!(Ie.tagCheck instanceof Function&&Ie.tagCheck(r))&&(!ve[r]||xe[r])){if(!xe[r]&&xt(r)){if(ke.tagNameCheck instanceof RegExp&&E(ke.tagNameCheck,r))return!1;if(ke.tagNameCheck instanceof Function&&ke.tagNameCheck(r))return!1}if(Ue&&!He[r]){const t=X(e)||e.parentNode,n=J(e)||e.childNodes;if(n&&t)for(let r=n.length-1;r>=0;--r){const s=B(n[r],!0);s.__removalCount=(e.__removalCount||0)+1,t.insertBefore(s,G(e))}}return mt(e),!0}return e instanceof h&&!function(e){let t=X(e);t&&t.tagName||(t={namespaceURI:Xe,tagName:"template"});const n=_(e.tagName),r=_(t.tagName);return!!tt[e.namespaceURI]&&(e.namespaceURI===Je?t.namespaceURI===Qe?"svg"===n:t.namespaceURI===Ge?"svg"===n&&("annotation-xml"===r||rt[r]):Boolean(pt[n]):e.namespaceURI===Ge?t.namespaceURI===Qe?"math"===n:t.namespaceURI===Je?"math"===n&&st[r]:Boolean(ft[n]):e.namespaceURI===Qe?!(t.namespaceURI===Je&&!st[r])&&!(t.namespaceURI===Ge&&!rt[r])&&!ft[n]&&(ot[n]||!pt[n]):!("application/xhtml+xml"!==at||!tt[e.namespaceURI]))}(e)?(mt(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!E(/<\/no(script|embed|frames)/i,e.innerHTML)?(Oe&&3===e.nodeType&&(t=e.textContent,p([ue,de,he],e=>{t=b(t,e," ")}),e.textContent!==t&&(g(n.removed,{element:e.cloneNode()}),e.textContent=t)),bt(le.afterSanitizeElements,e,null),!1):(mt(e),!0)},kt=function(e,t,n){if(qe&&("id"===t||"name"===t)&&(n in s||n in ut))return!1;if(Te&&!Ee[t]&&E(pe,t));else if(Se&&E(fe,t));else if(Ie.attributeCheck instanceof Function&&Ie.attributeCheck(t,e));else if(!be[t]||Ee[t]){if(!(xt(e)&&(ke.tagNameCheck instanceof RegExp&&E(ke.tagNameCheck,e)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(e))&&(ke.attributeNameCheck instanceof RegExp&&E(ke.attributeNameCheck,t)||ke.attributeNameCheck instanceof Function&&ke.attributeNameCheck(t,e))||"is"===t&&ke.allowCustomizedBuiltInElements&&(ke.tagNameCheck instanceof RegExp&&E(ke.tagNameCheck,n)||ke.tagNameCheck instanceof Function&&ke.tagNameCheck(n))))return!1}else if(We[t]);else if(E(_e,b(n,ge,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==$(n,"data:")||!Ze[e])if(Pe&&!E(me,b(n,ge,"")));else if(n)return!1;return!0},xt=function(e){return"annotation-xml"!==e&&w(e,ye)},Et=function(e){bt(le.beforeSanitizeAttributes,e,null);const{attributes:t}=e;if(!t||vt(e))return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:be,forceKeepAttr:void 0};let s=t.length;for(;s--;){const o=t[s],{name:a,namespaceURI:i,value:c}=o,l=ct(a),u=c;let d="value"===a?u:k(u);if(r.attrName=l,r.attrValue=d,r.keepAttr=!0,r.forceKeepAttr=void 0,bt(le.uponSanitizeAttribute,e,r),d=r.attrValue,!Le||"id"!==l&&"name"!==l||(gt(a,e),d="user-content-"+d),je&&E(/((--!?|])>)|<\/(style|title|textarea)/i,d)){gt(a,e);continue}if("attributename"===l&&w(d,"href")){gt(a,e);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr){gt(a,e);continue}if(!Ae&&E(/\/>/i,d)){gt(a,e);continue}Oe&&p([ue,de,he],e=>{d=b(d,e," ")});const h=ct(e.nodeName);if(kt(h,l,d)){if(ne&&"object"==typeof V&&"function"==typeof V.getAttributeType)if(i);else switch(V.getAttributeType(h,l)){case"TrustedHTML":d=ne.createHTML(d);break;case"TrustedScriptURL":d=ne.createScriptURL(d)}if(d!==u)try{i?e.setAttributeNS(i,a,d):e.setAttribute(a,d),vt(e)?mt(e):m(n.removed)}catch(t){gt(a,e)}}else gt(a,e)}bt(le.afterSanitizeAttributes,e,null)},It=function e(t){let n=null;const r=_t(t);for(bt(le.beforeSanitizeShadowDOM,t,null);n=r.nextNode();)bt(le.uponSanitizeShadowNode,n,null),$t(n),Et(n),n.content instanceof i&&e(n.content);bt(le.afterSanitizeShadowDOM,t,null)};return n.sanitize=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,s=null,a=null,c=null;if(et=!e,et&&(e="\x3c!--\x3e"),"string"!=typeof e&&!wt(e)){if("function"!=typeof e.toString)throw I("toString is not a function");if("string"!=typeof(e=e.toString()))throw I("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Re||ht(t),n.removed=[],"string"==typeof e&&(Ye=!1),Ye){if(e.nodeName){const t=ct(e.nodeName);if(!ve[t]||xe[t])throw I("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof d)r=yt("\x3c!----\x3e"),s=r.ownerDocument.importNode(e,!0),1===s.nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?r=s:r.appendChild(s);else{if(!ze&&!Oe&&!Ce&&-1===e.indexOf("<"))return ne&&De?ne.createHTML(e):e;if(r=yt(e),!r)return ze?null:De?re:""}r&&Ne&&mt(r.firstChild);const l=_t(Ye?e:r);for(;a=l.nextNode();)$t(a),Et(a),a.content instanceof i&&It(a.content);if(Ye)return e;if(ze){if(Me)for(c=ae.call(r.ownerDocument);r.firstChild;)c.appendChild(r.firstChild);else c=r;return(be.shadowroot||be.shadowrootmode)&&(c=ce.call(o,c,!0)),c}let u=Ce?r.outerHTML:r.innerHTML;return Ce&&ve["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&E(Q,r.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+u),Oe&&p([ue,de,he],e=>{u=b(u,e," ")}),ne&&De?ne.createHTML(u):u},n.setConfig=function(){ht(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Re=!0},n.clearConfig=function(){lt=null,Re=!1},n.isValidAttribute=function(e,t,n){lt||ht({});const r=ct(e),s=ct(t);return kt(r,s,n)},n.addHook=function(e,t){"function"==typeof t&&g(le[e],t)},n.removeHook=function(e,t){if(void 0!==t){const n=f(le[e],t);return-1===n?void 0:y(le[e],n,1)[0]}return m(le[e])},n.removeHooks=function(e){le[e]=[]},n.removeAllHooks=function(){le={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}()},353:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(92);r.code='require("ajv/dist/runtime/equal").default',t.default=r},435:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,o(n)))}return e}function o(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return s.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(s.default=s,e.exports=s):void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}()},668:(e,t,n)=>{"use strict";n.d(t,{DG:()=>g,E6:()=>b,J:()=>w,J_:()=>l,Jk:()=>u,KH:()=>d,Kk:()=>p,NI:()=>y,QP:()=>a,RM:()=>f,Tt:()=>v,Yk:()=>h,kH:()=>_,ql:()=>m,sm:()=>c,v$:()=>$});var r=n(5514),s=n(318),o=n(9125);const a=r.xI("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),i={number:"number",bigint:"bigint",object:"date"},c=r.xI("$ZodCheckLessThan",(e,t)=>{a.init(e,t);const n=i[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<r&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value<=t.value:r.value<t.value)||r.issues.push({origin:n,code:"too_big",maximum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),l=r.xI("$ZodCheckGreaterThan",(e,t)=>{a.init(e,t);const n=i[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,r=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>r&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=r=>{(t.inclusive?r.value>=t.value:r.value>t.value)||r.issues.push({origin:n,code:"too_small",minimum:t.value,input:r.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),u=r.xI("$ZodCheckMultipleOf",(e,t)=>{a.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof n.value?n.value%t.value===BigInt(0):0===o.LG(n.value,t.value))||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),d=r.xI("$ZodCheckNumberFormat",(e,t)=>{a.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),r=n?"int":"number",[i,c]=o.zH[t.format];e._zod.onattach.push(e=>{const r=e._zod.bag;r.format=t.format,r.minimum=i,r.maximum=c,n&&(r.pattern=s.nd)}),e._zod.check=s=>{const o=s.value;if(n){if(!Number.isInteger(o))return void s.issues.push({expected:r,format:t.format,code:"invalid_type",input:o,inst:e});if(!Number.isSafeInteger(o))return void(o>0?s.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}):s.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:r,continue:!t.abort}))}o<i&&s.issues.push({origin:"number",input:o,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),o>c&&s.issues.push({origin:"number",input:o,code:"too_big",maximum:c,inst:e})}}),h=r.xI("$ZodCheckMaxLength",(e,t)=>{var n;a.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!o.cl(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const r=n.value;if(r.length<=t.maximum)return;const s=o.Rc(r);n.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),p=r.xI("$ZodCheckMinLength",(e,t)=>{var n;a.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!o.cl(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const r=n.value;if(r.length>=t.minimum)return;const s=o.Rc(r);n.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),f=r.xI("$ZodCheckLengthEquals",(e,t)=>{var n;a.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!o.cl(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{const r=n.value,s=r.length;if(s===t.length)return;const a=o.Rc(r),i=s>t.length;n.issues.push({origin:a,...i?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),m=r.xI("$ZodCheckStringFormat",(e,t)=>{var n,r;a.init(e,t),e._zod.onattach.push(e=>{const n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??(n.patterns=new Set),n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(r=e._zod).check??(r.check=()=>{})}),g=r.xI("$ZodCheckRegex",(e,t)=>{m.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),y=r.xI("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=s.AC),m.init(e,t)}),_=r.xI("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=s.Zv),m.init(e,t)}),v=r.xI("$ZodCheckIncludes",(e,t)=>{a.init(e,t);const n=o.$f(t.includes),r=new RegExp("number"==typeof t.position?`^.{${t.position}}${n}`:n);t.pattern=r,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),w=r.xI("$ZodCheckStartsWith",(e,t)=>{a.init(e,t);const n=new RegExp(`^${o.$f(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),b=r.xI("$ZodCheckEndsWith",(e,t)=>{a.init(e,t);const n=new RegExp(`.*${o.$f(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),$=r.xI("$ZodCheckOverwrite",(e,t)=>{a.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}})},897:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=r.operators,o={maximum:{okStr:"<=",ok:s.LTE,fail:s.GT},minimum:{okStr:">=",ok:s.GTE,fail:s.LT},exclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},exclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},a={message:({keyword:e,schemaCode:t})=>r.str`must be ${o[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>r._`{comparison: ${o[e].okStr}, limit: ${t}}`},i={keyword:Object.keys(o),type:"number",schemaType:"number",$data:!0,error:a,code(e){const{keyword:t,data:n,schemaCode:s}=e;e.fail$data(r._`${n} ${o[t].fail} ${s} || isNaN(${n})`)}};t.default=i},1045:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(1798).A)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},1081:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(n||(t.DiscrError=n={}))},1238:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=n},1435:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7750);r.code='require("ajv/dist/runtime/uri").default',t.default=r},1637:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3758),s=n(1910),o=n(2304),a=n(4678),i={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>s._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:n,parentSchema:i,data:c,errsCount:l,it:u}=e;if(!l)throw new Error("ajv implementation error");const{allErrors:d,opts:h}=u;if(u.props=!0,"all"!==h.removeAdditional&&(0,a.alwaysValidSchema)(u,n))return;const p=(0,r.allSchemaProperties)(i.properties),f=(0,r.allSchemaProperties)(i.patternProperties);function m(e){t.code(s._`delete ${c}[${e}]`)}function g(r){if("all"===h.removeAdditional||h.removeAdditional&&!1===n)m(r);else{if(!1===n)return e.setParams({additionalProperty:r}),e.error(),void(d||t.break());if("object"==typeof n&&!(0,a.alwaysValidSchema)(u,n)){const n=t.name("valid");"failing"===h.removeAdditional?(y(r,n,!1),t.if((0,s.not)(n),()=>{e.reset(),m(r)})):(y(r,n),d||t.if((0,s.not)(n),()=>t.break()))}}}function y(t,n,r){const s={keyword:"additionalProperties",dataProp:t,dataPropType:a.Type.Str};!1===r&&Object.assign(s,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(s,n)}t.forIn("key",c,n=>{p.length||f.length?t.if(function(n){let o;if(p.length>8){const e=(0,a.schemaRefOrVal)(u,i.properties,"properties");o=(0,r.isOwnProperty)(t,e,n)}else o=p.length?(0,s.or)(...p.map(e=>s._`${n} === ${e}`)):s.nil;return f.length&&(o=(0,s.or)(o,...f.map(t=>s._`${(0,r.usePattern)(e,t)}.test(${n})`))),(0,s.not)(o)}(n),()=>g(n)):g(n)}),e.ok(s._`${l} === ${o.default.errors}`)}};t.default=i},1658:(e,t,n)=>{"use strict";n.d(t,{Od:()=>c,Rb:()=>i,Tj:()=>a,bp:()=>d,wG:()=>u,xL:()=>l});var r=n(5514),s=n(154),o=n(9125);const a=e=>(t,n,s,a)=>{const i=s?Object.assign(s,{async:!1}):{async:!1},c=t._zod.run({value:n,issues:[]},i);if(c instanceof Promise)throw new r.GT;if(c.issues.length){const t=new(a?.Err??e)(c.issues.map(e=>o.iR(e,i,r.$W())));throw o.gx(t,a?.callee),t}return c.value},i=(s.Kd,e=>async(t,n,s,a)=>{const i=s?Object.assign(s,{async:!0}):{async:!0};let c=t._zod.run({value:n,issues:[]},i);if(c instanceof Promise&&(c=await c),c.issues.length){const t=new(a?.Err??e)(c.issues.map(e=>o.iR(e,i,r.$W())));throw o.gx(t,a?.callee),t}return c.value}),c=(s.Kd,e=>(t,n,a)=>{const i=a?{...a,async:!1}:{async:!1},c=t._zod.run({value:n,issues:[]},i);if(c instanceof Promise)throw new r.GT;return c.issues.length?{success:!1,error:new(e??s.a$)(c.issues.map(e=>o.iR(e,i,r.$W())))}:{success:!0,data:c.value}}),l=c(s.Kd),u=e=>async(t,n,s)=>{const a=s?Object.assign(s,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},a);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(e=>o.iR(e,a,r.$W())))}:{success:!0,data:i.value}},d=u(s.Kd)},1688:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8668);class s extends Error{constructor(e,t,n,s){super(s||`can't resolve reference ${n} from id ${t}`),this.missingRef=(0,r.resolveUrl)(e,t,n),this.missingSchema=(0,r.normalizeId)((0,r.getFullPath)(e,this.missingRef))}}t.default=s},1798:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(1609);const s=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim();var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const a=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:i="",children:c,iconNode:l,...u},d)=>(0,r.createElement)("svg",{ref:d,...o,width:t,height:t,stroke:e,strokeWidth:a?24*Number(n)/Number(t):n,className:s("lucide",i),...u},[...l.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(c)?c:[c]])),i=(e,t)=>{const n=(0,r.forwardRef)(({className:n,...o},i)=>{return(0,r.createElement)(a,{ref:i,iconNode:t,className:s(`lucide-${c=e,c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...o});var c});return n.displayName=`${e}`,n}},1910:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const r=n(3345),s=n(8870);var o=n(3345);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return o.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return o.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return o.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return o.Name}});var a=n(8870);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),t.operators={GT:new r._Code(">"),GTE:new r._Code(">="),LT:new r._Code("<"),LTE:new r._Code("<="),EQ:new r._Code("==="),NEQ:new r._Code("!=="),NOT:new r._Code("!"),OR:new r._Code("||"),AND:new r._Code("&&"),ADD:new r._Code("+")};class i{optimizeNodes(){return this}optimizeNames(e,t){return this}}class c extends i{constructor(e,t,n){super(),this.varKind=e,this.name=t,this.rhs=n}render({es5:e,_n}){const t=e?s.varKinds.var:this.varKind,n=void 0===this.rhs?"":` = ${this.rhs}`;return`${t} ${this.name}${n};`+_n}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=O(this.rhs,e,t)),this}get names(){return this.rhs instanceof r._CodeOrName?this.rhs.names:{}}}class l extends i{constructor(e,t,n){super(),this.lhs=e,this.rhs=t,this.sideEffects=n}render({_n}){return`${this.lhs} = ${this.rhs};`+_n}optimizeNames(e,t){if(!(this.lhs instanceof r.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=O(this.rhs,e,t),this}get names(){return A(this.lhs instanceof r.Name?{}:{...this.lhs.names},this.rhs)}}class u extends l{constructor(e,t,n,r){super(e,n,r),this.op=t}render({_n}){return`${this.lhs} ${this.op}= ${this.rhs};`+_n}}class d extends i{constructor(e){super(),this.label=e,this.names={}}render({_n}){return`${this.label}:`+_n}}class h extends i{constructor(e){super(),this.label=e,this.names={}}render({_n}){return`break${this.label?` ${this.label}`:""};`+_n}}class p extends i{constructor(e){super(),this.error=e}render({_n}){return`throw ${this.error};`+_n}get names(){return this.error.names}}class f extends i{constructor(e){super(),this.code=e}render({_n}){return`${this.code};`+_n}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=O(this.code,e,t),this}get names(){return this.code instanceof r._CodeOrName?this.code.names:{}}}class m extends i{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,n)=>t+n.render(e),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const n=e[t].optimizeNodes();Array.isArray(n)?e.splice(t,1,...n):n?e[t]=n:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:n}=this;let r=n.length;for(;r--;){const s=n[r];s.optimizeNames(e,t)||(j(e,s.names),n.splice(r,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>P(e,t.names),{})}}class g extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class y extends m{}class _ extends g{}_.kind="else";class v extends g{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new _(e):e}return t?!1===e?t instanceof v?t:t.nodes:this.nodes.length?this:new v(C(e),t instanceof v?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var n;if(this.else=null===(n=this.else)||void 0===n?void 0:n.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=O(this.condition,e,t),this}get names(){const e=super.names;return A(e,this.condition),this.else&&P(e,this.else.names),e}}v.kind="if";class w extends g{}w.kind="for";class b extends w{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=O(this.iteration,e,t),this}get names(){return P(super.names,this.iteration.names)}}class $ extends w{constructor(e,t,n,r){super(),this.varKind=e,this.name=t,this.from=n,this.to=r}render(e){const t=e.es5?s.varKinds.var:this.varKind,{name:n,from:r,to:o}=this;return`for(${t} ${n}=${r}; ${n}<${o}; ${n}++)`+super.render(e)}get names(){const e=A(super.names,this.from);return A(e,this.to)}}class k extends w{constructor(e,t,n,r){super(),this.loop=e,this.varKind=t,this.name=n,this.iterable=r}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=O(this.iterable,e,t),this}get names(){return P(super.names,this.iterable.names)}}class x extends g{constructor(e,t,n){super(),this.name=e,this.args=t,this.async=n}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}x.kind="func";class E extends m{render(e){return"return "+super.render(e)}}E.kind="return";class I extends g{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var n,r;return super.optimizeNames(e,t),null===(n=this.catch)||void 0===n||n.optimizeNames(e,t),null===(r=this.finally)||void 0===r||r.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&P(e,this.catch.names),this.finally&&P(e,this.finally.names),e}}class S extends g{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}S.kind="catch";class T extends g{render(e){return"finally"+super.render(e)}}function P(e,t){for(const n in t)e[n]=(e[n]||0)+(t[n]||0);return e}function A(e,t){return t instanceof r._CodeOrName?P(e,t.names):e}function O(e,t,n){return e instanceof r.Name?o(e):(s=e)instanceof r._Code&&s._items.some(e=>e instanceof r.Name&&1===t[e.str]&&void 0!==n[e.str])?new r._Code(e._items.reduce((e,t)=>(t instanceof r.Name&&(t=o(t)),t instanceof r._Code?e.push(...t._items):e.push(t),e),[])):e;var s;function o(e){const r=n[e.str];return void 0===r||1!==t[e.str]?e:(delete t[e.str],r)}}function j(e,t){for(const n in t)e[n]=(e[n]||0)-(t[n]||0)}function C(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:r._`!${M(e)}`}T.kind="finally",t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new s.Scope({parent:e}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const n=this._extScope.value(e,t);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,n,r){const s=this._scope.toName(t);return void 0!==n&&r&&(this._constants[s.str]=n),this._leafNode(new c(e,s,n)),s}const(e,t,n){return this._def(s.varKinds.const,e,t,n)}let(e,t,n){return this._def(s.varKinds.let,e,t,n)}var(e,t,n){return this._def(s.varKinds.var,e,t,n)}assign(e,t,n){return this._leafNode(new l(e,t,n))}add(e,n){return this._leafNode(new u(e,t.operators.ADD,n))}code(e){return"function"==typeof e?e():e!==r.nil&&this._leafNode(new f(e)),this}object(...e){const t=["{"];for(const[n,s]of e)t.length>1&&t.push(","),t.push(n),(n!==s||this.opts.es5)&&(t.push(":"),(0,r.addCodeArg)(t,s));return t.push("}"),new r._Code(t)}if(e,t,n){if(this._blockNode(new v(e)),t&&n)this.code(t).else().code(n).endIf();else if(t)this.code(t).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new v(e))}else(){return this._elseNode(new _)}endIf(){return this._endBlockNode(v,_)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new b(e),t)}forRange(e,t,n,r,o=(this.opts.es5?s.varKinds.var:s.varKinds.let)){const a=this._scope.toName(e);return this._for(new $(o,a,t,n),()=>r(a))}forOf(e,t,n,o=s.varKinds.const){const a=this._scope.toName(e);if(this.opts.es5){const e=t instanceof r.Name?t:this.var("_arr",t);return this.forRange("_i",0,r._`${e}.length`,t=>{this.var(a,r._`${e}[${t}]`),n(a)})}return this._for(new k("of",o,a,t),()=>n(a))}forIn(e,t,n,o=(this.opts.es5?s.varKinds.var:s.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,r._`Object.keys(${t})`,n);const a=this._scope.toName(e);return this._for(new k("in",o,a,t),()=>n(a))}endFor(){return this._endBlockNode(w)}label(e){return this._leafNode(new d(e))}break(e){return this._leafNode(new h(e))}return(e){const t=new E;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(e,t,n){if(!t&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');const r=new I;if(this._blockNode(r),this.code(e),t){const e=this.name("e");this._currNode=r.catch=new S(e),t(e)}return n&&(this._currNode=r.finally=new T,this.code(n)),this._endBlockNode(S,T)}throw(e){return this._leafNode(new p(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const n=this._nodes.length-t;if(n<0||void 0!==e&&n!==e)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=r.nil,n,s){return this._blockNode(new x(e,t,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const n=this._currNode;if(n instanceof e||t&&n instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=C;const R=z(t.operators.AND);t.and=function(...e){return e.reduce(R)};const N=z(t.operators.OR);function z(e){return(t,n)=>t===r.nil?n:n===r.nil?t:r._`${M(t)} ${e} ${M(n)}`}function M(e){return e instanceof r.Name?e:r._`(${e})`}t.or=function(...e){return e.reduce(N)}},2074:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(1798).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2085:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;const r=n(1910),s=n(4678),o=n(3758),a={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return i(e,"additionalItems",t);n.items=!0,(0,s.alwaysValidSchema)(n,t)||e.ok((0,o.validateArray)(e))}};function i(e,t,n=e.schema){const{gen:o,parentSchema:a,data:i,keyword:c,it:l}=e;!function(e){const{opts:r,errSchemaPath:o}=l,a=n.length,i=a===e.minItems&&(a===e.maxItems||!1===e[t]);if(r.strictTuples&&!i){const e=`"${c}" is ${a}-tuple, but minItems or maxItems/${t} are not specified or different at path "${o}"`;(0,s.checkStrictMode)(l,e,r.strictTuples)}}(a),l.opts.unevaluated&&n.length&&!0!==l.items&&(l.items=s.mergeEvaluated.items(o,n.length,l.items));const u=o.name("valid"),d=o.const("len",r._`${i}.length`);n.forEach((t,n)=>{(0,s.alwaysValidSchema)(l,t)||(o.if(r._`${d} > ${n}`,()=>e.subschema({keyword:c,schemaProp:n,dataProp:n},u)),e.ok(u))})}t.validateTuple=i,t.default=a},2304:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s={data:new r.Name("data"),valCxt:new r.Name("valCxt"),instancePath:new r.Name("instancePath"),parentData:new r.Name("parentData"),parentDataProperty:new r.Name("parentDataProperty"),rootData:new r.Name("rootData"),dynamicAnchors:new r.Name("dynamicAnchors"),vErrors:new r.Name("vErrors"),errors:new r.Name("errors"),this:new r.Name("this"),self:new r.Name("self"),scope:new r.Name("scope"),json:new r.Name("json"),jsonPos:new r.Name("jsonPos"),jsonLen:new r.Name("jsonLen"),jsonPart:new r.Name("jsonPart")};t.default=s},2412:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>r._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:n,parentSchema:o,it:a}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(a.opts.discriminator&&o.discriminator)return;const i=n,c=t.let("valid",!1),l=t.let("passing",null),u=t.name("_valid");e.setParams({passing:l}),t.block(function(){i.forEach((n,o)=>{let i;(0,s.alwaysValidSchema)(a,n)?t.var(u,!0):i=e.subschema({keyword:"oneOf",schemaProp:o,compositeRule:!0},u),o>0&&t.if(r._`${u} && ${c}`).assign(c,!1).assign(l,r._`[${l}, ${o}]`).else(),t.if(u,()=>{t.assign(c,!0),t.assign(l,o),i&&e.mergeEvaluated(i,r.Name)})})}),e.result(c,()=>e.reset(),()=>e.error(!0))}};t.default=o},2447:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(897),s=n(5954),o=n(4828),a=n(7129),i=n(8873),c=n(2702),l=n(9698),u=n(4606),d=n(7319),h=n(3133),p=[r.default,s.default,o.default,a.default,i.default,c.default,l.default,u.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,h.default];t.default=p},2451:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1238),s=n(9350),o=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",r.default,s.default];t.default=o},2693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const r=n(1910),s=n(4678),o=n(2304);function a(e,t){const n=e.const("err",t);e.if(r._`${o.default.vErrors} === null`,()=>e.assign(o.default.vErrors,r._`[${n}]`),r._`${o.default.vErrors}.push(${n})`),e.code(r._`${o.default.errors}++`)}function i(e,t){const{gen:n,validateName:s,schemaEnv:o}=e;o.$async?n.throw(r._`new ${e.ValidationError}(${t})`):(n.assign(r._`${s}.errors`,t),n.return(!1))}t.keywordError={message:({keyword:e})=>r.str`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?r.str`"${e}" keyword must be ${t} ($data)`:r.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,n=t.keywordError,s,o){const{it:c}=e,{gen:u,compositeRule:d,allErrors:h}=c,p=l(e,n,s);(null!=o?o:d||h)?a(u,p):i(c,r._`[${p}]`)},t.reportExtraError=function(e,n=t.keywordError,r){const{it:s}=e,{gen:c,compositeRule:u,allErrors:d}=s;a(c,l(e,n,r)),u||d||i(s,o.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(o.default.errors,t),e.if(r._`${o.default.vErrors} !== null`,()=>e.if(t,()=>e.assign(r._`${o.default.vErrors}.length`,t),()=>e.assign(o.default.vErrors,null)))},t.extendErrors=function({gen:e,keyword:t,schemaValue:n,data:s,errsCount:a,it:i}){if(void 0===a)throw new Error("ajv implementation error");const c=e.name("err");e.forRange("i",a,o.default.errors,a=>{e.const(c,r._`${o.default.vErrors}[${a}]`),e.if(r._`${c}.instancePath === undefined`,()=>e.assign(r._`${c}.instancePath`,(0,r.strConcat)(o.default.instancePath,i.errorPath))),e.assign(r._`${c}.schemaPath`,r.str`${i.errSchemaPath}/${t}`),i.opts.verbose&&(e.assign(r._`${c}.schema`,n),e.assign(r._`${c}.data`,s))})};const c={keyword:new r.Name("keyword"),schemaPath:new r.Name("schemaPath"),params:new r.Name("params"),propertyName:new r.Name("propertyName"),message:new r.Name("message"),schema:new r.Name("schema"),parentSchema:new r.Name("parentSchema")};function l(e,t,n){const{createErrors:s}=e.it;return!1===s?r._`{}`:function(e,t,n={}){const{gen:s,it:a}=e,i=[u(a,n),d(e,n)];return function(e,{params:t,message:n},s){const{keyword:a,data:i,schemaValue:l,it:u}=e,{opts:d,propertyName:h,topSchemaRef:p,schemaPath:f}=u;s.push([c.keyword,a],[c.params,"function"==typeof t?t(e):t||r._`{}`]),d.messages&&s.push([c.message,"function"==typeof n?n(e):n]),d.verbose&&s.push([c.schema,l],[c.parentSchema,r._`${p}${f}`],[o.default.data,i]),h&&s.push([c.propertyName,h])}(e,t,i),s.object(...i)}(e,t,n)}function u({errorPath:e},{instancePath:t}){const n=t?r.str`${e}${(0,s.getErrorPath)(t,s.Type.Str)}`:e;return[o.default.instancePath,(0,r.strConcat)(o.default.instancePath,n)]}function d({keyword:e,it:{errSchemaPath:t}},{schemaPath:n,parentSchema:o}){let a=o?t:r.str`${t}/${e}`;return n&&(a=r.str`${a}${(0,s.getErrorPath)(n,s.Type.Str)}`),[c.schemaPath,a]}},2702:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3758),s=n(1910),o=n(4678),a={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>s.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>s._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:n,schemaCode:a,data:i,$data:c,it:l}=e,{opts:u}=l;if(!c&&0===n.length)return;const d=n.length>=u.loopRequired;if(l.allErrors?function(){if(d||c)e.block$data(s.nil,h);else for(const t of n)(0,r.checkReportMissingProp)(e,t)}():function(){const o=t.let("missing");if(d||c){const n=t.let("valid",!0);e.block$data(n,()=>function(n,o){e.setParams({missingProperty:n}),t.forOf(n,a,()=>{t.assign(o,(0,r.propertyInData)(t,i,n,u.ownProperties)),t.if((0,s.not)(o),()=>{e.error(),t.break()})},s.nil)}(o,n)),e.ok(n)}else t.if((0,r.checkMissingProp)(e,n,o)),(0,r.reportMissingProp)(e,o),t.else()}(),u.strictRequired){const t=e.parentSchema.properties,{definedProperties:r}=e.it;for(const e of n)if(void 0===(null==t?void 0:t[e])&&!r.has(e)){const t=`required property "${e}" is not defined at "${l.schemaEnv.baseId+l.errSchemaPath}" (strictRequired)`;(0,o.checkStrictMode)(l,t,l.opts.strictRequired)}}function h(){t.forOf("prop",a,n=>{e.setParams({missingProperty:n}),t.if((0,r.noPropertyInData)(t,i,n,u.ownProperties),()=>e.error())})}}};t.default=a},2709:(e,t,n)=>{"use strict";n.d(t,{$O:()=>b,$S:()=>Q,Au:()=>L,Be:()=>c,Bj:()=>g,Ct:()=>y,Dl:()=>f,ER:()=>X,Eb:()=>V,F7:()=>j,FO:()=>ae,Fk:()=>W,Fn:()=>h,G1:()=>T,G8:()=>q,Hi:()=>H,Il:()=>re,KA:()=>M,KB:()=>I,Kn:()=>A,LK:()=>R,Mu:()=>a,Ny:()=>w,Pw:()=>_,Rl:()=>o,Tx:()=>Y,Uy:()=>$,WN:()=>ne,YA:()=>B,Zm:()=>U,_L:()=>N,_z:()=>v,aC:()=>p,bS:()=>ee,cU:()=>E,dR:()=>J,dZ:()=>oe,db:()=>P,em:()=>D,f2:()=>O,fU:()=>ie,fs:()=>m,gP:()=>k,hH:()=>K,jw:()=>z,lo:()=>te,m9:()=>Z,nA:()=>l,pY:()=>u,qF:()=>G,qG:()=>C,qm:()=>F,rk:()=>S,rt:()=>x,tB:()=>i,wA:()=>d,xY:()=>se});var r=n(668),s=n(9125);function o(e,t){return new e({type:"string",...s.A2(t)})}function a(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...s.A2(t)})}function i(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...s.A2(t)})}function c(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...s.A2(t)})}function l(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...s.A2(t)})}function u(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...s.A2(t)})}function d(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...s.A2(t)})}function h(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...s.A2(t)})}function p(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...s.A2(t)})}function f(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...s.A2(t)})}function m(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...s.A2(t)})}function g(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...s.A2(t)})}function y(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...s.A2(t)})}function _(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...s.A2(t)})}function v(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...s.A2(t)})}function w(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...s.A2(t)})}function b(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...s.A2(t)})}function $(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...s.A2(t)})}function k(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...s.A2(t)})}function x(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...s.A2(t)})}function E(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...s.A2(t)})}function I(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...s.A2(t)})}function S(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...s.A2(t)})}function T(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...s.A2(t)})}function P(e,t){return new e({type:"string",format:"date",check:"string_format",...s.A2(t)})}function A(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...s.A2(t)})}function O(e,t){return new e({type:"string",format:"duration",check:"string_format",...s.A2(t)})}function j(e,t){return new e({type:"number",checks:[],...s.A2(t)})}function C(e,t){return new e({type:"number",coerce:!0,checks:[],...s.A2(t)})}function R(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...s.A2(t)})}function N(e,t){return new e({type:"boolean",...s.A2(t)})}function z(e,t){return new e({type:"null",...s.A2(t)})}function M(e){return new e({type:"any"})}function D(e){return new e({type:"unknown"})}function q(e,t){return new e({type:"never",...s.A2(t)})}function L(e,t){return new r.sm({check:"less_than",...s.A2(t),value:e,inclusive:!1})}function U(e,t){return new r.sm({check:"less_than",...s.A2(t),value:e,inclusive:!0})}function Y(e,t){return new r.J_({check:"greater_than",...s.A2(t),value:e,inclusive:!1})}function F(e,t){return new r.J_({check:"greater_than",...s.A2(t),value:e,inclusive:!0})}function H(e,t){return new r.Jk({check:"multiple_of",...s.A2(t),value:e})}function V(e,t){return new r.Yk({check:"max_length",...s.A2(t),maximum:e})}function Z(e,t){return new r.Kk({check:"min_length",...s.A2(t),minimum:e})}function B(e,t){return new r.RM({check:"length_equals",...s.A2(t),length:e})}function W(e,t){return new r.DG({check:"string_format",format:"regex",...s.A2(t),pattern:e})}function K(e){return new r.NI({check:"string_format",format:"lowercase",...s.A2(e)})}function G(e){return new r.kH({check:"string_format",format:"uppercase",...s.A2(e)})}function J(e,t){return new r.Tt({check:"string_format",format:"includes",...s.A2(t),includes:e})}function Q(e,t){return new r.J({check:"string_format",format:"starts_with",...s.A2(t),prefix:e})}function X(e,t){return new r.E6({check:"string_format",format:"ends_with",...s.A2(t),suffix:e})}function ee(e){return new r.v$({check:"overwrite",tx:e})}function te(e){return ee(t=>t.normalize(e))}function ne(){return ee(e=>e.trim())}function re(){return ee(e=>e.toLowerCase())}function se(){return ee(e=>e.toUpperCase())}function oe(e,t,n){return new e({type:"array",element:t,...s.A2(n)})}function ae(e,t,n){const r=s.A2(n);return r.abort??(r.abort=!0),new e({type:"custom",check:"custom",fn:t,...r})}function ie(e,t,n){return new e({type:"custom",check:"custom",fn:t,...s.A2(n)})}},2805:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o=n(3758),a=n(8398),i={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>r.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>r._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,(0,s.alwaysValidSchema)(r,t)||(i?(0,a.validateAdditionalItems)(e,i):e.ok((0,o.validateArray)(e)))}};t.default=i},2813:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(8398),s=n(4401),o=n(2085),a=n(2805),i=n(8008),c=n(104),l=n(322),u=n(1637),d=n(9816),h=n(8074),p=n(6856),f=n(3122),m=n(2412),g=n(4063),y=n(9138),_=n(8963);t.default=function(e=!1){const t=[p.default,f.default,m.default,g.default,y.default,_.default,l.default,u.default,c.default,d.default,h.default];return e?t.push(s.default,a.default):t.push(r.default,o.default),t.push(i.default),t}},2836:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(1798).A)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},2975:(e,t,n)=>{"use strict";function r(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):{...e}:{}}n.d(t,{j:()=>re});var s=n(220);let o;async function a(e){return(await o).getRandomValues(new Uint8Array(e))}async function i(e){const t=await(await o).subtle.digest("SHA-256",(new TextEncoder).encode(e));return btoa(String.fromCharCode(...new Uint8Array(t))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}o=globalThis.crypto;var c=n(5636);var l=n(5514),u=n(2709);const d=c.OZ().superRefine((e,t)=>{if(!URL.canParse(e))return t.addIssue({code:"custom",message:"URL must be parseable",fatal:!0}),l.tm}).refine(e=>{const t=new URL(e);return"javascript:"!==t.protocol&&"data:"!==t.protocol&&"vbscript:"!==t.protocol},{message:"URL cannot use javascript:, data:, or vbscript: scheme"}),h=c._H({resource:c.Yj().url(),authorization_servers:c.YO(d).optional(),jwks_uri:c.Yj().url().optional(),scopes_supported:c.YO(c.Yj()).optional(),bearer_methods_supported:c.YO(c.Yj()).optional(),resource_signing_alg_values_supported:c.YO(c.Yj()).optional(),resource_name:c.Yj().optional(),resource_documentation:c.Yj().optional(),resource_policy_uri:c.Yj().url().optional(),resource_tos_uri:c.Yj().url().optional(),tls_client_certificate_bound_access_tokens:c.zM().optional(),authorization_details_types_supported:c.YO(c.Yj()).optional(),dpop_signing_alg_values_supported:c.YO(c.Yj()).optional(),dpop_bound_access_tokens_required:c.zM().optional()}),p=c._H({issuer:c.Yj(),authorization_endpoint:d,token_endpoint:d,registration_endpoint:d.optional(),scopes_supported:c.YO(c.Yj()).optional(),response_types_supported:c.YO(c.Yj()),response_modes_supported:c.YO(c.Yj()).optional(),grant_types_supported:c.YO(c.Yj()).optional(),token_endpoint_auth_methods_supported:c.YO(c.Yj()).optional(),token_endpoint_auth_signing_alg_values_supported:c.YO(c.Yj()).optional(),service_documentation:d.optional(),revocation_endpoint:d.optional(),revocation_endpoint_auth_methods_supported:c.YO(c.Yj()).optional(),revocation_endpoint_auth_signing_alg_values_supported:c.YO(c.Yj()).optional(),introspection_endpoint:c.Yj().optional(),introspection_endpoint_auth_methods_supported:c.YO(c.Yj()).optional(),introspection_endpoint_auth_signing_alg_values_supported:c.YO(c.Yj()).optional(),code_challenge_methods_supported:c.YO(c.Yj()).optional(),client_id_metadata_document_supported:c.zM().optional()}),f=c._H({issuer:c.Yj(),authorization_endpoint:d,token_endpoint:d,userinfo_endpoint:d.optional(),jwks_uri:d,registration_endpoint:d.optional(),scopes_supported:c.YO(c.Yj()).optional(),response_types_supported:c.YO(c.Yj()),response_modes_supported:c.YO(c.Yj()).optional(),grant_types_supported:c.YO(c.Yj()).optional(),acr_values_supported:c.YO(c.Yj()).optional(),subject_types_supported:c.YO(c.Yj()),id_token_signing_alg_values_supported:c.YO(c.Yj()),id_token_encryption_alg_values_supported:c.YO(c.Yj()).optional(),id_token_encryption_enc_values_supported:c.YO(c.Yj()).optional(),userinfo_signing_alg_values_supported:c.YO(c.Yj()).optional(),userinfo_encryption_alg_values_supported:c.YO(c.Yj()).optional(),userinfo_encryption_enc_values_supported:c.YO(c.Yj()).optional(),request_object_signing_alg_values_supported:c.YO(c.Yj()).optional(),request_object_encryption_alg_values_supported:c.YO(c.Yj()).optional(),request_object_encryption_enc_values_supported:c.YO(c.Yj()).optional(),token_endpoint_auth_methods_supported:c.YO(c.Yj()).optional(),token_endpoint_auth_signing_alg_values_supported:c.YO(c.Yj()).optional(),display_values_supported:c.YO(c.Yj()).optional(),claim_types_supported:c.YO(c.Yj()).optional(),claims_supported:c.YO(c.Yj()).optional(),service_documentation:c.Yj().optional(),claims_locales_supported:c.YO(c.Yj()).optional(),ui_locales_supported:c.YO(c.Yj()).optional(),claims_parameter_supported:c.zM().optional(),request_parameter_supported:c.zM().optional(),request_uri_parameter_supported:c.zM().optional(),require_request_uri_registration:c.zM().optional(),op_policy_uri:d.optional(),op_tos_uri:d.optional(),client_id_metadata_document_supported:c.zM().optional()}),m=c.Ik({...f.shape,...p.pick({code_challenge_methods_supported:!0}).shape}),g=c.Ik({access_token:c.Yj(),id_token:c.Yj().optional(),token_type:c.Yj(),expires_in:u.qG(c.rS,undefined).optional(),scope:c.Yj().optional(),refresh_token:c.Yj().optional()}).strip();const y=c.Ik({error:c.Yj(),error_description:c.Yj().optional(),error_uri:c.Yj().optional()}),_=d.optional().or(c.eu("").transform(()=>{})),v=c.Ik({redirect_uris:c.YO(d),token_endpoint_auth_method:c.Yj().optional(),grant_types:c.YO(c.Yj()).optional(),response_types:c.YO(c.Yj()).optional(),client_name:c.Yj().optional(),client_uri:d.optional(),logo_uri:_,scope:c.Yj().optional(),contacts:c.YO(c.Yj()).optional(),tos_uri:_,policy_uri:c.Yj().optional(),jwks_uri:d.optional(),jwks:c.bz().optional(),software_id:c.Yj().optional(),software_version:c.Yj().optional(),software_statement:c.Yj().optional()}).strip(),w=c.Ik({client_id:c.Yj(),client_secret:c.Yj().optional(),client_id_issued_at:c.ai().optional(),client_secret_expires_at:c.ai().optional()}).strip(),b=v.merge(w);c.Ik({error:c.Yj(),error_description:c.Yj().optional()}).strip(),c.Ik({token:c.Yj(),token_type_hint:c.Yj().optional()}).strip();class $ extends Error{constructor(e,t){super(e),this.errorUri=t,this.name=this.constructor.name}toResponseObject(){const e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}}class k extends ${}k.errorCode="invalid_request";class x extends ${}x.errorCode="invalid_client";class E extends ${}E.errorCode="invalid_grant";class I extends ${}I.errorCode="unauthorized_client";class S extends ${}S.errorCode="unsupported_grant_type";class T extends ${}T.errorCode="invalid_scope";class P extends ${}P.errorCode="access_denied";class A extends ${}A.errorCode="server_error";class O extends ${}O.errorCode="temporarily_unavailable";class j extends ${}j.errorCode="unsupported_response_type";class C extends ${}C.errorCode="unsupported_token_type";class R extends ${}R.errorCode="invalid_token";class N extends ${}N.errorCode="method_not_allowed";class z extends ${}z.errorCode="too_many_requests";class M extends ${}M.errorCode="invalid_client_metadata";class D extends ${}D.errorCode="insufficient_scope";class q extends ${}q.errorCode="invalid_target";const L={[k.errorCode]:k,[x.errorCode]:x,[E.errorCode]:E,[I.errorCode]:I,[S.errorCode]:S,[T.errorCode]:T,[P.errorCode]:P,[A.errorCode]:A,[O.errorCode]:O,[j.errorCode]:j,[C.errorCode]:C,[R.errorCode]:R,[N.errorCode]:N,[z.errorCode]:z,[M.errorCode]:M,[D.errorCode]:D,[q.errorCode]:q};class U extends Error{constructor(e){super(e??"Unauthorized")}}const Y="code",F="S256";async function H(e){const t=e instanceof Response?e.status:void 0,n=e instanceof Response?await e.text():e;try{const e=y.parse(JSON.parse(n)),{error:t,error_description:r,error_uri:s}=e;return new(L[t]||A)(r||"",s)}catch(e){return new A(`${t?`HTTP ${t}: `:""}Invalid OAuth error response: ${e}. Raw body: ${n}`)}}async function V(e,t){try{return await Z(e,t)}catch(n){if(n instanceof x||n instanceof I)return await(e.invalidateCredentials?.("all")),await Z(e,t);if(n instanceof E)return await(e.invalidateCredentials?.("tokens")),await Z(e,t);throw n}}async function Z(e,{serverUrl:t,authorizationCode:n,scope:r,resourceMetadataUrl:o,fetchFn:c}){let l,u;try{l=await async function(e,t,n=fetch){const r=await async function(e,t,n,r){const o=new URL(e),a=r?.protocolVersion??s.aE;let i;if(r?.metadataUrl)i=new URL(r.metadataUrl);else{const e=function(e,t="",n={}){return t.endsWith("/")&&(t=t.slice(0,-1)),n.prependPathname?`${t}/.well-known/${e}`:`/.well-known/${e}${t}`}(t,o.pathname);i=new URL(e,r?.metadataServerUrl??o),i.search=o.search}let c=await G(i,a,n);if(!r?.metadataUrl&&function(e,t){return!e||e.status>=400&&e.status<500&&"/"!==t}(c,o.pathname)){const e=new URL(`/.well-known/${t}`,o);c=await G(e,a,n)}return c}(e,"oauth-protected-resource",n,{protocolVersion:t?.protocolVersion,metadataUrl:t?.resourceMetadataUrl});if(!r||404===r.status)throw await(r?.body?.cancel()),new Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!r.ok)throw await(r.body?.cancel()),new Error(`HTTP ${r.status} trying to load well-known OAuth protected resource metadata.`);return h.parse(await r.json())}(t,{resourceMetadataUrl:o},c),l.authorization_servers&&l.authorization_servers.length>0&&(u=l.authorization_servers[0])}catch{}u||(u=new URL("/",t));const d=await async function(e,t,n){const r=function(e){const t="string"==typeof e?new URL(e):new URL(e.href);return t.hash="",t}(e);if(t.validateResourceURL)return await t.validateResourceURL(r,n?.resource);if(n){if(!function({requestedResource:e,configuredResource:t}){const n="string"==typeof e?new URL(e):new URL(e.href),r="string"==typeof t?new URL(t):new URL(t.href);if(n.origin!==r.origin)return!1;if(n.pathname.length<r.pathname.length)return!1;const s=n.pathname.endsWith("/")?n.pathname:n.pathname+"/",o=r.pathname.endsWith("/")?r.pathname:r.pathname+"/";return s.startsWith(o)}({requestedResource:r,configuredResource:n.resource}))throw new Error(`Protected resource ${n.resource} does not match expected ${r} (or origin)`);return new URL(n.resource)}}(t,e,l),f=await async function(e,{fetchFn:t=fetch,protocolVersion:n=s.aE}={}){const r={"MCP-Protocol-Version":n,Accept:"application/json"},o=function(e){const t="string"==typeof e?new URL(e):e,n=[];if(!("/"!==t.pathname))return n.push({url:new URL("/.well-known/oauth-authorization-server",t.origin),type:"oauth"}),n.push({url:new URL("/.well-known/openid-configuration",t.origin),type:"oidc"}),n;let r=t.pathname;return r.endsWith("/")&&(r=r.slice(0,-1)),n.push({url:new URL(`/.well-known/oauth-authorization-server${r}`,t.origin),type:"oauth"}),n.push({url:new URL(`/.well-known/openid-configuration${r}`,t.origin),type:"oidc"}),n.push({url:new URL(`${r}/.well-known/openid-configuration`,t.origin),type:"oidc"}),n}(e);for(const{url:e,type:n}of o){const s=await K(e,r,t);if(s){if(!s.ok){if(await(s.body?.cancel()),s.status>=400&&s.status<500)continue;throw new Error(`HTTP ${s.status} trying to load ${"oauth"===n?"OAuth":"OpenID provider"} metadata from ${e}`)}return"oauth"===n?p.parse(await s.json()):m.parse(await s.json())}}}(u,{fetchFn:c});let g=await Promise.resolve(e.clientInformation());if(!g){if(void 0!==n)throw new Error("Existing OAuth client information is required when exchanging an authorization code");const t=!0===f?.client_id_metadata_document_supported,r=e.clientMetadataUrl;if(r&&!function(e){if(!e)return!1;try{const t=new URL(e);return"https:"===t.protocol&&"/"!==t.pathname}catch{return!1}}(r))throw new M(`clientMetadataUrl must be a valid HTTPS URL with a non-root pathname, got: ${r}`);if(t&&r)g={client_id:r},await(e.saveClientInformation?.(g));else{if(!e.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");const t=await async function(e,{metadata:t,clientMetadata:n,fetchFn:r}){let s;if(t){if(!t.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");s=new URL(t.registration_endpoint)}else s=new URL("/register",e);const o=await(r??fetch)(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!o.ok)throw await H(o);return b.parse(await o.json())}(u,{metadata:f,clientMetadata:e.clientMetadata,fetchFn:c});await e.saveClientInformation(t),g=t}}const y=!e.redirectUrl;if(void 0!==n||y){const t=await async function(e,t,{metadata:n,resource:r,authorizationCode:s,fetchFn:o}={}){const a=e.clientMetadata.scope;let i;if(e.prepareTokenRequest&&(i=await e.prepareTokenRequest(a)),!i){if(!s)throw new Error("Either provider.prepareTokenRequest() or authorizationCode is required");if(!e.redirectUrl)throw new Error("redirectUrl is required for authorization_code flow");i=function(e,t,n){return new URLSearchParams({grant_type:"authorization_code",code:e,code_verifier:t,redirect_uri:String(n)})}(s,await e.codeVerifier(),e.redirectUrl)}return J(t,{metadata:n,tokenRequestParams:i,clientInformation:await e.clientInformation()??void 0,addClientAuthentication:e.addClientAuthentication,resource:r,fetchFn:o})}(e,u,{metadata:f,resource:d,authorizationCode:n,fetchFn:c});return await e.saveTokens(t),"AUTHORIZED"}const _=await e.tokens();if(_?.refresh_token)try{const t=await async function(e,{metadata:t,clientInformation:n,refreshToken:r,resource:s,addClientAuthentication:o,fetchFn:a}){const i=new URLSearchParams({grant_type:"refresh_token",refresh_token:r});return{refresh_token:r,...await J(e,{metadata:t,tokenRequestParams:i,clientInformation:n,addClientAuthentication:o,resource:s,fetchFn:a})}}(u,{metadata:f,clientInformation:g,refreshToken:_.refresh_token,resource:d,addClientAuthentication:e.addClientAuthentication,fetchFn:c});return await e.saveTokens(t),"AUTHORIZED"}catch(e){if(e instanceof $&&!(e instanceof A))throw e}const v=e.state?await e.state():void 0,{authorizationUrl:w,codeVerifier:k}=await async function(e,{metadata:t,clientInformation:n,redirectUrl:r,scope:s,state:o,resource:c}){let l;if(t){if(l=new URL(t.authorization_endpoint),!t.response_types_supported.includes(Y))throw new Error(`Incompatible auth server: does not support response type ${Y}`);if(t.code_challenge_methods_supported&&!t.code_challenge_methods_supported.includes(F))throw new Error(`Incompatible auth server: does not support code challenge method ${F}`)}else l=new URL("/authorize",e);const u=await async function(e){if(e||(e=43),e<43||e>128)throw`Expected a length between 43 and 128. Received ${e}.`;const t=await async function(e){return await async function(e){const t=Math.pow(2,8)-Math.pow(2,8)%66;let n="";for(;n.length<e;){const r=await a(e-n.length);for(const e of r)e<t&&(n+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~"[e%66])}return n}(e)}(e);return{code_verifier:t,code_challenge:await i(t)}}(),d=u.code_verifier,h=u.code_challenge;return l.searchParams.set("response_type",Y),l.searchParams.set("client_id",n.client_id),l.searchParams.set("code_challenge",h),l.searchParams.set("code_challenge_method",F),l.searchParams.set("redirect_uri",String(r)),o&&l.searchParams.set("state",o),s&&l.searchParams.set("scope",s),s?.includes("offline_access")&&l.searchParams.append("prompt","consent"),c&&l.searchParams.set("resource",c.href),{authorizationUrl:l,codeVerifier:d}}(u,{metadata:f,clientInformation:g,state:v,redirectUrl:e.redirectUrl,scope:r||l?.scopes_supported?.join(" ")||e.clientMetadata.scope,resource:d});return await e.saveCodeVerifier(k),await e.redirectToAuthorization(w),"REDIRECT"}function B(e){const t=e.headers.get("WWW-Authenticate");if(!t)return{};const[n,r]=t.split(" ");if("bearer"!==n.toLowerCase()||!r)return{};const s=W(e,"resource_metadata")||void 0;let o;if(s)try{o=new URL(s)}catch{}return{resourceMetadataUrl:o,scope:W(e,"scope")||void 0,error:W(e,"error")||void 0}}function W(e,t){const n=e.headers.get("WWW-Authenticate");if(!n)return null;const r=new RegExp(`${t}=(?:"([^"]+)"|([^\\s,]+))`),s=n.match(r);return s?s[1]||s[2]:null}async function K(e,t,n=fetch){try{return await n(e,{headers:t})}catch(r){if(r instanceof TypeError)return t?K(e,void 0,n):void 0;throw r}}async function G(e,t,n=fetch){const r={"MCP-Protocol-Version":t};return await K(e,r,n)}async function J(e,{metadata:t,tokenRequestParams:n,clientInformation:r,addClientAuthentication:s,resource:o,fetchFn:a}){const i=t?.token_endpoint?new URL(t.token_endpoint):new URL("/token",e),c=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"});if(o&&n.set("resource",o.href),s)await s(c,n,i,t);else if(r){const e=function(e,t){const n=void 0!==e.client_secret;return 0===t.length?n?"client_secret_post":"none":"token_endpoint_auth_method"in e&&e.token_endpoint_auth_method&&(r=e.token_endpoint_auth_method,["client_secret_basic","client_secret_post","none"].includes(r))&&t.includes(e.token_endpoint_auth_method)?e.token_endpoint_auth_method:n&&t.includes("client_secret_basic")?"client_secret_basic":n&&t.includes("client_secret_post")?"client_secret_post":t.includes("none")?"none":n?"client_secret_post":"none";var r}(r,t?.token_endpoint_auth_methods_supported??[]);!function(e,t,n,r){const{client_id:s,client_secret:o}=t;switch(e){case"client_secret_basic":return void function(e,t,n){if(!t)throw new Error("client_secret_basic authentication requires a client_secret");const r=btoa(`${e}:${t}`);n.set("Authorization",`Basic ${r}`)}(s,o,n);case"client_secret_post":return void function(e,t,n){n.set("client_id",e),t&&n.set("client_secret",t)}(s,o,r);case"none":return void function(e,t){t.set("client_id",e)}(s,r);default:throw new Error(`Unsupported client authentication method: ${e}`)}}(e,r,c,n)}const l=await(a??fetch)(i,{method:"POST",headers:c,body:n});if(!l.ok)throw await H(l);return g.parse(await l.json())}class Q extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function X(e){}class ee extends TransformStream{constructor({onError:e,onRetry:t,onComment:n}={}){let r;super({start(s){r=function(e){if("function"==typeof e)throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=X,onError:n=X,onRetry:r=X,onComment:s}=e;let o,a="",i=!0,c="",l="";function u(e){if(""===e)return c.length>0&&t({id:o,event:l||void 0,data:c.endsWith("\n")?c.slice(0,-1):c}),o=void 0,c="",void(l="");if(e.startsWith(":"))return void(s&&s(e.slice(e.startsWith(": ")?2:1)));const n=e.indexOf(":");if(-1!==n){const t=e.slice(0,n),r=" "===e[n+1]?2:1;return void d(t,e.slice(n+r),e)}d(e,"",e)}function d(e,t,s){switch(e){case"event":l=t;break;case"data":c=`${c}${t}\n`;break;case"id":o=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?r(parseInt(t,10)):n(new Q(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:s}));break;default:n(new Q(`Unknown field "${e.length>20?`${e.slice(0,20)}`:e}"`,{type:"unknown-field",field:e,value:t,line:s}))}}return{feed:function(e){const t=i?e.replace(/^\xEF\xBB\xBF/,""):e,[n,r]=function(e){const t=[];let n="",r=0;for(;r<e.length;){const s=e.indexOf("\r",r),o=e.indexOf("\n",r);let a=-1;if(-1!==s&&-1!==o?a=Math.min(s,o):-1!==s?a=s===e.length-1?-1:s:-1!==o&&(a=o),-1===a){n=e.slice(r);break}{const n=e.slice(r,a);t.push(n),r=a+1,"\r"===e[r-1]&&"\n"===e[r]&&r++}}return[t,n]}(`${a}${t}`);for(const e of n)u(e);a=r,i=!1},reset:function(e={}){a&&e.consume&&u(a),i=!0,o=void 0,c="",l="",a=""}}}({onEvent:e=>{s.enqueue(e)},onError(t){"terminate"===e?s.error(t):"function"==typeof e&&e(t)},onRetry:t,onComment:n})},transform(e){r.feed(e)}})}}const te={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2};class ne extends Error{constructor(e,t){super(`Streamable HTTP error: ${t}`),this.code=e}}class re{constructor(e,t){this._hasCompletedAuthFlow=!1,this._url=e,this._resourceMetadataUrl=void 0,this._scope=void 0,this._requestInit=t?.requestInit,this._authProvider=t?.authProvider,this._fetch=t?.fetch,this._fetchWithInit=function(e=fetch,t){return t?async(n,s)=>{const o={...t,...s,headers:s?.headers?{...r(t.headers),...r(s.headers)}:t.headers};return e(n,o)}:e}(t?.fetch,t?.requestInit),this._sessionId=t?.sessionId,this._reconnectionOptions=t?.reconnectionOptions??te}async _authThenStart(){if(!this._authProvider)throw new U("No auth provider");let e;try{e=await V(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})}catch(e){throw this.onerror?.(e),e}if("AUTHORIZED"!==e)throw new U;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){const e={};if(this._authProvider){const t=await this._authProvider.tokens();t&&(e.Authorization=`Bearer ${t.access_token}`)}this._sessionId&&(e["mcp-session-id"]=this._sessionId),this._protocolVersion&&(e["mcp-protocol-version"]=this._protocolVersion);const t=r(this._requestInit?.headers);return new Headers({...e,...t})}async _startOrAuthSse(e){const{resumptionToken:t}=e;try{const n=await this._commonHeaders();n.set("Accept","text/event-stream"),t&&n.set("last-event-id",t);const r=await(this._fetch??fetch)(this._url,{method:"GET",headers:n,signal:this._abortController?.signal});if(!r.ok){if(await(r.body?.cancel()),401===r.status&&this._authProvider)return await this._authThenStart();if(405===r.status)return;throw new ne(r.status,`Failed to open SSE stream: ${r.statusText}`)}this._handleSseStream(r.body,e,!0)}catch(e){throw this.onerror?.(e),e}}_getNextReconnectionDelay(e){if(void 0!==this._serverRetryMs)return this._serverRetryMs;const t=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,r=this._reconnectionOptions.maxReconnectionDelay;return Math.min(t*Math.pow(n,e),r)}_scheduleReconnection(e,t=0){const n=this._reconnectionOptions.maxRetries;if(t>=n)return void this.onerror?.(new Error(`Maximum reconnection attempts (${n}) exceeded.`));const r=this._getNextReconnectionDelay(t);this._reconnectionTimeout=setTimeout(()=>{this._startOrAuthSse(e).catch(n=>{this.onerror?.(new Error(`Failed to reconnect SSE stream: ${n instanceof Error?n.message:String(n)}`)),this._scheduleReconnection(e,t+1)})},r)}_handleSseStream(e,t,n){if(!e)return;const{onresumptiontoken:r,replayMessageId:o}=t;let a,i=!1,c=!1;(async()=>{try{const t=e.pipeThrough(new TextDecoderStream).pipeThrough(new ee({onRetry:e=>{this._serverRetryMs=e}})).getReader();for(;;){const{value:e,done:n}=await t.read();if(n)break;if(e.id&&(a=e.id,i=!0,r?.(e.id)),e.data&&(!e.event||"message"===e.event))try{const t=s.OR.parse(JSON.parse(e.data));(0,s.ig)(t)&&(c=!0,void 0!==o&&(t.id=o)),this.onmessage?.(t)}catch(e){this.onerror?.(e)}}(n||i)&&!c&&this._abortController&&!this._abortController.signal.aborted&&this._scheduleReconnection({resumptionToken:a,onresumptiontoken:r,replayMessageId:o},0)}catch(e){if(this.onerror?.(new Error(`SSE stream disconnected: ${e}`)),(n||i)&&!c&&this._abortController&&!this._abortController.signal.aborted)try{this._scheduleReconnection({resumptionToken:a,onresumptiontoken:r,replayMessageId:o},0)}catch(e){this.onerror?.(new Error(`Failed to reconnect: ${e instanceof Error?e.message:String(e)}`))}}})()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new U("No auth provider");if("AUTHORIZED"!==await V(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit}))throw new U("Failed to authorize")}async close(){this._reconnectionTimeout&&(clearTimeout(this._reconnectionTimeout),this._reconnectionTimeout=void 0),this._abortController?.abort(),this.onclose?.()}async send(e,t){try{const{resumptionToken:n,onresumptiontoken:r}=t||{};if(n)return void this._startOrAuthSse({resumptionToken:n,replayMessageId:(0,s.vo)(e)?e.id:void 0}).catch(e=>this.onerror?.(e));const o=await this._commonHeaders();o.set("content-type","application/json"),o.set("accept","application/json, text/event-stream");const a={...this._requestInit,method:"POST",headers:o,body:JSON.stringify(e),signal:this._abortController?.signal},i=await(this._fetch??fetch)(this._url,a),c=i.headers.get("mcp-session-id");if(c&&(this._sessionId=c),!i.ok){const t=await i.text().catch(()=>null);if(401===i.status&&this._authProvider){if(this._hasCompletedAuthFlow)throw new ne(401,"Server returned 401 after successful authentication");const{resourceMetadataUrl:t,scope:n}=B(i);if(this._resourceMetadataUrl=t,this._scope=n,"AUTHORIZED"!==await V(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit}))throw new U;return this._hasCompletedAuthFlow=!0,this.send(e)}if(403===i.status&&this._authProvider){const{resourceMetadataUrl:t,scope:n,error:r}=B(i);if("insufficient_scope"===r){const r=i.headers.get("WWW-Authenticate");if(this._lastUpscopingHeader===r)throw new ne(403,"Server returned 403 after trying upscoping");if(n&&(this._scope=n),t&&(this._resourceMetadataUrl=t),this._lastUpscopingHeader=r??void 0,"AUTHORIZED"!==await V(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetch}))throw new U;return this.send(e)}}throw new ne(i.status,`Error POSTing to endpoint: ${t}`)}if(this._hasCompletedAuthFlow=!1,this._lastUpscopingHeader=void 0,202===i.status)return await(i.body?.cancel()),void((0,s.wU)(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(e=>this.onerror?.(e)));const l=(Array.isArray(e)?e:[e]).filter(e=>"method"in e&&"id"in e&&void 0!==e.id).length>0,u=i.headers.get("content-type");if(l)if(u?.includes("text/event-stream"))this._handleSseStream(i.body,{onresumptiontoken:r},!1);else{if(!u?.includes("application/json"))throw await(i.body?.cancel()),new ne(-1,`Unexpected content type: ${u}`);{const e=await i.json(),t=Array.isArray(e)?e.map(e=>s.OR.parse(e)):[s.OR.parse(e)];for(const e of t)this.onmessage?.(e)}}else await(i.body?.cancel())}catch(e){throw this.onerror?.(e),e}}get sessionId(){return this._sessionId}async terminateSession(){if(this._sessionId)try{const e=await this._commonHeaders(),t={...this._requestInit,method:"DELETE",headers:e,signal:this._abortController?.signal},n=await(this._fetch??fetch)(this._url,t);if(await(n.body?.cancel()),!n.ok&&405!==n.status)throw new ne(n.status,`Failed to terminate session: ${n.statusText}`);this._sessionId=void 0}catch(e){throw this.onerror?.(e),e}}setProtocolVersion(e){this._protocolVersion=e}get protocolVersion(){return this._protocolVersion}async resumeStream(e,t){await this._startOrAuthSse({resumptionToken:e,onresumptiontoken:t?.onresumptiontoken})}}},3100:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(1081),o=n(9700),a=n(1688),i=n(4678),c={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===s.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>r._`{error: ${e}, tag: ${n}, tagValue: ${t}}`},code(e){const{gen:t,data:n,schema:c,parentSchema:l,it:u}=e,{oneOf:d}=l;if(!u.opts.discriminator)throw new Error("discriminator: requires discriminator option");const h=c.propertyName;if("string"!=typeof h)throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!d)throw new Error("discriminator: requires oneOf keyword");const p=t.let("valid",!1),f=t.const("tag",r._`${n}${(0,r.getProperty)(h)}`);function m(n){const s=t.name("valid"),o=e.subschema({keyword:"oneOf",schemaProp:n},s);return e.mergeEvaluated(o,r.Name),s}t.if(r._`typeof ${f} == "string"`,()=>function(){const n=function(){var e;const t={},n=s(l);let r=!0;for(let t=0;t<d.length;t++){let l=d[t];if((null==l?void 0:l.$ref)&&!(0,i.schemaHasRulesButRef)(l,u.self.RULES)){const e=l.$ref;if(l=o.resolveRef.call(u.self,u.schemaEnv.root,u.baseId,e),l instanceof o.SchemaEnv&&(l=l.schema),void 0===l)throw new a.default(u.opts.uriResolver,u.baseId,e)}const p=null===(e=null==l?void 0:l.properties)||void 0===e?void 0:e[h];if("object"!=typeof p)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${h}"`);r=r&&(n||s(l)),c(p,t)}if(!r)throw new Error(`discriminator: "${h}" must be required`);return t;function s({required:e}){return Array.isArray(e)&&e.includes(h)}function c(e,t){if(e.const)p(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${h}" must have "const" or "enum"`);for(const n of e.enum)p(n,t)}}function p(e,n){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${h}" values must be unique strings`);t[e]=n}}();t.if(!1);for(const e in n)t.elseIf(r._`${f} === ${e}`),t.assign(p,m(n[e]));t.else(),e.error(!1,{discrError:s.DiscrError.Mapping,tag:f,tagName:h}),t.endIf()}(),()=>e.error(!1,{discrError:s.DiscrError.Tag,tag:f,tagName:h})),e.ok(p)}};t.default=c},3122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:n(3758).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=r},3133:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o=n(353),a={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>r._`{allowedValues: ${e}}`},code(e){const{gen:t,data:n,$data:a,schema:i,schemaCode:c,it:l}=e;if(!a&&0===i.length)throw new Error("enum must have non-empty array");const u=i.length>=l.opts.loopEnum;let d;const h=()=>null!=d?d:d=(0,s.useFunc)(t,o.default);let p;if(u||a)p=t.let("valid"),e.block$data(p,function(){t.assign(p,!1),t.forOf("v",c,e=>t.if(r._`${h()}(${n}, ${e})`,()=>t.assign(p,!0).break()))});else{if(!Array.isArray(i))throw new Error("ajv implementation error");const e=t.const("vSchema",c);p=(0,r.or)(...i.map((_x,t)=>function(e,t){const s=i[t];return"object"==typeof s&&null!==s?r._`${h()}(${n}, ${e}[${t}])`:r._`${n} === ${s}`}(e,t)))}e.pass(p)}};t.default=a},3152:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(1798).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},3345:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class n{}t._CodeOrName=n,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends n{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class s extends n{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((e,t)=>`${e}${t}`,"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((e,t)=>(t instanceof r&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function o(e,...t){const n=[e[0]];let r=0;for(;r<t.length;)c(n,t[r]),n.push(e[++r]);return new s(n)}t._Code=s,t.nil=new s(""),t._=o;const a=new s("+");function i(e,...t){const n=[u(e[0])];let r=0;for(;r<t.length;)n.push(a),c(n,t[r]),n.push(a,u(e[++r]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===a){const n=l(e[t-1],e[t+1]);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(n),new s(n)}function c(e,t){var n;t instanceof s?e.push(...t._items):t instanceof r?e.push(t):e.push("number"==typeof(n=t)||"boolean"==typeof n||null===n?n:u(Array.isArray(n)?n.join(","):n))}function l(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof r||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof r?void 0:`"${e}${t.slice(1)}`}function u(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=i,t.addCodeArg=c,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:i`${e}${t}`},t.stringify=function(e){return new s(u(e))},t.safeStringify=u,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new s(`.${e}`):o`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new s(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(e){return new s(e.toString())}},3403:e=>{"use strict";const t=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),n=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function r(e){let t="",n=0,r=0;for(r=0;r<e.length;r++)if(n=e[r].charCodeAt(0),48!==n){if(!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r];break}for(r+=1;r<e.length;r++){if(n=e[r].charCodeAt(0),!(n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102))return"";t+=e[r]}return t}const s=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function o(e){return e.length=0,!0}function a(e,t,n){if(e.length){const s=r(e);if(""===s)return n.error=!0,!1;t.push(s),e.length=0}return!0}function i(e){if(function(e){let t=0;for(let n=0;n<e.length;n++)":"===e[n]&&t++;return t}(e)<2)return{host:e,isIPV6:!1};const t=function(e){let t=0;const n={error:!1,address:"",zone:""},s=[],i=[];let c=!1,l=!1,u=a;for(let r=0;r<e.length;r++){const a=e[r];if("["!==a&&"]"!==a)if(":"!==a)if("%"===a){if(!u(i,s,n))break;u=o}else i.push(a);else{if(!0===c&&(l=!0),!u(i,s,n))break;if(++t>7){n.error=!0;break}r>0&&":"===e[r-1]&&(c=!0),s.push(":")}}return i.length&&(u===o?n.zone=i.join(""):l?s.push(i.join("")):s.push(r(i))),n.address=s.join(""),n}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,n=t.address;return t.zone&&(e+="%"+t.zone,n+="%25"+t.zone),{host:e,isIPV6:!0,escapedHost:n}}}e.exports={nonSimpleDomain:s,recomposeAuthority:function(e){const t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){let r=unescape(e.host);if(!n(r)){const t=i(r);r=!0===t.isIPV6?`[${t.escapedHost}]`:e.host}t.push(r)}return"number"!=typeof e.port&&"string"!=typeof e.port||(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},normalizeComponentEncoding:function(e,t){const n=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=n(e.scheme)),void 0!==e.userinfo&&(e.userinfo=n(e.userinfo)),void 0!==e.host&&(e.host=n(e.host)),void 0!==e.path&&(e.path=n(e.path)),void 0!==e.query&&(e.query=n(e.query)),void 0!==e.fragment&&(e.fragment=n(e.fragment)),e},removeDotSegments:function(e){let t=e;const n=[];let r=-1,s=0;for(;s=t.length;){if(1===s){if("."===t)break;if("/"===t){n.push("/");break}n.push(t);break}if(2===s){if("."===t[0]){if("."===t[1])break;if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&("."===t[1]||"/"===t[1])){n.push("/");break}}else if(3===s&&"/.."===t){0!==n.length&&n.pop(),n.push("/");break}if("."===t[0]){if("."===t[1]){if("/"===t[2]){t=t.slice(3);continue}}else if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&"."===t[1]){if("/"===t[2]){t=t.slice(2);continue}if("."===t[2]&&"/"===t[3]){t=t.slice(3),0!==n.length&&n.pop();continue}}if(-1===(r=t.indexOf("/",1))){n.push(t);break}n.push(t.slice(0,r)),t=t.slice(r)}return n.join("")},isIPv4:n,isUUID:t,normalizeIPv6:i,stringArrayToHexStripped:r}},3419:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;const r=n(9008),s=n(311),o=n(8514),a=n(311),i=n(6853),c=n(3800),l=n(9590),u=n(1910),d=n(2304),h=n(8668),p=n(4678),f=n(2693);function m({gen:e,validateName:t,schema:n,schemaEnv:r,opts:s},o){s.code.es5?e.func(t,u._`${d.default.data}, ${d.default.valCxt}`,r.$async,()=>{e.code(u._`"use strict"; ${g(n,s)}`),function(e,t){e.if(d.default.valCxt,()=>{e.var(d.default.instancePath,u._`${d.default.valCxt}.${d.default.instancePath}`),e.var(d.default.parentData,u._`${d.default.valCxt}.${d.default.parentData}`),e.var(d.default.parentDataProperty,u._`${d.default.valCxt}.${d.default.parentDataProperty}`),e.var(d.default.rootData,u._`${d.default.valCxt}.${d.default.rootData}`),t.dynamicRef&&e.var(d.default.dynamicAnchors,u._`${d.default.valCxt}.${d.default.dynamicAnchors}`)},()=>{e.var(d.default.instancePath,u._`""`),e.var(d.default.parentData,u._`undefined`),e.var(d.default.parentDataProperty,u._`undefined`),e.var(d.default.rootData,d.default.data),t.dynamicRef&&e.var(d.default.dynamicAnchors,u._`{}`)})}(e,s),e.code(o)}):e.func(t,u._`${d.default.data}, ${function(e){return u._`{${d.default.instancePath}="", ${d.default.parentData}, ${d.default.parentDataProperty}, ${d.default.rootData}=${d.default.data}${e.dynamicRef?u._`, ${d.default.dynamicAnchors}={}`:u.nil}}={}`}(s)}`,r.$async,()=>e.code(g(n,s)).code(o))}function g(e,t){const n="object"==typeof e&&e[t.schemaId];return n&&(t.code.source||t.code.process)?u._`/*# sourceURL=${n} */`:u.nil}function y({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function _(e){return"boolean"!=typeof e.schema}function v(e){(0,p.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:n,opts:r,self:s}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}(e)}function w(e,t){if(e.opts.jtd)return $(e,[],!1,t);const n=(0,s.getSchemaTypes)(e.schema);$(e,n,!(0,s.coerceAndCheckDataType)(e,n),t)}function b({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:s}){const o=n.$comment;if(!0===s.$comment)e.code(u._`${d.default.self}.logger.log(${o})`);else if("function"==typeof s.$comment){const n=u.str`${r}/$comment`,s=e.scopeValue("root",{ref:t.root});e.code(u._`${d.default.self}.opts.$comment(${o}, ${n}, ${s}.schema)`)}}function $(e,t,n,r){const{gen:s,schema:i,data:c,allErrors:l,opts:h,self:f}=e,{RULES:m}=f;function g(p){(0,o.shouldUseGroup)(i,p)&&(p.type?(s.if((0,a.checkDataType)(p.type,c,h.strictNumbers)),k(e,p),1===t.length&&t[0]===p.type&&n&&(s.else(),(0,a.reportTypeError)(e)),s.endIf()):k(e,p),l||s.if(u._`${d.default.errors} === ${r||0}`))}!i.$ref||!h.ignoreKeywordsWithRef&&(0,p.schemaHasRulesButRef)(i,m)?(h.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach(t=>{x(e.dataTypes,t)||E(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)}),function(e,t){const n=[];for(const r of e.dataTypes)x(t,r)?n.push(r):t.includes("integer")&&"number"===r&&n.push("integer");e.dataTypes=n}(e,t)):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&E(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const n=e.self.RULES.all;for(const r in n){const s=n[r];if("object"==typeof s&&(0,o.shouldUseRule)(e.schema,s)){const{type:n}=s.definition;n.length&&!n.some(e=>{return r=e,(n=t).includes(r)||"number"===r&&n.includes("integer");var n,r})&&E(e,`missing type "${n.join(",")}" for keyword "${r}"`)}}}(e,e.dataTypes))}(e,t),s.block(()=>{for(const e of m.rules)g(e);g(m.post)})):s.block(()=>S(e,"$ref",m.all.$ref.definition))}function k(e,t){const{gen:n,schema:r,opts:{useDefaults:s}}=e;s&&(0,i.assignDefaults)(e,t.type),n.block(()=>{for(const n of t.rules)(0,o.shouldUseRule)(r,n)&&S(e,n.keyword,n.definition,t.type)})}function x(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function E(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,p.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){_(e)&&(v(e),y(e))?function(e){const{schema:t,opts:n,gen:r}=e;m(e,()=>{n.$comment&&t.$comment&&b(e),function(e){const{schema:t,opts:n}=e;void 0!==t.default&&n.useDefaults&&n.strictSchema&&(0,p.checkStrictMode)(e,"default is ignored in the schema root")}(e),r.let(d.default.vErrors,null),r.let(d.default.errors,0),n.unevaluated&&function(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",u._`${n}.evaluated`),t.if(u._`${e.evaluated}.dynamicProps`,()=>t.assign(u._`${e.evaluated}.props`,u._`undefined`)),t.if(u._`${e.evaluated}.dynamicItems`,()=>t.assign(u._`${e.evaluated}.items`,u._`undefined`))}(e),w(e),function(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:s,opts:o}=e;n.$async?t.if(u._`${d.default.errors} === 0`,()=>t.return(d.default.data),()=>t.throw(u._`new ${s}(${d.default.vErrors})`)):(t.assign(u._`${r}.errors`,d.default.vErrors),o.unevaluated&&function({gen:e,evaluated:t,props:n,items:r}){n instanceof u.Name&&e.assign(u._`${t}.props`,n),r instanceof u.Name&&e.assign(u._`${t}.items`,r)}(e),t.return(u._`${d.default.errors} === 0`))}(e)})}(e):m(e,()=>(0,r.topBoolOrEmptySchema)(e))};class I{constructor(e,t,n){if((0,c.validateKeywordUsage)(e,t,n),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=n,this.data=e.data,this.schema=e.schema[n],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,p.schemaRefOrVal)(e,this.schema,n,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",A(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,c.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",d.default.errors))}result(e,t,n){this.failResult((0,u.not)(e),t,n)}failResult(e,t,n){this.gen.if(e),n?n():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,u.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(u._`${t} !== undefined && (${(0,u.or)(this.invalid$data(),e)})`)}error(e,t,n){if(t)return this.setParams(t),this._error(e,n),void this.setParams({});this._error(e,n)}_error(e,t){(e?f.reportExtraError:f.reportError)(this,this.def.error,t)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,n=u.nil){this.gen.block(()=>{this.check$data(e,n),t()})}check$data(e=u.nil,t=u.nil){if(!this.$data)return;const{gen:n,schemaCode:r,schemaType:s,def:o}=this;n.if((0,u.or)(u._`${r} === undefined`,t)),e!==u.nil&&n.assign(e,!0),(s.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),e!==u.nil&&n.assign(e,!1)),n.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:n,def:r,it:s}=this;return(0,u.or)(function(){if(n.length){if(!(t instanceof u.Name))throw new Error("ajv implementation error");const e=Array.isArray(n)?n:[n];return u._`${(0,a.checkDataTypes)(e,t,s.opts.strictNumbers,a.DataType.Wrong)}`}return u.nil}(),function(){if(r.validateSchema){const n=e.scopeValue("validate$data",{ref:r.validateSchema});return u._`!${n}(${t})`}return u.nil}())}subschema(e,t){const n=(0,l.getSubschema)(this.it,e);(0,l.extendSubschemaData)(n,this.it,e),(0,l.extendSubschemaMode)(n,e);const s={...this.it,...n,items:void 0,props:void 0};return function(e,t){_(e)&&(v(e),y(e))?function(e,t){const{schema:n,gen:r,opts:s}=e;s.$comment&&n.$comment&&b(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,h.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const o=r.const("_errs",d.default.errors);w(e,o),r.var(t,u._`${o} === ${d.default.errors}`)}(e,t):(0,r.boolOrEmptySchema)(e,t)}(s,t),s}mergeEvaluated(e,t){const{it:n,gen:r}=this;n.opts.unevaluated&&(!0!==n.props&&void 0!==e.props&&(n.props=p.mergeEvaluated.props(r,e.props,n.props,t)),!0!==n.items&&void 0!==e.items&&(n.items=p.mergeEvaluated.items(r,e.items,n.items,t)))}mergeValidEvaluated(e,t){const{it:n,gen:r}=this;if(n.opts.unevaluated&&(!0!==n.props||!0!==n.items))return r.if(t,()=>this.mergeEvaluated(e,u.Name)),!0}}function S(e,t,n,r){const s=new I(e,n,t);"code"in n?n.code(s,r):s.$data&&n.validate?(0,c.funcKeywordCode)(s,n):"macro"in n?(0,c.macroKeywordCode)(s,n):(n.compile||n.validate)&&(0,c.funcKeywordCode)(s,n)}t.KeywordCxt=I;const T=/^\/(?:[^~]|~0|~1)*$/,P=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function A(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let s,o;if(""===e)return d.default.rootData;if("/"===e[0]){if(!T.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,o=d.default.rootData}else{const a=P.exec(e);if(!a)throw new Error(`Invalid JSON-pointer: ${e}`);const i=+a[1];if(s=a[2],"#"===s){if(i>=t)throw new Error(c("property/index",i));return r[t-i]}if(i>t)throw new Error(c("data",i));if(o=n[t-i],!s)return o}let a=o;const i=s.split("/");for(const e of i)e&&(o=u._`${o}${(0,u.getProperty)((0,p.unescapeJsonPointer)(e))}`,a=u._`${a} && ${o}`);return a;function c(e,n){return`Cannot access ${e} ${n} levels up, current level is ${t}`}}t.getData=A},3556:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>as});const r="RFC3986",s={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},o=(Object.prototype.hasOwnProperty,Array.isArray),a=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),i=1024;function c(e,t){if(o(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const l=Object.prototype.hasOwnProperty,u={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},d=Array.isArray,h=Array.prototype.push,p=function(e,t){h.apply(e,d(t)?t:[t])},f=Date.prototype.toISOString,m={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(e,t,n,r,s)=>{if(0===e.length)return e;let o=e;if("symbol"==typeof e?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===n)return escape(o).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let c="";for(let e=0;e<o.length;e+=i){const t=o.length>=i?o.slice(e,e+i):o,n=[];for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);45===r||46===r||95===r||126===r||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||"RFC1738"===s&&(40===r||41===r)?n[n.length]=t.charAt(e):r<128?n[n.length]=a[r]:r<2048?n[n.length]=a[192|r>>6]+a[128|63&r]:r<55296||r>=57344?n[n.length]=a[224|r>>12]+a[128|r>>6&63]+a[128|63&r]:(e+=1,r=65536+((1023&r)<<10|1023&t.charCodeAt(e)),n[n.length]=a[240|r>>18]+a[128|r>>12&63]+a[128|r>>6&63]+a[128|63&r])}c+=n.join("")}return c},encodeValuesOnly:!1,format:r,formatter:s[r],indices:!1,serializeDate:e=>f.call(e),skipNulls:!1,strictNullHandling:!1},g={};function y(e,t,n,r,s,o,a,i,l,u,h,f,_,v,w,b,$,k){let x=e,E=k,I=0,S=!1;for(;void 0!==(E=E.get(g))&&!S;){const t=E.get(e);if(I+=1,void 0!==t){if(t===I)throw new RangeError("Cyclic object value");S=!0}void 0===E.get(g)&&(I=0)}if("function"==typeof u?x=u(t,x):x instanceof Date?x=_?.(x):"comma"===n&&d(x)&&(x=c(x,function(e){return e instanceof Date?_?.(e):e})),null===x){if(o)return l&&!b?l(t,m.encoder,$,"key",v):t;x=""}if("string"==typeof(T=x)||"number"==typeof T||"boolean"==typeof T||"symbol"==typeof T||"bigint"==typeof T||function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))}(x)){if(l){const e=b?t:l(t,m.encoder,$,"key",v);return[w?.(e)+"="+w?.(l(x,m.encoder,$,"value",v))]}return[w?.(t)+"="+w?.(String(x))]}var T;const P=[];if(void 0===x)return P;let A;if("comma"===n&&d(x))b&&l&&(x=c(x,l)),A=[{value:x.length>0?x.join(",")||null:void 0}];else if(d(u))A=u;else{const e=Object.keys(x);A=h?e.sort(h):e}const O=i?String(t).replace(/\./g,"%2E"):String(t),j=r&&d(x)&&1===x.length?O+"[]":O;if(s&&d(x)&&0===x.length)return j+"[]";for(let t=0;t<A.length;++t){const c=A[t],m="object"==typeof c&&void 0!==c.value?c.value:x[c];if(a&&null===m)continue;const E=f&&i?c.replace(/\./g,"%2E"):c,S=d(x)?"function"==typeof n?n(j,E):j:j+(f?"."+E:"["+E+"]");k.set(e,I);const T=new WeakMap;T.set(g,k),p(P,y(m,S,n,r,s,o,a,i,"comma"===n&&b&&d(x)?null:l,u,h,f,_,v,w,b,$,T))}return P}const _="4.104.0";let v,w,b,$,k,x,E,I,S,T=!1,P=null,A=null,O=null,j=null;class C{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}const R=()=>{v||function(e,t={auto:!1}){if(T)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(v)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${v}'\``);T=t.auto,v=e.kind,w=e.fetch,P=e.Request,A=e.Response,O=e.Headers,b=e.FormData,j=e.Blob,$=e.File,k=e.ReadableStream,x=e.getMultipartRequestOptions,E=e.getDefaultAgent,I=e.fileFromPath,S=e.isFsReadStream}(function({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,s,o;try{n=fetch,r=Request,s=Response,o=Headers}catch(e){throw new Error(`this environment is missing the following Web Fetch API type: ${e.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:s,Headers:o,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:"undefined"!=typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new C(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0})};R();class N extends Error{}class z extends N{constructor(e,t,n,r){super(`${z.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.request_id=r?.["x-request-id"],this.error=t;const s=t;this.code=s?.code,this.param=s?.param,this.type=s?.type}static makeMessage(e,t,n){const r=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new D({message:n,cause:Re(t)});const s=t?.error;return 400===e?new L(e,s,n,r):401===e?new U(e,s,n,r):403===e?new Y(e,s,n,r):404===e?new F(e,s,n,r):409===e?new H(e,s,n,r):422===e?new V(e,s,n,r):429===e?new Z(e,s,n,r):e>=500?new B(e,s,n,r):new z(e,s,n,r)}}class M extends z{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class D extends z{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class q extends D{constructor({message:e}={}){super({message:e??"Request timed out."})}}class L extends z{}class U extends z{}class Y extends z{}class F extends z{}class H extends z{}class V extends z{}class Z extends z{}class B extends z{}class W extends N{constructor(){super("Could not parse response content as the length limit was reached")}}class K extends N{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var G,J=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},Q=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class X{constructor(){G.set(this,void 0),this.buffer=new Uint8Array,J(this,G,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?(new TextEncoder).encode(e):e;let n=new Uint8Array(this.buffer.length+t.length);n.set(this.buffer),n.set(t,this.buffer.length),this.buffer=n;const r=[];let s;for(;null!=(s=ee(this.buffer,Q(this,G,"f")));){if(s.carriage&&null==Q(this,G,"f")){J(this,G,s.index,"f");continue}if(null!=Q(this,G,"f")&&(s.index!==Q(this,G,"f")+1||s.carriage)){r.push(this.decodeText(this.buffer.slice(0,Q(this,G,"f")-1))),this.buffer=this.buffer.slice(Q(this,G,"f")),J(this,G,null,"f");continue}const e=null!==Q(this,G,"f")?s.preceding-1:s.preceding,t=this.decodeText(this.buffer.slice(0,e));r.push(t),this.buffer=this.buffer.slice(s.index),J(this,G,null,"f")}return r}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if("undefined"!=typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new N(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new N(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new N("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode("\n"):[]}}function ee(e,t){for(let n=t??0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}function te(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}function ne(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}G=new WeakMap,X.NEWLINE_CHARS=new Set(["\n","\r"]),X.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class re{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;return new re(async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const n of async function*(e,t){if(!e.body)throw t.abort(),new N("Attempted to iterate over a response with no body");const n=new se,r=new X,s=ne(e.body);for await(const e of async function*(e){let t=new Uint8Array;for await(const n of e){if(null==n)continue;const e=n instanceof ArrayBuffer?new Uint8Array(n):"string"==typeof n?(new TextEncoder).encode(n):n;let r,s=new Uint8Array(t.length+e.length);for(s.set(t),s.set(e,t.length),t=s;-1!==(r=te(t));)yield t.slice(0,r),t=t.slice(r)}t.length>0&&(yield t)}(s))for(const t of r.decode(e)){const e=n.decode(t);e&&(yield e)}for(const e of r.flush()){const t=n.decode(e);t&&(yield t)}}(e,t))if(!r)if(n.data.startsWith("[DONE]"))r=!0;else if(null===n.event||n.event.startsWith("response.")||n.event.startsWith("transcript.")){let t;try{t=JSON.parse(n.data)}catch(e){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),e}if(t&&t.error)throw new z(void 0,t.error,void 0,$e(e.headers));yield t}else{let e;try{e=JSON.parse(n.data)}catch(e){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),e}if("error"==n.event)throw new z(void 0,e.error,e.message,void 0);yield{event:n.event,data:e}}r=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{r||t.abort()}},t)}static fromReadableStream(e,t){let n=!1;return new re(async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const t of async function*(){const t=new X,n=ne(e);for await(const e of n)for(const n of t.decode(e))yield n;for(const e of t.flush())yield e}())r||t&&(yield JSON.parse(t));r=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{r||t.abort()}},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new re(()=>r(e),this.controller),new re(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new k({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:r,done:s}=await t.next();if(s)return e.close();const o=n.encode(JSON.stringify(r)+"\n");e.enqueue(o)}catch(t){e.error(t)}},async cancel(){await(t.return?.())}})}}class se{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e){const t=e.indexOf(":");return-1!==t?[e.substring(0,t),":",e.substring(t+1)]:[e,"",""]}(e);return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}const oe=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,ae=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&ie(e),ie=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function ce(e,t,n){if(e=await e,ae(e))return e;if(oe(e)){const r=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const s=ie(r)?[await r.arrayBuffer()]:[r];return new $(s,t,n)}const r=await async function(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(ie(e))t.push(await e.arrayBuffer());else{if(!ue(e))throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){return`[${Object.getOwnPropertyNames(e).map(e=>`"${e}"`).join(", ")}]`}(e)}`);for await(const n of e)t.push(n)}return t}(e);if(t||(t=function(e){return le(e.name)||le(e.filename)||le(e.path)?.split(/[\\/]/).pop()}(e)??"unknown_file"),!n?.type){const e=r[0]?.type;"string"==typeof e&&(n={...n,type:e})}return new $(r,t,n)}const le=e=>"string"==typeof e?e:"undefined"!=typeof Buffer&&e instanceof Buffer?String(e):void 0,ue=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],de=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],he=async e=>{const t=await pe(e.body);return x(t,e)},pe=async e=>{const t=new b;return await Promise.all(Object.entries(e||{}).map(([e,n])=>fe(t,e,n))),t},fe=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)e.append(t,String(n));else if((e=>ae(e)||oe(e)||S(e))(n)){const r=await ce(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(n=>fe(e,t+"[]",n)));else{if("object"!=typeof n)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`);await Promise.all(Object.entries(n).map(([n,r])=>fe(e,`${t}[${n}]`,r)))}}};var me;async function ge(e){const{response:t}=e;if(e.options.stream)return Le("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):re.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type"),r=n?.split(";")[0]?.trim();if(r?.includes("application/json")||r?.endsWith("+json")){const e=await t.json();return Le("response",t.status,t.url,t.headers,e),ye(e,t)}const s=await t.text();return Le("response",t.status,t.url,t.headers,s),s}function ye(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}R();class _e extends Promise{constructor(e,t=ge){super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new _e(this.responsePromise,async t=>ye(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class ve{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:r,fetch:s}){this.baseURL=e,this.maxRetries=Ce("maxRetries",t),this.timeout=Ce("timeout",n),this.httpAgent=r,this.fetch=s??w}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Te(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Ue()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async n=>{const r=n&&ie(n?.body)?new DataView(await n.body.arrayBuffer()):n?.body instanceof DataView?n.body:n?.body instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n?.body)?new DataView(n.body.buffer):n?.body;return{method:e,path:t,...n,body:r}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if("string"==typeof e){if("undefined"!=typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){const n={...e},{method:r,path:s,query:o,headers:a={}}=n,i=ArrayBuffer.isView(n.body)||n.__binaryRequest&&"string"==typeof n.body?n.body:de(n.body)?n.body.body:n.body?JSON.stringify(n.body,null,2):null,c=this.calculateContentLength(i),l=this.buildURL(s,o);"timeout"in n&&Ce("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const u=n.httpAgent??this.httpAgent??E(l),d=n.timeout+1e3;return"number"==typeof u?.options?.timeout&&d>(u.options.timeout??0)&&(u.options.timeout=d),this.idempotencyHeader&&"get"!==r&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey),{req:{method:r,...i&&{body:i},headers:this.buildHeaders({options:n,headers:a,contentLength:c,retryCount:t}),...u&&{agent:u},signal:n.signal??null},url:l,timeout:n.timeout}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:r}){const s={};n&&(s["content-length"]=n);const o=this.defaultHeaders(e);return De(s,o),De(s,t),de(e.body)&&"node"!==v&&delete s["content-type"],void 0===Ye(o,"x-stainless-retry-count")&&void 0===Ye(t,"x-stainless-retry-count")&&(s["x-stainless-retry-count"]=String(r)),void 0===Ye(o,"x-stainless-timeout")&&void 0===Ye(t,"x-stainless-timeout")&&e.timeout&&(s["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(s,t),s}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,n,r){return z.generate(e,t,n,r)}request(e,t=null){return new _e(this.makeRequest(e,t))}async makeRequest(e,t){const n=await e,r=n.maxRetries??this.maxRetries;null==t&&(t=r),await this.prepareOptions(n);const{req:s,url:o,timeout:a}=this.buildRequest(n,{retryCount:r-t});if(await this.prepareRequest(s,{url:o,options:n}),Le("request",o,n,s.headers),n.signal?.aborted)throw new M;const i=new AbortController,c=await this.fetchWithTimeout(o,s,a,i).catch(Re);if(c instanceof Error){if(n.signal?.aborted)throw new M;if(t)return this.retryRequest(n,t);if("AbortError"===c.name)throw new q;throw new D({cause:c})}const l=$e(c.headers);if(!c.ok){if(t&&this.shouldRetry(c))return Le(`response (error; retrying, ${t} attempts remaining)`,c.status,o,l),this.retryRequest(n,t,l);const e=await c.text().catch(e=>Re(e).message),r=Pe(e),s=r?void 0:e;throw Le(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,c.status,o,l,s),this.makeStatusError(c.status,r,s,l)}return{response:c,options:n,controller:i}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new be(this,n,e)}buildURL(e,t){const n=Oe(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return ze(r)||(t={...r,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new N(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:s,...o}=t||{};s&&s.addEventListener("abort",()=>r.abort());const a=setTimeout(()=>r.abort(),n),i={signal:r.signal,...o};return i.method&&(i.method=i.method.toUpperCase()),this.fetch.call(void 0,e,i).finally(()=>{clearTimeout(a)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,n){let r;const s=n?.["retry-after-ms"];if(s){const e=parseFloat(s);Number.isNaN(e)||(r=e)}const o=n?.["retry-after"];if(o&&!r){const e=parseFloat(o);r=Number.isNaN(e)?Date.parse(o)-Date.now():1e3*e}if(!(r&&0<=r&&r<6e4)){const n=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,n)}return await je(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${_}`}}class we{constructor(e,t,n,r){me.set(this,void 0),function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?s.call(e,n):s?s.value=n:t.set(e,n)}(this,me,e,"f"),this.options=r,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new N("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&"object"==typeof t.query)t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,r]of n)e.url.searchParams.set(t,r);t.query=void 0,t.path=e.url.toString()}return await function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}(this,me,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(me=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class be extends _e{constructor(e,t,n){super(t,async t=>new n(e,t.response,await ge(t),t.options))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}const $e=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),ke={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},xe=e=>"object"==typeof e&&null!==e&&!ze(e)&&Object.keys(e).every(e=>Me(ke,e)),Ee=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",Ie=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let Se;const Te=()=>Se??(Se=(()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_,"X-Stainless-OS":Ie(Deno.build.os),"X-Stainless-Arch":Ee(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_,"X-Stainless-OS":Ie(process.platform),"X-Stainless-Arch":Ee(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e)return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})()),Pe=e=>{try{return JSON.parse(e)}catch(e){return}},Ae=/^[a-z][a-z0-9+.-]*:/i,Oe=e=>Ae.test(e),je=e=>new Promise(t=>setTimeout(t,e)),Ce=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new N(`${e} must be an integer`);if(t<0)throw new N(`${e} must be a positive integer`);return t},Re=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},Ne=e=>"undefined"!=typeof process?process.env?.[e]?.trim()??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(e)?.trim():void 0;function ze(e){if(!e)return!0;for(const t in e)return!1;return!0}function Me(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function De(e,t){for(const n in t){if(!Me(t,n))continue;const r=n.toLowerCase();if(!r)continue;const s=t[n];null===s?delete e[r]:void 0!==s&&(e[r]=s)}}const qe=new Set(["authorization","api-key"]);function Le(e,...t){if("undefined"!=typeof process&&"true"===process?.env?.DEBUG){const n=t.map(e=>{if(!e)return e;if(e.headers){const t={...e,headers:{...e.headers}};for(const n in e.headers)qe.has(n.toLowerCase())&&(t.headers[n]="REDACTED");return t}let t=null;for(const n in e)qe.has(n.toLowerCase())&&(t??(t={...e}),t[n]="REDACTED");return t??e});console.log(`OpenAI:DEBUG:${e}`,...n)}}const Ue=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),Ye=(e,t)=>{const n=t.toLowerCase();if((e=>"function"==typeof e?.get)(e)){const r=t[0]?.toUpperCase()+t.substring(1).replace(/([^\w])(\w)/g,(e,t,n)=>t+n.toUpperCase());for(const s of[t,n,t.toUpperCase(),r]){const t=e.get(s);if(t)return t}}for(const[r,s]of Object.entries(e))if(r.toLowerCase()===n)return Array.isArray(s)?(s.length<=1||console.warn(`Received ${s.length} entries for the ${t} header, using the first entry.`),s[0]):s};function Fe(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}class He{constructor(e){this._client=e}}class Ve extends He{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class Ze extends He{list(e,t={},n){return xe(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,Je,{query:t,...n})}}class Be extends we{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class We extends we{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class Ke extends He{constructor(){super(...arguments),this.messages=new Ze(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return xe(e)?this.list({},e):this._client.getAPIList("/chat/completions",Ge,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}}class Ge extends We{}class Je extends We{}Ke.ChatCompletionsPage=Ge,Ke.Messages=Ze;class Qe extends He{constructor(){super(...arguments),this.completions=new Ke(this._client)}}Qe.Completions=Ke,Qe.ChatCompletionsPage=Ge;class Xe extends He{create(e,t){const n=!!e.encoding_format;let r=n?e.encoding_format:"base64";n&&Le("Request","User defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return n?s:(Le("response","Decoding base64 embeddings to float32 array"),s._thenUnwrap(e=>(e&&e.data&&e.data.forEach(e=>{const t=e.embedding;e.embedding=(e=>{if("undefined"!=typeof Buffer){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return Array.from(new Float32Array(r.buffer))}})(t)}),e)))}}class et extends He{create(e,t){return this._client.post("/files",he({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return xe(e)?this.list({},e):this._client.getAPIList("/files",tt,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t?.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=18e5}={}){const r=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!r.has(o.status);)if(await je(t),o=await this.retrieve(e),Date.now()-s>n)throw new q({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return o}}class tt extends We{}et.FileObjectsPage=tt;class nt extends He{createVariation(e,t){return this._client.post("/images/variations",he({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",he({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class rt extends He{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t?.headers},__binaryResponse:!0})}}class st extends He{create(e,t){return this._client.post("/audio/transcriptions",he({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class ot extends He{create(e,t){return this._client.post("/audio/translations",he({body:e,...t,__metadata:{model:e.model}}))}}class at extends He{constructor(){super(...arguments),this.transcriptions=new st(this._client),this.translations=new ot(this._client),this.speech=new rt(this._client)}}at.Transcriptions=st,at.Translations=ot,at.Speech=rt;class it extends He{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class ct extends He{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",lt,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class lt extends Be{}ct.ModelsPage=lt;class ut extends He{}class dt extends He{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}}class ht extends He{constructor(){super(...arguments),this.graders=new dt(this._client)}}ht.Graders=dt;class pt extends He{create(e,t,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,ft,{body:t,method:"post",...n})}retrieve(e,t={},n){return xe(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}del(e,t,n){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,n)}}class ft extends Be{}pt.PermissionCreateResponsesPage=ft;class mt extends He{constructor(){super(...arguments),this.permissions=new pt(this._client)}}mt.Permissions=pt,mt.PermissionCreateResponsesPage=ft;class gt extends He{list(e,t={},n){return xe(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,yt,{query:t,...n})}}class yt extends We{}gt.FineTuningJobCheckpointsPage=yt;class _t extends He{constructor(){super(...arguments),this.checkpoints=new gt(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return xe(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",vt,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return xe(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,wt,{query:t,...n})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class vt extends We{}class wt extends We{}_t.FineTuningJobsPage=vt,_t.FineTuningJobEventsPage=wt,_t.Checkpoints=gt,_t.FineTuningJobCheckpointsPage=yt;class bt extends He{constructor(){super(...arguments),this.methods=new ut(this._client),this.jobs=new _t(this._client),this.checkpoints=new mt(this._client),this.alpha=new ht(this._client)}}bt.Methods=ut,bt.Jobs=_t,bt.FineTuningJobsPage=vt,bt.FineTuningJobEventsPage=wt,bt.Checkpoints=mt,bt.Alpha=ht;class $t extends He{}class kt extends He{constructor(){super(...arguments),this.graderModels=new $t(this._client)}}kt.GraderModels=$t;class xt extends He{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},n){return xe(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,Et,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const s=await this.retrieve(e,t,{...n,headers:r}).withResponse(),o=s.data;switch(o.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=s.response.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await je(e);break;case"failed":case"completed":return o}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}content(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,It,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class Et extends We{}class It extends Be{}xt.VectorStoreFilesPage=Et,xt.FileContentResponsesPage=It;class St extends He{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n={},r){return xe(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,Et,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(s.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=o.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await je(e);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){if(null==t||0==t.length)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=r?.maxConcurrency??5,o=Math.min(s,t.length),a=this._client,i=t.values(),c=[...n],l=Array(o).fill(i).map(async function(e){for(let t of e){const e=await a.files.create({file:t,purpose:"assistants"},r);c.push(e.id)}});return await(async e=>{const t=await Promise.allSettled(e),n=t.filter(e=>"rejected"===e.status);if(n.length){for(const e of n)console.error(e.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const e of t)"fulfilled"===e.status&&r.push(e.value);return r})(l),await this.createAndPoll(e,{file_ids:c})}}class Tt extends He{constructor(){super(...arguments),this.files=new xt(this._client),this.fileBatches=new St(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e={},t){return xe(e)?this.list({},e):this._client.getAPIList("/vector_stores",Pt,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}search(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/search`,At,{body:t,method:"post",...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class Pt extends We{}class At extends Be{}Tt.VectorStoresPage=Pt,Tt.VectorStoreSearchResponsesPage=At,Tt.Files=xt,Tt.VectorStoreFilesPage=Et,Tt.FileContentResponsesPage=It,Tt.FileBatches=St;class Ot extends He{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e={},t){return xe(e)?this.list({},e):this._client.getAPIList("/assistants",jt,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class jt extends We{}function Ct(e){return"function"==typeof e.parse}Ot.AssistantsPage=jt;const Rt=e=>"assistant"===e?.role,Nt=e=>"function"===e?.role,zt=e=>"tool"===e?.role;var Mt,Dt,qt,Lt,Ut,Yt,Ft,Ht,Vt,Zt,Bt,Wt,Kt,Gt=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},Jt=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Qt{constructor(){Mt.add(this),this.controller=new AbortController,Dt.set(this,void 0),qt.set(this,()=>{}),Lt.set(this,()=>{}),Ut.set(this,void 0),Yt.set(this,()=>{}),Ft.set(this,()=>{}),Ht.set(this,{}),Vt.set(this,!1),Zt.set(this,!1),Bt.set(this,!1),Wt.set(this,!1),Gt(this,Dt,new Promise((e,t)=>{Gt(this,qt,e,"f"),Gt(this,Lt,t,"f")}),"f"),Gt(this,Ut,new Promise((e,t)=>{Gt(this,Yt,e,"f"),Gt(this,Ft,t,"f")}),"f"),Jt(this,Dt,"f").catch(()=>{}),Jt(this,Ut,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},Jt(this,Mt,"m",Kt).bind(this))},0)}_connected(){this.ended||(Jt(this,qt,"f").call(this),this._emit("connect"))}get ended(){return Jt(this,Vt,"f")}get errored(){return Jt(this,Zt,"f")}get aborted(){return Jt(this,Bt,"f")}abort(){this.controller.abort()}on(e,t){return(Jt(this,Ht,"f")[e]||(Jt(this,Ht,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=Jt(this,Ht,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(Jt(this,Ht,"f")[e]||(Jt(this,Ht,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{Gt(this,Wt,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){Gt(this,Wt,!0,"f"),await Jt(this,Ut,"f")}_emit(e,...t){if(Jt(this,Vt,"f"))return;"end"===e&&(Gt(this,Vt,!0,"f"),Jt(this,Yt,"f").call(this));const n=Jt(this,Ht,"f")[e];if(n&&(Jt(this,Ht,"f")[e]=n.filter(e=>!e.once),n.forEach(({listener:e})=>e(...t))),"abort"===e){const e=t[0];return Jt(this,Wt,"f")||n?.length||Promise.reject(e),Jt(this,Lt,"f").call(this,e),Jt(this,Ft,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];Jt(this,Wt,"f")||n?.length||Promise.reject(e),Jt(this,Lt,"f").call(this,e),Jt(this,Ft,"f").call(this,e),this._emit("end")}}_emitFinal(){}}function Xt(e){return"auto-parseable-response-format"===e?.$brand}function en(e){return"auto-parseable-tool"===e?.$brand}function tn(e,t){const n=e.choices.map(e=>{if("length"===e.finish_reason)throw new W;if("content_filter"===e.finish_reason)throw new K;return{...e,message:{...e.message,...e.message.tool_calls?{tool_calls:e.message.tool_calls?.map(e=>function(e,t){const n=e.tools?.find(e=>e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:en(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}(t,e))??void 0}:void 0,parsed:e.message.content&&!e.message.refusal?nn(t,e.message.content):null}}});return{...e,choices:n}}function nn(e,t){return"json_schema"!==e.response_format?.type?null:"json_schema"===e.response_format?.type?"$parseRaw"in e.response_format?e.response_format.$parseRaw(t):JSON.parse(t):null}function rn(e,t){if(!e)return!1;const n=e.tools?.find(e=>e.function?.name===t.function.name);return en(n)||n?.function.strict||!1}function sn(e){return!!Xt(e.response_format)||(e.tools?.some(e=>en(e)||"function"===e.type&&!0===e.function.strict)??!1)}Dt=new WeakMap,qt=new WeakMap,Lt=new WeakMap,Ut=new WeakMap,Yt=new WeakMap,Ft=new WeakMap,Ht=new WeakMap,Vt=new WeakMap,Zt=new WeakMap,Bt=new WeakMap,Wt=new WeakMap,Mt=new WeakSet,Kt=function(e){if(Gt(this,Zt,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new M),e instanceof M)return Gt(this,Bt,!0,"f"),this._emit("abort",e);if(e instanceof N)return this._emit("error",e);if(e instanceof Error){const t=new N(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new N(String(e)))};var on,an,cn,ln,un,dn,hn,pn,fn=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const mn=10;class gn extends Qt{constructor(){super(...arguments),on.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),(Nt(e)||zt(e))&&e.content)this._emit("functionCallResult",e.content);else if(Rt(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Rt(e)&&e.tool_calls)for(const t of e.tool_calls)"function"===t.type&&this._emit("functionCall",t.function)}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new N("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),fn(this,on,"m",an).call(this)}async finalMessage(){return await this.done(),fn(this,on,"m",cn).call(this)}async finalFunctionCall(){return await this.done(),fn(this,on,"m",ln).call(this)}async finalFunctionCallResult(){return await this.done(),fn(this,on,"m",un).call(this)}async totalUsage(){return await this.done(),fn(this,on,"m",dn).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=fn(this,on,"m",cn).call(this);t&&this._emit("finalMessage",t);const n=fn(this,on,"m",an).call(this);n&&this._emit("finalContent",n);const r=fn(this,on,"m",ln).call(this);r&&this._emit("finalFunctionCall",r);const s=fn(this,on,"m",un).call(this);null!=s&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",fn(this,on,"m",dn).call(this))}async _createChatCompletion(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),fn(this,on,"m",hn).call(this,t);const s=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(tn(s,t))}async _runChatCompletion(e,t,n){for(const e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){const r="function",{function_call:s="auto",stream:o,...a}=t,i="string"!=typeof s&&s?.name,{maxChatCompletions:c=mn}=n||{},l={};for(const e of t.functions)l[e.name||e.function.name]=e;const u=t.functions.map(e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description}));for(const e of t.messages)this._addMessage(e,!1);for(let t=0;t<c;++t){const t=await this._createChatCompletion(e,{...a,function_call:s,functions:u,messages:[...this.messages]},n),o=t.choices[0]?.message;if(!o)throw new N("missing message in ChatCompletion response");if(!o.function_call)return;const{name:c,arguments:d}=o.function_call,h=l[c];if(!h){const e=`Invalid function_call: ${JSON.stringify(c)}. Available options are: ${u.map(e=>JSON.stringify(e.name)).join(", ")}. Please try again`;this._addMessage({role:r,name:c,content:e});continue}if(i&&i!==c){const e=`Invalid function_call: ${JSON.stringify(c)}. ${JSON.stringify(i)} requested. Please try again`;this._addMessage({role:r,name:c,content:e});continue}let p;try{p=Ct(h)?await h.parse(d):d}catch(e){this._addMessage({role:r,name:c,content:e instanceof Error?e.message:String(e)});continue}const f=await h.function(p,this),m=fn(this,on,"m",pn).call(this,f);if(this._addMessage({role:r,name:c,content:m}),i)return}}async _runTools(e,t,n){const r="tool",{tool_choice:s="auto",stream:o,...a}=t,i="string"!=typeof s&&s?.function?.name,{maxChatCompletions:c=mn}=n||{},l=t.tools.map(e=>{if(en(e)){if(!e.$callback)throw new N("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),u={};for(const e of l)"function"===e.type&&(u[e.function.name||e.function.function.name]=e.function);const d="tools"in t?l.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(const e of t.messages)this._addMessage(e,!1);for(let t=0;t<c;++t){const t=await this._createChatCompletion(e,{...a,tool_choice:s,tools:d,messages:[...this.messages]},n),o=t.choices[0]?.message;if(!o)throw new N("missing message in ChatCompletion response");if(!o.tool_calls?.length)return;for(const e of o.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:n,arguments:s}=e.function,o=u[n];if(!o){const e=`Invalid tool_call: ${JSON.stringify(n)}. Available options are: ${Object.keys(u).map(e=>JSON.stringify(e)).join(", ")}. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}if(i&&i!==n){const e=`Invalid tool_call: ${JSON.stringify(n)}. ${JSON.stringify(i)} requested. Please try again`;this._addMessage({role:r,tool_call_id:t,content:e});continue}let a;try{a=Ct(o)?await o.parse(s):s}catch(e){const n=e instanceof Error?e.message:String(e);this._addMessage({role:r,tool_call_id:t,content:n});continue}const c=await o.function(a,this),l=fn(this,on,"m",pn).call(this,c);if(this._addMessage({role:r,tool_call_id:t,content:l}),i)return}}}}on=new WeakSet,an=function(){return fn(this,on,"m",cn).call(this).content??null},cn=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Rt(t)){const{function_call:e,...n}=t,r={...n,content:t.content??null,refusal:t.refusal??null};return e&&(r.function_call=e),r}}throw new N("stream ended without producing a ChatCompletionMessage with role=assistant")},ln=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Rt(t)&&t?.function_call)return t.function_call;if(Rt(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},un=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Nt(t)&&null!=t.content)return t.content;if(zt(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some(e=>"assistant"===e.role&&e.tool_calls?.some(e=>"function"===e.type&&e.id===t.tool_call_id)))return t.content}},dn=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},hn=function(e){if(null!=e.n&&e.n>1)throw new N("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},pn=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class yn extends gn{static runFunctions(e,t,n){const r=new yn,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,s)),r}static runTools(e,t,n){const r=new yn,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,s)),r}_addMessage(e,t=!0){super._addMessage(e,t),Rt(e)&&e.content&&this._emit("content",e.content)}}class vn extends Error{}class wn extends Error{}const bn=e=>function(e,t=511){if("string"!=typeof e)throw new TypeError("expecting str, got "+typeof e);if(!e.trim())throw new Error(`${e} is empty`);return((e,t)=>{const n=e.length;let r=0;const s=e=>{throw new vn(`${e} at position ${r}`)},o=e=>{throw new wn(`${e} at position ${r}`)},a=()=>(d(),r>=n&&s("Unexpected end of input"),'"'===e[r]?i():"{"===e[r]?c():"["===e[r]?l():"null"===e.substring(r,r+4)||16&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):"true"===e.substring(r,r+4)||32&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):"false"===e.substring(r,r+5)||32&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):"Infinity"===e.substring(r,r+8)||128&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):"-Infinity"===e.substring(r,r+9)||256&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):"NaN"===e.substring(r,r+3)||64&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):u()),i=()=>{const a=r;let i=!1;for(r++;r<n&&('"'!==e[r]||i&&"\\"===e[r-1]);)i="\\"===e[r]&&!i,r++;if('"'==e.charAt(r))try{return JSON.parse(e.substring(a,++r-Number(i)))}catch(e){o(String(e))}else if(1&t)try{return JSON.parse(e.substring(a,r-Number(i))+'"')}catch(t){return JSON.parse(e.substring(a,e.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},c=()=>{r++,d();const o={};try{for(;"}"!==e[r];){if(d(),r>=n&&8&t)return o;const s=i();d(),r++;try{const e=a();Object.defineProperty(o,s,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(e){if(8&t)return o;throw e}d(),","===e[r]&&r++}}catch(e){if(8&t)return o;s("Expected '}' at end of object")}return r++,o},l=()=>{r++;const n=[];try{for(;"]"!==e[r];)n.push(a()),d(),","===e[r]&&r++}catch(e){if(4&t)return n;s("Expected ']' at end of array")}return r++,n},u=()=>{if(0===r){"-"===e&&2&t&&s("Not sure what '-' is");try{return JSON.parse(e)}catch(n){if(2&t)try{return"."===e[e.length-1]?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(e){}o(String(n))}}const a=r;for("-"===e[r]&&r++;e[r]&&!",]}".includes(e[r]);)r++;r!=n||2&t||s("Unterminated number literal");try{return JSON.parse(e.substring(a,r))}catch(n){"-"===e.substring(a,r)&&2&t&&s("Not sure what '-' is");try{return JSON.parse(e.substring(a,e.lastIndexOf("e")))}catch(e){o(String(e))}}},d=()=>{for(;r<n&&" \n\r\t".includes(e[r]);)r++};return a()})(e.trim(),t)}(e,509);var $n,kn,xn,En,In,Sn,Tn,Pn,An,On,jn,Cn,Rn=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},Nn=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class zn extends gn{constructor(e){super(),$n.add(this),kn.set(this,void 0),xn.set(this,void 0),En.set(this,void 0),Rn(this,kn,e,"f"),Rn(this,xn,[],"f")}get currentChatCompletionSnapshot(){return Nn(this,En,"f")}static fromReadableStream(e){const t=new zn(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const r=new zn(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,n){super._createChatCompletion;const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Nn(this,$n,"m",In).call(this);const s=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const e of s)Nn(this,$n,"m",Tn).call(this,e);if(s.controller.signal?.aborted)throw new M;return this._addChatCompletion(Nn(this,$n,"m",On).call(this))}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),Nn(this,$n,"m",In).call(this),this._connected();const r=re.fromReadableStream(e,this.controller);let s;for await(const e of r)s&&s!==e.id&&this._addChatCompletion(Nn(this,$n,"m",On).call(this)),Nn(this,$n,"m",Tn).call(this,e),s=e.id;if(r.controller.signal?.aborted)throw new M;return this._addChatCompletion(Nn(this,$n,"m",On).call(this))}[(kn=new WeakMap,xn=new WeakMap,En=new WeakMap,$n=new WeakSet,In=function(){this.ended||Rn(this,En,void 0,"f")},Sn=function(e){let t=Nn(this,xn,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Nn(this,xn,"f")[e.index]=t,t)},Tn=function(e){if(this.ended)return;const t=Nn(this,$n,"m",Cn).call(this,e);this._emit("chunk",e,t);for(const n of e.choices){const e=t.choices[n.index];null!=n.delta.content&&"assistant"===e.message?.role&&e.message?.content&&(this._emit("content",n.delta.content,e.message.content),this._emit("content.delta",{delta:n.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=n.delta.refusal&&"assistant"===e.message?.role&&e.message?.refusal&&this._emit("refusal.delta",{delta:n.delta.refusal,snapshot:e.message.refusal}),null!=n.logprobs?.content&&"assistant"===e.message?.role&&this._emit("logprobs.content.delta",{content:n.logprobs?.content,snapshot:e.logprobs?.content??[]}),null!=n.logprobs?.refusal&&"assistant"===e.message?.role&&this._emit("logprobs.refusal.delta",{refusal:n.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});const r=Nn(this,$n,"m",Sn).call(this,e);e.finish_reason&&(Nn(this,$n,"m",An).call(this,e),null!=r.current_tool_call_index&&Nn(this,$n,"m",Pn).call(this,e,r.current_tool_call_index));for(const t of n.delta.tool_calls??[])r.current_tool_call_index!==t.index&&(Nn(this,$n,"m",An).call(this,e),null!=r.current_tool_call_index&&Nn(this,$n,"m",Pn).call(this,e,r.current_tool_call_index)),r.current_tool_call_index=t.index;for(const t of n.delta.tool_calls??[]){const n=e.message.tool_calls?.[t.index];n?.type&&("function"===n?.type?this._emit("tool_calls.function.arguments.delta",{name:n.function?.name,index:t.index,arguments:n.function.arguments,parsed_arguments:n.function.parsed_arguments,arguments_delta:t.function?.arguments??""}):qn())}}},Pn=function(e,t){if(Nn(this,$n,"m",Sn).call(this,e).done_tool_calls.has(t))return;const n=e.message.tool_calls?.[t];if(!n)throw new Error("no tool call snapshot");if(!n.type)throw new Error("tool call snapshot missing `type`");if("function"===n.type){const e=Nn(this,kn,"f")?.tools?.find(e=>"function"===e.type&&e.function.name===n.function.name);this._emit("tool_calls.function.arguments.done",{name:n.function.name,index:t,arguments:n.function.arguments,parsed_arguments:en(e)?e.$parseRaw(n.function.arguments):e?.function.strict?JSON.parse(n.function.arguments):null})}else n.type},An=function(e){const t=Nn(this,$n,"m",Sn).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;const n=Nn(this,$n,"m",jn).call(this);this._emit("content.done",{content:e.message.content,parsed:n?n.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},On=function(){if(this.ended)throw new N("stream has ended, this shouldn't happen");const e=Nn(this,En,"f");if(!e)throw new N("request ended without sending any chunks");return Rn(this,En,void 0,"f"),Rn(this,xn,[],"f"),function(e,t){const{id:n,choices:r,created:s,model:o,system_fingerprint:a,...i}=e,c={...i,id:n,choices:r.map(({message:t,finish_reason:n,index:r,logprobs:s,...o})=>{if(!n)throw new N(`missing finish_reason for choice ${r}`);const{content:a=null,function_call:i,tool_calls:c,...l}=t,u=t.role;if(!u)throw new N(`missing role for choice ${r}`);if(i){const{arguments:e,name:c}=i;if(null==e)throw new N(`missing function_call.arguments for choice ${r}`);if(!c)throw new N(`missing function_call.name for choice ${r}`);return{...o,message:{content:a,function_call:{arguments:e,name:c},role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:s}}return c?{...o,index:r,finish_reason:n,logprobs:s,message:{...l,role:u,content:a,refusal:t.refusal??null,tool_calls:c.map((t,n)=>{const{function:s,type:o,id:a,...i}=t,{arguments:c,name:l,...u}=s||{};if(null==a)throw new N(`missing choices[${r}].tool_calls[${n}].id\n${Mn(e)}`);if(null==o)throw new N(`missing choices[${r}].tool_calls[${n}].type\n${Mn(e)}`);if(null==l)throw new N(`missing choices[${r}].tool_calls[${n}].function.name\n${Mn(e)}`);if(null==c)throw new N(`missing choices[${r}].tool_calls[${n}].function.arguments\n${Mn(e)}`);return{...i,id:a,type:o,function:{...u,name:l,arguments:c}}})}}:{...o,message:{...l,content:a,role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:s}}),created:s,model:o,object:"chat.completion",...a?{system_fingerprint:a}:{}};return function(e,t){return t&&sn(t)?tn(e,t):{...e,choices:e.choices.map(e=>({...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}}(c,t)}(e,Nn(this,kn,"f"))},jn=function(){const e=Nn(this,kn,"f")?.response_format;return Xt(e)?e:null},Cn=function(e){var t,n,r,s;let o=Nn(this,En,"f");const{choices:a,...i}=e;o?Object.assign(o,i):o=Rn(this,En,{...i,choices:[]},"f");for(const{delta:a,finish_reason:i,index:c,logprobs:l=null,...u}of e.choices){let e=o.choices[c];if(e||(e=o.choices[c]={finish_reason:i,index:c,message:{},logprobs:l,...u}),l)if(e.logprobs){const{content:r,refusal:s,...o}=l;Dn(),Object.assign(e.logprobs,o),r&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...r)),s&&((n=e.logprobs).refusal??(n.refusal=[]),e.logprobs.refusal.push(...s))}else e.logprobs=Object.assign({},l);if(i&&(e.finish_reason=i,Nn(this,kn,"f")&&sn(Nn(this,kn,"f")))){if("length"===i)throw new W;if("content_filter"===i)throw new K}if(Object.assign(e,u),!a)continue;const{content:d,refusal:h,function_call:p,role:f,tool_calls:m,...g}=a;if(Dn(),Object.assign(e.message,g),h&&(e.message.refusal=(e.message.refusal||"")+h),f&&(e.message.role=f),p&&(e.message.function_call?(p.name&&(e.message.function_call.name=p.name),p.arguments&&((r=e.message.function_call).arguments??(r.arguments=""),e.message.function_call.arguments+=p.arguments)):e.message.function_call=p),d&&(e.message.content=(e.message.content||"")+d,!e.message.refusal&&Nn(this,$n,"m",jn).call(this)&&(e.message.parsed=bn(e.message.content))),m){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:n,type:r,function:o,...a}of m){const i=(s=e.message.tool_calls)[t]??(s[t]={});Object.assign(i,a),n&&(i.id=n),r&&(i.type=r),o&&(i.function??(i.function={name:o.name??"",arguments:""})),o?.name&&(i.function.name=o.name),o?.arguments&&(i.function.arguments+=o.arguments,rn(Nn(this,kn,"f"),i)&&(i.function.parsed_arguments=bn(i.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new re(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Mn(e){return JSON.stringify(e)}function Dn(e){}function qn(_x){}class Ln extends zn{static fromReadableStream(e){const t=new Ln(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,n){const r=new Ln(null),s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,s)),r}static runTools(e,t,n){const r=new Ln(t),s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,s)),r}}class Un extends He{parse(e,t){return function(e){for(const t of e??[]){if("function"!==t.type)throw new N(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new N(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(t=>tn(t,e))}runFunctions(e,t){return e.stream?Ln.runFunctions(this._client,e,t):yn.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?Ln.runTools(this._client,e,t):yn.runTools(this._client,e,t)}stream(e,t){return zn.createChatCompletion(this._client,e,t)}}class Yn extends He{constructor(){super(...arguments),this.completions=new Un(this._client)}}!function(e){e.Completions=Un}(Yn||(Yn={}));class Fn extends He{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class Hn extends He{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}class Vn extends He{constructor(){super(...arguments),this.sessions=new Fn(this._client),this.transcriptionSessions=new Hn(this._client)}}Vn.Sessions=Fn,Vn.TranscriptionSessions=Hn;var Zn,Bn,Wn,Kn,Gn,Jn,Qn,Xn,er,tr,nr,rr,sr,or,ar,ir,cr,lr,ur,dr,hr,pr,fr=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},mr=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};class gr extends Qt{constructor(){super(...arguments),Zn.add(this),Bn.set(this,[]),Wn.set(this,{}),Kn.set(this,{}),Gn.set(this,void 0),Jn.set(this,void 0),Qn.set(this,void 0),Xn.set(this,void 0),er.set(this,void 0),tr.set(this,void 0),nr.set(this,void 0),rr.set(this,void 0),sr.set(this,void 0)}[(Bn=new WeakMap,Wn=new WeakMap,Kn=new WeakMap,Gn=new WeakMap,Jn=new WeakMap,Qn=new WeakMap,Xn=new WeakMap,er=new WeakMap,tr=new WeakMap,nr=new WeakMap,rr=new WeakMap,sr=new WeakMap,Zn=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new gr;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const r=re.fromReadableStream(e,this.controller);for await(const e of r)fr(this,Zn,"m",or).call(this,e);if(r.controller.signal?.aborted)throw new M;return this._addRun(fr(this,Zn,"m",ar).call(this))}toReadableStream(){return new re(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r,s){const o=new gr;return o._run(()=>o._runToolAssistantStream(e,t,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,n,r,s){const o=s?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...r,stream:!0},i=await e.submitToolOutputs(t,n,a,{...s,signal:this.controller.signal});this._connected();for await(const e of i)fr(this,Zn,"m",or).call(this,e);if(i.controller.signal?.aborted)throw new M;return this._addRun(fr(this,Zn,"m",ar).call(this))}static createThreadAssistantStream(e,t,n){const r=new gr;return r._run(()=>r._threadAssistantStream(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,n,r){const s=new gr;return s._run(()=>s._runAssistantStream(e,t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return fr(this,nr,"f")}currentRun(){return fr(this,rr,"f")}currentMessageSnapshot(){return fr(this,Gn,"f")}currentRunStepSnapshot(){return fr(this,sr,"f")}async finalRunSteps(){return await this.done(),Object.values(fr(this,Wn,"f"))}async finalMessages(){return await this.done(),Object.values(fr(this,Kn,"f"))}async finalRun(){if(await this.done(),!fr(this,Jn,"f"))throw Error("Final run was not received.");return fr(this,Jn,"f")}async _createThreadAssistantStream(e,t,n){const r=n?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort()));const s={...t,stream:!0},o=await e.createAndRun(s,{...n,signal:this.controller.signal});this._connected();for await(const e of o)fr(this,Zn,"m",or).call(this,e);if(o.controller.signal?.aborted)throw new M;return this._addRun(fr(this,Zn,"m",ar).call(this))}async _createAssistantStream(e,t,n,r){const s=r?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},a=await e.create(t,o,{...r,signal:this.controller.signal});this._connected();for await(const e of a)fr(this,Zn,"m",or).call(this,e);if(a.controller.signal?.aborted)throw new M;return this._addRun(fr(this,Zn,"m",ar).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let t=e[n];if(null!=t)if("index"!==n&&"type"!==n){if("string"==typeof t&&"string"==typeof r)t+=r;else if("number"==typeof t&&"number"==typeof r)t+=r;else{if(!Fe(t)||!Fe(r)){if(Array.isArray(t)&&Array.isArray(r)){if(t.every(e=>"string"==typeof e||"number"==typeof e)){t.push(...r);continue}for(const e of r){if(!Fe(e))throw new Error(`Expected array delta entry to be an object but got: ${e}`);const n=e.index;if(null==n)throw console.error(e),new Error("Expected array delta entry to have an `index` property");if("number"!=typeof n)throw new Error(`Expected array delta entry \`index\` property to be a number but got ${n}`);const r=t[n];null==r?t.push(e):t[n]=this.accumulateDelta(r,e)}continue}throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${t}`)}t=this.accumulateDelta(t,r)}e[n]=t}else e[n]=r;else e[n]=r}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,s){return await this._createToolAssistantStream(n,e,t,r,s)}}or=function(e){if(!this.ended)switch(mr(this,nr,e,"f"),fr(this,Zn,"m",lr).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":fr(this,Zn,"m",pr).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":fr(this,Zn,"m",cr).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":fr(this,Zn,"m",ir).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},ar=function(){if(this.ended)throw new N("stream has ended, this shouldn't happen");if(!fr(this,Jn,"f"))throw Error("Final run has not been received");return fr(this,Jn,"f")},ir=function(e){const[t,n]=fr(this,Zn,"m",dr).call(this,e,fr(this,Gn,"f"));mr(this,Gn,t,"f"),fr(this,Kn,"f")[t.id]=t;for(const e of n){const n=t.content[e.index];"text"==n?.type&&this._emit("textCreated",n.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const n of e.data.delta.content){if("text"==n.type&&n.text){let e=n.text,r=t.content[n.index];if(!r||"text"!=r.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",e,r.text)}if(n.index!=fr(this,Qn,"f")){if(fr(this,Xn,"f"))switch(fr(this,Xn,"f").type){case"text":this._emit("textDone",fr(this,Xn,"f").text,fr(this,Gn,"f"));break;case"image_file":this._emit("imageFileDone",fr(this,Xn,"f").image_file,fr(this,Gn,"f"))}mr(this,Qn,n.index,"f")}mr(this,Xn,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==fr(this,Qn,"f")){const t=e.data.content[fr(this,Qn,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,fr(this,Gn,"f"));break;case"text":this._emit("textDone",t.text,fr(this,Gn,"f"))}}fr(this,Gn,"f")&&this._emit("messageDone",e.data),mr(this,Gn,void 0,"f")}},cr=function(e){const t=fr(this,Zn,"m",ur).call(this,e);switch(mr(this,sr,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&"tool_calls"==n.step_details.type&&n.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const e of n.step_details.tool_calls)e.index==fr(this,er,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(fr(this,tr,"f")&&this._emit("toolCallDone",fr(this,tr,"f")),mr(this,er,e.index,"f"),mr(this,tr,t.step_details.tool_calls[e.index],"f"),fr(this,tr,"f")&&this._emit("toolCallCreated",fr(this,tr,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":mr(this,sr,void 0,"f"),"tool_calls"==e.data.step_details.type&&fr(this,tr,"f")&&(this._emit("toolCallDone",fr(this,tr,"f")),mr(this,tr,void 0,"f")),this._emit("runStepDone",e.data,t)}},lr=function(e){fr(this,Bn,"f").push(e),this._emit("event",e)},ur=function(e){switch(e.event){case"thread.run.step.created":return fr(this,Wn,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=fr(this,Wn,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=gr.accumulateDelta(t,n.delta);fr(this,Wn,"f")[e.data.id]=r}return fr(this,Wn,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":fr(this,Wn,"f")[e.data.id]=e.data}if(fr(this,Wn,"f")[e.data.id])return fr(this,Wn,"f")[e.data.id];throw new Error("No snapshot available")},dr=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const e of r.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=fr(this,Zn,"m",hr).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},hr=function(e,t){return gr.accumulateDelta(t,e)},pr=function(e){switch(mr(this,rr,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.cancelling":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":mr(this,Jn,e.data,"f"),fr(this,tr,"f")&&(this._emit("toolCallDone",fr(this,tr,"f")),mr(this,tr,void 0,"f"))}};class yr extends He{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},n){return xe(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,_r,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}class _r extends We{}yr.MessagesPage=_r;class vr extends He{retrieve(e,t,n,r={},s){return xe(r)?this.retrieve(e,t,n,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:r,...s,headers:{"OpenAI-Beta":"assistants=v2",...s?.headers}})}list(e,t,n={},r){return xe(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,wr,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}class wr extends We{}vr.RunStepsPage=wr;class br extends He{constructor(){super(...arguments),this.steps=new vr(this._client)}create(e,t,n){const{include:r,...s}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},n){return xe(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,$r,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return gr.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(e,t,{...n,headers:{...n?.headers,...r}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=o.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await je(e);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,t,n){return gr.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,r){const s=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,s.id,r)}submitToolOutputsStream(e,t,n,r){return gr.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}}class $r extends We{}br.RunsPage=$r,br.Steps=vr,br.RunStepsPage=wr;class kr extends He{constructor(){super(...arguments),this.runs=new br(this._client),this.messages=new yr(this._client)}create(e={},t){return xe(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return gr.createThreadAssistantStream(e,this._client.beta.threads,t)}}kr.Runs=br,kr.RunsPage=$r,kr.Messages=yr,kr.MessagesPage=_r;class xr extends He{constructor(){super(...arguments),this.realtime=new Vn(this._client),this.chat=new Yn(this._client),this.assistants=new Ot(this._client),this.threads=new kr(this._client)}}xr.Realtime=Vn,xr.Assistants=Ot,xr.AssistantsPage=jt,xr.Threads=kr;class Er extends He{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return xe(e)?this.list({},e):this._client.getAPIList("/batches",Ir,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class Ir extends We{}Er.BatchesPage=Ir;class Sr extends He{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,he({body:t,...n}))}}class Tr extends He{constructor(){super(...arguments),this.parts=new Sr(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}}function Pr(e,t){const n=e.output.map(e=>{if("function_call"===e.type)return{...e,parsed_arguments:Or(t,e)};if("message"===e.type){const n=e.content.map(e=>"output_text"===e.type?{...e,parsed:Ar(t,e.text)}:e);return{...e,content:n}}return e}),r=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||jr(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const e of r.output)if("message"===e.type)for(const t of e.content)if("output_text"===t.type&&null!==t.parsed)return t.parsed;return null}}),r}function Ar(e,t){if("json_schema"!==e.text?.format?.type)return null;if("$parseRaw"in e.text?.format){const n=e.text?.format;return n.$parseRaw(t)}return JSON.parse(t)}function Or(e,t){const n=(r=e.tools??[],s=t.name,r.find(e=>"function"===e.type&&e.name===s));var r,s,o;return{...t,...t,parsed_arguments:(o=n,"auto-parseable-tool"===o?.$brand?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null)}}function jr(e){const t=[];for(const n of e.output)if("message"===n.type)for(const e of n.content)"output_text"===e.type&&t.push(e.text);e.output_text=t.join("")}Tr.Parts=Sr;class Cr extends He{list(e,t={},n){return xe(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,Br,{query:t,...n})}}var Rr,Nr,zr,Mr,Dr,qr,Lr,Ur,Yr,Fr=function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},Hr=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Vr extends Qt{constructor(e){super(),Rr.add(this),Nr.set(this,void 0),zr.set(this,void 0),Mr.set(this,void 0),Fr(this,Nr,e,"f")}static createResponse(e,t,n){const r=new Vr(t);return r._run(()=>r._createOrRetrieveResponse(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,t,n){const r=n?.signal;let s;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Hr(this,Rr,"m",Dr).call(this);let o=null;"response_id"in t?(s=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),o=t.starting_after??null):s=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const e of s)Hr(this,Rr,"m",qr).call(this,e,o);if(s.controller.signal?.aborted)throw new M;return Hr(this,Rr,"m",Lr).call(this)}[(Nr=new WeakMap,zr=new WeakMap,Mr=new WeakMap,Rr=new WeakSet,Dr=function(){this.ended||Fr(this,zr,void 0,"f")},qr=function(e,t){if(this.ended)return;const n=(e,n)=>{(null==t||n.sequence_number>t)&&this._emit(e,n)},r=Hr(this,Rr,"m",Ur).call(this,e);switch(n("event",e),e.type){case"response.output_text.delta":{const t=r.output[e.output_index];if(!t)throw new N(`missing output at index ${e.output_index}`);if("message"===t.type){const r=t.content[e.content_index];if(!r)throw new N(`missing content at index ${e.content_index}`);if("output_text"!==r.type)throw new N(`expected content to be 'output_text', got ${r.type}`);n("response.output_text.delta",{...e,snapshot:r.text})}break}case"response.function_call_arguments.delta":{const t=r.output[e.output_index];if(!t)throw new N(`missing output at index ${e.output_index}`);"function_call"===t.type&&n("response.function_call_arguments.delta",{...e,snapshot:t.arguments});break}default:n(e.type,e)}},Lr=function(){if(this.ended)throw new N("stream has ended, this shouldn't happen");const e=Hr(this,zr,"f");if(!e)throw new N("request ended without sending any events");Fr(this,zr,void 0,"f");const t=function(e,t){return function(e,t){return t&&function(e){return!!Xt(e.text?.format)}(t)?Pr(e,t):{...e,output_parsed:null,output:e.output.map(e=>"function_call"===e.type?{...e,parsed_arguments:null}:"message"===e.type?{...e,content:e.content.map(e=>({...e,parsed:null}))}:e)}}(e,t)}(e,Hr(this,Nr,"f"));return Fr(this,Mr,t,"f"),t},Ur=function(e){let t=Hr(this,zr,"f");if(!t){if("response.created"!==e.type)throw new N(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return t=Fr(this,zr,e.response,"f"),t}switch(e.type){case"response.output_item.added":t.output.push(e.item);break;case"response.content_part.added":{const n=t.output[e.output_index];if(!n)throw new N(`missing output at index ${e.output_index}`);"message"===n.type&&n.content.push(e.part);break}case"response.output_text.delta":{const n=t.output[e.output_index];if(!n)throw new N(`missing output at index ${e.output_index}`);if("message"===n.type){const t=n.content[e.content_index];if(!t)throw new N(`missing content at index ${e.content_index}`);if("output_text"!==t.type)throw new N(`expected content to be 'output_text', got ${t.type}`);t.text+=e.delta}break}case"response.function_call_arguments.delta":{const n=t.output[e.output_index];if(!n)throw new N(`missing output at index ${e.output_index}`);"function_call"===n.type&&(n.arguments+=e.delta);break}case"response.completed":Fr(this,zr,e.response,"f")}return t},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=Hr(this,Mr,"f");if(!e)throw new N("stream ended without producing a ChatCompletion");return e}}class Zr extends He{constructor(){super(...arguments),this.inputItems=new Cr(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&jr(e),e))}retrieve(e,t={},n){return this._client.get(`/responses/${e}`,{query:t,...n,stream:t?.stream??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t?.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(t=>Pr(t,e))}stream(e,t){return Vr.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...t?.headers}})}}class Br extends We{}Zr.InputItems=Cr;class Wr extends He{retrieve(e,t,n,r){return this._client.get(`/evals/${e}/runs/${t}/output_items/${n}`,r)}list(e,t,n={},r){return xe(n)?this.list(e,t,{},n):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,Kr,{query:n,...r})}}class Kr extends We{}Wr.OutputItemListResponsesPage=Kr;class Gr extends He{constructor(){super(...arguments),this.outputItems=new Wr(this._client)}create(e,t,n){return this._client.post(`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){return this._client.get(`/evals/${e}/runs/${t}`,n)}list(e,t={},n){return xe(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,Jr,{query:t,...n})}del(e,t,n){return this._client.delete(`/evals/${e}/runs/${t}`,n)}cancel(e,t,n){return this._client.post(`/evals/${e}/runs/${t}`,n)}}class Jr extends We{}Gr.RunListResponsesPage=Jr,Gr.OutputItems=Wr,Gr.OutputItemListResponsesPage=Kr;class Qr extends He{constructor(){super(...arguments),this.runs=new Gr(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,n){return this._client.post(`/evals/${e}`,{body:t,...n})}list(e={},t){return xe(e)?this.list({},e):this._client.getAPIList("/evals",Xr,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class Xr extends We{}Qr.EvalListResponsesPage=Xr,Qr.Runs=Gr,Qr.RunListResponsesPage=Jr;class es extends He{retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}/content`,{...n,headers:{Accept:"application/binary",...n?.headers},__binaryResponse:!0})}}class ts extends He{constructor(){super(...arguments),this.content=new es(this._client)}create(e,t,n){return this._client.post(`/containers/${e}/files`,he({body:t,...n}))}retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}`,n)}list(e,t={},n){return xe(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,ns,{query:t,...n})}del(e,t,n){return this._client.delete(`/containers/${e}/files/${t}`,{...n,headers:{Accept:"*/*",...n?.headers}})}}class ns extends We{}ts.FileListResponsesPage=ns,ts.Content=es;class rs extends He{constructor(){super(...arguments),this.files=new ts(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return xe(e)?this.list({},e):this._client.getAPIList("/containers",ss,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...t?.headers}})}}class ss extends We{}rs.ContainerListResponsesPage=ss,rs.Files=ts,rs.FileListResponsesPage=ns;class os extends ve{constructor({baseURL:e=Ne("OPENAI_BASE_URL"),apiKey:t=Ne("OPENAI_API_KEY"),organization:n=Ne("OPENAI_ORG_ID")??null,project:r=Ne("OPENAI_PROJECT_ID")??null,...s}={}){if(void 0===t)throw new N("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:n,project:r,...s,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator)throw new N("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new Ve(this),this.chat=new Qe(this),this.embeddings=new Xe(this),this.files=new et(this),this.images=new nt(this),this.audio=new at(this),this.moderations=new it(this),this.models=new ct(this),this.fineTuning=new bt(this),this.graders=new kt(this),this.vectorStores=new Tt(this),this.beta=new xr(this),this.batches=new Er(this),this.uploads=new Tr(this),this.responses=new Zr(this),this.evals=new Qr(this),this.containers=new rs(this),this._options=o,this.apiKey=t,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return function(e,t={}){let n=e;const o=function(e=m){if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");const t=e.charset||m.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=r;if(void 0!==e.format){if(!l.call(s,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const o=s[n];let a,i=m.filter;if(("function"==typeof e.filter||d(e.filter))&&(i=e.filter),a=e.arrayFormat&&e.arrayFormat in u?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":m.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const c=void 0===e.allowDots?1==!!e.encodeDotInKeys||m.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:m.addQueryPrefix,allowDots:c,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:m.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:m.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?m.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:m.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:m.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:m.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:m.encodeValuesOnly,filter:i,format:n,formatter:o,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:m.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:m.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:m.strictNullHandling}}(t);let a,i;"function"==typeof o.filter?(i=o.filter,n=i("",n)):d(o.filter)&&(i=o.filter,a=i);const c=[];if("object"!=typeof n||null===n)return"";const h=u[o.arrayFormat],f="comma"===h&&o.commaRoundTrip;a||(a=Object.keys(n)),o.sort&&a.sort(o.sort);const g=new WeakMap;for(let e=0;e<a.length;++e){const t=a[e];o.skipNulls&&null===n[t]||p(c,y(n[t],t,h,f,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,g))}const _=c.join(o.delimiter);let v=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),_.length>0?v+_:""}(e,{arrayFormat:"brackets"})}}Yr=os,os.OpenAI=Yr,os.DEFAULT_TIMEOUT=6e5,os.OpenAIError=N,os.APIError=z,os.APIConnectionError=D,os.APIConnectionTimeoutError=q,os.APIUserAbortError=M,os.NotFoundError=F,os.ConflictError=H,os.RateLimitError=Z,os.BadRequestError=L,os.AuthenticationError=U,os.InternalServerError=B,os.PermissionDeniedError=Y,os.UnprocessableEntityError=V,os.toFile=ce,os.fileFromPath=I,os.Completions=Ve,os.Chat=Qe,os.ChatCompletionsPage=Ge,os.Embeddings=Xe,os.Files=et,os.FileObjectsPage=tt,os.Images=nt,os.Audio=at,os.Moderations=it,os.Models=ct,os.ModelsPage=lt,os.FineTuning=bt,os.Graders=kt,os.VectorStores=Tt,os.VectorStoresPage=Pt,os.VectorStoreSearchResponsesPage=At,os.Beta=xr,os.Batches=Er,os.BatchesPage=Ir,os.Uploads=Tr,os.Responses=Zr,os.Evals=Qr,os.EvalListResponsesPage=Xr,os.Containers=rs,os.ContainerListResponsesPage=ss,new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations","/images/edits"]);const as=os},3622:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},3758:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const r=n(1910),s=n(4678),o=n(2304),a=n(4678);function i(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:r._`Object.prototype.hasOwnProperty`})}function c(e,t,n){return r._`${i(e)}.call(${t}, ${n})`}function l(e,t,n,s){const o=r._`${t}${(0,r.getProperty)(n)} === undefined`;return s?(0,r.or)(o,(0,r.not)(c(e,t,n))):o}function u(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}t.checkReportMissingProp=function(e,t){const{gen:n,data:s,it:o}=e;n.if(l(n,s,t,o.opts.ownProperties),()=>{e.setParams({missingProperty:r._`${t}`},!0),e.error()})},t.checkMissingProp=function({gen:e,data:t,it:{opts:n}},s,o){return(0,r.or)(...s.map(s=>(0,r.and)(l(e,t,s,n.ownProperties),r._`${o} = ${s}`)))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=i,t.isOwnProperty=c,t.propertyInData=function(e,t,n,s){const o=r._`${t}${(0,r.getProperty)(n)} !== undefined`;return s?r._`${o} && ${c(e,t,n)}`:o},t.noPropertyInData=l,t.allSchemaProperties=u,t.schemaProperties=function(e,t){return u(t).filter(n=>!(0,s.alwaysValidSchema)(e,t[n]))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:n,topSchemaRef:s,schemaPath:a,errorPath:i},it:c},l,u,d){const h=d?r._`${e}, ${t}, ${s}${a}`:t,p=[[o.default.instancePath,(0,r.strConcat)(o.default.instancePath,i)],[o.default.parentData,c.parentData],[o.default.parentDataProperty,c.parentDataProperty],[o.default.rootData,o.default.rootData]];c.opts.dynamicRef&&p.push([o.default.dynamicAnchors,o.default.dynamicAnchors]);const f=r._`${h}, ${n.object(...p)}`;return u!==r.nil?r._`${l}.call(${u}, ${f})`:r._`${l}(${f})`};const d=r._`new RegExp`;t.usePattern=function({gen:e,it:{opts:t}},n){const s=t.unicodeRegExp?"u":"",{regExp:o}=t.code,i=o(n,s);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:r._`${"new RegExp"===o.code?d:(0,a.useFunc)(e,o)}(${n}, ${s})`})},t.validateArray=function(e){const{gen:t,data:n,keyword:o,it:a}=e,i=t.name("valid");if(a.allErrors){const e=t.let("valid",!0);return c(()=>t.assign(e,!1)),e}return t.var(i,!0),c(()=>t.break()),i;function c(a){const c=t.const("len",r._`${n}.length`);t.forRange("i",0,c,n=>{e.subschema({keyword:o,dataProp:n,dataPropType:s.Type.Num},i),t.if((0,r.not)(i),a)})}},t.validateUnion=function(e){const{gen:t,schema:n,keyword:o,it:a}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(e=>(0,s.alwaysValidSchema)(a,e))&&!a.opts.unevaluated)return;const i=t.let("valid",!1),c=t.name("_valid");t.block(()=>n.forEach((n,s)=>{const a=e.subschema({keyword:o,schemaProp:s,compositeRule:!0},c);t.assign(i,r._`${i} || ${c}`),e.mergeValidEvaluated(a,c)||t.if((0,r.not)(i))})),e.result(i,()=>e.reset(),()=>e.error(!0))}},3800:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;const r=n(1910),s=n(2304),o=n(3758),a=n(2693);function i(e){const{gen:t,data:n,it:s}=e;t.if(s.parentData,()=>t.assign(n,r._`${s.parentData}[${s.parentDataProperty}]`))}function c(e,t,n){if(void 0===n)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof n?{ref:n}:{ref:n,code:(0,r.stringify)(n)})}t.macroKeywordCode=function(e,t){const{gen:n,keyword:s,schema:o,parentSchema:a,it:i}=e,l=t.macro.call(i.self,o,a,i),u=c(n,s,l);!1!==i.opts.validateSchema&&i.self.validateSchema(l,!0);const d=n.name("valid");e.subschema({schema:l,schemaPath:r.nil,errSchemaPath:`${i.errSchemaPath}/${s}`,topSchemaRef:u,compositeRule:!0},d),e.pass(d,()=>e.error(!0))},t.funcKeywordCode=function(e,t){var n;const{gen:l,keyword:u,schema:d,parentSchema:h,$data:p,it:f}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(f,t);const m=!p&&t.compile?t.compile.call(f.self,d,h,f):t.validate,g=c(l,u,m),y=l.let("valid");function _(n=(t.async?r._`await `:r.nil)){const a=f.opts.passContext?s.default.this:s.default.self,i=!("compile"in t&&!p||!1===t.schema);l.assign(y,r._`${n}${(0,o.callValidateCode)(e,g,a,i)}`,t.modifying)}function v(e){var n;l.if((0,r.not)(null!==(n=t.valid)&&void 0!==n?n:y),e)}e.block$data(y,function(){if(!1===t.errors)_(),t.modifying&&i(e),v(()=>e.error());else{const n=t.async?function(){const e=l.let("ruleErrs",null);return l.try(()=>_(r._`await `),t=>l.assign(y,!1).if(r._`${t} instanceof ${f.ValidationError}`,()=>l.assign(e,r._`${t}.errors`),()=>l.throw(t))),e}():function(){const e=r._`${g}.errors`;return l.assign(e,null),_(r.nil),e}();t.modifying&&i(e),v(()=>function(e,t){const{gen:n}=e;n.if(r._`Array.isArray(${t})`,()=>{n.assign(s.default.vErrors,r._`${s.default.vErrors} === null ? ${t} : ${s.default.vErrors}.concat(${t})`).assign(s.default.errors,r._`${s.default.vErrors}.length`),(0,a.extendErrors)(e)},()=>e.error())}(e,n))}}),e.ok(null!==(n=t.valid)&&void 0!==n?n:y)},t.validSchemaType=function(e,t,n=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||n&&void 0===e)},t.validateKeywordUsage=function({schema:e,opts:t,self:n,errSchemaPath:r},s,o){if(Array.isArray(s.keyword)?!s.keyword.includes(o):s.keyword!==o)throw new Error("ajv implementation error");const a=s.dependencies;if(null==a?void 0:a.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[o])){const e=`keyword "${o}" value is invalid at path "${r}": `+n.errorsText(s.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);n.logger.error(e)}}},3905:(e,t)=>{"use strict";function n(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:n(o,a),time:n(c(!0),l),"date-time":n(h(!0),p),"iso-time":n(c(),u),"iso-date-time":n(h(),f),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return m.test(e)&&g.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(b.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return y.lastIndex=0,y.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=v&&e>=_}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:w},double:{type:"number",validate:w},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:n(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,a),time:n(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,l),"date-time":n(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,p),"iso-time":n(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,u),"iso-date-time":n(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,f),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);const r=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(e){const t=r.exec(e);if(!t)return!1;const n=+t[1],o=+t[2],a=+t[3];return o>=1&&o<=12&&a>=1&&a<=(2===o&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(n)?29:s[o])}function a(e,t){if(e&&t)return e>t?1:e<t?-1:0}const i=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function c(e){return function(t){const n=i.exec(t);if(!n)return!1;const r=+n[1],s=+n[2],o=+n[3],a=n[4],c="-"===n[5]?-1:1,l=+(n[6]||0),u=+(n[7]||0);if(l>23||u>59||e&&!a)return!1;if(r<=23&&s<=59&&o<60)return!0;const d=s-u*c,h=r-l*c-(d<0?1:0);return(23===h||-1===h)&&(59===d||-1===d)&&o<61}}function l(e,t){if(!e||!t)return;const n=new Date("2020-01-01T"+e).valueOf(),r=new Date("2020-01-01T"+t).valueOf();return n&&r?n-r:void 0}function u(e,t){if(!e||!t)return;const n=i.exec(e),r=i.exec(t);return n&&r?(e=n[1]+n[2]+n[3])>(t=r[1]+r[2]+r[3])?1:e<t?-1:0:void 0}const d=/t|\s/i;function h(e){const t=c(e);return function(e){const n=e.split(d);return 2===n.length&&o(n[0])&&t(n[1])}}function p(e,t){if(!e||!t)return;const n=new Date(e).valueOf(),r=new Date(t).valueOf();return n&&r?n-r:void 0}function f(e,t){if(!e||!t)return;const[n,r]=e.split(d),[s,o]=t.split(d),i=a(n,s);return void 0!==i?i||l(r,o):void 0}const m=/\/|:/,g=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,y=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,_=-(2**31),v=2**31-1;function w(){return!0}const b=/[^\\]\\Z/},4063:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4678),s={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:s}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const o=t.name("valid");n.forEach((t,n)=>{if((0,r.alwaysValidSchema)(s,t))return;const a=e.subschema({keyword:"allOf",schemaProp:n},o);e.ok(o),e.mergeEvaluated(a)})}};t.default=s},4401:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2085),s={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,r.validateTuple)(e,"items")};t.default=s},4606:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(311),s=n(1910),o=n(4678),a=n(353),i={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>s.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>s._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:n,$data:i,schema:c,parentSchema:l,schemaCode:u,it:d}=e;if(!i&&!c)return;const h=t.let("valid"),p=l.items?(0,r.getSchemaTypes)(l.items):[];function f(o,a){const i=t.name("item"),c=(0,r.checkDataTypes)(p,i,d.opts.strictNumbers,r.DataType.Wrong),l=t.const("indices",s._`{}`);t.for(s._`;${o}--;`,()=>{t.let(i,s._`${n}[${o}]`),t.if(c,s._`continue`),p.length>1&&t.if(s._`typeof ${i} == "string"`,s._`${i} += "_"`),t.if(s._`typeof ${l}[${i}] == "number"`,()=>{t.assign(a,s._`${l}[${i}]`),e.error(),t.assign(h,!1).break()}).code(s._`${l}[${i}] = ${o}`)})}function m(r,i){const c=(0,o.useFunc)(t,a.default),l=t.name("outer");t.label(l).for(s._`;${r}--;`,()=>t.for(s._`${i} = ${r}; ${i}--;`,()=>t.if(s._`${c}(${n}[${r}], ${n}[${i}])`,()=>{e.error(),t.assign(h,!1).break(l)})))}e.block$data(h,function(){const r=t.let("i",s._`${n}.length`),o=t.let("j");e.setParams({i:r,j:o}),t.assign(h,!0),t.if(s._`${r} > 1`,()=>(p.length>0&&!p.some(e=>"object"===e||"array"===e)?f:m)(r,o))},s._`${u} === false`),e.ok(h)}};t.default=i},4648:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(1798).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},4678:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const r=n(1910),s=n(3345);function o(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema)return;if("boolean"==typeof t)return;const s=r.RULES.keywords;for(const n in t)s[n]||f(e,`unknown keyword: "${n}"`)}function a(e,t){if("boolean"==typeof e)return!e;for(const n in e)if(t[n])return!0;return!1}function i(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function c(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function l({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:s}){return(o,a,i,c)=>{const l=void 0===i?a:i instanceof r.Name?(a instanceof r.Name?e(o,a,i):t(o,a,i),i):a instanceof r.Name?(t(o,i,a),a):n(a,i);return c!==r.Name||l instanceof r.Name?l:s(o,l)}}function u(e,t){if(!0===t)return e.var("props",!0);const n=e.var("props",r._`{}`);return void 0!==t&&d(e,n,t),n}function d(e,t,n){Object.keys(n).forEach(n=>e.assign(r._`${t}${(0,r.getProperty)(n)}`,!0))}t.toHash=function(e){const t={};for(const n of e)t[n]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(o(e,t),!a(t,e.self.RULES.all))},t.checkUnknownRules=o,t.schemaHasRules=a,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const n in e)if("$ref"!==n&&t.all[n])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},n,s,o){if(!o){if("number"==typeof n||"boolean"==typeof n)return n;if("string"==typeof n)return r._`${n}`}return r._`${e}${t}${(0,r.getProperty)(s)}`},t.unescapeFragment=function(e){return c(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(i(e))},t.escapeJsonPointer=i,t.unescapeJsonPointer=c,t.eachItem=function(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)},t.mergeEvaluated={props:l({mergeNames:(e,t,n)=>e.if(r._`${n} !== true && ${t} !== undefined`,()=>{e.if(r._`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,r._`${n} || {}`).code(r._`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if(r._`${n} !== true`,()=>{!0===t?e.assign(n,!0):(e.assign(n,r._`${n} || {}`),d(e,n,t))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:u}),items:l({mergeNames:(e,t,n)=>e.if(r._`${n} !== true && ${t} !== undefined`,()=>e.assign(n,r._`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if(r._`${n} !== true`,()=>e.assign(n,!0===t||r._`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=u,t.setEvaluated=d;const h={};var p;function f(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,!0===n)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:h[t.code]||(h[t.code]=new s._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(p||(t.Type=p={})),t.getErrorPath=function(e,t,n){if(e instanceof r.Name){const s=t===p.Num;return n?s?r._`"[" + ${e} + "]"`:r._`"['" + ${e} + "']"`:s?r._`"/" + ${e}`:r._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,r.getProperty)(e).toString():"/"+i(e)},t.checkStrictMode=f},4828:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o=n(6896),a={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxLength"===e?"more":"fewer";return r.str`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:a,it:i}=e,c="maxLength"===t?r.operators.GT:r.operators.LT,l=!1===i.opts.unicode?r._`${n}.length`:r._`${(0,s.useFunc)(e.gen,o.default)}(${n})`;e.fail$data(r._`${l} ${c} ${a}`)}};t.default=a},5070:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},5133:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=n(5475),s=n(8659),o=n(3100),a=n(5276),i=["/properties"],c="http://json-schema.org/draft-07/schema";class l extends r.default{_addVocabularies(){super._addVocabularies(),s.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(a,i):a;this.addMetaSchema(e,c,!1),this.refs["http://json-schema.org/schema"]=c}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(c)?c:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var u=n(3419);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var d=n(1910);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var h=n(8635);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return h.default}});var p=n(1688);Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return p.default}})},5243:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(1798).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},5276:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},5475:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var r=n(3419);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return r.KeywordCxt}});var s=n(1910);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return s.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return s.CodeGen}});const o=n(8635),a=n(1688),i=n(7619),c=n(9700),l=n(1910),u=n(8668),d=n(311),h=n(4678),p=n(3622),f=n(1435),m=(e,t)=>new RegExp(e,t);m.code="new RegExp";const g=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),_={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function w(e){var t,n,r,s,o,a,i,c,l,u,d,h,p,g,y,_,v,w,b,$,k,_x,x,E,I;const S=e.strict,T=null===(t=e.code)||void 0===t?void 0:t.optimize,P=!0===T||void 0===T?1:T||0,A=null!==(r=null===(n=e.code)||void 0===n?void 0:n.regExp)&&void 0!==r?r:m,O=null!==(s=e.uriResolver)&&void 0!==s?s:f.default;return{strictSchema:null===(a=null!==(o=e.strictSchema)&&void 0!==o?o:S)||void 0===a||a,strictNumbers:null===(c=null!==(i=e.strictNumbers)&&void 0!==i?i:S)||void 0===c||c,strictTypes:null!==(u=null!==(l=e.strictTypes)&&void 0!==l?l:S)&&void 0!==u?u:"log",strictTuples:null!==(h=null!==(d=e.strictTuples)&&void 0!==d?d:S)&&void 0!==h?h:"log",strictRequired:null!==(g=null!==(p=e.strictRequired)&&void 0!==p?p:S)&&void 0!==g&&g,code:e.code?{...e.code,optimize:P,regExp:A}:{optimize:P,regExp:A},loopRequired:null!==(y=e.loopRequired)&&void 0!==y?y:200,loopEnum:null!==(_=e.loopEnum)&&void 0!==_?_:200,meta:null===(v=e.meta)||void 0===v||v,messages:null===(w=e.messages)||void 0===w||w,inlineRefs:null===(b=e.inlineRefs)||void 0===b||b,schemaId:null!==($=e.schemaId)&&void 0!==$?$:"$id",addUsedSchema:null===(k=e.addUsedSchema)||void 0===k||k,validateSchema:null===(_x=e.validateSchema)||void 0===_x||_x,validateFormats:null===(x=e.validateFormats)||void 0===x||x,unicodeRegExp:null===(E=e.unicodeRegExp)||void 0===E||E,int32range:null===(I=e.int32range)||void 0===I||I,uriResolver:O}}class b{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...w(e)};const{es5:t,lines:n}=this.opts.code;this.scope=new l.ValueScope({scope:{},prefixes:y,es5:t,lines:n}),this.logger=function(e){if(!1===e)return T;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const r=e.validateFormats;e.validateFormats=!1,this.RULES=(0,i.getRules)(),$.call(this,_,e,"NOT SUPPORTED"),$.call(this,v,e,"DEPRECATED","warn"),this._metaOpts=S.call(this),e.formats&&E.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&I.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),x.call(this),e.validateFormats=r}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:n}=this.opts;let r=p;"id"===n&&(r={...p},r.id=r.$id,delete r.$id),t&&e&&this.addMetaSchema(r,r[n],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let n;if("string"==typeof e){if(n=this.getSchema(e),!n)throw new Error(`no schema with key or ref "${e}"`)}else n=this.compile(e);const r=n(t);return"$async"in n||(this.errors=n.errors),r}compile(e,t){const n=this._addSchema(e,t);return n.validate||this._compileSchemaEnv(n)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:n}=this.opts;return r.call(this,e,t);async function r(e,t){await s.call(this,e.$schema);const n=this._addSchema(e,t);return n.validate||o.call(this,n)}async function s(e){e&&!this.getSchema(e)&&await r.call(this,{$ref:e},!0)}async function o(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof a.default))throw t;return i.call(this,t),await c.call(this,t.missingSchema),o.call(this,e)}}function i({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function c(e){const n=await l.call(this,e);this.refs[e]||await s.call(this,n.$schema),this.refs[e]||this.addSchema(n,e,t)}async function l(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=n(e))}finally{delete this._loading[e]}}}addSchema(e,t,n,r=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,n,r);return this}let s;if("object"==typeof e){const{schemaId:t}=this.opts;if(s=e[t],void 0!==s&&"string"!=typeof s)throw new Error(`schema ${t} must be string`)}return t=(0,u.normalizeId)(t||s),this._checkUnique(t),this.schemas[t]=this._addSchema(e,n,t,r,!0),this}addMetaSchema(e,t,n=this.opts.validateSchema){return this.addSchema(e,t,!0,n),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let n;if(n=e.$schema,void 0!==n&&"string"!=typeof n)throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const r=this.validate(n,e);if(!r&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return r}getSchema(e){let t;for(;"string"==typeof(t=k.call(this,e));)e=t;if(void 0===t){const{schemaId:n}=this.opts,r=new c.SchemaEnv({schema:{},schemaId:n});if(t=c.resolveSchema.call(this,r,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=k.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let n=e[this.opts.schemaId];return n&&(n=(0,u.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let n;if("string"==typeof e)n=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=n);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(n=(t=e).keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(A.call(this,n,t),!t)return(0,h.eachItem)(n,e=>O.call(this,e)),this;C.call(this,t);const r={...t,type:(0,d.getJSONTypes)(t.type),schemaType:(0,d.getJSONTypes)(t.schemaType)};return(0,h.eachItem)(n,0===r.type.length?e=>O.call(this,e,r):e=>r.type.forEach(t=>O.call(this,e,r,t))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const n of t.rules){const t=n.rules.findIndex(t=>t.keyword===e);t>=0&&n.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:n="data"}={}){return e&&0!==e.length?e.map(e=>`${n}${e.instancePath} ${e.message}`).reduce((e,n)=>e+t+n):"No errors"}$dataMetaSchema(e,t){const n=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const r of t){const t=r.split("/").slice(1);let s=e;for(const e of t)s=s[e];for(const e in n){const t=n[e];if("object"!=typeof t)continue;const{$data:r}=t.definition,o=s[e];r&&o&&(s[e]=N(o))}}return e}_removeAllSchemas(e,t){for(const n in e){const r=e[n];t&&!t.test(n)||("string"==typeof r?delete e[n]:r&&!r.meta&&(this._cache.delete(r.schema),delete e[n]))}}_addSchema(e,t,n,r=this.opts.validateSchema,s=this.opts.addUsedSchema){let o;const{schemaId:a}=this.opts;if("object"==typeof e)o=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let i=this._cache.get(e);if(void 0!==i)return i;n=(0,u.normalizeId)(o||n);const l=u.getSchemaRefs.call(this,e,n);return i=new c.SchemaEnv({schema:e,schemaId:a,meta:t,baseId:n,localRefs:l}),this._cache.set(i.schema,i),s&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=i),r&&this.validateSchema(e,!0),i}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):c.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,e)}finally{this.opts=t}}}function $(e,t,n,r="error"){for(const s in e){const o=s;o in t&&this.logger[r](`${n}: option ${s}. ${e[o]}`)}}function k(e){return e=(0,u.normalizeId)(e),this.schemas[e]||this.refs[e]}function x(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function E(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function I(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const n=e[t];n.keyword||(n.keyword=t),this.addKeyword(n)}}}function S(){const e={...this.opts};for(const t of g)delete e[t];return e}b.ValidationError=o.default,b.MissingRefError=a.default,t.default=b;const T={log(){},warn(){},error(){}},P=/^[a-z_$][a-z0-9_$:-]*$/i;function A(e,t){const{RULES:n}=this;if((0,h.eachItem)(e,e=>{if(n.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!P.test(e))throw new Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function O(e,t,n){var r;const s=null==t?void 0:t.post;if(n&&s)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let a=s?o.post:o.rules.find(({type:e})=>e===n);if(a||(a={type:n,rules:[]},o.rules.push(a)),o.keywords[e]=!0,!t)return;const i={keyword:e,definition:{...t,type:(0,d.getJSONTypes)(t.type),schemaType:(0,d.getJSONTypes)(t.schemaType)}};t.before?j.call(this,a,i,t.before):a.rules.push(i),o.all[e]=i,null===(r=t.implements)||void 0===r||r.forEach(e=>this.addKeyword(e))}function j(e,t,n){const r=e.rules.findIndex(e=>e.keyword===n);r>=0?e.rules.splice(r,0,t):(e.rules.push(t),this.logger.warn(`rule ${n} is not defined`))}function C(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=N(t)),e.validateSchema=this.compile(t,!0))}const R={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function N(e){return{anyOf:[e,R]}}},5514:(e,t,n)=>{"use strict";n.d(t,{$W:()=>i,GT:()=>o,cr:()=>a,tm:()=>r,xI:()=>s});const r=Object.freeze({status:"aborted"});function s(e,t,n){function r(n,r){var s;Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(s=n._zod).traits??(s.traits=new Set),n._zod.traits.add(e),t(n,r);for(const e in a.prototype)e in n||Object.defineProperty(n,e,{value:a.prototype[e].bind(n)});n._zod.constr=a,n._zod.def=r}const s=n?.Parent??Object;class o extends s{}function a(e){var t;const s=n?.Parent?new o:this;r(s,e),(t=s._zod).deferred??(t.deferred=[]);for(const e of s._zod.deferred)e();return s}return Object.defineProperty(o,"name",{value:e}),Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}Symbol("zod_brand");class o extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const a={};function i(e){return e&&Object.assign(a,e),a}},5636:(e,t,n)=>{"use strict";n.d(t,{rS:()=>V,EB:()=>x,bz:()=>ee,YO:()=>oe,zM:()=>G,Ie:()=>Ne,gM:()=>he,k5:()=>_e,E$:()=>fe,eu:()=>we,_H:()=>ce,ch:()=>Q,ai:()=>Z,Ik:()=>ie,lq:()=>xe,vk:()=>ze,g1:()=>ge,Yj:()=>k,KC:()=>ue,L5:()=>ne,OZ:()=>P});var r=n(5514),s=n(9774),o=n(9125);Symbol("ZodOutput"),Symbol("ZodInput");class a{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){const n=t[0];if(this._map.set(e,n),n&&"object"==typeof n&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const n={...this.get(t)??{}};return delete n.id,{...n,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function i(){return new a}const c=i();var l=n(2709),u=n(668),d=n(6191),h=n(1658),p=n(154);const f=(e,t)=>{p.a$.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>p.Wk(e,t)},flatten:{value:t=>p.JM(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get:()=>0===e.issues.length}})},m=(r.xI("ZodError",f),r.xI("ZodError",f,{Parent:Error})),g=h.Tj(m),y=h.Rb(m),_=h.Od(m),v=h.wG(m),w=r.xI("ZodType",(e,t)=>(s.W4.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,n)=>o.o8(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>g(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>_(e,t,n),e.parseAsync=async(t,n)=>y(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>v(e,t,n),e.spa=e.safeParseAsync,e.refine=(t,n)=>e.check(function(e,t={}){return l.fU(Re,e,t)}(t,n)),e.superRefine=t=>e.check(function(e){const t=function(e){const t=new u.QP({check:"custom"});return t._zod.check=e,t}(n=>(n.addIssue=e=>{if("string"==typeof e)n.issues.push(o.sn(e,n.value,t._zod.def));else{const r=e;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(o.sn(r))}},e(n.value,n)));return t}(t)),e.overwrite=t=>e.check(l.bS(t)),e.optional=()=>xe(e),e.nullable=()=>Ie(e),e.nullish=()=>xe(Ie(e)),e.nonoptional=t=>function(e,t){return new Pe({type:"nonoptional",innerType:e,...o.A2(t)})}(e,t),e.array=()=>oe(e),e.or=t=>ue([e,t]),e.and=t=>fe(e,t),e.transform=t=>je(e,$e(t)),e.default=t=>{return n=t,new Se({type:"default",innerType:e,get defaultValue(){return"function"==typeof n?n():n}});var n},e.prefault=t=>{return n=t,new Te({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof n?n():n}});var n},e.catch=t=>{return new Ae({type:"catch",innerType:e,catchValue:"function"==typeof(n=t)?n:()=>n});var n},e.pipe=t=>je(e,t),e.readonly=()=>new Ce({type:"readonly",innerType:e}),e.describe=t=>{const n=e.clone();return c.add(n,{description:t}),n},Object.defineProperty(e,"description",{get:()=>c.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return c.get(e);const n=e.clone();return c.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),b=r.xI("_ZodString",(e,t)=>{s.$v.init(e,t),w.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(l.Fk(...t)),e.includes=(...t)=>e.check(l.dR(...t)),e.startsWith=(...t)=>e.check(l.$S(...t)),e.endsWith=(...t)=>e.check(l.ER(...t)),e.min=(...t)=>e.check(l.m9(...t)),e.max=(...t)=>e.check(l.Eb(...t)),e.length=(...t)=>e.check(l.YA(...t)),e.nonempty=(...t)=>e.check(l.m9(1,...t)),e.lowercase=t=>e.check(l.hH(t)),e.uppercase=t=>e.check(l.qF(t)),e.trim=()=>e.check(l.WN()),e.normalize=(...t)=>e.check(l.lo(...t)),e.toLowerCase=()=>e.check(l.Il()),e.toUpperCase=()=>e.check(l.xY())}),$=r.xI("ZodString",(e,t)=>{s.$v.init(e,t),b.init(e,t),e.email=t=>e.check(l.Mu(E,t)),e.url=t=>e.check(l.Fn(T,t)),e.jwt=t=>e.check(l.rk(H,t)),e.emoji=t=>e.check(l.aC(A,t)),e.guid=t=>e.check(l.tB(I,t)),e.uuid=t=>e.check(l.Be(S,t)),e.uuidv4=t=>e.check(l.nA(S,t)),e.uuidv6=t=>e.check(l.pY(S,t)),e.uuidv7=t=>e.check(l.wA(S,t)),e.nanoid=t=>e.check(l.Dl(O,t)),e.guid=t=>e.check(l.tB(I,t)),e.cuid=t=>e.check(l.fs(j,t)),e.cuid2=t=>e.check(l.Bj(C,t)),e.ulid=t=>e.check(l.Ct(R,t)),e.base64=t=>e.check(l.rt(U,t)),e.base64url=t=>e.check(l.cU(Y,t)),e.xid=t=>e.check(l.Pw(N,t)),e.ksuid=t=>e.check(l._z(z,t)),e.ipv4=t=>e.check(l.Ny(M,t)),e.ipv6=t=>e.check(l.$O(D,t)),e.cidrv4=t=>e.check(l.Uy(q,t)),e.cidrv6=t=>e.check(l.gP(L,t)),e.e164=t=>e.check(l.KB(F,t)),e.datetime=t=>e.check(d.w$(t)),e.date=t=>e.check(d.p6(t)),e.time=t=>e.check(d.kB(t)),e.duration=t=>e.check(d.p0(t))});function k(e){return l.Rl($,e)}const x=r.xI("ZodStringFormat",(e,t)=>{s.EY.init(e,t),b.init(e,t)}),E=r.xI("ZodEmail",(e,t)=>{s.qG.init(e,t),x.init(e,t)}),I=r.xI("ZodGUID",(e,t)=>{s.Zc.init(e,t),x.init(e,t)}),S=r.xI("ZodUUID",(e,t)=>{s.Zn.init(e,t),x.init(e,t)}),T=r.xI("ZodURL",(e,t)=>{s.VY.init(e,t),x.init(e,t)});function P(e){return l.Fn(T,e)}const A=r.xI("ZodEmoji",(e,t)=>{s.cG.init(e,t),x.init(e,t)}),O=r.xI("ZodNanoID",(e,t)=>{s.Py.init(e,t),x.init(e,t)}),j=r.xI("ZodCUID",(e,t)=>{s.bl.init(e,t),x.init(e,t)}),C=r.xI("ZodCUID2",(e,t)=>{s.Zu.init(e,t),x.init(e,t)}),R=r.xI("ZodULID",(e,t)=>{s.g5.init(e,t),x.init(e,t)}),N=r.xI("ZodXID",(e,t)=>{s.TF.init(e,t),x.init(e,t)}),z=r.xI("ZodKSUID",(e,t)=>{s.GY.init(e,t),x.init(e,t)}),M=r.xI("ZodIPv4",(e,t)=>{s.Lc.init(e,t),x.init(e,t)}),D=r.xI("ZodIPv6",(e,t)=>{s.Zy.init(e,t),x.init(e,t)}),q=r.xI("ZodCIDRv4",(e,t)=>{s.CI.init(e,t),x.init(e,t)}),L=r.xI("ZodCIDRv6",(e,t)=>{s.Cn.init(e,t),x.init(e,t)}),U=r.xI("ZodBase64",(e,t)=>{s.Dq.init(e,t),x.init(e,t)}),Y=r.xI("ZodBase64URL",(e,t)=>{s.CQ.init(e,t),x.init(e,t)}),F=r.xI("ZodE164",(e,t)=>{s.Oy.init(e,t),x.init(e,t)}),H=r.xI("ZodJWT",(e,t)=>{s.h8.init(e,t),x.init(e,t)}),V=r.xI("ZodNumber",(e,t)=>{s.vz.init(e,t),w.init(e,t),e.gt=(t,n)=>e.check(l.Tx(t,n)),e.gte=(t,n)=>e.check(l.qm(t,n)),e.min=(t,n)=>e.check(l.qm(t,n)),e.lt=(t,n)=>e.check(l.Au(t,n)),e.lte=(t,n)=>e.check(l.Zm(t,n)),e.max=(t,n)=>e.check(l.Zm(t,n)),e.int=t=>e.check(W(t)),e.safe=t=>e.check(W(t)),e.positive=t=>e.check(l.Tx(0,t)),e.nonnegative=t=>e.check(l.qm(0,t)),e.negative=t=>e.check(l.Au(0,t)),e.nonpositive=t=>e.check(l.Zm(0,t)),e.multipleOf=(t,n)=>e.check(l.Hi(t,n)),e.step=(t,n)=>e.check(l.Hi(t,n)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Z(e){return l.F7(V,e)}const B=r.xI("ZodNumberFormat",(e,t)=>{s.I.init(e,t),V.init(e,t)});function W(e){return l.LK(B,e)}const K=r.xI("ZodBoolean",(e,t)=>{s.sF.init(e,t),w.init(e,t)});function G(e){return l._L(K,e)}const J=r.xI("ZodNull",(e,t)=>{s.x8.init(e,t),w.init(e,t)});function Q(e){return l.jw(J,e)}const X=r.xI("ZodAny",(e,t)=>{s.Gb.init(e,t),w.init(e,t)});function ee(){return l.KA(X)}const te=r.xI("ZodUnknown",(e,t)=>{s.GP.init(e,t),w.init(e,t)});function ne(){return l.em(te)}const re=r.xI("ZodNever",(e,t)=>{s.Um.init(e,t),w.init(e,t)});const se=r.xI("ZodArray",(e,t)=>{s.$p.init(e,t),w.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(l.m9(t,n)),e.nonempty=t=>e.check(l.m9(1,t)),e.max=(t,n)=>e.check(l.Eb(t,n)),e.length=(t,n)=>e.check(l.YA(t,n)),e.unwrap=()=>e.element});function oe(e,t){return l.dZ(se,e,t)}const ae=r.xI("ZodObject",(e,t)=>{s.L8.init(e,t),w.init(e,t),o.gJ(e,"shape",()=>t.shape),e.keyof=()=>_e(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:ne()}),e.loose=()=>e.clone({...e._zod.def,catchall:ne()}),e.strict=()=>{return e.clone({...e._zod.def,catchall:l.G8(re,t)});var t},e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>o.X$(e,t),e.merge=t=>o.h1(e,t),e.pick=t=>o.Up(e,t),e.omit=t=>o.cJ(e,t),e.partial=(...t)=>o.OH(ke,e,t[0]),e.required=(...t)=>o.mw(Pe,e,t[0])});function ie(e,t){const n={type:"object",get shape(){return o.Vy(this,"shape",{...e}),this.shape},...o.A2(t)};return new ae(n)}function ce(e,t){return new ae({type:"object",get shape(){return o.Vy(this,"shape",{...e}),this.shape},catchall:ne(),...o.A2(t)})}const le=r.xI("ZodUnion",(e,t)=>{s.cu.init(e,t),w.init(e,t),e.options=t.options});function ue(e,t){return new le({type:"union",options:e,...o.A2(t)})}const de=r.xI("ZodDiscriminatedUnion",(e,t)=>{le.init(e,t),s.P0.init(e,t)});function he(e,t,n){return new de({type:"union",options:t,discriminator:e,...o.A2(n)})}const pe=r.xI("ZodIntersection",(e,t)=>{s.LJ.init(e,t),w.init(e,t)});function fe(e,t){return new pe({type:"intersection",left:e,right:t})}const me=r.xI("ZodRecord",(e,t)=>{s.h.init(e,t),w.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function ge(e,t,n){return new me({type:"record",keyType:e,valueType:t,...o.A2(n)})}const ye=r.xI("ZodEnum",(e,t)=>{s.VO.init(e,t),w.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(e,r)=>{const s={};for(const r of e){if(!n.has(r))throw new Error(`Key ${r} not found in enum`);s[r]=t.entries[r]}return new ye({...t,checks:[],...o.A2(r),entries:s})},e.exclude=(e,r)=>{const s={...t.entries};for(const t of e){if(!n.has(t))throw new Error(`Key ${t} not found in enum`);delete s[t]}return new ye({...t,checks:[],...o.A2(r),entries:s})}});function _e(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new ye({type:"enum",entries:n,...o.A2(t)})}const ve=r.xI("ZodLiteral",(e,t)=>{s.nu.init(e,t),w.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function we(e,t){return new ve({type:"literal",values:Array.isArray(e)?e:[e],...o.A2(t)})}const be=r.xI("ZodTransform",(e,t)=>{s.Wc.init(e,t),w.init(e,t),e._zod.parse=(n,r)=>{n.addIssue=r=>{if("string"==typeof r)n.issues.push(o.sn(r,n.value,t));else{const t=r;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=n.value),t.inst??(t.inst=e),t.continue??(t.continue=!0),n.issues.push(o.sn(t))}};const s=t.transform(n.value,n);return s instanceof Promise?s.then(e=>(n.value=e,n)):(n.value=s,n)}});function $e(e){return new be({type:"transform",transform:e})}const ke=r.xI("ZodOptional",(e,t)=>{s.ig.init(e,t),w.init(e,t),e.unwrap=()=>e._zod.def.innerType});function xe(e){return new ke({type:"optional",innerType:e})}const Ee=r.xI("ZodNullable",(e,t)=>{s.qc.init(e,t),w.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ie(e){return new Ee({type:"nullable",innerType:e})}const Se=r.xI("ZodDefault",(e,t)=>{s.rv.init(e,t),w.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}),Te=r.xI("ZodPrefault",(e,t)=>{s.VF.init(e,t),w.init(e,t),e.unwrap=()=>e._zod.def.innerType}),Pe=r.xI("ZodNonOptional",(e,t)=>{s.N$.init(e,t),w.init(e,t),e.unwrap=()=>e._zod.def.innerType}),Ae=r.xI("ZodCatch",(e,t)=>{s.t$.init(e,t),w.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}),Oe=r.xI("ZodPipe",(e,t)=>{s._m.init(e,t),w.init(e,t),e.in=t.in,e.out=t.out});function je(e,t){return new Oe({type:"pipe",in:e,out:t})}const Ce=r.xI("ZodReadonly",(e,t)=>{s.Sb.init(e,t),w.init(e,t)}),Re=r.xI("ZodCustom",(e,t)=>{s.b0.init(e,t),w.init(e,t)});function Ne(e,t){return l.FO(Re,e??(()=>!0),t)}function ze(e,t){return je($e(e),t)}},5954:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>r.str`must be multiple of ${e}`,params:({schemaCode:e})=>r._`{multipleOf: ${e}}`},code(e){const{gen:t,data:n,schemaCode:s,it:o}=e,a=o.opts.multipleOfPrecision,i=t.let("res"),c=a?r._`Math.abs(Math.round(${i}) - ${i}) > 1e-${a}`:r._`${i} !== parseInt(${i})`;e.fail$data(r._`(${s} === 0 || (${i} = ${n}/${s}, ${c}))`)}};t.default=s},5963:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(1798).A)("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]])},6191:(e,t,n)=>{"use strict";n.d(t,{kB:()=>h,p0:()=>f,p6:()=>u,w$:()=>c});var r=n(5514),s=n(9774),o=n(2709),a=n(5636);const i=r.xI("ZodISODateTime",(e,t)=>{s.Ko.init(e,t),a.EB.init(e,t)});function c(e){return o.G1(i,e)}const l=r.xI("ZodISODate",(e,t)=>{s.v1.init(e,t),a.EB.init(e,t)});function u(e){return o.db(l,e)}const d=r.xI("ZodISOTime",(e,t)=>{s.Ax.init(e,t),a.EB.init(e,t)});function h(e){return o.Kn(d,e)}const p=r.xI("ZodISODuration",(e,t)=>{s.$N.init(e,t),a.EB.init(e,t)});function f(e){return o.f2(p,e)}},6849:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(1798).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},6853:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const r=n(1910),s=n(4678);function o(e,t,n){const{gen:o,compositeRule:a,data:i,opts:c}=e;if(void 0===n)return;const l=r._`${i}${(0,r.getProperty)(t)}`;if(a)return void(0,s.checkStrictMode)(e,`default is ignored for: ${l}`);let u=r._`${l} === undefined`;"empty"===c.useDefaults&&(u=r._`${u} || ${l} === null || ${l} === ""`),o.if(u,r._`${l} = ${(0,r.stringify)(n)}`)}t.assignDefaults=function(e,t){const{properties:n,items:r}=e.schema;if("object"===t&&n)for(const t in n)o(e,t,n[t].default);else"array"===t&&Array.isArray(r)&&r.forEach((t,n)=>o(e,n,t.default))}},6856:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4678),s={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:s}=e;if((0,r.alwaysValidSchema)(s,n))return void e.fail();const o=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),e.failResult(o,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};t.default=s},6896:(e,t)=>{"use strict";function n(e){const t=e.length;let n,r=0,s=0;for(;s<t;)r++,n=e.charCodeAt(s++),n>=55296&&n<=56319&&s<t&&(n=e.charCodeAt(s),56320==(64512&n)&&s++);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,n.code='require("ajv/dist/runtime/ucs2length").default'},7129:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3758),s=n(1910),o={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>s.str`must match pattern "${e}"`,params:({schemaCode:e})=>s._`{pattern: ${e}}`},code(e){const{data:t,$data:n,schema:o,schemaCode:a,it:i}=e,c=i.opts.unicodeRegExp?"u":"",l=n?s._`(new RegExp(${a}, ${c}))`:(0,r.usePattern)(e,o);e.fail$data(s._`!${l}.test(${t})`)}};t.default=o},7319:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o=n(353),a={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>r._`{allowedValue: ${e}}`},code(e){const{gen:t,data:n,$data:a,schemaCode:i,schema:c}=e;a||c&&"object"==typeof c?e.fail$data(r._`!${(0,s.useFunc)(t,o.default)}(${n}, ${i})`):e.fail(r._`${c} !== ${n}`)}};t.default=a},7619:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const n=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&n.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},7640:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(1798).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7750:(e,t,n)=>{"use strict";const{normalizeIPv6:r,removeDotSegments:s,recomposeAuthority:o,normalizeComponentEncoding:a,isIPv4:i,nonSimpleDomain:c}=n(3403),{SCHEMES:l,getSchemeHandler:u}=n(8114);function d(e,t,n,r){const o={};return r||(e=f(h(e,n),n),t=f(h(t,n),n)),!(n=n||{}).tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=s(t.path||""),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=s(t.path||""),o.query=t.query):(t.path?("/"===t.path[0]?o.path=s(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path:o.path="/"+t.path,o.path=s(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function h(e,t){const n={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},r=Object.assign({},t),a=[],i=u(r.scheme||n.scheme);i&&i.serialize&&i.serialize(n,r),void 0!==n.path&&(r.skipEscape?n.path=unescape(n.path):(n.path=escape(n.path),void 0!==n.scheme&&(n.path=n.path.split("%3A").join(":")))),"suffix"!==r.reference&&n.scheme&&a.push(n.scheme,":");const c=o(n);if(void 0!==c&&("suffix"!==r.reference&&a.push("//"),a.push(c),n.path&&"/"!==n.path[0]&&a.push("/")),void 0!==n.path){let e=n.path;r.absolutePath||i&&i.absolutePath||(e=s(e)),void 0===c&&"/"===e[0]&&"/"===e[1]&&(e="/%2F"+e.slice(2)),a.push(e)}return void 0!==n.query&&a.push("?",n.query),void 0!==n.fragment&&a.push("#",n.fragment),a.join("")}const p=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function f(e,t){const n=Object.assign({},t),s={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let o=!1;"suffix"===n.reference&&(e=n.scheme?n.scheme+":"+e:"//"+e);const a=e.match(p);if(a){if(s.scheme=a[1],s.userinfo=a[3],s.host=a[4],s.port=parseInt(a[5],10),s.path=a[6]||"",s.query=a[7],s.fragment=a[8],isNaN(s.port)&&(s.port=a[5]),s.host)if(!1===i(s.host)){const e=r(s.host);s.host=e.host.toLowerCase(),o=e.isIPV6}else o=!0;void 0!==s.scheme||void 0!==s.userinfo||void 0!==s.host||void 0!==s.port||void 0!==s.query||s.path?void 0===s.scheme?s.reference="relative":void 0===s.fragment?s.reference="absolute":s.reference="uri":s.reference="same-document",n.reference&&"suffix"!==n.reference&&n.reference!==s.reference&&(s.error=s.error||"URI is not a "+n.reference+" reference.");const t=u(n.scheme||s.scheme);if(!(n.unicodeSupport||t&&t.unicodeSupport)&&s.host&&(n.domainHost||t&&t.domainHost)&&!1===o&&c(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(e){s.error=s.error||"Host's domain name can not be converted to ASCII: "+e}(!t||t&&!t.skipNormalize)&&(-1!==e.indexOf("%")&&(void 0!==s.scheme&&(s.scheme=unescape(s.scheme)),void 0!==s.host&&(s.host=unescape(s.host))),s.path&&(s.path=escape(unescape(s.path))),s.fragment&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),t&&t.parse&&t.parse(s,n)}else s.error=s.error||"URI can not be parsed.";return s}const m={SCHEMES:l,normalize:function(e,t){return"string"==typeof e?e=h(f(e,t),t):"object"==typeof e&&(e=f(h(e,t),t)),e},resolve:function(e,t,n){const r=n?Object.assign({scheme:"null"},n):{scheme:"null"},s=d(f(e,r),f(t,r),r,!0);return r.skipEscape=!0,h(s,r)},resolveComponent:d,equal:function(e,t,n){return"string"==typeof e?(e=unescape(e),e=h(a(f(e,n),!0),{...n,skipEscape:!0})):"object"==typeof e&&(e=h(a(e,!0),{...n,skipEscape:!0})),"string"==typeof t?(t=unescape(t),t=h(a(f(t,n),!0),{...n,skipEscape:!0})):"object"==typeof t&&(t=h(a(t,!0),{...n,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:h,parse:f};e.exports=m,e.exports.default=m,e.exports.fastUri=m},7999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=[n(308).default];t.default=r},8008:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?r.str`must contain at least ${e} valid item(s)`:r.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?r._`{minContains: ${e}}`:r._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:n,parentSchema:o,data:a,it:i}=e;let c,l;const{minContains:u,maxContains:d}=o;i.opts.next?(c=void 0===u?1:u,l=d):c=1;const h=t.const("len",r._`${a}.length`);if(e.setParams({min:c,max:l}),void 0===l&&0===c)return void(0,s.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==l&&c>l)return(0,s.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,s.alwaysValidSchema)(i,n)){let t=r._`${h} >= ${c}`;return void 0!==l&&(t=r._`${t} && ${h} <= ${l}`),void e.pass(t)}i.items=!0;const p=t.name("valid");function f(){const e=t.name("_valid"),n=t.let("count",0);m(e,()=>t.if(e,()=>function(e){t.code(r._`${e}++`),void 0===l?t.if(r._`${e} >= ${c}`,()=>t.assign(p,!0).break()):(t.if(r._`${e} > ${l}`,()=>t.assign(p,!1).break()),1===c?t.assign(p,!0):t.if(r._`${e} >= ${c}`,()=>t.assign(p,!0)))}(n)))}function m(n,r){t.forRange("i",0,h,t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:s.Type.Num,compositeRule:!0},n),r()})}void 0===l&&1===c?m(p,()=>t.if(p,()=>t.break())):0===c?(t.let(p,!0),void 0!==l&&t.if(r._`${a}.length > 0`,f)):(t.let(p,!1),f()),e.result(p,()=>e.reset())}};t.default=o},8074:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3758),s=n(1910),o=n(4678),a=n(4678),i={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:i,parentSchema:c,it:l}=e,{opts:u}=l,d=(0,r.allSchemaProperties)(n),h=d.filter(e=>(0,o.alwaysValidSchema)(l,n[e]));if(0===d.length||h.length===d.length&&(!l.opts.unevaluated||!0===l.props))return;const p=u.strictSchema&&!u.allowMatchingProperties&&c.properties,f=t.name("valid");!0===l.props||l.props instanceof s.Name||(l.props=(0,a.evaluatedPropsToName)(t,l.props));const{props:m}=l;function g(e){for(const t in p)new RegExp(e).test(t)&&(0,o.checkStrictMode)(l,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function y(n){t.forIn("key",i,o=>{t.if(s._`${(0,r.usePattern)(e,n)}.test(${o})`,()=>{const r=h.includes(n);r||e.subschema({keyword:"patternProperties",schemaProp:n,dataProp:o,dataPropType:a.Type.Str},f),l.opts.unevaluated&&!0!==m?t.assign(s._`${m}[${o}]`,!0):r||l.allErrors||t.if((0,s.not)(f),()=>t.break())})})}!function(){for(const e of d)p&&g(e),l.allErrors?y(e):(t.var(f,!0),y(e),t.if(f))}()}};t.default=i},8114:(e,t,n)=>{"use strict";const{isUUID:r}=n(3403),s=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,o=["http","https","ws","wss","urn","urn:uuid"];function a(e){return!0===e.secure||!1!==e.secure&&!!e.scheme&&!(3!==e.scheme.length||"w"!==e.scheme[0]&&"W"!==e.scheme[0]||"s"!==e.scheme[1]&&"S"!==e.scheme[1]||"s"!==e.scheme[2]&&"S"!==e.scheme[2])}function i(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function c(e){const t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}const l={scheme:"http",domainHost:!0,parse:i,serialize:c},u={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=a(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if(e.port!==(a(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,n]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=n,e.resourceName=void 0}return e.fragment=void 0,e}},d={http:l,https:{scheme:"https",domainHost:l.domainHost,parse:i,serialize:c},ws:u,wss:{scheme:"wss",domainHost:u.domainHost,parse:u.parse,serialize:u.serialize},urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;const n=e.path.match(s);if(n){const r=t.scheme||e.scheme||"urn";e.nid=n[1].toLowerCase(),e.nss=n[2];const s=h(`${r}:${t.nid||e.nid}`);e.path=void 0,s&&(e=s.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){if(void 0===e.nid)throw new Error("URN without nid cannot be serialized");const n=t.scheme||e.scheme||"urn",r=e.nid.toLowerCase(),s=h(`${n}:${t.nid||r}`);s&&(e=s.serialize(e,t));const o=e,a=e.nss;return o.path=`${r||t.nid}:${a}`,t.skipEscape=!0,o},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,t){const n=e;return n.uuid=n.nss,n.nss=void 0,t.tolerant||n.uuid&&r(n.uuid)||(n.error=n.error||"UUID is not valid."),n},serialize:function(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0}};function h(e){return e&&(d[e]||d[e.toLowerCase()])||void 0}Object.setPrototypeOf(d,null),e.exports={wsIsSecure:a,SCHEMES:d,isValidSchemeName:function(e){return-1!==o.indexOf(e)},getSchemeHandler:h}},8394:(e,t,n)=>{"use strict";n.d(t,{K:()=>_});var r=n(1658);function s(e){return!!e._zod}function o(e,t){return s(e)?r.xL(e,t):e.safeParse(t)}function a(e){if(!e)return;let t;if(s(e)){const n=e;t=n._zod?.def?.shape}else t=e.shape;if(t){if("function"==typeof t)try{return t()}catch{return}return t}}var i=n(220);function c(e){return"completed"===e||"failed"===e||"cancelled"===e}function l(e){const t=a(e),n=t?.method;if(!n)throw new Error("Schema is missing a method literal");const r=function(e){if(s(e)){const t=e,n=t._zod?.def;if(n){if(void 0!==n.value)return n.value;if(Array.isArray(n.values)&&n.values.length>0)return n.values[0]}}const t=e._def;if(t){if(void 0!==t.value)return t.value;if(Array.isArray(t.values)&&t.values.length>0)return t.values[0]}const n=e.value;if(void 0!==n)return n}(n);if("string"!=typeof r)throw new Error("Schema method literal must be a string");return r}function u(e,t){const n=o(e,t);if(!n.success)throw n.error;return n.data}Symbol("Let zodToJsonSchema decide on which parser to use"),new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");class d{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(i.Sq,e=>{this._oncancel(e)}),this.setNotificationHandler(i._r,e=>{this._onprogress(e)}),this.setRequestHandler(i.tC,e=>({})),this._taskStore=e?.taskStore,this._taskMessageQueue=e?.taskMessageQueue,this._taskStore&&(this.setRequestHandler(i.Ql,async(e,t)=>{const n=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!n)throw new i.Nh(i.O4.InvalidParams,"Failed to retrieve task: Task not found");return{...n}}),this.setRequestHandler(i.oQ,async(e,t)=>{const n=async()=>{const r=e.params.taskId;if(this._taskMessageQueue){let e;for(;e=await this._taskMessageQueue.dequeue(r,t.sessionId);){if("response"===e.type||"error"===e.type){const t=e.message,n=t.id,r=this._requestResolvers.get(n);if(r)if(this._requestResolvers.delete(n),"response"===e.type)r(t);else{const e=t;r(new i.Nh(e.error.code,e.error.message,e.error.data))}else{const t="response"===e.type?"Response":"Error";this._onerror(new Error(`${t} handler missing for request ${n}`))}continue}await(this._transport?.send(e.message,{relatedRequestId:t.requestId}))}}const s=await this._taskStore.getTask(r,t.sessionId);if(!s)throw new i.Nh(i.O4.InvalidParams,`Task not found: ${r}`);if(!c(s.status))return await this._waitForTaskUpdate(r,t.signal),await n();if(c(s.status)){const e=await this._taskStore.getTaskResult(r,t.sessionId);return this._clearTaskQueue(r),{...e,_meta:{...e._meta,[i.EV]:{taskId:r}}}}return await n()};return await n()}),this.setRequestHandler(i.zR,async(e,t)=>{try{const{tasks:n,nextCursor:r}=await this._taskStore.listTasks(e.params?.cursor,t.sessionId);return{tasks:n,nextCursor:r,_meta:{}}}catch(e){throw new i.Nh(i.O4.InvalidParams,`Failed to list tasks: ${e instanceof Error?e.message:String(e)}`)}}),this.setRequestHandler(i.gd,async(e,t)=>{try{const n=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!n)throw new i.Nh(i.O4.InvalidParams,`Task not found: ${e.params.taskId}`);if(c(n.status))throw new i.Nh(i.O4.InvalidParams,`Cannot cancel task in terminal status: ${n.status}`);await this._taskStore.updateTaskStatus(e.params.taskId,"cancelled","Client cancelled task execution.",t.sessionId),this._clearTaskQueue(e.params.taskId);const r=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!r)throw new i.Nh(i.O4.InvalidParams,`Task not found after cancellation: ${e.params.taskId}`);return{_meta:{},...r}}catch(e){if(e instanceof i.Nh)throw e;throw new i.Nh(i.O4.InvalidRequest,`Failed to cancel task: ${e instanceof Error?e.message:String(e)}`)}}))}async _oncancel(e){if(!e.params.requestId)return;const t=this._requestHandlerAbortControllers.get(e.params.requestId);t?.abort(e.params.reason)}_setupTimeout(e,t,n,r,s=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(r,t),startTime:Date.now(),timeout:t,maxTotalTimeout:n,resetTimeoutOnProgress:s,onTimeout:r})}_resetTimeout(e){const t=this._timeoutInfo.get(e);if(!t)return!1;const n=Date.now()-t.startTime;if(t.maxTotalTimeout&&n>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),i.Nh.fromError(i.O4.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:n});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){const t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e;const t=this.transport?.onclose;this._transport.onclose=()=>{t?.(),this._onclose()};const n=this.transport?.onerror;this._transport.onerror=e=>{n?.(e),this._onerror(e)};const r=this._transport?.onmessage;this._transport.onmessage=(e,t)=>{r?.(e,t),(0,i.ig)(e)||(0,i.LW)(e)?this._onresponse(e):(0,i.vo)(e)?this._onrequest(e,t):(0,i.lg)(e)?this._onnotification(e):this._onerror(new Error(`Unknown message type: ${JSON.stringify(e)}`))},await this._transport.start()}_onclose(){const e=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear();const t=i.Nh.fromError(i.O4.ConnectionClosed,"Connection closed");this._transport=void 0,this.onclose?.();for(const n of e.values())n(t)}_onerror(e){this.onerror?.(e)}_onnotification(e){const t=this._notificationHandlers.get(e.method)??this.fallbackNotificationHandler;void 0!==t&&Promise.resolve().then(()=>t(e)).catch(e=>this._onerror(new Error(`Uncaught error in notification handler: ${e}`)))}_onrequest(e,t){const n=this._requestHandlers.get(e.method)??this.fallbackRequestHandler,r=this._transport,s=e.params?._meta?.[i.EV]?.taskId;if(void 0===n){const t={jsonrpc:"2.0",id:e.id,error:{code:i.O4.MethodNotFound,message:"Method not found"}};return void(s&&this._taskMessageQueue?this._enqueueTaskMessage(s,{type:"error",message:t,timestamp:Date.now()},r?.sessionId).catch(e=>this._onerror(new Error(`Failed to enqueue error response: ${e}`))):r?.send(t).catch(e=>this._onerror(new Error(`Failed to send an error response: ${e}`))))}const o=new AbortController;this._requestHandlerAbortControllers.set(e.id,o);const a=(0,i.bZ)(e.params)?e.params.task:void 0,c=this._taskStore?this.requestTaskStore(e,r?.sessionId):void 0,l={signal:o.signal,sessionId:r?.sessionId,_meta:e.params?._meta,sendNotification:async t=>{const n={relatedRequestId:e.id};s&&(n.relatedTask={taskId:s}),await this.notification(t,n)},sendRequest:async(t,n,r)=>{const o={...r,relatedRequestId:e.id};s&&!o.relatedTask&&(o.relatedTask={taskId:s});const a=o.relatedTask?.taskId??s;return a&&c&&await c.updateTaskStatus(a,"input_required"),await this.request(t,n,o)},authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo,taskId:s,taskStore:c,taskRequestedTtl:a?.ttl,closeSSEStream:t?.closeSSEStream,closeStandaloneSSEStream:t?.closeStandaloneSSEStream};Promise.resolve().then(()=>{a&&this.assertTaskHandlerCapability(e.method)}).then(()=>n(e,l)).then(async t=>{if(o.signal.aborted)return;const n={result:t,jsonrpc:"2.0",id:e.id};s&&this._taskMessageQueue?await this._enqueueTaskMessage(s,{type:"response",message:n,timestamp:Date.now()},r?.sessionId):await(r?.send(n))},async t=>{if(o.signal.aborted)return;const n={jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(t.code)?t.code:i.O4.InternalError,message:t.message??"Internal error",...void 0!==t.data&&{data:t.data}}};s&&this._taskMessageQueue?await this._enqueueTaskMessage(s,{type:"error",message:n,timestamp:Date.now()},r?.sessionId):await(r?.send(n))}).catch(e=>this._onerror(new Error(`Failed to send response: ${e}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){const{progressToken:t,...n}=e.params,r=Number(t),s=this._progressHandlers.get(r);if(!s)return void this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));const o=this._responseHandlers.get(r),a=this._timeoutInfo.get(r);if(a&&o&&a.resetTimeoutOnProgress)try{this._resetTimeout(r)}catch(e){return this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),void o(e)}s(n)}_onresponse(e){const t=Number(e.id),n=this._requestResolvers.get(t);if(n)return this._requestResolvers.delete(t),void((0,i.ig)(e)?n(e):n(new i.Nh(e.error.code,e.error.message,e.error.data)));const r=this._responseHandlers.get(t);if(void 0===r)return void this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));this._responseHandlers.delete(t),this._cleanupTimeout(t);let s=!1;if((0,i.ig)(e)&&e.result&&"object"==typeof e.result){const n=e.result;if(n.task&&"object"==typeof n.task){const e=n.task;"string"==typeof e.taskId&&(s=!0,this._taskProgressTokens.set(e.taskId,t))}}s||this._progressHandlers.delete(t),(0,i.ig)(e)?r(e):r(i.Nh.fromError(e.error.code,e.error.message,e.error.data))}get transport(){return this._transport}async close(){await(this._transport?.close())}async*requestStream(e,t,n){const{task:r}=n??{};if(!r){try{const r=await this.request(e,t,n);yield{type:"result",result:r}}catch(e){yield{type:"error",error:e instanceof i.Nh?e:new i.Nh(i.O4.InternalError,String(e))}}return}let s;try{const r=await this.request(e,i.Mg,n);if(!r.task)throw new i.Nh(i.O4.InternalError,"Task creation did not return a task");for(s=r.task.taskId,yield{type:"taskCreated",task:r.task};;){const e=await this.getTask({taskId:s},n);if(yield{type:"taskStatus",task:e},c(e.status)){if("completed"===e.status){const e=await this.getTaskResult({taskId:s},t,n);yield{type:"result",result:e}}else"failed"===e.status?yield{type:"error",error:new i.Nh(i.O4.InternalError,`Task ${s} failed`)}:"cancelled"===e.status&&(yield{type:"error",error:new i.Nh(i.O4.InternalError,`Task ${s} was cancelled`)});return}if("input_required"===e.status){const e=await this.getTaskResult({taskId:s},t,n);return void(yield{type:"result",result:e})}const r=e.pollInterval??this._options?.defaultTaskPollInterval??1e3;await new Promise(e=>setTimeout(e,r)),n?.signal?.throwIfAborted()}}catch(e){yield{type:"error",error:e instanceof i.Nh?e:new i.Nh(i.O4.InternalError,String(e))}}}request(e,t,n){const{relatedRequestId:r,resumptionToken:s,onresumptiontoken:a,task:c,relatedTask:l}=n??{};return new Promise((u,d)=>{const h=e=>{d(e)};if(!this._transport)return void h(new Error("Not connected"));if(!0===this._options?.enforceStrictCapabilities)try{this.assertCapabilityForMethod(e.method),c&&this.assertTaskCapability(e.method)}catch(e){return void h(e)}n?.signal?.throwIfAborted();const p=this._requestMessageId++,f={...e,jsonrpc:"2.0",id:p};n?.onprogress&&(this._progressHandlers.set(p,n.onprogress),f.params={...e.params,_meta:{...e.params?._meta||{},progressToken:p}}),c&&(f.params={...f.params,task:c}),l&&(f.params={...f.params,_meta:{...f.params?._meta||{},[i.EV]:l}});const m=e=>{this._responseHandlers.delete(p),this._progressHandlers.delete(p),this._cleanupTimeout(p),this._transport?.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:p,reason:String(e)}},{relatedRequestId:r,resumptionToken:s,onresumptiontoken:a}).catch(e=>this._onerror(new Error(`Failed to send cancellation: ${e}`)));const t=e instanceof i.Nh?e:new i.Nh(i.O4.RequestTimeout,String(e));d(t)};this._responseHandlers.set(p,e=>{if(!n?.signal?.aborted){if(e instanceof Error)return d(e);try{const n=o(t,e.result);n.success?u(n.data):d(n.error)}catch(e){d(e)}}}),n?.signal?.addEventListener("abort",()=>{m(n?.signal?.reason)});const g=n?.timeout??6e4;this._setupTimeout(p,g,n?.maxTotalTimeout,()=>m(i.Nh.fromError(i.O4.RequestTimeout,"Request timed out",{timeout:g})),n?.resetTimeoutOnProgress??!1);const y=l?.taskId;if(y){const e=e=>{const t=this._responseHandlers.get(p);t?t(e):this._onerror(new Error(`Response handler missing for side-channeled request ${p}`))};this._requestResolvers.set(p,e),this._enqueueTaskMessage(y,{type:"request",message:f,timestamp:Date.now()}).catch(e=>{this._cleanupTimeout(p),d(e)})}else this._transport.send(f,{relatedRequestId:r,resumptionToken:s,onresumptiontoken:a}).catch(e=>{this._cleanupTimeout(p),d(e)})})}async getTask(e,t){return this.request({method:"tasks/get",params:e},i.Sc,t)}async getTaskResult(e,t,n){return this.request({method:"tasks/result",params:e},t,n)}async listTasks(e,t){return this.request({method:"tasks/list",params:e},i.a5,t)}async cancelTask(e,t){return this.request({method:"tasks/cancel",params:e},i.gH,t)}async notification(e,t){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);const n=t?.relatedTask?.taskId;if(n){const r={...e,jsonrpc:"2.0",params:{...e.params,_meta:{...e.params?._meta||{},[i.EV]:t.relatedTask}}};return void await this._enqueueTaskMessage(n,{type:"notification",message:r,timestamp:Date.now()})}if((this._options?.debouncedNotificationMethods??[]).includes(e.method)&&!e.params&&!t?.relatedRequestId&&!t?.relatedTask){if(this._pendingDebouncedNotifications.has(e.method))return;return this._pendingDebouncedNotifications.add(e.method),void Promise.resolve().then(()=>{if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let n={...e,jsonrpc:"2.0"};t?.relatedTask&&(n={...n,params:{...n.params,_meta:{...n.params?._meta||{},[i.EV]:t.relatedTask}}}),this._transport?.send(n,t).catch(e=>this._onerror(e))})}let r={...e,jsonrpc:"2.0"};t?.relatedTask&&(r={...r,params:{...r.params,_meta:{...r.params?._meta||{},[i.EV]:t.relatedTask}}}),await this._transport.send(r,t)}setRequestHandler(e,t){const n=l(e);this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(n,r)=>{const s=u(e,n);return Promise.resolve(t(s,r))})}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){const n=l(e);this._notificationHandlers.set(n,n=>{const r=u(e,n);return Promise.resolve(t(r))})}removeNotificationHandler(e){this._notificationHandlers.delete(e)}_cleanupTaskProgressHandler(e){const t=this._taskProgressTokens.get(e);void 0!==t&&(this._progressHandlers.delete(t),this._taskProgressTokens.delete(e))}async _enqueueTaskMessage(e,t,n){if(!this._taskStore||!this._taskMessageQueue)throw new Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");const r=this._options?.maxTaskQueueSize;await this._taskMessageQueue.enqueue(e,t,n,r)}async _clearTaskQueue(e,t){if(this._taskMessageQueue){const n=await this._taskMessageQueue.dequeueAll(e,t);for(const t of n)if("request"===t.type&&(0,i.vo)(t.message)){const n=t.message.id,r=this._requestResolvers.get(n);r?(r(new i.Nh(i.O4.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(n)):this._onerror(new Error(`Resolver missing for request ${n} during task ${e} cleanup`))}}}async _waitForTaskUpdate(e,t){let n=this._options?.defaultTaskPollInterval??1e3;try{const t=await(this._taskStore?.getTask(e));t?.pollInterval&&(n=t.pollInterval)}catch{}return new Promise((e,r)=>{if(t.aborted)return void r(new i.Nh(i.O4.InvalidRequest,"Request cancelled"));const s=setTimeout(e,n);t.addEventListener("abort",()=>{clearTimeout(s),r(new i.Nh(i.O4.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(e,t){const n=this._taskStore;if(!n)throw new Error("No task store configured");return{createTask:async r=>{if(!e)throw new Error("No request provided");return await n.createTask(r,e.id,{method:e.method,params:e.params},t)},getTask:async e=>{const r=await n.getTask(e,t);if(!r)throw new i.Nh(i.O4.InvalidParams,"Failed to retrieve task: Task not found");return r},storeTaskResult:async(e,r,s)=>{await n.storeTaskResult(e,r,s,t);const o=await n.getTask(e,t);if(o){const t=i.ki.parse({method:"notifications/tasks/status",params:o});await this.notification(t),c(o.status)&&this._cleanupTaskProgressHandler(e)}},getTaskResult:e=>n.getTaskResult(e,t),updateTaskStatus:async(e,r,s)=>{const o=await n.getTask(e,t);if(!o)throw new i.Nh(i.O4.InvalidParams,`Task "${e}" not found - it may have been cleaned up`);if(c(o.status))throw new i.Nh(i.O4.InvalidParams,`Cannot update task "${e}" from terminal status "${o.status}" to "${r}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await n.updateTaskStatus(e,r,s,t);const a=await n.getTask(e,t);if(a){const t=i.ki.parse({method:"notifications/tasks/status",params:a});await this.notification(t),c(a.status)&&this._cleanupTaskProgressHandler(e)}},listTasks:e=>n.listTasks(e,t)}}}function h(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}var p=n(5133),f=n(9625);class m{constructor(e){this._ajv=e??function(){const e=new p({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return f(e),e}()}getValidator(e){const t="$id"in e&&"string"==typeof e.$id?this._ajv.getSchema(e.$id)??this._ajv.compile(e):this._ajv.compile(e);return e=>t(e)?{valid:!0,data:e,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(t.errors)}}}class g{constructor(e){this._client=e}async*callToolStream(e,t=i.TF,n){const r=this._client,s={...n,task:n?.task??(r.isToolTask(e.name)?{}:void 0)},o=r.requestStream({method:"tools/call",params:e},t,s),a=r.getToolOutputValidator(e.name);for await(const t of o){if("result"===t.type&&a){const n=t.result;if(!n.structuredContent&&!n.isError)return void(yield{type:"error",error:new i.Nh(i.O4.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`)});if(n.structuredContent)try{const e=a(n.structuredContent);if(!e.valid)return void(yield{type:"error",error:new i.Nh(i.O4.InvalidParams,`Structured content does not match the tool's output schema: ${e.errorMessage}`)})}catch(e){return e instanceof i.Nh?void(yield{type:"error",error:e}):void(yield{type:"error",error:new i.Nh(i.O4.InvalidParams,`Failed to validate structured content: ${e instanceof Error?e.message:String(e)}`)})}}yield t}}async getTask(e,t){return this._client.getTask({taskId:e},t)}async getTaskResult(e,t,n){return this._client.getTaskResult({taskId:e},t,n)}async listTasks(e,t){return this._client.listTasks(e?{cursor:e}:void 0,t)}async cancelTask(e,t){return this._client.cancelTask({taskId:e},t)}requestStream(e,t,n){return this._client.requestStream(e,t,n)}}function y(e,t){if(e&&null!==t&&"object"==typeof t){if("object"===e.type&&e.properties&&"object"==typeof e.properties){const n=t,r=e.properties;for(const e of Object.keys(r)){const t=r[e];void 0===n[e]&&Object.prototype.hasOwnProperty.call(t,"default")&&(n[e]=t.default),void 0!==n[e]&&y(t,n[e])}}if(Array.isArray(e.anyOf))for(const n of e.anyOf)"boolean"!=typeof n&&y(n,t);if(Array.isArray(e.oneOf))for(const n of e.oneOf)"boolean"!=typeof n&&y(n,t)}}class _ extends d{constructor(e,t){super(t),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._cachedKnownTaskTools=new Set,this._cachedRequiredTaskTools=new Set,this._listChangedDebounceTimers=new Map,this._capabilities=t?.capabilities??{},this._jsonSchemaValidator=t?.jsonSchemaValidator??new m,t?.listChanged&&(this._pendingListChangedConfig=t.listChanged)}_setupListChangedHandlers(e){e.tools&&this._serverCapabilities?.tools?.listChanged&&this._setupListChangedHandler("tools",i.fH,e.tools,async()=>(await this.listTools()).tools),e.prompts&&this._serverCapabilities?.prompts?.listChanged&&this._setupListChangedHandler("prompts",i.br,e.prompts,async()=>(await this.listPrompts()).prompts),e.resources&&this._serverCapabilities?.resources?.listChanged&&this._setupListChangedHandler("resources",i.hh,e.resources,async()=>(await this.listResources()).resources)}get experimental(){return this._experimental||(this._experimental={tasks:new g(this)}),this._experimental}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=function(e,t){const n={...e};for(const e in t){const r=e,s=t[r];if(void 0===s)continue;const o=n[r];h(o)&&h(s)?n[r]={...o,...s}:n[r]=s}return n}(this._capabilities,e)}setRequestHandler(e,t){const n=a(e),r=n?.method;if(!r)throw new Error("Schema is missing a method literal");let c;if(s(r)){const e=r,t=e._zod?.def;c=t?.value??e.value}else{const e=r,t=e._def;c=t?.value??e.value}if("string"!=typeof c)throw new Error("Schema method literal must be a string");const l=c;if("elicitation/create"===l){const n=async(e,n)=>{const r=o(i.$9,e);if(!r.success){const e=r.error instanceof Error?r.error.message:String(r.error);throw new i.Nh(i.O4.InvalidParams,`Invalid elicitation request: ${e}`)}const{params:s}=r.data;s.mode=s.mode??"form";const{supportsFormMode:a,supportsUrlMode:c}=function(e){if(!e)return{supportsFormMode:!1,supportsUrlMode:!1};const t=void 0!==e.form,n=void 0!==e.url;return{supportsFormMode:t||!t&&!n,supportsUrlMode:n}}(this._capabilities.elicitation);if("form"===s.mode&&!a)throw new i.Nh(i.O4.InvalidParams,"Client does not support form-mode elicitation requests");if("url"===s.mode&&!c)throw new i.Nh(i.O4.InvalidParams,"Client does not support URL-mode elicitation requests");const l=await Promise.resolve(t(e,n));if(s.task){const e=o(i.Mg,l);if(!e.success){const t=e.error instanceof Error?e.error.message:String(e.error);throw new i.Nh(i.O4.InvalidParams,`Invalid task creation result: ${t}`)}return e.data}const u=o(i.n_,l);if(!u.success){const e=u.error instanceof Error?u.error.message:String(u.error);throw new i.Nh(i.O4.InvalidParams,`Invalid elicitation result: ${e}`)}const d=u.data,h="form"===s.mode?s.requestedSchema:void 0;if("form"===s.mode&&"accept"===d.action&&d.content&&h&&this._capabilities.elicitation?.form?.applyDefaults)try{y(h,d.content)}catch{}return d};return super.setRequestHandler(e,n)}if("sampling/createMessage"===l){const n=async(e,n)=>{const r=o(i.u9,e);if(!r.success){const e=r.error instanceof Error?r.error.message:String(r.error);throw new i.Nh(i.O4.InvalidParams,`Invalid sampling request: ${e}`)}const{params:s}=r.data,a=await Promise.resolve(t(e,n));if(s.task){const e=o(i.Mg,a);if(!e.success){const t=e.error instanceof Error?e.error.message:String(e.error);throw new i.Nh(i.O4.InvalidParams,`Invalid task creation result: ${t}`)}return e.data}const c=o(s.tools||s.toolChoice?i.TI:i.K1,a);if(!c.success){const e=c.error instanceof Error?c.error.message:String(c.error);throw new i.Nh(i.O4.InvalidParams,`Invalid sampling result: ${e}`)}return c.data};return super.setRequestHandler(e,n)}return super.setRequestHandler(e,t)}assertCapability(e,t){if(!this._serverCapabilities?.[e])throw new Error(`Server does not support ${e} (required for ${t})`)}async connect(e,t){if(await super.connect(e),void 0===e.sessionId)try{const n=await this.request({method:"initialize",params:{protocolVersion:i.aE,capabilities:this._capabilities,clientInfo:this._clientInfo}},i.Rk,t);if(void 0===n)throw new Error(`Server sent invalid initialize result: ${n}`);if(!i.Iu.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(n.protocolVersion),this._instructions=n.instructions,await this.notification({method:"notifications/initialized"}),this._pendingListChangedConfig&&(this._setupListChangedHandlers(this._pendingListChangedConfig),this._pendingListChangedConfig=void 0)}catch(e){throw this.close(),e}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){switch(e){case"logging/setLevel":if(!this._serverCapabilities?.logging)throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._serverCapabilities?.prompts)throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!this._serverCapabilities?.resources)throw new Error(`Server does not support resources (required for ${e})`);if("resources/subscribe"===e&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._serverCapabilities?.tools)throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!this._serverCapabilities?.completions)throw new Error(`Server does not support completions (required for ${e})`)}}assertNotificationCapability(e){if("notifications/roots/list_changed"===e&&!this._capabilities.roots?.listChanged)throw new Error(`Client does not support roots list changed notifications (required for ${e})`)}assertRequestHandlerCapability(e){if(this._capabilities)switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw new Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw new Error(`Client does not support tasks capability (required for ${e})`)}}assertTaskCapability(e){!function(e,t,n){if(!e)throw new Error(`${n} does not support task creation (required for ${t})`);if("tools/call"===t&&!e.tools?.call)throw new Error(`${n} does not support task creation for tools/call (required for ${t})`)}(this._serverCapabilities?.tasks?.requests,e,"Server")}assertTaskHandlerCapability(e){this._capabilities&&function(e,t,n){if(!e)throw new Error(`${n} does not support task creation (required for ${t})`);switch(t){case"sampling/createMessage":if(!e.sampling?.createMessage)throw new Error(`${n} does not support task creation for sampling/createMessage (required for ${t})`);break;case"elicitation/create":if(!e.elicitation?.create)throw new Error(`${n} does not support task creation for elicitation/create (required for ${t})`)}}(this._capabilities.tasks?.requests,e,"Client")}async ping(e){return this.request({method:"ping"},i.wR,e)}async complete(e,t){return this.request({method:"completion/complete",params:e},i.GU,t)}async setLoggingLevel(e,t){return this.request({method:"logging/setLevel",params:{level:e}},i.wR,t)}async getPrompt(e,t){return this.request({method:"prompts/get",params:e},i.HM,t)}async listPrompts(e,t){return this.request({method:"prompts/list",params:e},i.Yu,t)}async listResources(e,t){return this.request({method:"resources/list",params:e},i.cv,t)}async listResourceTemplates(e,t){return this.request({method:"resources/templates/list",params:e},i.O$,t)}async readResource(e,t){return this.request({method:"resources/read",params:e},i.ve,t)}async subscribeResource(e,t){return this.request({method:"resources/subscribe",params:e},i.wR,t)}async unsubscribeResource(e,t){return this.request({method:"resources/unsubscribe",params:e},i.wR,t)}async callTool(e,t=i.TF,n){if(this.isToolTaskRequired(e.name))throw new i.Nh(i.O4.InvalidRequest,`Tool "${e.name}" requires task-based execution. Use client.experimental.tasks.callToolStream() instead.`);const r=await this.request({method:"tools/call",params:e},t,n),s=this.getToolOutputValidator(e.name);if(s){if(!r.structuredContent&&!r.isError)throw new i.Nh(i.O4.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(r.structuredContent)try{const e=s(r.structuredContent);if(!e.valid)throw new i.Nh(i.O4.InvalidParams,`Structured content does not match the tool's output schema: ${e.errorMessage}`)}catch(e){if(e instanceof i.Nh)throw e;throw new i.Nh(i.O4.InvalidParams,`Failed to validate structured content: ${e instanceof Error?e.message:String(e)}`)}}return r}isToolTask(e){return!!this._serverCapabilities?.tasks?.requests?.tools?.call&&this._cachedKnownTaskTools.has(e)}isToolTaskRequired(e){return this._cachedRequiredTaskTools.has(e)}cacheToolMetadata(e){this._cachedToolOutputValidators.clear(),this._cachedKnownTaskTools.clear(),this._cachedRequiredTaskTools.clear();for(const t of e){if(t.outputSchema){const e=this._jsonSchemaValidator.getValidator(t.outputSchema);this._cachedToolOutputValidators.set(t.name,e)}const e=t.execution?.taskSupport;"required"!==e&&"optional"!==e||this._cachedKnownTaskTools.add(t.name),"required"===e&&this._cachedRequiredTaskTools.add(t.name)}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,t){const n=await this.request({method:"tools/list",params:e},i.WT,t);return this.cacheToolMetadata(n.tools),n}_setupListChangedHandler(e,t,n,r){const s=i.xI.safeParse(n);if(!s.success)throw new Error(`Invalid ${e} listChanged options: ${s.error.message}`);if("function"!=typeof n.onChanged)throw new Error(`Invalid ${e} listChanged options: onChanged must be a function`);const{autoRefresh:o,debounceMs:a}=s.data,{onChanged:c}=n,l=async()=>{if(o)try{const e=await r();c(null,e)}catch(e){const t=e instanceof Error?e:new Error(String(e));c(t,null)}else c(null,null)};this.setNotificationHandler(t,()=>{if(a){const t=this._listChangedDebounceTimers.get(e);t&&clearTimeout(t);const n=setTimeout(l,a);this._listChangedDebounceTimers.set(e,n)}else l()})}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}}},8398:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;const r=n(1910),s=n(4678),o={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>r.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>r._`{limit: ${e}}`},code(e){const{parentSchema:t,it:n}=e,{items:r}=t;Array.isArray(r)?a(e,r):(0,s.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas')}};function a(e,t){const{gen:n,schema:o,data:a,keyword:i,it:c}=e;c.items=!0;const l=n.const("len",r._`${a}.length`);if(!1===o)e.setParams({len:t.length}),e.pass(r._`${l} <= ${t.length}`);else if("object"==typeof o&&!(0,s.alwaysValidSchema)(c,o)){const o=n.var("valid",r._`${l} <= ${t.length}`);n.if((0,r.not)(o),()=>function(o){n.forRange("i",t.length,l,t=>{e.subschema({keyword:i,dataProp:t,dataPropType:s.Type.Num},o),c.allErrors||n.if((0,r.not)(o),()=>n.break())})}(o)),e.ok(o)}}t.validateAdditionalItems=a,t.default=o},8514:(e,t)=>{"use strict";function n(e,t){return t.rules.some(t=>r(e,t))}function r(e,t){var n;return void 0!==e[t.keyword]||(null===(n=t.definition.implements)||void 0===n?void 0:n.some(t=>void 0!==e[t]))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},r){const s=t.RULES.types[r];return s&&!0!==s&&n(e,s)},t.shouldUseGroup=n,t.shouldUseRule=r},8562:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const r=n(5133),s=n(1910),o=s.operators,a={formatMaximum:{okStr:"<=",ok:o.LTE,fail:o.GT},formatMinimum:{okStr:">=",ok:o.GTE,fail:o.LT},formatExclusiveMaximum:{okStr:"<",ok:o.LT,fail:o.GTE},formatExclusiveMinimum:{okStr:">",ok:o.GT,fail:o.LTE}},i={message:({keyword:e,schemaCode:t})=>s.str`should be ${a[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>s._`{comparison: ${a[e].okStr}, limit: ${t}}`};t.formatLimitDefinition={keyword:Object.keys(a),type:"string",schemaType:"string",$data:!0,error:i,code(e){const{gen:t,data:n,schemaCode:o,keyword:i,it:c}=e,{opts:l,self:u}=c;if(!l.validateFormats)return;const d=new r.KeywordCxt(c,u.RULES.all.format.definition,"format");function h(e){return s._`${e}.compare(${n}, ${o}) ${a[i].fail} 0`}d.$data?function(){const n=t.scopeValue("formats",{ref:u.formats,code:l.code.formats}),r=t.const("fmt",s._`${n}[${d.schemaCode}]`);e.fail$data((0,s.or)(s._`typeof ${r} != "object"`,s._`${r} instanceof RegExp`,s._`typeof ${r}.compare != "function"`,h(r)))}():function(){const n=d.schema,r=u.formats[n];if(!r||!0===r)return;if("object"!=typeof r||r instanceof RegExp||"function"!=typeof r.compare)throw new Error(`"${i}": format "${n}" does not define "compare" function`);const o=t.scopeValue("formats",{key:n,ref:r,code:l.code.formats?s._`${l.code.formats}${(0,s.getProperty)(n)}`:void 0});e.fail$data(h(o))}()},dependencies:["format"]},t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)},8635:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=n},8659:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2451),s=n(2447),o=n(2813),a=n(7999),i=n(5070),c=[r.default,s.default,(0,o.default)(),a.default,i.metadataVocabulary,i.contentVocabulary];t.default=c},8668:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const r=n(4678),s=n(92),o=n(8857),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!c(e):!!t&&l(e)<=t)};const i=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function c(e){for(const t in e){if(i.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(c))return!0;if("object"==typeof n&&c(n))return!0}return!1}function l(e){let t=0;for(const n in e){if("$ref"===n)return 1/0;if(t++,!a.has(n)&&("object"==typeof e[n]&&(0,r.eachItem)(e[n],e=>t+=l(e)),t===1/0))return 1/0}return t}function u(e,t="",n){!1!==n&&(t=p(t));const r=e.parse(t);return d(e,r)}function d(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=u,t._getFullPath=d;const h=/#\/?$/;function p(e){return e?e.replace(h,""):""}t.normalizeId=p,t.resolveUrl=function(e,t,n){return n=p(n),e.resolve(t,n)};const f=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:n,uriResolver:r}=this.opts,a=p(e[n]||t),i={"":a},c=u(r,a,!1),l={},d=new Set;return o(e,{allKeys:!0},(e,t,r,s)=>{if(void 0===s)return;const o=c+t;let a=i[s];function u(t){const n=this.opts.uriResolver.resolve;if(t=p(a?n(a,t):t),d.has(t))throw m(t);d.add(t);let r=this.refs[t];return"string"==typeof r&&(r=this.refs[r]),"object"==typeof r?h(e,r.schema,t):t!==p(o)&&("#"===t[0]?(h(e,l[t],t),l[t]=e):this.refs[t]=o),t}function g(e){if("string"==typeof e){if(!f.test(e))throw new Error(`invalid anchor "${e}"`);u.call(this,`#${e}`)}}"string"==typeof e[n]&&(a=u.call(this,e[n])),g.call(this,e.$anchor),g.call(this,e.$dynamicAnchor),i[t]=a}),l;function h(e,t,n){if(void 0!==t&&!s(e,t))throw m(n)}function m(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},8857:e=>{"use strict";var t=e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),n(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function n(e,s,o,a,i,c,l,u,d,h){if(a&&"object"==typeof a&&!Array.isArray(a)){for(var p in s(a,i,c,l,u,d,h),a){var f=a[p];if(Array.isArray(f)){if(p in t.arrayKeywords)for(var m=0;m<f.length;m++)n(e,s,o,f[m],i+"/"+p+"/"+m,c,i,p,a,m)}else if(p in t.propsKeywords){if(f&&"object"==typeof f)for(var g in f)n(e,s,o,f[g],i+"/"+p+"/"+r(g),c,i,p,a,g)}else(p in t.keywords||e.allKeys&&!(p in t.skipKeywords))&&n(e,s,o,f,i+"/"+p,c,i,p,a)}o(a,i,c,l,u,d,h)}}function r(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},8870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const r=n(3345);class s extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var o;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(o||(t.UsedValueState=o={})),t.varKinds={const:new r.Name("const"),let:new r.Name("let"),var:new r.Name("var")};class a{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof r.Name?e:this.name(e)}name(e){return new r.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,n;if((null===(n=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===n?void 0:n.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=a;class i extends r.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:n}){this.value=e,this.scopePath=r._`.${new r.Name(t)}[${n}]`}}t.ValueScopeName=i;const c=r._`\n`;t.ValueScope=class extends a{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?c:r.nil}}get(){return this._scope}name(e){return new i(e,this._newName(e))}value(e,t){var n;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const r=this.toName(e),{prefix:s}=r,o=null!==(n=t.key)&&void 0!==n?n:t.ref;let a=this._values[s];if(a){const e=a.get(o);if(e)return e}else a=this._values[s]=new Map;a.set(o,r);const i=this._scope[s]||(this._scope[s]=[]),c=i.length;return i[c]=t.ref,r.setValue(t,{property:s,itemIndex:c}),r}getValue(e,t){const n=this._values[e];if(n)return n.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return r._`${e}${t.scopePath}`})}scopeCode(e=this._values,t,n){return this._reduceValues(e,e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,n)}_reduceValues(e,n,a={},i){let c=r.nil;for(const l in e){const u=e[l];if(!u)continue;const d=a[l]=a[l]||new Map;u.forEach(e=>{if(d.has(e))return;d.set(e,o.Started);let a=n(e);if(a){const n=this.opts.es5?t.varKinds.var:t.varKinds.const;c=r._`${c}${n} ${e} = ${a};${this.opts._n}`}else{if(!(a=null==i?void 0:i(e)))throw new s(e);c=r._`${c}${a}${this.opts._n}`}d.set(e,o.Completed)})}return c}}},8873:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxProperties"===e?"more":"fewer";return r.str`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:s}=e,o="maxProperties"===t?r.operators.GT:r.operators.LT;e.fail$data(r._`Object.keys(${n}).length ${o} ${s}`)}};t.default=s},8963:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4678),s={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){void 0===t.if&&(0,r.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};t.default=s},9008:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const r=n(2693),s=n(1910),o=n(2304),a={message:"boolean schema is false"};function i(e,t){const{gen:n,data:s}=e,o={gen:n,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,r.reportError)(o,a,void 0,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:n,validateName:r}=e;!1===n?i(e,!1):"object"==typeof n&&!0===n.$async?t.return(o.default.data):(t.assign(s._`${r}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:n,schema:r}=e;!1===r?(n.var(t,!1),i(e)):n.var(t,!0)}},9125:(e,t,n)=>{"use strict";function r(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,n])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function s(e,t){return"bigint"==typeof t?t.toString():t}function o(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function a(e){return null==e}function i(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function c(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r;return Number.parseInt(e.toFixed(s).replace(".",""))%Number.parseInt(t.toFixed(s).replace(".",""))/10**s}function l(e,t,n){Object.defineProperty(e,t,{get(){{const r=n();return e[t]=r,r}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function u(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function d(e){return JSON.stringify(e)}n.d(t,{$f:()=>y,A2:()=>v,Gv:()=>p,LG:()=>c,NM:()=>w,OH:()=>I,PO:()=>o,QH:()=>T,Qd:()=>m,Rc:()=>j,UQ:()=>d,Up:()=>$,Vy:()=>u,X$:()=>x,cJ:()=>k,cl:()=>a,gJ:()=>l,gx:()=>h,h1:()=>E,hI:()=>f,iR:()=>O,k8:()=>s,lQ:()=>P,mw:()=>S,o8:()=>_,p6:()=>i,qQ:()=>g,sn:()=>C,w5:()=>r,zH:()=>b});const h=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function p(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const f=o(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}});function m(e){if(!1===p(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!1!==p(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}const g=new Set(["string","number","symbol"]);function y(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(e,t,n){const r=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(r._zod.parent=e),r}function v(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}function w(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}new Set(["string","number","bigint","boolean","symbol","undefined"]);const b={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function $(e,t){const n={},r=e._zod.def;for(const e in t){if(!(e in r.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&(n[e]=r.shape[e])}return _(e,{...e._zod.def,shape:n,checks:[]})}function k(e,t){const n={...e._zod.def.shape},r=e._zod.def;for(const e in t){if(!(e in r.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete n[e]}return _(e,{...e._zod.def,shape:n,checks:[]})}function x(e,t){if(!m(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return u(this,"shape",n),n},checks:[]};return _(e,n)}function E(e,t){return _(e,{...e._zod.def,get shape(){const n={...e._zod.def.shape,...t._zod.def.shape};return u(this,"shape",n),n},catchall:t._zod.def.catchall,checks:[]})}function I(e,t,n){const r=t._zod.def.shape,s={...r};if(n)for(const t in n){if(!(t in r))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(s[t]=e?new e({type:"optional",innerType:r[t]}):r[t])}else for(const t in r)s[t]=e?new e({type:"optional",innerType:r[t]}):r[t];return _(t,{...t._zod.def,shape:s,checks:[]})}function S(e,t,n){const r=t._zod.def.shape,s={...r};if(n)for(const t in n){if(!(t in s))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(s[t]=new e({type:"nonoptional",innerType:r[t]}))}else for(const t in r)s[t]=new e({type:"nonoptional",innerType:r[t]});return _(t,{...t._zod.def,shape:s,checks:[]})}function T(e,t=0){for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function P(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function A(e){return"string"==typeof e?e:e?.message}function O(e,t,n){const r={...e,path:e.path??[]};if(!e.message){const s=A(e.inst?._zod.def?.error?.(e))??A(t?.error?.(e))??A(n.customError?.(e))??A(n.localeError?.(e))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,t?.reportInput||delete r.input,r}function j(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function C(...e){const[t,n,r]=e;return"string"==typeof t?{message:t,code:"custom",input:n,inst:r}:{...t}}},9138:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s=n(4678),o={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>r.str`must match "${e.ifClause}" schema`,params:({params:e})=>r._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:n,it:o}=e;void 0===n.then&&void 0===n.else&&(0,s.checkStrictMode)(o,'"if" without "then" and "else" is ignored');const i=a(o,"then"),c=a(o,"else");if(!i&&!c)return;const l=t.let("valid",!0),u=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);e.mergeEvaluated(t)}(),e.reset(),i&&c){const n=t.let("ifClause");e.setParams({ifClause:n}),t.if(u,d("then",n),d("else",n))}else i?t.if(u,d("then")):t.if((0,r.not)(u),d("else"));function d(n,s){return()=>{const o=e.subschema({keyword:n},u);t.assign(l,u),e.mergeValidEvaluated(o,l),s?t.assign(s,r._`${n}`):e.setParams({ifClause:n})}}e.pass(l,()=>e.error(!0))}};function a(e,t){const n=e.schema[t];return void 0!==n&&!(0,s.alwaysValidSchema)(e,n)}t.default=o},9350:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const r=n(1688),s=n(3758),o=n(1910),a=n(2304),i=n(9700),c=n(4678),l={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:s}=e,{baseId:a,schemaEnv:c,validateName:l,opts:h,self:p}=s,{root:f}=c;if(("#"===n||"#/"===n)&&a===f.baseId)return function(){if(c===f)return d(e,l,c,c.$async);const n=t.scopeValue("root",{ref:f});return d(e,o._`${n}.validate`,f,f.$async)}();const m=i.resolveRef.call(p,f,a,n);if(void 0===m)throw new r.default(s.opts.uriResolver,a,n);return m instanceof i.SchemaEnv?function(t){const n=u(e,t);d(e,n,t,t.$async)}(m):function(r){const s=t.scopeValue("schema",!0===h.code.source?{ref:r,code:(0,o.stringify)(r)}:{ref:r}),a=t.name("valid"),i=e.subschema({schema:r,dataTypes:[],schemaPath:o.nil,topSchemaRef:s,errSchemaPath:n},a);e.mergeEvaluated(i),e.ok(a)}(m)}};function u(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):o._`${n.scopeValue("wrapper",{ref:t})}.validate`}function d(e,t,n,r){const{gen:i,it:l}=e,{allErrors:u,schemaEnv:d,opts:h}=l,p=h.passContext?a.default.this:o.nil;function f(e){const t=o._`${e}.errors`;i.assign(a.default.vErrors,o._`${a.default.vErrors} === null ? ${t} : ${a.default.vErrors}.concat(${t})`),i.assign(a.default.errors,o._`${a.default.vErrors}.length`)}function m(e){var t;if(!l.opts.unevaluated)return;const r=null===(t=null==n?void 0:n.validate)||void 0===t?void 0:t.evaluated;if(!0!==l.props)if(r&&!r.dynamicProps)void 0!==r.props&&(l.props=c.mergeEvaluated.props(i,r.props,l.props));else{const t=i.var("props",o._`${e}.evaluated.props`);l.props=c.mergeEvaluated.props(i,t,l.props,o.Name)}if(!0!==l.items)if(r&&!r.dynamicItems)void 0!==r.items&&(l.items=c.mergeEvaluated.items(i,r.items,l.items));else{const t=i.var("items",o._`${e}.evaluated.items`);l.items=c.mergeEvaluated.items(i,t,l.items,o.Name)}}r?function(){if(!d.$async)throw new Error("async schema referenced by sync schema");const n=i.let("valid");i.try(()=>{i.code(o._`await ${(0,s.callValidateCode)(e,t,p)}`),m(t),u||i.assign(n,!0)},e=>{i.if(o._`!(${e} instanceof ${l.ValidationError})`,()=>i.throw(e)),f(e),u||i.assign(n,!1)}),e.ok(n)}():e.result((0,s.callValidateCode)(e,t,p),()=>m(t),()=>f(t))}t.getValidate=u,t.callRef=d,t.default=l},9590:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;const r=n(1910),s=n(4678);t.getSubschema=function(e,{keyword:t,schemaProp:n,schema:o,schemaPath:a,errSchemaPath:i,topSchemaRef:c}){if(void 0!==t&&void 0!==o)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const o=e.schema[t];return void 0===n?{schema:o,schemaPath:r._`${e.schemaPath}${(0,r.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:o[n],schemaPath:r._`${e.schemaPath}${(0,r.getProperty)(t)}${(0,r.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,s.escapeFragment)(n)}`}}if(void 0!==o){if(void 0===a||void 0===i||void 0===c)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:a,topSchemaRef:c,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:n,dataPropType:o,data:a,dataTypes:i,propertyName:c}){if(void 0!==a&&void 0!==n)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:l}=t;if(void 0!==n){const{errorPath:a,dataPathArr:i,opts:c}=t;u(l.let("data",r._`${t.data}${(0,r.getProperty)(n)}`,!0)),e.errorPath=r.str`${a}${(0,s.getErrorPath)(n,o,c.jsPropertySyntax)}`,e.parentDataProperty=r._`${n}`,e.dataPathArr=[...i,e.parentDataProperty]}function u(n){e.data=n,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,n]}void 0!==a&&(u(a instanceof r.Name?a:l.let("data",a,!0)),void 0!==c&&(e.propertyName=c)),i&&(e.dataTypes=i)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:s,allErrors:o}){void 0!==r&&(e.compositeRule=r),void 0!==s&&(e.createErrors=s),void 0!==o&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=n}},9625:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3905),s=n(8562),o=n(1910),a=new o.Name("fullFormats"),i=new o.Name("fastFormats"),c=(e,t={keywords:!0})=>{if(Array.isArray(t))return l(e,t,r.fullFormats,a),e;const[n,o]="fast"===t.mode?[r.fastFormats,i]:[r.fullFormats,a];return l(e,t.formats||r.formatNames,n,o),t.keywords&&(0,s.default)(e),e};function l(e,t,n,r){var s,a;null!==(s=(a=e.opts.code).formats)&&void 0!==s||(a.formats=o._`require("ajv-formats/dist/formats").${r}`);for(const r of t)e.addFormat(r,n[r])}c.get=(e,t="full")=>{const n=("fast"===t?r.fastFormats:r.fullFormats)[e];if(!n)throw new Error(`Unknown format "${e}"`);return n},e.exports=t=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c},9698:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1910),s={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const n="maxItems"===e?"more":"fewer";return r.str`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>r._`{limit: ${e}}`},code(e){const{keyword:t,data:n,schemaCode:s}=e,o="maxItems"===t?r.operators.GT:r.operators.LT;e.fail$data(r._`${n}.length ${o} ${s}`)}};t.default=s},9700:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const r=n(1910),s=n(8635),o=n(2304),a=n(8668),i=n(4678),c=n(3419);class l{constructor(e){var t;let n;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,a.normalizeId)(null==n?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==n?void 0:n.$async,this.refs={}}}function u(e){const t=h.call(this,e);if(t)return t;const n=(0,a.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:i,lines:l}=this.opts.code,{ownProperties:u}=this.opts,d=new r.CodeGen(this.scope,{es5:i,lines:l,ownProperties:u});let p;e.$async&&(p=d.scopeValue("Error",{ref:s.default,code:r._`require("ajv/dist/runtime/validation_error").default`}));const f=d.scopeName("validate");e.validateName=f;const m={gen:d,allErrors:this.opts.allErrors,data:o.default.data,parentData:o.default.parentData,parentDataProperty:o.default.parentDataProperty,dataNames:[o.default.data],dataPathArr:[r.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:d.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,r.stringify)(e.schema)}:{ref:e.schema}),validateName:f,ValidationError:p,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:r.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:r._`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),(0,c.validateFunctionCode)(m),d.optimize(this.opts.code.optimize);const t=d.toString();g=`${d.scopeRefs(o.default.scope)}return ${t}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const n=new Function(`${o.default.self}`,`${o.default.scope}`,g)(this,this.scope.get());if(this.scope.value(f,{ref:n}),n.errors=null,n.schema=e.schema,n.schemaEnv=e,e.$async&&(n.$async=!0),!0===this.opts.code.source&&(n.source={validateName:f,validateCode:t,scopeValues:d._values}),this.opts.unevaluated){const{props:e,items:t}=m;n.evaluated={props:e instanceof r.Name?void 0:e,items:t instanceof r.Name?void 0:t,dynamicProps:e instanceof r.Name,dynamicItems:t instanceof r.Name},n.source&&(n.source.evaluated=(0,r.stringify)(n.evaluated))}return e.validate=n,e}catch(t){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),t}finally{this._compilations.delete(e)}}function d(e){return(0,a.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:u.call(this,e)}function h(e){for(const t of this._compilations)if(p(t,e))return t}function p(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function f(e,t){let n;for(;"string"==typeof(n=this.refs[t]);)t=n;return n||this.schemas[t]||m.call(this,e,t)}function m(e,t){const n=this.opts.uriResolver.parse(t),r=(0,a._getFullPath)(this.opts.uriResolver,n);let s=(0,a.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===s)return y.call(this,n,e);const o=(0,a.normalizeId)(r),i=this.refs[o]||this.schemas[o];if("string"==typeof i){const t=m.call(this,e,i);if("object"!=typeof(null==t?void 0:t.schema))return;return y.call(this,n,t)}if("object"==typeof(null==i?void 0:i.schema)){if(i.validate||u.call(this,i),o===(0,a.normalizeId)(t)){const{schema:t}=i,{schemaId:n}=this.opts,r=t[n];return r&&(s=(0,a.resolveUrl)(this.opts.uriResolver,s,r)),new l({schema:t,schemaId:n,root:e,baseId:s})}return y.call(this,n,i)}}t.SchemaEnv=l,t.compileSchema=u,t.resolveRef=function(e,t,n){var r;n=(0,a.resolveUrl)(this.opts.uriResolver,t,n);const s=e.refs[n];if(s)return s;let o=f.call(this,e,n);if(void 0===o){const s=null===(r=e.localRefs)||void 0===r?void 0:r[n],{schemaId:a}=this.opts;s&&(o=new l({schema:s,schemaId:a,root:e,baseId:t}))}return void 0!==o?e.refs[n]=d.call(this,o):void 0},t.getCompilingSchema=h,t.resolveSchema=m;const g=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(e,{baseId:t,schema:n,root:r}){var s;if("/"!==(null===(s=e.fragment)||void 0===s?void 0:s[0]))return;for(const r of e.fragment.slice(1).split("/")){if("boolean"==typeof n)return;const e=n[(0,i.unescapeFragment)(r)];if(void 0===e)return;const s="object"==typeof(n=e)&&n[this.opts.schemaId];!g.has(r)&&s&&(t=(0,a.resolveUrl)(this.opts.uriResolver,t,s))}let o;if("boolean"!=typeof n&&n.$ref&&!(0,i.schemaHasRulesButRef)(n,this.RULES)){const e=(0,a.resolveUrl)(this.opts.uriResolver,t,n.$ref);o=m.call(this,r,e)}const{schemaId:c}=this.opts;return o=o||new l({schema:n,schemaId:c,root:r,baseId:t}),o.schema!==o.root.schema?o:void 0}},9774:(e,t,n)=>{"use strict";n.d(t,{Gb:()=>U,$p:()=>V,Dq:()=>C,CQ:()=>R,sF:()=>q,CI:()=>A,Cn:()=>O,bl:()=>v,Zu:()=>w,t$:()=>he,b0:()=>ye,rv:()=>ie,P0:()=>J,Oy:()=>N,qG:()=>m,cG:()=>y,VO:()=>ne,Zc:()=>p,Lc:()=>T,Zy:()=>P,v1:()=>E,Ko:()=>x,$N:()=>S,Ax:()=>I,LJ:()=>Q,h8:()=>z,GY:()=>k,nu:()=>re,Py:()=>_,Um:()=>F,N$:()=>ue,x8:()=>L,qc:()=>ae,vz:()=>M,I:()=>D,L8:()=>W,ig:()=>oe,_m:()=>pe,VF:()=>le,Sb:()=>me,h:()=>te,$v:()=>d,EY:()=>h,Wc:()=>se,W4:()=>u,g5:()=>b,VY:()=>g,Zn:()=>f,cu:()=>G,GP:()=>Y,TF:()=>$});var r=n(668),s=n(5514);class o{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length)),r=t.map(e=>e.slice(n)).map(e=>" ".repeat(2*this.indent)+e);for(const e of r)this.content.push(e)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}var a=n(1658),i=n(318),c=n(9125);const l={major:4,minor:0,patch:0},u=s.xI("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=l;const r=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&r.unshift(e);for(const t of r)for(const n of t._zod.onattach)n(e);if(0===r.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,n)=>{let r,o=c.QH(e);for(const a of t){if(a._zod.def.when){if(!a._zod.def.when(e))continue}else if(o)continue;const t=e.issues.length,i=a._zod.check(e);if(i instanceof Promise&&!1===n?.async)throw new s.GT;if(r||i instanceof Promise)r=(r??Promise.resolve()).then(async()=>{await i,e.issues.length!==t&&(o||(o=c.QH(e,t)))});else{if(e.issues.length===t)continue;o||(o=c.QH(e,t))}}return r?r.then(()=>e):e};e._zod.run=(n,o)=>{const a=e._zod.parse(n,o);if(a instanceof Promise){if(!1===o.async)throw new s.GT;return a.then(e=>t(e,r,o))}return t(a,r,o)}}e["~standard"]={validate:t=>{try{const n=(0,a.xL)(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return(0,a.bp)(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),d=s.xI("$ZodString",(e,t)=>{u.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??i.Yj(e._zod.bag),e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=String(n.value)}catch(r){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),h=s.xI("$ZodStringFormat",(e,t)=>{r.ql.init(e,t),d.init(e,t)}),p=s.xI("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=i.Os),h.init(e,t)}),f=s.xI("$ZodUUID",(e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=i.uR(e))}else t.pattern??(t.pattern=i.uR());h.init(e,t)}),m=s.xI("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=i.Rp),h.init(e,t)}),g=s.xI("$ZodURL",(e,t)=>{h.init(e,t),e._zod.check=n=>{try{const r=n.value,s=new URL(r),o=s.href;return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:i.OI.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),void(!r.endsWith("/")&&o.endsWith("/")?n.value=o.slice(0,-1):n.value=o)}catch(r){n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),y=s.xI("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=i.Zg()),h.init(e,t)}),_=s.xI("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=i.Ak),h.init(e,t)}),v=s.xI("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=i.gF),h.init(e,t)}),w=s.xI("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=i.Gl),h.init(e,t)}),b=s.xI("$ZodULID",(e,t)=>{t.pattern??(t.pattern=i.Z0),h.init(e,t)}),$=s.xI("$ZodXID",(e,t)=>{t.pattern??(t.pattern=i.kM),h.init(e,t)}),k=s.xI("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=i.fO),h.init(e,t)}),x=s.xI("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=i.w$(t)),h.init(e,t)}),E=s.xI("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=i.p6),h.init(e,t)}),I=s.xI("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=i.kB(t)),h.init(e,t)}),S=s.xI("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=i.p0),h.init(e,t)}),T=s.xI("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=i.uX),h.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),P=s.xI("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=i.ug),h.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),A=s.xI("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=i.zr),h.init(e,t)}),O=s.xI("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=i.l7),h.init(e,t),e._zod.check=n=>{const[r,s]=n.value.split("/");try{if(!s)throw new Error;const e=Number(s);if(`${e}`!==s)throw new Error;if(e<0||e>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function j(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const C=s.xI("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=i.K3),h.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{j(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}}),R=s.xI("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=i.r0),h.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{(function(e){if(!i.r0.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return j(t.padEnd(4*Math.ceil(t.length/4),"="))})(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),N=s.xI("$ZodE164",(e,t)=>{t.pattern??(t.pattern=i.hQ),h.init(e,t)}),z=s.xI("$ZodJWT",(e,t)=>{h.init(e,t),e._zod.check=n=>{(function(e,t=null){try{const n=e.split(".");if(3!==n.length)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&"JWT"!==s?.typ||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}})(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),M=s.xI("$ZodNumber",(e,t)=>{u.init(e,t),e._zod.pattern=e._zod.bag.pattern??i.ai,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Number(n.value)}catch(e){}const s=n.value;if("number"==typeof s&&!Number.isNaN(s)&&Number.isFinite(s))return n;const o="number"==typeof s?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...o?{received:o}:{}}),n}}),D=s.xI("$ZodNumber",(e,t)=>{r.KH.init(e,t),M.init(e,t)}),q=s.xI("$ZodBoolean",(e,t)=>{u.init(e,t),e._zod.pattern=i.zM,e._zod.parse=(n,r)=>{if(t.coerce)try{n.value=Boolean(n.value)}catch(e){}const s=n.value;return"boolean"==typeof s||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),n}}),L=s.xI("$ZodNull",(e,t)=>{u.init(e,t),e._zod.pattern=i.ch,e._zod.values=new Set([null]),e._zod.parse=(t,n)=>{const r=t.value;return null===r||t.issues.push({expected:"null",code:"invalid_type",input:r,inst:e}),t}}),U=s.xI("$ZodAny",(e,t)=>{u.init(e,t),e._zod.parse=e=>e}),Y=s.xI("$ZodUnknown",(e,t)=>{u.init(e,t),e._zod.parse=e=>e}),F=s.xI("$ZodNever",(e,t)=>{u.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function H(e,t,n){e.issues.length&&t.issues.push(...c.lQ(n,e.issues)),t.value[n]=e.value}const V=s.xI("$ZodArray",(e,t)=>{u.init(e,t),e._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),n;n.value=Array(s.length);const o=[];for(let e=0;e<s.length;e++){const a=s[e],i=t.element._zod.run({value:a,issues:[]},r);i instanceof Promise?o.push(i.then(t=>H(t,n,e))):H(i,n,e)}return o.length?Promise.all(o).then(()=>n):n}});function Z(e,t,n){e.issues.length&&t.issues.push(...c.lQ(n,e.issues)),t.value[n]=e.value}function B(e,t,n,r){e.issues.length?void 0===r[n]?t.value[n]=n in r?void 0:e.value:t.issues.push(...c.lQ(n,e.issues)):void 0===e.value?n in r&&(t.value[n]=void 0):t.value[n]=e.value}const W=s.xI("$ZodObject",(e,t)=>{u.init(e,t);const n=c.PO(()=>{const e=Object.keys(t.shape);for(const n of e)if(!(t.shape[n]instanceof u))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const n=c.NM(t.shape);return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}});let r;c.gJ(e._zod,"propValues",()=>{const e=t.shape,n={};for(const t in e){const r=e[t]._zod;if(r.values){n[t]??(n[t]=new Set);for(const e of r.values)n[t].add(e)}}return n});const a=c.Gv,i=!s.cr.jitless,l=c.hI,d=i&&l.value,h=t.catchall;let p;e._zod.parse=(s,l)=>{p??(p=n.value);const u=s.value;if(!a(u))return s.issues.push({expected:"object",code:"invalid_type",input:u,inst:e}),s;const f=[];if(i&&d&&!1===l?.async&&!0!==l.jitless)r||(r=(e=>{const t=new o(["shape","payload","ctx"]),r=n.value,s=e=>{const t=c.UQ(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const a=Object.create(null);let i=0;for(const e of r.keys)a[e]="key_"+i++;t.write("const newResult = {}");for(const e of r.keys)if(r.optionalKeys.has(e)){const n=a[e];t.write(`const ${n} = ${s(e)};`);const r=c.UQ(e);t.write(`\n        if (${n}.issues.length) {\n          if (input[${r}] === undefined) {\n            if (${r} in input) {\n              newResult[${r}] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ${n}.issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [${r}, ...iss.path] : [${r}],\n              }))\n            );\n          }\n        } else if (${n}.value === undefined) {\n          if (${r} in input) newResult[${r}] = undefined;\n        } else {\n          newResult[${r}] = ${n}.value;\n        }\n        `)}else{const n=a[e];t.write(`const ${n} = ${s(e)};`),t.write(`\n          if (${n}.issues.length) payload.issues = payload.issues.concat(${n}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${c.UQ(e)}, ...iss.path] : [${c.UQ(e)}]\n          })));`),t.write(`newResult[${c.UQ(e)}] = ${n}.value`)}t.write("payload.value = newResult;"),t.write("return payload;");const l=t.compile();return(t,n)=>l(e,t,n)})(t.shape)),s=r(s,l);else{s.value={};const e=p.shape;for(const t of p.keys){const n=e[t],r=n._zod.run({value:u[t],issues:[]},l),o="optional"===n._zod.optin&&"optional"===n._zod.optout;r instanceof Promise?f.push(r.then(e=>o?B(e,s,t,u):Z(e,s,t))):o?B(r,s,t,u):Z(r,s,t)}}if(!h)return f.length?Promise.all(f).then(()=>s):s;const m=[],g=p.keySet,y=h._zod,_=y.def.type;for(const e of Object.keys(u)){if(g.has(e))continue;if("never"===_){m.push(e);continue}const t=y.run({value:u[e],issues:[]},l);t instanceof Promise?f.push(t.then(t=>Z(t,s,e))):Z(t,s,e)}return m.length&&s.issues.push({code:"unrecognized_keys",keys:m,input:u,inst:e}),f.length?Promise.all(f).then(()=>s):s}});function K(e,t,n,r){for(const n of e)if(0===n.issues.length)return t.value=n.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>c.iR(e,r,s.$W())))}),t}const G=s.xI("$ZodUnion",(e,t)=>{u.init(e,t),c.gJ(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),c.gJ(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),c.gJ(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),c.gJ(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>c.p6(e.source)).join("|")})$`)}}),e._zod.parse=(n,r)=>{let s=!1;const o=[];for(const e of t.options){const t=e._zod.run({value:n.value,issues:[]},r);if(t instanceof Promise)o.push(t),s=!0;else{if(0===t.issues.length)return t;o.push(t)}}return s?Promise.all(o).then(t=>K(t,n,e,r)):K(o,n,e,r)}}),J=s.xI("$ZodDiscriminatedUnion",(e,t)=>{G.init(e,t);const n=e._zod.parse;c.gJ(e._zod,"propValues",()=>{const e={};for(const n of t.options){const r=n._zod.propValues;if(!r||0===Object.keys(r).length)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(const[t,n]of Object.entries(r)){e[t]||(e[t]=new Set);for(const r of n)e[t].add(r)}}return e});const r=c.PO(()=>{const e=t.options,n=new Map;for(const r of e){const e=r._zod.propValues[t.discriminator];if(!e||0===e.size)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(const t of e){if(n.has(t))throw new Error(`Duplicate discriminator value "${String(t)}"`);n.set(t,r)}}return n});e._zod.parse=(s,o)=>{const a=s.value;if(!c.Gv(a))return s.issues.push({code:"invalid_type",expected:"object",input:a,inst:e}),s;const i=r.value.get(a?.[t.discriminator]);return i?i._zod.run(s,o):t.unionFallback?n(s,o):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:a,path:[t.discriminator],inst:e}),s)}}),Q=s.xI("$ZodIntersection",(e,t)=>{u.init(e,t),e._zod.parse=(e,n)=>{const r=e.value,s=t.left._zod.run({value:r,issues:[]},n),o=t.right._zod.run({value:r,issues:[]},n);return s instanceof Promise||o instanceof Promise?Promise.all([s,o]).then(([t,n])=>ee(e,t,n)):ee(e,s,o)}});function X(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(c.Qd(e)&&c.Qd(t)){const n=Object.keys(t),r=Object.keys(e).filter(e=>-1!==n.indexOf(e)),s={...e,...t};for(const n of r){const r=X(e[n],t[n]);if(!r.valid)return{valid:!1,mergeErrorPath:[n,...r.mergeErrorPath]};s[n]=r.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<e.length;r++){const s=X(e[r],t[r]);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function ee(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),c.QH(e))return e;const r=X(t.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return e.value=r.data,e}const te=s.xI("$ZodRecord",(e,t)=>{u.init(e,t),e._zod.parse=(n,r)=>{const o=n.value;if(!c.Qd(o))return n.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),n;const a=[];if(t.keyType._zod.values){const s=t.keyType._zod.values;n.value={};for(const e of s)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){const s=t.valueType._zod.run({value:o[e],issues:[]},r);s instanceof Promise?a.push(s.then(t=>{t.issues.length&&n.issues.push(...c.lQ(e,t.issues)),n.value[e]=t.value})):(s.issues.length&&n.issues.push(...c.lQ(e,s.issues)),n.value[e]=s.value)}let i;for(const e in o)s.has(e)||(i=i??[],i.push(e));i&&i.length>0&&n.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:i})}else{n.value={};for(const i of Reflect.ownKeys(o)){if("__proto__"===i)continue;const l=t.keyType._zod.run({value:i,issues:[]},r);if(l instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(l.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:l.issues.map(e=>c.iR(e,r,s.$W())),input:i,path:[i],inst:e}),n.value[l.value]=l.value;continue}const u=t.valueType._zod.run({value:o[i],issues:[]},r);u instanceof Promise?a.push(u.then(e=>{e.issues.length&&n.issues.push(...c.lQ(i,e.issues)),n.value[l.value]=e.value})):(u.issues.length&&n.issues.push(...c.lQ(i,u.issues)),n.value[l.value]=u.value)}}return a.length?Promise.all(a).then(()=>n):n}}),ne=s.xI("$ZodEnum",(e,t)=>{u.init(e,t);const n=c.w5(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(e=>c.qQ.has(typeof e)).map(e=>"string"==typeof e?c.$f(e):e.toString()).join("|")})$`),e._zod.parse=(t,r)=>{const s=t.value;return e._zod.values.has(s)||t.issues.push({code:"invalid_value",values:n,input:s,inst:e}),t}}),re=s.xI("$ZodLiteral",(e,t)=>{u.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(e=>"string"==typeof e?c.$f(e):e?e.toString():String(e)).join("|")})$`),e._zod.parse=(n,r)=>{const s=n.value;return e._zod.values.has(s)||n.issues.push({code:"invalid_value",values:t.values,input:s,inst:e}),n}}),se=s.xI("$ZodTransform",(e,t)=>{u.init(e,t),e._zod.parse=(e,n)=>{const r=t.transform(e.value,e);if(n.async)return(r instanceof Promise?r:Promise.resolve(r)).then(t=>(e.value=t,e));if(r instanceof Promise)throw new s.GT;return e.value=r,e}}),oe=s.xI("$ZodOptional",(e,t)=>{u.init(e,t),e._zod.optin="optional",e._zod.optout="optional",c.gJ(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),c.gJ(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${c.p6(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>"optional"===t.innerType._zod.optin?t.innerType._zod.run(e,n):void 0===e.value?e:t.innerType._zod.run(e,n)}),ae=s.xI("$ZodNullable",(e,t)=>{u.init(e,t),c.gJ(e._zod,"optin",()=>t.innerType._zod.optin),c.gJ(e._zod,"optout",()=>t.innerType._zod.optout),c.gJ(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${c.p6(e.source)}|null)$`):void 0}),c.gJ(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>null===e.value?e:t.innerType._zod.run(e,n)}),ie=s.xI("$ZodDefault",(e,t)=>{u.init(e,t),e._zod.optin="optional",c.gJ(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if(void 0===e.value)return e.value=t.defaultValue,e;const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(e=>ce(e,t)):ce(r,t)}});function ce(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const le=s.xI("$ZodPrefault",(e,t)=>{u.init(e,t),e._zod.optin="optional",c.gJ(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),ue=s.xI("$ZodNonOptional",(e,t)=>{u.init(e,t),c.gJ(e._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(n,r)=>{const s=t.innerType._zod.run(n,r);return s instanceof Promise?s.then(t=>de(t,e)):de(s,e)}});function de(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const he=s.xI("$ZodCatch",(e,t)=>{u.init(e,t),e._zod.optin="optional",c.gJ(e._zod,"optout",()=>t.innerType._zod.optout),c.gJ(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(r=>(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>c.iR(e,n,s.$W()))},input:e.value}),e.issues=[]),e)):(e.value=r.value,r.issues.length&&(e.value=t.catchValue({...e,error:{issues:r.issues.map(e=>c.iR(e,n,s.$W()))},input:e.value}),e.issues=[]),e)}}),pe=s.xI("$ZodPipe",(e,t)=>{u.init(e,t),c.gJ(e._zod,"values",()=>t.in._zod.values),c.gJ(e._zod,"optin",()=>t.in._zod.optin),c.gJ(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(e,n)=>{const r=t.in._zod.run(e,n);return r instanceof Promise?r.then(e=>fe(e,t,n)):fe(r,t,n)}});function fe(e,t,n){return c.QH(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const me=s.xI("$ZodReadonly",(e,t)=>{u.init(e,t),c.gJ(e._zod,"propValues",()=>t.innerType._zod.propValues),c.gJ(e._zod,"values",()=>t.innerType._zod.values),c.gJ(e._zod,"optin",()=>t.innerType._zod.optin),c.gJ(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,n)=>{const r=t.innerType._zod.run(e,n);return r instanceof Promise?r.then(ge):ge(r)}});function ge(e){return e.value=Object.freeze(e.value),e}const ye=s.xI("$ZodCustom",(e,t)=>{r.QP.init(e,t),u.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{const r=n.value,s=t.fn(r);if(s instanceof Promise)return s.then(t=>_e(t,n,r,e));_e(s,n,r,e)}});function _e(e,t,n,r){if(!e){const e={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(e.params=r._zod.def.params),t.issues.push(c.sn(e))}}},9816:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3419),s=n(3758),o=n(4678),a=n(1637),i={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:i,data:c,it:l}=e;"all"===l.opts.removeAdditional&&void 0===i.additionalProperties&&a.default.code(new r.KeywordCxt(l,a.default,"additionalProperties"));const u=(0,s.allSchemaProperties)(n);for(const e of u)l.definedProperties.add(e);l.opts.unevaluated&&u.length&&!0!==l.props&&(l.props=o.mergeEvaluated.props(t,(0,o.toHash)(u),l.props));const d=u.filter(e=>!(0,o.alwaysValidSchema)(l,n[e]));if(0===d.length)return;const h=t.name("valid");for(const n of d)p(n)?f(n):(t.if((0,s.propertyInData)(t,c,n,l.opts.ownProperties)),f(n),l.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(n),e.ok(h);function p(e){return l.opts.useDefaults&&!l.compositeRule&&void 0!==n[e].default}function f(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},h)}}};t.default=i},9947:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=(0,n(1798).A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])}}]);